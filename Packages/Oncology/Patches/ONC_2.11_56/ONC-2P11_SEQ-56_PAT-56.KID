Released ONC*2.11*56 SEQ #56
Extracted from mail message
**KIDS**:ONC*2.11*56^

**INSTALL NAME**
ONC*2.11*56
"BLD",8344,0)
ONC*2.11*56^ONCOLOGY^0^3120913^y
"BLD",8344,4,0)
^9.64PA^160^2
"BLD",8344,4,160,0)
160
"BLD",8344,4,160,2,0)
^9.641^160^1
"BLD",8344,4,160,2,160,0)
ONCOLOGY PATIENT  (File-top level)
"BLD",8344,4,160,2,160,1,0)
^9.6411^19^11
"BLD",8344,4,160,2,160,1,19,0)
CAUSE OF DEATH
"BLD",8344,4,160,2,160,1,25,0)
COMORBIDITY/COMPLICATION #1
"BLD",8344,4,160,2,160,1,25.1,0)
COMORBIDITY/COMPLICATION #2
"BLD",8344,4,160,2,160,1,25.2,0)
COMORBIDITY/COMPLICATION #3
"BLD",8344,4,160,2,160,1,25.3,0)
COMORBIDITY/COMPLICATION #4
"BLD",8344,4,160,2,160,1,25.4,0)
COMORBIDITY/COMPLICATION #5
"BLD",8344,4,160,2,160,1,25.5,0)
COMORBIDITY/COMPLICATION #6
"BLD",8344,4,160,2,160,1,25.6,0)
COMORBIDITY/COMPLICATION #7
"BLD",8344,4,160,2,160,1,25.7,0)
COMORBIDITY/COMPLICATION #8
"BLD",8344,4,160,2,160,1,25.8,0)
COMORBIDITY/COMPLICATION #9
"BLD",8344,4,160,2,160,1,25.9,0)
COMORBIDITY/COMPLICATION #10
"BLD",8344,4,160,222)
y^y^p^^^^n^^n
"BLD",8344,4,160,224)

"BLD",8344,4,165.5,0)
165.5
"BLD",8344,4,165.5,2,0)
^9.641^165.5^1
"BLD",8344,4,165.5,2,165.5,0)
ONCOLOGY PRIMARY  (File-top level)
"BLD",8344,4,165.5,2,165.5,1,0)
^9.6411^276^28
"BLD",8344,4,165.5,2,165.5,1,237.1,0)
FEE BASIS LOCATION
"BLD",8344,4,165.5,2,165.5,1,258,0)
INTENT OF CHEMOTHERAPY
"BLD",8344,4,165.5,2,165.5,1,267,0)
EGFR MUTATION TESTING
"BLD",8344,4,165.5,2,165.5,1,272,0)
DATE CHEMOTHERAPY RECOMMENDED
"BLD",8344,4,165.5,2,165.5,1,276,0)
ANDROGEN DEPRIVATION THERAPY
"BLD",8344,4,165.5,2,165.5,1,277,0)
DATE ADT INITIATED
"BLD",8344,4,165.5,2,165.5,1,1400,0)
LNG CO-MORBID CONDITION 1
"BLD",8344,4,165.5,2,165.5,1,1400.1,0)
LNG CO-MORBID CONDITION 2
"BLD",8344,4,165.5,2,165.5,1,1400.2,0)
LNG CO-MORBID CONDITION 3
"BLD",8344,4,165.5,2,165.5,1,1400.3,0)
LNG CO-MORBID CONDITION 4
"BLD",8344,4,165.5,2,165.5,1,1400.4,0)
LNG CO-MORBID CONDITION 5
"BLD",8344,4,165.5,2,165.5,1,1400.5,0)
LNG CO-MORBID CONDITION 6
"BLD",8344,4,165.5,2,165.5,1,1426,0)
LNG COMPLICATION #1
"BLD",8344,4,165.5,2,165.5,1,1426.1,0)
LNG COMPLICATION #2
"BLD",8344,4,165.5,2,165.5,1,1426.2,0)
LNG COMPLICATION #3
"BLD",8344,4,165.5,2,165.5,1,1426.3,0)
LNG COMPLICATION #4
"BLD",8344,4,165.5,2,165.5,1,1426.4,0)
LNG COMPLICATION #5
"BLD",8344,4,165.5,2,165.5,1,1571,0)
GAS CO-MORBID CONDITION 1
"BLD",8344,4,165.5,2,165.5,1,1571.1,0)
GAS CO-MORBID CONDITION 2
"BLD",8344,4,165.5,2,165.5,1,1571.2,0)
GAS CO-MORBID CONDITION 3
"BLD",8344,4,165.5,2,165.5,1,1571.3,0)
GAS CO-MORBID CONDITION 4
"BLD",8344,4,165.5,2,165.5,1,1571.4,0)
GAS CO-MORBID CONDITION 5
"BLD",8344,4,165.5,2,165.5,1,1571.5,0)
GAS CO-MORBID CONDITION 6
"BLD",8344,4,165.5,2,165.5,1,1579,0)
GAS COMPLICATION #1
"BLD",8344,4,165.5,2,165.5,1,1579.1,0)
GAS COMPLICATION #2
"BLD",8344,4,165.5,2,165.5,1,1579.2,0)
GAS COMPLICATION #3
"BLD",8344,4,165.5,2,165.5,1,1579.3,0)
GAS COMPLICATION #4
"BLD",8344,4,165.5,2,165.5,1,1579.4,0)
GAS COMPLICATION #5
"BLD",8344,4,165.5,222)
y^y^p^^^^n^^n
"BLD",8344,4,165.5,224)

"BLD",8344,4,"APDD",160,160)

"BLD",8344,4,"APDD",160,160,19)

"BLD",8344,4,"APDD",160,160,25)

"BLD",8344,4,"APDD",160,160,25.1)

"BLD",8344,4,"APDD",160,160,25.2)

"BLD",8344,4,"APDD",160,160,25.3)

"BLD",8344,4,"APDD",160,160,25.4)

"BLD",8344,4,"APDD",160,160,25.5)

"BLD",8344,4,"APDD",160,160,25.6)

"BLD",8344,4,"APDD",160,160,25.7)

"BLD",8344,4,"APDD",160,160,25.8)

"BLD",8344,4,"APDD",160,160,25.9)

"BLD",8344,4,"APDD",165.5,165.5)

"BLD",8344,4,"APDD",165.5,165.5,237.1)

"BLD",8344,4,"APDD",165.5,165.5,258)

"BLD",8344,4,"APDD",165.5,165.5,267)

"BLD",8344,4,"APDD",165.5,165.5,272)

"BLD",8344,4,"APDD",165.5,165.5,276)

"BLD",8344,4,"APDD",165.5,165.5,277)

"BLD",8344,4,"APDD",165.5,165.5,1400)

"BLD",8344,4,"APDD",165.5,165.5,1400.1)

"BLD",8344,4,"APDD",165.5,165.5,1400.2)

"BLD",8344,4,"APDD",165.5,165.5,1400.3)

"BLD",8344,4,"APDD",165.5,165.5,1400.4)

"BLD",8344,4,"APDD",165.5,165.5,1400.5)

"BLD",8344,4,"APDD",165.5,165.5,1426)

"BLD",8344,4,"APDD",165.5,165.5,1426.1)

"BLD",8344,4,"APDD",165.5,165.5,1426.2)

"BLD",8344,4,"APDD",165.5,165.5,1426.3)

"BLD",8344,4,"APDD",165.5,165.5,1426.4)

"BLD",8344,4,"APDD",165.5,165.5,1571)

"BLD",8344,4,"APDD",165.5,165.5,1571.1)

"BLD",8344,4,"APDD",165.5,165.5,1571.2)

"BLD",8344,4,"APDD",165.5,165.5,1571.3)

"BLD",8344,4,"APDD",165.5,165.5,1571.4)

"BLD",8344,4,"APDD",165.5,165.5,1571.5)

"BLD",8344,4,"APDD",165.5,165.5,1579)

"BLD",8344,4,"APDD",165.5,165.5,1579.1)

"BLD",8344,4,"APDD",165.5,165.5,1579.2)

"BLD",8344,4,"APDD",165.5,165.5,1579.3)

"BLD",8344,4,"APDD",165.5,165.5,1579.4)

"BLD",8344,4,"B",160,160)

"BLD",8344,4,"B",165.5,165.5)

"BLD",8344,6.3)
10
"BLD",8344,"INIT")
ONCPST56
"BLD",8344,"KRN",0)
^9.67PA^779.2^20
"BLD",8344,"KRN",.4,0)
.4
"BLD",8344,"KRN",.4,"NM",0)
^9.68A^3^3
"BLD",8344,"KRN",.4,"NM",1,0)
ONCO SUSPENSE-HDR    FILE #160^160^0
"BLD",8344,"KRN",.4,"NM",2,0)
ONCO XABSTRACT RECORD    FILE #165.5^165.5^0
"BLD",8344,"KRN",.4,"NM",3,0)
ONCOY58    FILE #165.5^165.5^0
"BLD",8344,"KRN",.4,"NM","B","ONCO SUSPENSE-HDR    FILE #160",1)

"BLD",8344,"KRN",.4,"NM","B","ONCO XABSTRACT RECORD    FILE #165.5",2)

"BLD",8344,"KRN",.4,"NM","B","ONCOY58    FILE #165.5",3)

"BLD",8344,"KRN",.401,0)
.401
"BLD",8344,"KRN",.402,0)
.402
"BLD",8344,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",8344,"KRN",.402,"NM",1,0)
ONCO ABSTRACT-I    FILE #165.5^165.5^0
"BLD",8344,"KRN",.402,"NM","B","ONCO ABSTRACT-I    FILE #165.5",1)

"BLD",8344,"KRN",.403,0)
.403
"BLD",8344,"KRN",.5,0)
.5
"BLD",8344,"KRN",.84,0)
.84
"BLD",8344,"KRN",3.6,0)
3.6
"BLD",8344,"KRN",3.8,0)
3.8
"BLD",8344,"KRN",9.2,0)
9.2
"BLD",8344,"KRN",9.8,0)
9.8
"BLD",8344,"KRN",9.8,"NM",0)
^9.68A^26^22
"BLD",8344,"KRN",9.8,"NM",2,0)
ONCACDU2^^0^B63466870
"BLD",8344,"KRN",9.8,"NM",3,0)
ONCATF^^0^B47209323
"BLD",8344,"KRN",9.8,"NM",4,0)
ONCFUNC^^0^B42640935
"BLD",8344,"KRN",9.8,"NM",5,0)
ONCOANC1^^0^B21219299
"BLD",8344,"KRN",9.8,"NM",6,0)
ONCOCFP^^0^B50437593
"BLD",8344,"KRN",9.8,"NM",7,0)
ONCODSP^^0^B50443707
"BLD",8344,"KRN",9.8,"NM",8,0)
ONCODSR^^0^B89512891
"BLD",8344,"KRN",9.8,"NM",9,0)
ONCOPRT^^0^B41204141
"BLD",8344,"KRN",9.8,"NM",13,0)
ONCOPCE^^0^B70189715
"BLD",8344,"KRN",9.8,"NM",14,0)
ONCOCFR^^0^B30967942
"BLD",8344,"KRN",9.8,"NM",15,0)
ONCACDU1^^0^B24968526
"BLD",8344,"KRN",9.8,"NM",16,0)
ONCCSOT^^0^B39113425
"BLD",8344,"KRN",9.8,"NM",17,0)
ONCODIS^^0^B786459
"BLD",8344,"KRN",9.8,"NM",18,0)
ONCOPRT1^^0^B57470448
"BLD",8344,"KRN",9.8,"NM",19,0)
ONCPCI^^0^B24563873
"BLD",8344,"KRN",9.8,"NM",20,0)
ONCOTNM^^0^B137993546
"BLD",8344,"KRN",9.8,"NM",21,0)
ONCPST56^^0^B53878693
"BLD",8344,"KRN",9.8,"NM",22,0)
ONCOTN^^0^B119940311
"BLD",8344,"KRN",9.8,"NM",23,0)
ONCSG1^^0^B152734191
"BLD",8344,"KRN",9.8,"NM",24,0)
ONCOCFL1^^0^B61829784
"BLD",8344,"KRN",9.8,"NM",25,0)
ONCSUBS^^0^B7009875
"BLD",8344,"KRN",9.8,"NM",26,0)
ONCOU55^^0^B28674677
"BLD",8344,"KRN",9.8,"NM","B","ONCACDU1",15)

"BLD",8344,"KRN",9.8,"NM","B","ONCACDU2",2)

"BLD",8344,"KRN",9.8,"NM","B","ONCATF",3)

"BLD",8344,"KRN",9.8,"NM","B","ONCCSOT",16)

"BLD",8344,"KRN",9.8,"NM","B","ONCFUNC",4)

"BLD",8344,"KRN",9.8,"NM","B","ONCOANC1",5)

"BLD",8344,"KRN",9.8,"NM","B","ONCOCFL1",24)

"BLD",8344,"KRN",9.8,"NM","B","ONCOCFP",6)

"BLD",8344,"KRN",9.8,"NM","B","ONCOCFR",14)

"BLD",8344,"KRN",9.8,"NM","B","ONCODIS",17)

"BLD",8344,"KRN",9.8,"NM","B","ONCODSP",7)

"BLD",8344,"KRN",9.8,"NM","B","ONCODSR",8)

"BLD",8344,"KRN",9.8,"NM","B","ONCOPCE",13)

"BLD",8344,"KRN",9.8,"NM","B","ONCOPRT",9)

"BLD",8344,"KRN",9.8,"NM","B","ONCOPRT1",18)

"BLD",8344,"KRN",9.8,"NM","B","ONCOTN",22)

"BLD",8344,"KRN",9.8,"NM","B","ONCOTNM",20)

"BLD",8344,"KRN",9.8,"NM","B","ONCOU55",26)

"BLD",8344,"KRN",9.8,"NM","B","ONCPCI",19)

"BLD",8344,"KRN",9.8,"NM","B","ONCPST56",21)

"BLD",8344,"KRN",9.8,"NM","B","ONCSG1",23)

"BLD",8344,"KRN",9.8,"NM","B","ONCSUBS",25)

"BLD",8344,"KRN",19,0)
19
"BLD",8344,"KRN",19,"NM",0)
^9.68A^^
"BLD",8344,"KRN",19.1,0)
19.1
"BLD",8344,"KRN",101,0)
101
"BLD",8344,"KRN",409.61,0)
409.61
"BLD",8344,"KRN",771,0)
771
"BLD",8344,"KRN",779.2,0)
779.2
"BLD",8344,"KRN",870,0)
870
"BLD",8344,"KRN",8989.51,0)
8989.51
"BLD",8344,"KRN",8989.52,0)
8989.52
"BLD",8344,"KRN",8994,0)
8994
"BLD",8344,"KRN","B",.4,.4)

"BLD",8344,"KRN","B",.401,.401)

"BLD",8344,"KRN","B",.402,.402)

"BLD",8344,"KRN","B",.403,.403)

"BLD",8344,"KRN","B",.5,.5)

"BLD",8344,"KRN","B",.84,.84)

"BLD",8344,"KRN","B",3.6,3.6)

"BLD",8344,"KRN","B",3.8,3.8)

"BLD",8344,"KRN","B",9.2,9.2)

"BLD",8344,"KRN","B",9.8,9.8)

"BLD",8344,"KRN","B",19,19)

"BLD",8344,"KRN","B",19.1,19.1)

"BLD",8344,"KRN","B",101,101)

"BLD",8344,"KRN","B",409.61,409.61)

"BLD",8344,"KRN","B",771,771)

"BLD",8344,"KRN","B",779.2,779.2)

"BLD",8344,"KRN","B",870,870)

"BLD",8344,"KRN","B",8989.51,8989.51)

"BLD",8344,"KRN","B",8989.52,8989.52)

"BLD",8344,"KRN","B",8994,8994)

"BLD",8344,"QUES",0)
^9.62^^
"BLD",8344,"REQB",0)
^9.611^1^1
"BLD",8344,"REQB",1,0)
ONC*2.11*54^1
"BLD",8344,"REQB","B","ONC*2.11*54",1)

"FIA",160)
ONCOLOGY PATIENT
"FIA",160,0)
^ONCO(160,
"FIA",160,0,0)
160V
"FIA",160,0,1)
y^y^p^^^^n^^n
"FIA",160,0,10)

"FIA",160,0,11)

"FIA",160,0,"RLRO")

"FIA",160,0,"VR")
2.11^ONC
"FIA",160,160)
1
"FIA",160,160,19)

"FIA",160,160,25)

"FIA",160,160,25.1)

"FIA",160,160,25.2)

"FIA",160,160,25.3)

"FIA",160,160,25.4)

"FIA",160,160,25.5)

"FIA",160,160,25.6)

"FIA",160,160,25.7)

"FIA",160,160,25.8)

"FIA",160,160,25.9)

"FIA",165.5)
ONCOLOGY PRIMARY
"FIA",165.5,0)
^ONCO(165.5,
"FIA",165.5,0,0)
165.5IsP
"FIA",165.5,0,1)
y^y^p^^^^n^^n
"FIA",165.5,0,10)

"FIA",165.5,0,11)

"FIA",165.5,0,"RLRO")

"FIA",165.5,0,"VR")
2.11^ONC
"FIA",165.5,165.5)
1
"FIA",165.5,165.5,237.1)

"FIA",165.5,165.5,258)

"FIA",165.5,165.5,267)

"FIA",165.5,165.5,272)

"FIA",165.5,165.5,276)

"FIA",165.5,165.5,277)

"FIA",165.5,165.5,1400)

"FIA",165.5,165.5,1400.1)

"FIA",165.5,165.5,1400.2)

"FIA",165.5,165.5,1400.3)

"FIA",165.5,165.5,1400.4)

"FIA",165.5,165.5,1400.5)

"FIA",165.5,165.5,1426)

"FIA",165.5,165.5,1426.1)

"FIA",165.5,165.5,1426.2)

"FIA",165.5,165.5,1426.3)

"FIA",165.5,165.5,1426.4)

"FIA",165.5,165.5,1571)

"FIA",165.5,165.5,1571.1)

"FIA",165.5,165.5,1571.2)

"FIA",165.5,165.5,1571.3)

"FIA",165.5,165.5,1571.4)

"FIA",165.5,165.5,1571.5)

"FIA",165.5,165.5,1579)

"FIA",165.5,165.5,1579.1)

"FIA",165.5,165.5,1579.2)

"FIA",165.5,165.5,1579.3)

"FIA",165.5,165.5,1579.4)

"INIT")
ONCPST56
"KRN",.4,1077,-1)
0^3
"KRN",.4,1077,0)
ONCOY58^3051215.0942^^165.5^^@^3120503
"KRN",.4,1077,"DXS",1,0)
Dead
"KRN",.4,1077,"DXS",1,1)
Alive
"KRN",.4,1077,"DXS",2,0)
Patient alive at last follow-up
"KRN",.4,1077,"DXS",2,8)
ICDA-8
"KRN",.4,1077,"DXS",2,9)
ICD-9
"KRN",.4,1077,"DXS",3,7777)
State death certificate or listing not availa
"KRN",.4,1077,"DXS",3,7797)
State death cert available, cause of death no
"KRN",.4,1077,"DXS",4,0)
Patient alive
"KRN",.4,1077,"DXS",4,1)
Autopsy performed
"KRN",.4,1077,"DXS",4,2)
No autopsy performed
"KRN",.4,1077,"DXS",4,9)
Patient expired, unknown if autopsy performed
"KRN",.4,1077,"F",1)
"* FOLLOW-UP *";S1~K FUQA;Z;"K FUQA"~150~
"KRN",.4,1077,"F",2)
-160,^ONCO(160,^^S I(0,0)=D0 S DIP(1)=$S($D(^ONCO(165.5,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;"PATIENT NAME:"~
"KRN",.4,1077,"F",3)
-160,"Status........................:";C3;S1~-160,15;C35~
"KRN",.4,1077,"F",4)
-160,I $P($G(^ONCO(160,D0,1)),U,1)=1 G A1R^ONCOY58;Z;"I $P($G(^ONCO(160,D0,1)),U,1)=1 G A1R^ONCOY58"~-160,"Cause of Death................:";C3~-160,19;C35~
"KRN",.4,1077,"F",5)
-160,"ICD Revision..................:";C3~-160,20;C35~-160,"State Death Cert..............:";C3~-160,19.1;C35;L45~-160,"Autopsy.......................:";C3~
"KRN",.4,1077,"F",6)
-160,22.9;C35~
"KRN",.4,1077,"H")
@
"KRN",.4,1077,"IOM")
80
"KRN",.4,1077,"LAST")

"KRN",.4,1077,"ROU")
^ONCOY58
"KRN",.4,1077,"ROUOLD")
ONCOY58
"KRN",.4,1077,"SUB")
1
"KRN",.4,1087,-1)
0^2
"KRN",.4,1087,0)
ONCO XABSTRACT RECORD^3120619.1304^^165.5^^@^3120829
"KRN",.4,1087,"DXS",1,1)
Male
"KRN",.4,1087,"DXS",1,2)
Female
"KRN",.4,1087,"DXS",1,3)
Other (hermaphrodite)
"KRN",.4,1087,"DXS",1,4)
Transsexual
"KRN",.4,1087,"DXS",1,9)
Not stated
"KRN",.4,1087,"DXS",2,0)
Dead
"KRN",.4,1087,"DXS",2,1)
Alive
"KRN",.4,1087,"DXS",3,0)
Incomplete
"KRN",.4,1087,"DXS",3,1)
Minimal data
"KRN",.4,1087,"DXS",3,2)
Partial
"KRN",.4,1087,"DXS",3,3)
Complete
"KRN",.4,1087,"DXS",3,"A")
Accession only
"KRN",.4,1087,"F",1)
W @IOF;Z;"W @IOF"~.03;C3~
"KRN",.4,1087,"F",2)
S X="PATIENT SUMMARY",X=$J("",$S($D(DIWR)+$D(DIWL)=2:DIWR-DIWL+1,$D(IOM):IOM,1:80)-$L(X)\2-$X)_X W X K DIP;X;Z;"CENTER("PATIENT SUMMARY")"~
"KRN",.4,1087,"F",3)
N %I,%H,% D NOW^%DTC S Y=X D DT K DIP;C68;L11;d;Z;"TODAY"~W !,"";Z;"W !,"""~
"KRN",.4,1087,"F",4)
-160,^ONCO(160,^^S I(0,0)=D0 S DIP(1)=$S($D(^ONCO(165.5,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;"PATIENT NAME:"~-160,"Name: ";C3~-160,.01;X;C9~
"KRN",.4,1087,"F",5)
-160,"SSN: ";C40~-160,2;X;C47~-160,"Sex: ";C3~-160,10;X;C9~-160,"DOB: ";C40~-160,3;X;C47~-160,"Race: ";C3~-160,8;X;C9~-160,"Status: ";C40~-160,15;X;C48~
"KRN",.4,1087,"F",6)
-160,W !," ";Z;"W !," ""~-160,D DLC^ONCOCRF,DATEOT^ONCOES;Z;"D DLC^ONCOCRF,DATEOT^ONCOES"~-160,"Date of Last Contact or Death:";C3~-160,W X;C34;Z;"W X"~
"KRN",.4,1087,"F",7)
-160,"Autopsy Date/Time: ";C3~-160,23;X;C34~-160,"Autopsy #: ";C3~-160,24;X;C34~-160,"Cause of Death: ";C3~-160,19;X;C34~W !!," ";Z;"W !!," ""~
"KRN",.4,1087,"F",8)
"Abstract Status: ";C3~91;X~"Date Case Completed: ";C40~90;X~"Acc/Seq Number: ";C3~.061;X;C20;L13~"Date Dx: ";C3~3;X;C20;L10~"Site/Gp: ";C3~.01;X;C20~
"KRN",.4,1087,"F",9)
"Primary Site: ";C3~20;X;C20~"Histology: ";C3~22.3;X;C20~
"KRN",.4,1087,"H")
@
"KRN",.4,1087,"IOM")
80
"KRN",.4,1087,"LAST")

"KRN",.4,1087,"ROU")
^ONCOXU
"KRN",.4,1087,"ROUOLD")
ONCOXU
"KRN",.4,1140,-1)
0^1
"KRN",.4,1140,0)
ONCO SUSPENSE-HDR^3120502.0919^^160^^@^3120720
"KRN",.4,1140,"F",1)

"KRN",.4,1140,"F",2)
W !,"--------------------------------------------------------------------------------";Z;"W !,"--------------------------------------------------------------------------------""~
"KRN",.4,1140,"F",3)
"SUSPENSE LIST";C30~"Pid#";C1~"Name";C7;X~"Organ/Tiss";X;C14~"Lab Morphology";X;C26~"ICD";X;C48~S X="Suspense" W X K DIP;X;C56";Z;""Suspense""~
"KRN",.4,1140,"F",4)
"Discharge";X;C66~"Src";X;C76~
"KRN",.4,1140,"F",5)
W !,"--------------------------------------------------------------------------------";Z;"W !,"--------------------------------------------------------------------------------""~
"KRN",.4,1140,"H")
@
"KRN",.4,1140,"SUB")
1
"KRN",.402,1256,-1)
0^1
"KRN",.402,1256,0)
ONCO ABSTRACT-I^3120524.0931^^165.5^^^3120913
"KRN",.402,1256,"%D",0)
^.4021^2^2^3120216^^^^
"KRN",.402,1256,"%D",1,0)
Template for complete abstract for fields in Primary file: data relevant
"KRN",.402,1256,"%D",2,0)
to particular cancer only as opposed to specific to Patient.
"KRN",.402,1256,"DR",1,165.5)
@0;D MEN^ONCOAIP;.01;.05;.06;.07;S Y="@0";@1;D PAT^ONCOAIP;.03//^S X=$P($G(^ONCO(160.19,IIN,0)),U,2);S FACPNT=$P($G(^ONCO(165.5,DA,0)),U,3) D FNPI^ONCNPI;11;8;8.2;9;8.1;16;10;147//^S X="000000";
"KRN",.402,1256,"DR",1,165.5,1)
I $P($G(^ONCO(165.5,DA,0)),U,16)'="",$P($G(^ONCO(165.5,DA,0)),U,16)<3070000 S Y=2.1;2.2;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,13) D PNPI^ONCNPI;2.1;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,12) D PNPI^ONCNPI;2;
"KRN",.402,1256,"DR",1,165.5,2)
S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,11) D PNPI^ONCNPI;2.3;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,14) D PNPI^ONCNPI;2.4;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,15) D PNPI^ONCNPI;18;1.2;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";
"KRN",.402,1256,"DR",1,165.5,3)
D PHCDSP^ONCPHC;148//^S X=PHCDEF;I X=1 S Y="@11";148.1////@;148.2////@;148.3////@;148.4////@;S Y="@12";@11;W !;148.1//^S X=PHCDEF(1);148.2//^S X=PHCDEF(2);148.3//^S X=PHCDEF(3);148.4//^S X=PHCDEF(4);@12;
"KRN",.402,1256,"DR",1,165.5,4)
W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";S Y=$S(ONCOANS="A":"@2",1:"@0");@2;D CAN^ONCOAIP;.04;S COC=$E($$GET1^DIQ(165.5,DA,.04,"E"),1,2);
"KRN",.402,1256,"DR",1,165.5,5)
I (+COC<10)!(+COC>14) S $P(^ONCO(165.5,DA,2.2),U,4)="",$P(^ONCO(165.5,DA,2.2),U,5)="",$P(^ONCO(165.5,DA,2.2),U,6)="",Y="@20";171;172;173;@20;I COC="00" S RFDEF="NONE" S Y=6;
"KRN",.402,1256,"DR",1,165.5,6)
I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14) S RFDEF="NONE",TFDEF="NONE";6//^S X=$G(RFDEF);K RFDEF;S FACPNT=$P($G(^ONCO(165.5,DA,0)),U,18) D FNPI^ONCNPI;I (COC=20)!(COC=21)!(COC=22) S TFDEF="NONE";7//^S X=$G(TFDEF);K TFDEF;
"KRN",.402,1256,"DR",1,165.5,7)
S FACPNT=$P($G(^ONCO(165.5,DA,0)),U,19) D FNPI^ONCNPI;237;S FEEB=$$GET1^DIQ(165.5,DA,237,"I");I FEEB'=1 S Y="@155";237.1;@155;155;3;I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@14";233;@14;
"KRN",.402,1256,"DR",1,165.5,8)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3070000 S Y="@15";159;I X=0 S $P(^ONCO(165.5,DA,24),U,13)="8888888" W !,"DATE OF CONCLUSIVE DX: 88/88/8888" S Y="@15";
"KRN",.402,1256,"DR",1,165.5,9)
I X=1 S $P(^ONCO(165.5,DA,24),U,13)="0000000" W !,"DATE OF CONCLUSIVE DX: 00/00/0000" S Y="@15";I X=9 S $P(^ONCO(165.5,DA,24),U,13)="9999999" W !,"DATE OF CONCLUSIVE DX: 99/99/9999" S Y="@15";193;@15;
"KRN",.402,1256,"DR",1,165.5,10)
I (COC="00")!(COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14) S DFDEF=$E(RH,1,30);5//^S X=$G(DFDEF);K DFDEF;238;20;S PS=X;D PAIR^ONCOAIP;S Y=$$TOP^ONCOAIT;21.5;S Y=100;21.51;S Y=100;21.52;100;28;
"KRN",.402,1256,"DR",1,165.5,11)
I $P($G(^ONCO(165.5,DA,0)),U,16)>3001231 S Y=22.3;22;D DEFH3^ONCOHICD;22.3//^S X=$G(H3DEF);K H3DEF;W !,"HISTOLOGY CODE: ",$$GET1^DIQ(165.5,D0,22.1);D HISTXT^ONCOAIP;S X=X;101;D ^ONCSUBS;240;@623;I $G(TOP)'=67619 S Y=24;623;250;684;
"KRN",.402,1256,"DR",1,165.5,12)
96;102;I X=9 S Y="@156";156;S Y=24;@156;156////0000000;W !,"DRE DATE: 00/00/0000";28;24;I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@157";24.1;24.2;S:($E($$HIST^ONCFUNC(D0),1,4)'=8935)&($E($$HIST^ONCFUNC(D0),1,4)'=8936) Y="@157";
"KRN",.402,1256,"DR",1,165.5,13)
239;@157;I $P($G(^ONCO(165.5,DA,0)),U,16)<3070000 S Y=83;I ($P($G(^ONCO(165.5,D0,2)),U,1)=67809)!($$LEUKEMIA^ONCOAIP2(D0))!($$LYMPHOMA^ONCFUNC(D0)) D NA^ONCMPH;194;D MTRAOP^ONCMPH;195;196;83;26;
"KRN",.402,1256,"DR",1,165.5,14)
I ($$GET1^DIQ(165.5,D0,.01,"E")'="LIVER")&($G(TOP)'=67220) S Y="@251";1010;@251;I $P($G(^ONCO(165.5,DA,0)),U,16)>3021231 S Y="@27";D TMARKER^ONCOU55 I TM1=0 S Y="@21";D TM^ONCOTM(D0,1);@2510;I $G(TM2)=0 S Y="@22";D TM^ONCOTM(D0,2);
"KRN",.402,1256,"DR",1,165.5,15)
@2520;I $G(TM3)=0 S Y="@23";D TM^ONCOTM(D0,3);@2530;S Y="@27";@21;25.1///9;W !,"TUMOR MARKER 1: Unknown or no information";@22;25.2///9;W !,"TUMOR MARKER 2: Unknown or no information";@23;25.3///9;
"KRN",.402,1256,"DR",1,165.5,16)
W !,"TUMOR MARKER 3: Unknown or no information";S Y="@27";25.1;25.2;25.3;@27;120;I X=0 S Y="@1210";I X=9 S Y="@1219";121;S Y="@28";@1210;121////0000000;W !,"DATE OF CANCER CONF: 00/00/0000";S Y="@28";@1219;121////9999999;
"KRN",.402,1256,"DR",1,165.5,17)
W !,"DATE OF CANCER CONF: 99/99/9999";@28;21;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";I (+COC<10)!(+COC>14) S Y="@105";S PS=$P($G(^ONCO(165.5,D0,2)),U,1);I $E($G(PS),3,4)=34 S Y="@174";
"KRN",.402,1256,"DR",1,165.5,18)
I ($E($G(PS),3,4)=18)!($G(PS)=67199)!($G(PS)=67209) S Y="@180";S Y="@105";@174;D ^ONCSYMP;174;I (X=0)!(X=9) S PIECE=18 D STUFF^ONCSYMP S Y=186;174.1;186;I (X=0)!(X=9) S PIECE=33 D STUFF^ONCSYMP S Y=187;186.1;187;
"KRN",.402,1256,"DR",1,165.5,19)
I (X=0)!(X=9) S PIECE=35 D STUFF^ONCSYMP S Y=188;187.1;188;I (X=0)!(X=9) S PIECE=37 D STUFF^ONCSYMP S Y=189;188.1;189;I (X=0)!(X=9) S PIECE=39 D STUFF^ONCSYMP S Y=190;189.1;190;175;I (X=0)!(X=9) S PIECE=19 D STUFF^ONCSYMP S Y=176;
"KRN",.402,1256,"DR",1,165.5,20)
175.1;176;I (X=0)!(X=9) S PIECE=20 D STUFF^ONCSYMP S Y=177;176.1;177;I (X=0)!(X=9) S PIECE=21 D STUFF^ONCSYMP S Y=178;177.1;178;I (X=0)!(X=9) S PIECE=22 D STUFF^ONCSYMP S Y=179;178.1;179;
"KRN",.402,1256,"DR",1,165.5,21)
I (X=0)!(X=9) S PIECE=23 D STUFF^ONCSYMP S Y="@105";179.1;S Y="@105";@180;D COLON^ONCSYMP;191;711;712;809;713;192;180;I (X=0)!(X=9) S PIECE=24 D STUFF^ONCSYMP S Y=181;180.1;181;I (X=0)!(X=9) S PIECE=25 D STUFF^ONCSYMP S Y=182;
"KRN",.402,1256,"DR",1,165.5,22)
181.1;182;I (X=0)!(X=9) S PIECE=27 D STUFF^ONCSYMP S Y=183;182.1;183;I (X=0)!(X=9) S PIECE=28 D STUFF^ONCSYMP S Y=185;183.1;185;I (X=0)!(X=9) S PIECE=30 D STUFF^ONCSYMP S Y=184;185.1;184;
"KRN",.402,1256,"DR",1,165.5,23)
I (X=0)!(X=9) S PIECE=31 D STUFF^ONCSYMP S Y=179;184.1;179;I (X=0)!(X=9) S PIECE=23 D STUFF^ONCSYMP S Y="@105";179.1;@105;S SECTION="Cancer Identification" D SECTION^ONCOAIP;W !;104;S FLDNUM=104,NODE=10,LIMIT=1000 D ^ONCTEXT;W !;
"KRN",.402,1256,"DR",1,165.5,24)
105;S FLDNUM=105,NODE=11,LIMIT=1000 D ^ONCTEXT;W !;106;S FLDNUM=106,NODE=12,LIMIT=1000 D ^ONCTEXT;W !;116;S FLDNUM=116,NODE=22,LIMIT=1000 D ^ONCTEXT;W !;103;S FLDNUM=103,NODE=9,LIMIT=1000 D ^ONCTEXT;W !;107;
"KRN",.402,1256,"DR",1,165.5,25)
S FLDNUM=107,NODE=13,LIMIT=1000 D ^ONCTEXT;W !;S Y=$S(ONCOANS="A":"@3",1:"@0");@3;D EXT^ONCOAIP;@31;D MO^ONCOAIP2;41;I $G(AWHFLG)=0 S Y=30 K AWHFLG;227;29;I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y=30;29.2;30;
"KRN",.402,1256,"DR",1,165.5,26)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y="@305";30.2;29.1;@305;D PGPE^ONCOAIP2;30.1;I X=99,$P($G(^ONCO(165.5,D0,0)),U,16)>3031231 S $P(^ONCO(165.5,D0,"CS"),U,7)=970 F SSF=3,4,5 S $P(^ONCO(165.5,D0,"CS2"),U,SSF)=998;@231;
"KRN",.402,1256,"DR",1,165.5,27)
D LN^ONCOAIP2;31;S L=X;I $$LYMPHOMA^ONCFUNC(D0) S $P(^ONCO(165.5,D0,2),U,12,13)="99^99";S X=X;I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y=33;31.1;32.1;33;I X=0 S Y="@24";I X=99 S Y="@25";32;S Y="@26";@24;32////98;
"KRN",.402,1256,"DR",1,165.5,28)
W !,"REGIONAL LYMPH NODES POSITIVE: No nodes were examined";S Y="@26";@25;32////99;W !,"REGIONAL LYMPH NODES POSITIVE: Unknown if nodes +, NA, not stated";@26;35;I (X'="")&(X'=7) S Y="@310";34;S:X=0 Y="@32";34.1;S:X=0 Y="@33";34.2;
"KRN",.402,1256,"DR",1,165.5,29)
S Y="@34";@310;34////0;W !,"SITE OF DISTANT METASTASIS #1: None";@32;34.1////0;W !,"SITE OF DISTANT METASTASIS #2: None";@33;34.2////0;W !,"SITE OF DISTANT METASTASIS #3: None";@34;
"KRN",.402,1256,"DR",1,165.5,30)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y="@341";34.3;I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,20)=0 W !,"METS AT DX-BONE:  None";I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,21)=0 W !,"METS AT DX-BRAIN: None";
"KRN",.402,1256,"DR",1,165.5,31)
I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,22)=0 W !,"METS AT DX-LIVER: None";I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,23)=0 W !,"METS AT DX-LUNG:  None" S Y=34.4;34.31;34.32;34.33;34.34;34.4;@341;D ^ONCOTN;@69;
"KRN",.402,1256,"DR",1,165.5,32)
I $P($G(^ONCO(165.5,DA,0)),U,16)>3069999 S Y="@300";69;@300;D BLOOD^ONCOAIP2;30.5;@301;W !;S:$E($$HIST^ONCFUNC(D0),1,3)'=951 Y=37.1;69.1;37.1;D CN2^ONCOTN;37.2;37.3;I '$$GTT^ONCOU55(D0) S Y="@38";134;@38;
"KRN",.402,1256,"DR",1,165.5,33)
I '$$T^ONCOU55(D0) S Y="@39";136;@39;S STGIND="C" D ES^ONCOTN;S X=X;19;280;280.1;280.2;W !;69.4;85;D CN4^ONCOTN;86;87;I '$$GTT^ONCOU55(D0) S Y="@311";135;@311;I '$$T^ONCOU55(D0) S Y="@312";136;@312;S STGIND="P" D ES^ONCOTN;S X=X;
"KRN",.402,1256,"DR",1,165.5,34)
89;W !;149;151;S Y="@313";@376;38;I '$$LYMPHOMA^ONCFUNC(D0) S Y="@19";241;@19;19;88;I '$$LYMPHOMA^ONCFUNC(D0) S Y="@89";242;@89;89;@313;39;W !;65;S:X="" Y="@82";66;@82;248;249;W !;25;S X=X;44;
"KRN",.402,1256,"DR",1,165.5,35)
W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y="@399";@292;D ^ONCCS2;D ^ONCPCS;29.2;30.2;29.1;31.1;32.1;33;I X=0 S Y="@241";I X=99 S Y="@252";32;S Y="@261";@241;32////98;
"KRN",.402,1256,"DR",1,165.5,36)
W !,"REGIONAL LYMPH NODES POSITIVE: No nodes were examined";S Y="@261";@252;32////99;W !,"REGIONAL LYMPH NODES POSITIVE: Unknown if nodes +, NA, not stated";@261;34.3;
"KRN",.402,1256,"DR",1,165.5,37)
I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,20)=0 W !,"METS AT DX-BONE:  None";I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,21)=0 W !,"METS AT DX-BRAIN: None";
"KRN",.402,1256,"DR",1,165.5,38)
I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,22)=0 W !,"METS AT DX-LIVER: None";I (X="00")!(X=98) S $P(^ONCO(165.5,DA,"CS1"),U,23)=0 W !,"METS AT DX-LUNG:  None" S Y="@344";34.31;34.32;34.33;34.34;@344;34.4;44.1;44.2;44.3;44.4;
"KRN",.402,1256,"DR",1,165.5,39)
44.5;44.6;44.7;44.8;44.9;44.101;44.11;44.12;44.13;44.14;44.15;44.16;44.17;44.18;44.19;44.201;44.21;44.22;44.23;44.24;44.25;I $P($G(^ONCO(165.5,DA,"CS3")),U,2)'=1 S Y="@398";247;@398;D ^ONCCS;D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";
"KRN",.402,1256,"DR",1,165.5,40)
@399;S Y=$S(ONCOANS="A":"@4",1:"@0");@4;D NCDS^ONCPTX;S X=X;58.1;D NCDS^ONCATF;I X="" S TXNUL=1,$P(^ONCO(165.5,D0,3),U,31)="",Y="@35";I (X=0)!(X="00") D NCDS^ONCNTX S TXNO=1 S Y="@35";
"KRN",.402,1256,"DR",1,165.5,41)
I (X=9)!(X="09") D NCDS^ONCUTX S TXUNK=1 S Y="@35";58.3;D NCDSDT^ONCATF;@35;D DSPNCDS^ONCATF;W !;58.4;I X="" S $P(^ONCO(165.5,D0,3.1),U,6)="",Y="@36";I (X=0)!(X="00") D NCDSATF^ONCNTX1 S Y="@36";
"KRN",.402,1256,"DR",1,165.5,42)
I (X=9)!(X="09") D NCDSATF^ONCUTX1 S Y="@36";58.5;@36;W !;I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@124";235;I (X=1)!(X=9) D DNTDEL^ONCOCC S Y="@41";@124;124;I (X="0000000")!(X=9999999) S Y="@41";I X="" D CHKTS^ONCODSR;
"KRN",.402,1256,"DR",1,165.5,43)
D NTX^ONCOAIP;@41;I $P($G(^ONCO(165.5,DA,0)),U,16)>3021231 S Y="@429";D ROADS^ONCPTX;58.2;D SPSR^ONCATF;I X="" S TXNUL=1,$P(^ONCO(165.5,D0,3),U,38)="",Y="@426";S X=X;S SPS=$P($G(^ONCO(165.5,D0,3)),U,38);
"KRN",.402,1256,"DR",1,165.5,44)
I SPS=("00")!(SPS=1) D SURR^ONCNTX S TXNO=1,Y="@426";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1);S SGRP=$P($G(^ONCO(164,TPX,0)),U,16);I $E(TPX,3,4)=77 S SGRP=67422;I $G(^ONCO(164,SGRP,"SPS",SPS,0))[99 D SURR^ONCUTX S TXUNK=1 S Y="@426";
"KRN",.402,1256,"DR",1,165.5,45)
D SATFDFR^ONCOCC;74;@426;D DSPSPSR^ONCATF;W !;50.2//^S X=$G(SPSDF);@427;W !;D CHKPRMR^ONCUTX1;138;D SCPR^ONCATF;S X=X;S SCOPE=$P($G(^ONCO(165.5,D0,3)),U,40);I SCOPE="" S $P(^ONCO(165.5,D0,3),U,42)="",TXNUL=1,Y="@1381";
"KRN",.402,1256,"DR",1,165.5,46)
I SCOPE=1 D NODER^ONCNTX S TXNO=1,Y="@1381";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@428";S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@428";
"KRN",.402,1256,"DR",1,165.5,47)
I $G(^ONCO(164,SGRP,"SC5",SCOPE,0))["Unknown" D NODER^ONCUTX S TXUNK=1,Y="@1381";140;D NUMND^ONCATF;@1381;D DSPSCPR^ONCATF;W !;D SCOPER^ONCOCC;138.1//^S X=$G(SCPDF);S X=X;S SCPATF=$P($G(^ONCO(165.5,D0,3.1)),U,9);
"KRN",.402,1256,"DR",1,165.5,48)
I SCPATF="" S $P(^ONCO(165.5,D0,3.1),U,11)="",Y="@139";I SCPATF=1 D NODATFR^ONCNTX1 S Y="@139";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@428";S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@428";
"KRN",.402,1256,"DR",1,165.5,49)
I $G(^ONCO(164,SGRP,"SC5",SCPATF,0))["Unknown" D NODATFR^ONCUTX1 S Y="@139";D NUMN^ONCOCC;140.1//^S X=$G(NUMDF);@139;W !;139;D SOSNR^ONCATF;S X=X;S SOSN=$P($G(^ONCO(165.5,D0,3)),U,41) I SOSN="" S TXNUL=1,Y="@1391";
"KRN",.402,1256,"DR",1,165.5,50)
I SOSN=1 D SOSNR^ONCNTX S TXNO=1,Y="@1391";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@428";S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@428";I $G(^ONCO(164,SGRP,"SO5",SOSN,0))["Unknown" S TXUNK=1;@1391;
"KRN",.402,1256,"DR",1,165.5,51)
D DSPSOSR^ONCATF;D SOSNR^ONCOCC;139.1//^S X=$G(SOSNDF);S X=X;@428;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";@429;D FORDS^ONCPTX;S X=X;58.6;D SPS^ONCATF;I X="" S TXNUL=1,$P(^ONCO(165.5,D0,3.1),U,29)="",Y="@42";S X=X;
"KRN",.402,1256,"DR",1,165.5,52)
S SPS=$P($G(^ONCO(165.5,D0,3.1)),U,29);I SPS="00"!(SPS=1) D SUR^ONCNTX,SA^ONCNTX,SM^ONCNTX,DSD^ONCNTX S TXNO=1,Y="@42";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1);S SGRP=$P($G(^ONCO(164,TPX,0)),U,16);
"KRN",.402,1256,"DR",1,165.5,53)
I $G(^ONCO(164,SGRP,"SPS",SPS,0))[99 D SUR^ONCUTX S TXUNK=1,Y="@42";50;D SPSDT^ONCATF;D SATFDEF^ONCOCC;59;@42;D DSPSPS^ONCATF;W !;58.7//^S X=$G(SPSDF);I X="" S $P(^ONCO(165.5,D0,3.1),U,8)="",Y="@43";S X=X;
"KRN",.402,1256,"DR",1,165.5,54)
S SPSATF=$P($G(^ONCO(165.5,D0,3.1)),U,30) I SPSATF="" S $P(^ONCO(165.5,D0,3.1),U,8)="",Y="@43";I SPSATF="00"!(SPSATF=1) D SURATF^ONCNTX1 S Y="@43";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@44";
"KRN",.402,1256,"DR",1,165.5,55)
S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@44";I $G(^ONCO(164,SGRP,"SPS",SPSATF,0))[99 D SURATF^ONCUTX1 S Y="@43";234;50.3//^S X=$G(SPSDTDF);I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@43";@43;W !;D RFNS^ONCATF1;58;
"KRN",.402,1256,"DR",1,165.5,56)
@431;W !;D CHKPRMF^ONCUTX1;138.4;D SCP^ONCATF;S X=X;S SCOPE=$P($G(^ONCO(165.5,D0,3.1)),U,31) I SCOPE="" S $P(^ONCO(165.5,D0,3.1),U,22)="",$P(^ONCO(165.5,D0,3),U,42)="",TXNUL=1,Y="@45";I SCOPE=0 D NODE^ONCNTX S TXNO=1,Y="@45";
"KRN",.402,1256,"DR",1,165.5,57)
I SCOPE=9 D NODE^ONCUTX S TXUNK=1,Y="@45";138.2;D SCPDT^ONCATF;@45;D DSPSCP^ONCATF;W !;D SCOPE^ONCOCC;138.5//^S X=$G(SCPDF);S X=X;
"KRN",.402,1256,"DR",1,165.5,58)
S SCPATF=$P($G(^ONCO(165.5,D0,3.1)),U,32) I SCPATF="" S $P(^ONCO(165.5,D0,3.1),U,23)="",$P(^ONCO(165.5,D0,3.1),U,11)="",Y="@46";I SCPATF=0 D NODEATF^ONCNTX1 S Y="@46";I SCPATF=9 D NODEATF^ONCUTX1 S Y="@46";138.3//^S X=$G(SCPDTDF);
"KRN",.402,1256,"DR",1,165.5,59)
@46;W !;139.4;D SOSN^ONCATF;S X=X;S SOSN=$P($G(^ONCO(165.5,D0,3.1)),U,33) I SOSN="" S $P(^ONCO(165.5,D0,3.1),U,24)="",TXNUL=1,Y="@47";I SOSN=0 D SOSN^ONCNTX S TXNO=1,Y="@47";I SOSN=9 D SOSN^ONCUTX S TXUNK=1,Y="@47";139.2;
"KRN",.402,1256,"DR",1,165.5,60)
D SOSNDT^ONCATF;@47;D DSPSOSN^ONCATF;W !;D SOSN^ONCOCC;139.5//^S X=$G(SOSNDF);S X=X;S SOSNATF=$P($G(^ONCO(165.5,D0,3.1)),U,34) I SOSNATF="" S $P(^ONCO(165.5,D0,3.1),U,25)="",Y="@48";I SOSNATF=0 D SOSNATF^ONCNTX1 S Y="@48";
"KRN",.402,1256,"DR",1,165.5,61)
I SOSNATF=9 D SOSNATF^ONCUTX1 S Y="@48";139.3//^S X=$G(SOSNDTDF);@48;W !;170;I $P($G(^ONCO(165.5,DA,0)),U,16)>3021231 S Y=435;D DEFAULT^ONCTXSM;23//^S X=$G(RRDF);435;14;W !;108;S FLDNUM=108,NODE=14,LIMIT=1000 D ^ONCTEXT;W !;@44;46;
"KRN",.402,1256,"DR",1,165.5,62)
I (X=1)!(X=9) S $P(^ONCO(165.5,DA,7),U,20)="" S Y="@441";47;@441;281;228;229;230;231;232;245;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";D RAD^ONCPTX;51.2;D RAD^ONCATF1;S R=$S(X&(X<7):1,1:0);
"KRN",.402,1256,"DR",1,165.5,63)
I X="" S $P(^ONCO(165.5,D0,3),U,4)="",TXNUL=1,Y="@49";I (X=0)!(X=7) D RAD1^ONCNTX,RAD2^ONCNTX S TXNO=1,Y="@49";I (X=8)!(X=9) D RAD^ONCUTX S TXUNK=1,Y="@49";51;D RADDT^ONCATF1;D RATFDEF^ONCOCC;126;125;363;
"KRN",.402,1256,"DR",1,165.5,64)
I X'="" S RTMCODE=$P($G(^ONCO(166.13,X,0)),U,1) I (RTMCODE>49)&(RTMCODE<63) S $P(^ONCO(165.5,DA,"THY1"),U,43)=88888 W !,"REGIONAL DOSE: cGy: NA, brachytherapy/radioisotopes administered" S Y=363.1;442;363.1;
"KRN",.402,1256,"DR",1,165.5,65)
I X'="" S RTMCODE=$P($G(^ONCO(166.13,X,0)),U,1) I (RTMCODE>49)&(RTMCODE<63) S $P(^ONCO(165.5,DA,"THY1"),U,44)=88888 W !,"BOOST DOSE: cGy: NA, brachytherapy/radioisotopes administered" S Y=56;443;56;361;@49;D DSPRAD^ONCATF1;W !;
"KRN",.402,1256,"DR",1,165.5,66)
51.4//^S X=$G(RADDF);I X="" S $P(^ONCO(165.5,D0,3.1),U,13)="",Y="@411";I (X=0)!(X=7) D RADATF^ONCNTX1 S Y="@411";I (X=8)!(X=9) D RADATF^ONCUTX1 S Y="@411";51.5//^S X=$G(RADDTDF);@411;D RS^ONCOAIP;S X=X;W !;51.3;D RFNR^ONCATF1;W !;
"KRN",.402,1256,"DR",1,165.5,67)
75;S RFNR=X D ^ONCRFNR W:$G(RFNRMSG)'="" !!,RFNRMSG;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";S RVAR=$P($G(^ONCO(165.5,D0,3)),U,6);I RVAR=""!(RVAR=0)!(RVAR=9) S Y="@413";@412;W !;109;S FLDNUM=109,NODE=15,LIMIT=1000 D ^ONCTEXT;@413;
"KRN",.402,1256,"DR",1,165.5,68)
D ST^ONCPTX;53.2;D CHEM^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,11)="",TXNUL=1,Y="@414";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D CHE^ONCNTX S TXNO=1,Y="@414";I (X=88)!(X=99) S XX=X D CHE^ONCUTX S TXUNK=1,Y="@414";53;
"KRN",.402,1256,"DR",1,165.5,69)
D CHEMDT^ONCATF1;D CATFDEF^ONCOCC;@414;D DSPCHEM^ONCATF1;W !;53.3//^S X=$G(CHEMDF);I X="" S $P(^ONCO(165.5,D0,3.1),U,15)="",Y="@415";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D CMATFDT^ONCNTX1 S Y="@415";
"KRN",.402,1256,"DR",1,165.5,70)
I (X=88)!(X=99) D CHEMATF^ONCUTX1 S Y="@415";53.4//^S X=$G(CHMDTDF);@415;S CVAR=$P($G(^ONCO(165.5,D0,3)),U,13);I (CVAR="")!(CVAR="00")!(CVAR=99)!(CVAR=82)!(CVAR=85)!(CVAR=86)!(X=87) S Y="@416";W !;1423;I X="" S Y="@4151";1423.1;
"KRN",.402,1256,"DR",1,165.5,71)
I X="" S Y="@4151";1423.2;I X="" S Y="@4151";1423.3;I X="" S Y="@4151";1423.4;@4151;W !;111;S FLDNUM=111,NODE=17,LIMIT=1000 D ^ONCTEXT;@416;W !;54.2;D HT^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,14)="",TXNUL=1,Y="@417";
"KRN",.402,1256,"DR",1,165.5,72)
I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D HOR^ONCNTX1 S TXNO=1,Y="@417";I (X=88)!(X=99) S XX=X D HOR^ONCUTX S TXUNK=1,Y="@417";54;D HTDT^ONCATF1;D HATFDEF^ONCOCC;@417;D DSPHT^ONCATF1;W !;54.3//^S X=$G(HTDF);
"KRN",.402,1256,"DR",1,165.5,73)
I X="" S $P(^ONCO(165.5,D0,3.1),U,17)="",Y="@418";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D HTATFDT^ONCNTX1 S Y="@418";I (X=88)!(X=99) D HTATF^ONCUTX1 S Y="@418";54.4//^S X=$G(HTDTDF);@418;W !;S HVAR=$P($G(^ONCO(165.5,D0,3)),U,16);
"KRN",.402,1256,"DR",1,165.5,74)
I (HVAR="")!(HVAR="00")!(HVAR=99)!(HVAR=82)!(HVAR=85)!(HVAR=86)!(X=87) S Y="@419";112;S FLDNUM=112,NODE=18,LIMIT=1000 D ^ONCTEXT;@419;W !;55.2;D IMM^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,17)="",TXNUL=1,Y="@420";
"KRN",.402,1256,"DR",1,165.5,75)
I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D IMM^ONCNTX1 S TXNO=1,Y="@420";I (X=88)!(X=99) S XX=X D IMM^ONCUTX S TXUNK=1,Y="@420";55;D IMMDT^ONCATF1;D IATFDEF^ONCOCC;@420;D DSPIMM^ONCATF1;W !;55.3//^S X=$G(IMMDF);
"KRN",.402,1256,"DR",1,165.5,76)
I X="" S $P(^ONCO(165.5,D0,3.1),U,19)="",Y="@421";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D IMATFDT^ONCNTX1 S Y="@421";I (X=88)!(X=99) D IMMATF^ONCUTX1 S Y="@421";55.4//^S X=$G(IMMDTDF);@421;W !;
"KRN",.402,1256,"DR",1,165.5,77)
S IVAR=$P($G(^ONCO(165.5,D0,3)),U,19);I (IVAR="")!(IVAR="00")!(IVAR=99)!(IVAR=82)!(IVAR=85)!(IVAR=86)!(X=87) S Y="@422";114;S FLDNUM=114,NODE=20,LIMIT=1000 D ^ONCTEXT;@422;W !;153;
"KRN",.402,1256,"DR",1,165.5,78)
I X="" S $P(^ONCO(165.5,D0,3.1),U,35)="",TXNUL=1,Y="@4201";S HE=$P(^ONCO(167,X,0),U,1);I (HE="00")!(HE=82)!(HE=85)!(HE=86)!(HE=87) D HTEP^ONCNTX1 S TXNO=1,Y="@4201";I (HE=88)!(HE=99) D HTEP^ONCUTX S TXUNK=1,Y="@4201";153.1;@4201;
"KRN",.402,1256,"DR",1,165.5,79)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3060000 S Y="@4202";D SSS^ONCOAIP1;S X=X;W !;15;@4202;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";D OTH^ONCPTX;57.2;D OTH^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,23)="",TXNUL=1,Y="@423";
"KRN",.402,1256,"DR",1,165.5,80)
I (X=0)!(X=7) D OTH^ONCNTX1 S TXNO=$S(X=0:1,1:""),Y="@423";I (X=8)!(X=9) D OTH^ONCUTX S TXUNK=$S(X=9:1,1:""),Y="@423";57;D OTHDT^ONCATF1;D OATFDEF^ONCOCC;@423;D DSPOTH^ONCATF1;W !;57.3//^S X=$G(OTHDF);
"KRN",.402,1256,"DR",1,165.5,81)
I X="" S $P(^ONCO(165.5,D0,3.1),U,21)="" S Y="@424";I X=0!(X=7) D OTHATF^ONCNTX1 S Y="@424";I X=8!(X=9) D OTHATF^ONCUTX1 S Y="@424";57.4//^S X=$G(OTHDTDF);@424;W !;S OVAR=$P($G(^ONCO(165.5,D0,3)),U,25);
"KRN",.402,1256,"DR",1,165.5,82)
I OVAR=""!(OVAR=0)!(OVAR=9) S Y="@425";115;S FLDNUM=115,NODE=21,LIMIT=1000 D ^ONCTEXT;@425;D PRO^ONCPTX;12;@13;D PP^ONCATF1;D PATFDEF^ONCOCC;13//^S X=$G(PPDF);279;346;I X=9 D PRO^ONCUTX S Y="@113";
"KRN",.402,1256,"DR",1,165.5,83)
I (X=0)!(X=2)!(X=3)!(X=4)!(X=5)!(X=6)!(X=7)!(X=8) D PRO^ONCNTX1 S Y="@113";560;133;@113;W !;113;S FLDNUM=113,NODE=19,LIMIT=1000 D ^ONCTEXT;S Y=$S(ONCOANS="A":"@5",1:"@0");@5;D ^ONCOPCE;S Y=$S(ONCOANS="A":"@7",1:"@0");@6;
"KRN",.402,1256,"DR",1,165.5,84)
D ORF^ONCOAIP;205;206;207;208;209;210;211;212;213;214;215;216;217;218;219;220;221;222;223;224;225;226;S Y="@0";@7;D AB^ONCOAIP;91;I $G(EDIT)="YES" S Y="@0";S:$P(^ONCO(165.5,D0,7),U,4)="" Y="@83";W !!?5,"Selected for QA=>",!;63;
"KRN",.402,1256,"DR",1,165.5,85)
S:X="N" Y="@83";64;64.1;64.2;@83;S Y="";62;@999999;62;
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",14,-1)
1^1
"PKG",14,0)
ONCOLOGY^ONC^Oncology treatment tracking & tumor registry package.
"PKG",14,20,0)
^9.402P^^
"PKG",14,22,0)
^9.49I^1^1
"PKG",14,22,1,0)
2.11^3041126^2950417
"PKG",14,22,1,"PAH",1,0)
56^3120913^28
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
22
"RTN","ONCACDU1")
0^15^B24968526^B22128284
"RTN","ONCACDU1",1,0)
ONCACDU1 ;Hines OIFO/GWB - NAACCR extract utilities #1 ;05/08/12
"RTN","ONCACDU1",2,0)
 ;;2.11;Oncology;**12,14,16,20,21,22,24,26,27,28,33,36,37,42,45,46,49,51,56**;Mar 07, 1995;Build 10
"RTN","ONCACDU1",3,0)
 ;rvd - p56
"RTN","ONCACDU1",4,0)
BDATE(ACD160) ;Date of Birth [240] 196-203
"RTN","ONCACDU1",5,0)
 N D0,X,Y
"RTN","ONCACDU1",6,0)
 S D0=ACD160
"RTN","ONCACDU1",7,0)
 D DOB1^ONCOES
"RTN","ONCACDU1",8,0)
 S X=$G(X)
"RTN","ONCACDU1",9,0)
 Q X
"RTN","ONCACDU1",10,0)
 ;
"RTN","ONCACDU1",11,0)
BEHAV(IEN) ;Behavior Code (called by extract RULES)
"RTN","ONCACDU1",12,0)
 N BEHAV
"RTN","ONCACDU1",13,0)
 S BEHAV=$E($$HIST^ONCFUNC(IEN),5)
"RTN","ONCACDU1",14,0)
 Q BEHAV
"RTN","ONCACDU1",15,0)
 ;
"RTN","ONCACDU1",16,0)
DATE(ACDANS) ;Convert date to NAACCR format CCYYMMDD
"RTN","ONCACDU1",17,0)
 N DATE,X
"RTN","ONCACDU1",18,0)
 S DATE=""
"RTN","ONCACDU1",19,0)
 S X=ACDANS
"RTN","ONCACDU1",20,0)
 D DATEOT^ONCOES
"RTN","ONCACDU1",21,0)
 I X'="" D
"RTN","ONCACDU1",22,0)
 .I (X="00/00/0000"),$D(XQY0),(XQY0'["ABSTRACT-EDIT"),(XQY0'["ABSTRACT-ENTER") S DATE="00000000" Q
"RTN","ONCACDU1",23,0)
 .I (X="00/00/0000"),$D(XQY0),((XQY0["ABSTRACT-EDIT")!(XQY0["ABSTRACT-ENTER")) S DATE="" Q
"RTN","ONCACDU1",24,0)
 .I (X="88/88/8888"),$D(XQY0),(XQY0'["ABSTRACT-EDIT"),(XQY0'["ABSTRACT-ENTER") S DATE="88888888" Q
"RTN","ONCACDU1",25,0)
 .I (X="88/88/8888"),$D(XQY0),((XQY0["ABSTRACT-EDIT")!(XQY0["ABSTRACT-ENTER")) S DATE="" Q
"RTN","ONCACDU1",26,0)
 .I (X="99/99/9999"),$D(XQY0),(XQY0'["ABSTRACT-EDIT"),(XQY0'["ABSTRACT-ENTER") S DATE="99999999" Q
"RTN","ONCACDU1",27,0)
 .I (X="99/99/9999"),$D(XQY0),((XQY0["ABSTRACT-EDIT")!(XQY0["ABSTRACT-ENTER")) S DATE="" Q
"RTN","ONCACDU1",28,0)
 .S DATE=$E(X,7,10)_$E(X,1,2)_$E(X,4,5)
"RTN","ONCACDU1",29,0)
 .S DATE=$S($E(DATE,5,8)=9999:$E(DATE,1,4),$E(DATE,7,8)=99:$E(DATE,1,6),1:DATE)
"RTN","ONCACDU1",30,0)
 Q DATE
"RTN","ONCACDU1",31,0)
 ;
"RTN","ONCACDU1",32,0)
DTFLAG(ACDANS,ITEM) ;Compute Date Flag
"RTN","ONCACDU1",33,0)
 N FLAG,N,REC
"RTN","ONCACDU1",34,0)
 S FLAG=""
"RTN","ONCACDU1",35,0)
 S N=ITEM
"RTN","ONCACDU1",36,0)
 I N=1861 I ($$GET1^DIQ(165.5,IEN,71,"I")=4)!($$GET1^DIQ(165.5,IEN,71,"I")=5) S FLAG=11 G FLAG
"RTN","ONCACDU1",37,0)
 I ACDANS="" D
"RTN","ONCACDU1",38,0)
 .S FLAG=$S(N=1751:12,N=1861:10,1:"") Q
"RTN","ONCACDU1",39,0)
 I ACDANS="9999999" D
"RTN","ONCACDU1",40,0)
 .S FLAG=$S((N=391)!(N=439)!(N=581)!(N=1751):12,(N=448)!(N=591)!(N=601)!(N=1201)!(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=1251)!(N=1271)!(N=1281)!(N=1661)!(N=1681)!(N=1701)!(N=1861)!(N=3171)!(N=3181)!(N=3221)!(N=3231):10,1:"") Q
"RTN","ONCACDU1",41,0)
 I ACDANS="8888888" D
"RTN","ONCACDU1",42,0)
 .S FLAG=$S((N=448)!(N=439):11,N=391:12,(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=3221)!(N=3231):15,1:"") Q
"RTN","ONCACDU1",43,0)
 I ACDANS="0000000" D
"RTN","ONCACDU1",44,0)
 .S FLAG=$S((N=591)!(N=601)!(N=1201)!(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=1251)!(N=1271)!(N=1281)!(N=1661)!(N=1681)!(N=1701)!(N=1861)!(N=3171)!(N=3181)!(N=3221)!(N=3231):11,N=391:12,(N=448)!(N=439):15,1:"") Q
"RTN","ONCACDU1",45,0)
FLAG Q FLAG
"RTN","ONCACDU1",46,0)
 ;
"RTN","ONCACDU1",47,0)
CNTY(IEN) ;COUNTY AT DX [90] 156-158
"RTN","ONCACDU1",48,0)
 N FIPSCODE
"RTN","ONCACDU1",49,0)
 S FIPSCODE=$$GET1^DIQ(165.5,IEN,10,"I")
"RTN","ONCACDU1",50,0)
 I (FIPSCODE=998)!(FIPSCODE=999) G QCNTY
"RTN","ONCACDU1",51,0)
 S FIPSCODE=$E($$GET1^DIQ(165.5,IEN,10,"I"),3,5)
"RTN","ONCACDU1",52,0)
QCNTY Q FIPSCODE
"RTN","ONCACDU1",53,0)
 ;
"RTN","ONCACDU1",54,0)
AGEDX(IEN) ;Age at Diagnosis [230] 119-121
"RTN","ONCACDU1",55,0)
 N ACDAGE,D0,X
"RTN","ONCACDU1",56,0)
 S D0=IEN
"RTN","ONCACDU1",57,0)
 D AGE^ONCOCOM S ACDAGE=$S(X=""!(X<0)!(X>999):"",1:X)
"RTN","ONCACDU1",58,0)
 Q ACDAGE
"RTN","ONCACDU1",59,0)
 ;
"RTN","ONCACDU1",60,0)
OCCUP(ACD160) ;Text--Usual Occupation [310] 143-182
"RTN","ONCACDU1",61,0)
 N X,OCCUP
"RTN","ONCACDU1",62,0)
 S X="UNKNOWN"
"RTN","ONCACDU1",63,0)
 S OCCUP=$O(^ONCO(160,ACD160,7,0))
"RTN","ONCACDU1",64,0)
 I OCCUP'<1 D
"RTN","ONCACDU1",65,0)
 .N OCC
"RTN","ONCACDU1",66,0)
 .S OCC=$P($G(^ONCO(160,ACD160,7,OCCUP,0)),U,1)
"RTN","ONCACDU1",67,0)
 .Q:OCC<1
"RTN","ONCACDU1",68,0)
 .S X=$$GET1^DIQ(61.6,OCC,.01,"I")
"RTN","ONCACDU1",69,0)
 Q X
"RTN","ONCACDU1",70,0)
 ;
"RTN","ONCACDU1",71,0)
IND(ACD160) ;Text--Usual Industry [320] 183-222
"RTN","ONCACDU1",72,0)
 N X,OCCUP
"RTN","ONCACDU1",73,0)
 S X="UNKNOWN"
"RTN","ONCACDU1",74,0)
 S OCCUP=$O(^ONCO(160,ACD160,7,0))
"RTN","ONCACDU1",75,0)
 I OCCUP'<1 D
"RTN","ONCACDU1",76,0)
 .N IND
"RTN","ONCACDU1",77,0)
 .S IND=$P($G(^ONCO(160,ACD160,7,OCCUP,0)),U,4)
"RTN","ONCACDU1",78,0)
 .Q:IND=""
"RTN","ONCACDU1",79,0)
 .S X=IND
"RTN","ONCACDU1",80,0)
 Q X
"RTN","ONCACDU1",81,0)
 ;
"RTN","ONCACDU1",82,0)
TOB(IEN) ;Tobacco History [340] 224-224 VACCR extract only
"RTN","ONCACDU1",83,0)
 N X,AASTOB
"RTN","ONCACDU1",84,0)
 S X=$P($G(^ONCO(160,ACD160,8)),U,2)
"RTN","ONCACDU1",85,0)
 S AASTOB=$S(X="Y":"Y",X="N":0,X="U":9,1:X)
"RTN","ONCACDU1",86,0)
 I AASTOB="Y" D
"RTN","ONCACDU1",87,0)
 .N X S X=""
"RTN","ONCACDU1",88,0)
 .S X=$O(^ONCO(160,ACD160,5,X),-1)
"RTN","ONCACDU1",89,0)
 .I X'<1 I $G(^ONCO(160,ACD160,5,X,0))'="" D
"RTN","ONCACDU1",90,0)
 ..N Y S Y=^ONCO(160,ACD160,5,X,0)
"RTN","ONCACDU1",91,0)
 ..I $P(Y,U,3)'="" S AASTOB=5 Q  ;Previous use
"RTN","ONCACDU1",92,0)
 ..S AASTOB=$S($P(Y,U)=1:1,$P(Y,U)=2:2,$P(Y,U)=3:2,$P(Y,U)=4:3,$P(Y,U)=5:3,$P(Y,U)=7:4,1:9)
"RTN","ONCACDU1",93,0)
 .I AASTOB="Y" S AASTOB=9
"RTN","ONCACDU1",94,0)
 Q AASTOB
"RTN","ONCACDU1",95,0)
 ;
"RTN","ONCACDU1",96,0)
ALC(IEN) ;Alcohol History [350] 225-225 VACCR extract only
"RTN","ONCACDU1",97,0)
 N X,AASALCO
"RTN","ONCACDU1",98,0)
 S X=$P($G(^ONCO(160,ACD160,8)),U,3)
"RTN","ONCACDU1",99,0)
 S AASALCO=$S(X="Y":"Y",X="N":0,X="U":9,1:X)
"RTN","ONCACDU1",100,0)
 I AASALCO="Y" D
"RTN","ONCACDU1",101,0)
 .N X S X=""
"RTN","ONCACDU1",102,0)
 .S X=$O(^ONCO(160,ACD160,6,X),-1)
"RTN","ONCACDU1",103,0)
 .I X'<1 I $G(^ONCO(160,ACD160,6,X,0))'="" D
"RTN","ONCACDU1",104,0)
 ..N Y S Y=^ONCO(160,ACD160,6,X,0)
"RTN","ONCACDU1",105,0)
 ..I $P(Y,U,4)'="" S AASALCO=2 Q  ;Past history of alcohol use
"RTN","ONCACDU1",106,0)
 ..S AASALCO=1
"RTN","ONCACDU1",107,0)
 .I AASALCO="Y" S AASALCO=9
"RTN","ONCACDU1",108,0)
 Q AASALCO
"RTN","ONCACDU1",109,0)
 ;
"RTN","ONCACDU1",110,0)
SG(IEN,TYPE) ;TNM Stage Groups
"RTN","ONCACDU1",111,0)
 ;TNM Path Stage Group  [910]  569-570
"RTN","ONCACDU1",112,0)
 ;TNM Clin Stage Group  [970]  579-580
"RTN","ONCACDU1",113,0)
 N GS
"RTN","ONCACDU1",114,0)
 S GS=""
"RTN","ONCACDU1",115,0)
 I TYPE="" Q GS
"RTN","ONCACDU1",116,0)
 I TYPE="P" S GS=$$GET1^DIQ(165.5,IEN,88,"I")
"RTN","ONCACDU1",117,0)
 I TYPE="C" S GS=$$GET1^DIQ(165.5,IEN,38,"I")
"RTN","ONCACDU1",118,0)
 Q GS
"RTN","ONCACDU1",119,0)
 ;
"RTN","ONCACDU1",120,0)
CC ;Comorbid/Complication 1-10
"RTN","ONCACDU1",121,0)
 ;No longer needed.  Used by NAACCR v11.3.
"RTN","ONCACDU1",122,0)
 ;[3110] 675-679
"RTN","ONCACDU1",123,0)
 ;[3120] 680-684
"RTN","ONCACDU1",124,0)
 ;[3130] 685-689
"RTN","ONCACDU1",125,0)
 ;[3140] 690-694
"RTN","ONCACDU1",126,0)
 ;[3150] 695-699
"RTN","ONCACDU1",127,0)
 ;[3160] 700-704
"RTN","ONCACDU1",128,0)
 ;[3161] 717-721
"RTN","ONCACDU1",129,0)
 ;[3162] 722-726
"RTN","ONCACDU1",130,0)
 ;[3163] 727-731
"RTN","ONCACDU1",131,0)
 ;[3164] 732-736
"RTN","ONCACDU1",132,0)
 ;S CCEX(1)="00000"
"RTN","ONCACDU1",133,0)
 ;F CCSUB=1:1:10 S CC(CCSUB)=""
"RTN","ONCACDU1",134,0)
 ;S CCSUB=0
"RTN","ONCACDU1",135,0)
 ;F FLD=25:.1:25.9 S CC=$$GET1^DIQ(160,ACD160,FLD,"I") S:CC'="" CC=$$GET1^DIQ(80,CC,.01,"I") S CCSUB=CCSUB+1,CC(CCSUB)=$P(CC," ",1)
"RTN","ONCACDU1",136,0)
 ;F CCEXSUB=1:1:10 S CCEX(CCEXSUB)=""
"RTN","ONCACDU1",137,0)
 ;I CC(1)="" Q
"RTN","ONCACDU1",138,0)
 ;I EXT="VACCR" F CCSUB=1:1:10 S CCEX(CCSUB)=$P(CC(CCSUB),".",1)_$P(CC(CCSUB),".",2) G CCEX
"RTN","ONCACDU1",139,0)
 ;S CCEXSUB=0
"RTN","ONCACDU1",140,0)
 ;S CCSUB=0 F  S CCSUB=$O(CC(CCSUB)) Q:CCSUB'>0  D
"RTN","ONCACDU1",141,0)
 ;.I ($E(CC(CCSUB),1)="E")!($E(CC(CCSUB),1)="V")!((+CC(CCSUB)>99.9)&(+CC(CCSUB)<290))!(+CC(CCSUB)>319) S CCEXSUB=CCEXSUB+1,CCEX(CCEXSUB)=$P(CC(CCSUB),".",1)_$P(CC(CCSUB),".",2)
"RTN","ONCACDU1",142,0)
CCEX ;K CC,CCEXSUB,CCSUB,FLD
"RTN","ONCACDU1",143,0)
 Q
"RTN","ONCACDU1",144,0)
 ;
"RTN","ONCACDU1",145,0)
RXCOD(IEN) ;RX Coding System--Current [1460] 888-889
"RTN","ONCACDU1",146,0)
 N OUT
"RTN","ONCACDU1",147,0)
 S OUT="06"
"RTN","ONCACDU1",148,0)
 Q OUT
"RTN","ONCACDU1",149,0)
 ;
"RTN","ONCACDU1",150,0)
FHCT ;Family History of Cancer Text 1456-1505 VACCR extract only
"RTN","ONCACDU1",151,0)
 K ONC S IEN160=ACD160_"," D GETS^DIQ(160,IEN160,"44*","","ONC")
"RTN","ONCACDU1",152,0)
 S (ACDANS,FHCTIEN)=""
"RTN","ONCACDU1",153,0)
 F  S FHCTIEN=$O(ONC(160.044,FHCTIEN)) Q:FHCTIEN'>0  D
"RTN","ONCACDU1",154,0)
 .S FHCT=ONC(160.044,FHCTIEN,.01)_"("_ONC(160.044,FHCTIEN,1)_")"
"RTN","ONCACDU1",155,0)
 .Q:($L(ACDANS)+$L(FHCT))>50
"RTN","ONCACDU1",156,0)
 .S ACDANS=ACDANS_FHCT_"/"
"RTN","ONCACDU1",157,0)
 S ACDANS=$E(ACDANS,1,$L(ACDANS)-1)
"RTN","ONCACDU1",158,0)
 K ONC,IEN160,FHCTIEN,FHCT
"RTN","ONCACDU1",159,0)
 Q
"RTN","ONCACDU1",160,0)
 ;
"RTN","ONCACDU1",161,0)
PHCT ;Patient History of Cancer Text 1785-1804 VACCR extract only
"RTN","ONCACDU1",162,0)
 S ACDANS=""
"RTN","ONCACDU1",163,0)
 F I=148.1,148.2,148.3,148.4 S PHCTPT=$$GET1^DIQ(165.5,IEN,I,"I") D
"RTN","ONCACDU1",164,0)
 .Q:PHCTPT=""
"RTN","ONCACDU1",165,0)
 .S PHCT=$$GET1^DIQ(164.2,PHCTPT,.01,"I")
"RTN","ONCACDU1",166,0)
 .Q:PHCT="NOT APPLICABLE"
"RTN","ONCACDU1",167,0)
 .Q:($L(ACDANS)+$L(PHCT))>20
"RTN","ONCACDU1",168,0)
 .S ACDANS=ACDANS_PHCT_"/"
"RTN","ONCACDU1",169,0)
 S ACDANS=$E(ACDANS,1,$L(ACDANS)-1)
"RTN","ONCACDU1",170,0)
 K I,PHCTPT,PHCT
"RTN","ONCACDU1",171,0)
 Q
"RTN","ONCACDU1",172,0)
 ;
"RTN","ONCACDU1",173,0)
NL ;Name--Last [2230] 1947-1971
"RTN","ONCACDU1",174,0)
 S ACDANS=$$STRIP^XLFSTR(ACDANS," !""""#$%&'()*+,./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU1",175,0)
 Q
"RTN","ONCACDU2")
0^2^B63466870^B61713188
"RTN","ONCACDU2",1,0)
ONCACDU2 ;Hines OIFO/GWB - Utility routine ;05/03/12
"RTN","ONCACDU2",2,0)
 ;;2.11;Oncology;**12,18,20,21,22,24,26,27,29,30,31,32,34,36,37,38,39,41,46,47,49,50,51,52,53,56**;Mar 07, 1995;Build 10
"RTN","ONCACDU2",3,0)
 ;rvd - 05/03/12 p56.  Use ICD API (#3990) instead of direct global read.
"RTN","ONCACDU2",4,0)
 ;
"RTN","ONCACDU2",5,0)
VAFLD(ACDANS) ;Convert data to NAACCR format
"RTN","ONCACDU2",6,0)
 I ACDANS="N" S ACDANS=0
"RTN","ONCACDU2",7,0)
 I ACDANS="Y" S ACDANS=1
"RTN","ONCACDU2",8,0)
 I ACDANS="U" S ACDANS=9
"RTN","ONCACDU2",9,0)
 Q ACDANS
"RTN","ONCACDU2",10,0)
 ;
"RTN","ONCACDU2",11,0)
VASIT() ;VISN (160.1,7) [2340-2341]
"RTN","ONCACDU2",12,0)
 N X
"RTN","ONCACDU2",13,0)
 S OSPIEN=$O(^ONCO(160.1,0))
"RTN","ONCACDU2",14,0)
 S X=$P($G(^ONCO(160.1,OSPIEN,1)),U,7)
"RTN","ONCACDU2",15,0)
 K OSPIEN
"RTN","ONCACDU2",16,0)
 Q X
"RTN","ONCACDU2",17,0)
 ;
"RTN","ONCACDU2",18,0)
COCACC() ;COC ACCREDITATION (160.1,68) [2547-2548]
"RTN","ONCACDU2",19,0)
 N X
"RTN","ONCACDU2",20,0)
 S OSPIEN=$O(^ONCO(160.1,0))
"RTN","ONCACDU2",21,0)
 S X=$P($G(^ONCO(160.1,OSPIEN,7)),U,2)
"RTN","ONCACDU2",22,0)
 K OSPIEN
"RTN","ONCACDU2",23,0)
 Q X
"RTN","ONCACDU2",24,0)
 ;
"RTN","ONCACDU2",25,0)
SNCNT(IEN) ;Sequence Number--Central [380] 281-282
"RTN","ONCACDU2",26,0)
 N BEHAV,DATEDX,HIST,PRIMST,X
"RTN","ONCACDU2",27,0)
 S DATEDX=$E($$GET1^DIQ(165.5,IEN,3,"I"),1,3)
"RTN","ONCACDU2",28,0)
 S PRIMST=$$GET1^DIQ(165.5,IEN,20,"I")
"RTN","ONCACDU2",29,0)
 S HIST=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),1,4)
"RTN","ONCACDU2",30,0)
 S BEHAV=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),5)
"RTN","ONCACDU2",31,0)
 S X=""
"RTN","ONCACDU2",32,0)
 I DATEDX>295,DATEDX<303,$E(PRIMST,3,4)=53,HIST<9590,BEHAV=2 S X=98
"RTN","ONCACDU2",33,0)
 Q X
"RTN","ONCACDU2",34,0)
 ;
"RTN","ONCACDU2",35,0)
COCO(IEN) ;COC Coding Sys--Original [2150] 1202-1203
"RTN","ONCACDU2",36,0)
 N X
"RTN","ONCACDU2",37,0)
 S DATEDX=$$GET1^DIQ(165.5,IEN,3,"I")
"RTN","ONCACDU2",38,0)
 S X=$S(DATEDX>3021231:"08",DATEDX>2951231:"07",1:"05")
"RTN","ONCACDU2",39,0)
 Q X
"RTN","ONCACDU2",40,0)
 ;
"RTN","ONCACDU2",41,0)
VENDOR() ;Vendor Name [2170] 1204-1213
"RTN","ONCACDU2",42,0)
 N X,VERSION,EXTR,SUFFIX
"RTN","ONCACDU2",43,0)
 S EXTR=$G(^ONCO(160.16,EXTRACT,0))
"RTN","ONCACDU2",44,0)
 S SUFFIX=$S(EXTR["VACCR":"A",EXTR["STATE":"B",1:"")
"RTN","ONCACDU2",45,0)
 S VERSION=$P($G(^ONCO(160.16,EXTRACT,0))," ",3)
"RTN","ONCACDU2",46,0)
 S X="VA"_VERSION_$E($T(LOGO+3^ONCODIS),62,64)_SUFFIX
"RTN","ONCACDU2",47,0)
 Q X
"RTN","ONCACDU2",48,0)
 ;
"RTN","ONCACDU2",49,0)
WORD(IEN,NODE,LEN) ;Get word processing data
"RTN","ONCACDU2",50,0)
 N X
"RTN","ONCACDU2",51,0)
 S X=""
"RTN","ONCACDU2",52,0)
 I $D(^ONCO(165.5,IEN,NODE,0)) D
"RTN","ONCACDU2",53,0)
 .N CNT,LINE,ONCLINE
"RTN","ONCACDU2",54,0)
 .S CNT=0
"RTN","ONCACDU2",55,0)
 .S (LINE,ONCLINE)=""
"RTN","ONCACDU2",56,0)
 .F  S CNT=$O(^ONCO(165.5,IEN,NODE,CNT)) Q:CNT<1  D  Q:($L(ONCLINE)>LEN)
"RTN","ONCACDU2",57,0)
 ..Q:'$D(^ONCO(165.5,IEN,NODE,CNT,0))
"RTN","ONCACDU2",58,0)
 ..S ONCLINE=LINE_^ONCO(165.5,IEN,NODE,CNT,0)_" "
"RTN","ONCACDU2",59,0)
 ..I ($L(ONCLINE)>LEN) S LINE=$E(ONCLINE,1,LEN) Q
"RTN","ONCACDU2",60,0)
 ..S LINE=LINE_^ONCO(165.5,IEN,NODE,CNT,0)_" "
"RTN","ONCACDU2",61,0)
 .S X=LINE
"RTN","ONCACDU2",62,0)
 S X=$TR(X,$C(10,12,13),"   ")
"RTN","ONCACDU2",63,0)
 Q X
"RTN","ONCACDU2",64,0)
 ;
"RTN","ONCACDU2",65,0)
STAGE(IEN,TYPE) ;TNM Descriptors
"RTN","ONCACDU2",66,0)
 ;TNM Path Descriptor [910] 956-956
"RTN","ONCACDU2",67,0)
 ;TNM Clin Descriptor [980] 974-974
"RTN","ONCACDU2",68,0)
 N CD,LOC,PD,X
"RTN","ONCACDU2",69,0)
 S X=""
"RTN","ONCACDU2",70,0)
 S CD=$$GET1^DIQ(165.5,IEN,241,"I")
"RTN","ONCACDU2",71,0)
 S PD=$$GET1^DIQ(165.5,IEN,242,"I")
"RTN","ONCACDU2",72,0)
 I TYPE="C",CD'="" S X=CD G STAGEEX
"RTN","ONCACDU2",73,0)
 I TYPE="P",PD'="" S X=PD G STAGEEX
"RTN","ONCACDU2",74,0)
 S LOC=$S(TYPE="P":89.1,TYPE="C":37,1:"")
"RTN","ONCACDU2",75,0)
 I TYPE'="" D
"RTN","ONCACDU2",76,0)
 .N STRING
"RTN","ONCACDU2",77,0)
 .S STRING=$$GET1^DIQ(165.5,IEN,LOC,"E")
"RTN","ONCACDU2",78,0)
 .I ($P(STRING," ")["m")&($P(STRING," ")["y") S X=6 Q
"RTN","ONCACDU2",79,0)
 .I $P(STRING," ")["m" S X=3 Q
"RTN","ONCACDU2",80,0)
 .I TYPE="P",$P(STRING," ")["y" S X=4 Q
"RTN","ONCACDU2",81,0)
STAGEEX Q X
"RTN","ONCACDU2",82,0)
 ;
"RTN","ONCACDU2",83,0)
CCOUNTY(ACD160) ;County--Current [1840] 2192-2194
"RTN","ONCACDU2",84,0)
 I $$DPTLRT^ONCOES(ACD160)="LRT" S X="" G CCEX
"RTN","ONCACDU2",85,0)
 N DPT,DPTPNT,X
"RTN","ONCACDU2",86,0)
 S DPT=$$GET1^DIQ(160,ACD160,.01,"I")
"RTN","ONCACDU2",87,0)
 S DPTPNT=$P(DPT,";",1)
"RTN","ONCACDU2",88,0)
 S X=$$GET1^DIQ(2,DPTPNT,.117)
"RTN","ONCACDU2",89,0)
CCEX Q X
"RTN","ONCACDU2",90,0)
 ;
"RTN","ONCACDU2",91,0)
SUB(IEN,CNT,FIELD) ;
"RTN","ONCACDU2",92,0)
 ;Subsq RX 2nd Course Date [1660] 988-995
"RTN","ONCACDU2",93,0)
 N HEMA,HEMAPT,I,X
"RTN","ONCACDU2",94,0)
 S CNT=CNT-1
"RTN","ONCACDU2",95,0)
 S X=""
"RTN","ONCACDU2",96,0)
 I $O(^ONCO(165.5,IEN,4,0)) D
"RTN","ONCACDU2",97,0)
 .N IENS,SUB,SUBFLD,ENTRY,SUBIEN
"RTN","ONCACDU2",98,0)
 .S SUBIEN=0 F I=1:1 S SUBIEN=$O(^ONCO(165.5,IEN,4,SUBIEN)) Q:(I=CNT)!(SUBIEN'>0)
"RTN","ONCACDU2",99,0)
 .I SUBIEN="" S X="" Q
"RTN","ONCACDU2",100,0)
 .S IENS=SUBIEN_","_IEN
"RTN","ONCACDU2",101,0)
 .S ENTRY=$$GET1^DIQ(165.51,IENS,FIELD,"I") I ENTRY="",FIELD'=".07",FIELD'=".08" S X="" Q
"RTN","ONCACDU2",102,0)
 .S HEMA=""
"RTN","ONCACDU2",103,0)
 .S HEMAPT=$$GET1^DIQ(165.51,IENS,.02,"I")
"RTN","ONCACDU2",104,0)
 .S:HEMAPT'="" HEMA=$P($G(^ONCO(167,HEMAPT,0)),U,1)
"RTN","ONCACDU2",105,0)
 .I $S(FIELD=".01":1,FIELD=".05":1,FIELD=".06":1,FIELD=".07":1,FIELD=".08":1,FIELD=".09":1,FIELD="37":1,FIELD=".041":1,FIELD=".051":1,FIELD=".061":1,FIELD=".071":1,FIELD=".081":1,FIELD=".091":1,1:0) D  Q
"RTN","ONCACDU2",106,0)
 ..I FIELD=".06" S X=$S(ENTRY="01":1,ENTRY="02":2,ENTRY="03":3,$E(ENTRY,1)=8:0,1:ENTRY) Q
"RTN","ONCACDU2",107,0)
 ..I FIELD=".07" S X=$S(ENTRY="00":0,ENTRY="01":1,$E(ENTRY,1)=8:0,ENTRY=99:9,1:"") Q:X'=""  S X=$S(HEMA=30:2,HEMA=40:2,1:"") Q
"RTN","ONCACDU2",108,0)
 ..I FIELD=".08" S X=$S(ENTRY="01":1,ENTRY=87:7,ENTRY=88:8,$E(ENTRY,1)=8:0,ENTRY=99:9,1:ENTRY) Q:X'=""  S X=$S(HEMA=10:4,HEMA=11:2,HEMA=12:3,HEMA=20:5,1:"") Q
"RTN","ONCACDU2",109,0)
 ..S X=ENTRY
"RTN","ONCACDU2",110,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<2980000 S X=ENTRY Q
"RTN","ONCACDU2",111,0)
 .S SUBFLD=$S(FIELD=33:"RR5",FIELD=35:"SC5",FIELD=36:"SO5",FIELD=.04:"SPS",1:"") I SUBFLD="" S X="" Q
"RTN","ONCACDU2",112,0)
 .S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY)
"RTN","ONCACDU2",113,0)
 I FIELD=.04,$L(X)=1 S X="0"_X
"RTN","ONCACDU2",114,0)
 Q X
"RTN","ONCACDU2",115,0)
 ;
"RTN","ONCACDU2",116,0)
SUB164(IEN,SUBFLD,ENTRY) ;ICDO TOPOGRAPHY (164)
"RTN","ONCACDU2",117,0)
 N X,TOP1,TOP2
"RTN","ONCACDU2",118,0)
 S X=""
"RTN","ONCACDU2",119,0)
 S TOP1=$$GET1^DIQ(165.5,IEN,20,"I") D:TOP1'=""
"RTN","ONCACDU2",120,0)
 .S TOP2=$$GET1^DIQ(164,TOP1,107,"I")
"RTN","ONCACDU2",121,0)
 .I (TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424)!($E(TOP1,3,4)=76)!(TOP1=67809),($G(FIELD)=58.6)!($G(FIELD)=58.7) S TOP2=67420
"RTN","ONCACDU2",122,0)
 .I ($G(FIELD)=58.2)!($G(FIELD)=50.2)!($G(FIELD)=138)!($G(FIELD)=138.1)!($G(FIELD)=139)!($G(FIELD)=139.1)!($G(FIELD)=74)!($G(FIELD)=23),($E(TOP1,3,4)=76)!(TOP1=67809)!(TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424) S TOP2=67141
"RTN","ONCACDU2",123,0)
 .I ($G(FIELD)=58.2)!($G(FIELD)=50.2),TOP1=67422 S TOP2=67770
"RTN","ONCACDU2",124,0)
 .I $G(SUBFLD)="SUA",($E(TOP1,3,4)=77) S TOP2=67141
"RTN","ONCACDU2",125,0)
 .D:TOP2'=""
"RTN","ONCACDU2",126,0)
 ..S X=$P($G(^ONCO(164,TOP2,SUBFLD,ENTRY,0)),U,2)
"RTN","ONCACDU2",127,0)
 Q X
"RTN","ONCACDU2",128,0)
 ;
"RTN","ONCACDU2",129,0)
RXPRI(IEN,FIELD,SUBFLD) ;
"RTN","ONCACDU2",130,0)
 ;RX Hosp--Surg Prim Site    [670] 457-458
"RTN","ONCACDU2",131,0)
 ;RX Hosp--Surg Site 98-02   [746] 478-479
"RTN","ONCACDU2",132,0)
 ;RX Hosp--Scope Reg 98-02   [747] 480-480
"RTN","ONCACDU2",133,0)
 ;RX Hosp--Surg Oth 98-02    [748] 481-481
"RTN","ONCACDU2",134,0)
 ;RX Summ--Surg Prim Site   [1290] 859-860
"RTN","ONCACDU2",135,0)
 ;RX Summ--Surgical Approch [1310] 865-865
"RTN","ONCACDU2",136,0)
 ;RX Summ--Reconstruct 1st  [1330] 867-867
"RTN","ONCACDU2",137,0)
 ;RX Summ--Surg Site 98-02  [1646] 939-940
"RTN","ONCACDU2",138,0)
 ;RX Summ--Scope Reg 98-02  [1647] 941-941
"RTN","ONCACDU2",139,0)
 ;RX Summ--Surg Oth 98-02   [1648] 942-942
"RTN","ONCACDU2",140,0)
 N X,ENTRY
"RTN","ONCACDU2",141,0)
 S X=""
"RTN","ONCACDU2",142,0)
 S TOP1=$$GET1^DIQ(165.5,IEN,20,"I")
"RTN","ONCACDU2",143,0)
 S ENTRY=$$GET1^DIQ(165.5,IEN,FIELD,"I") D:ENTRY'=""
"RTN","ONCACDU2",144,0)
 .I (TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424)!($E(TOP1,3,4)=76)!(TOP1=67809),($G(FIELD)=58.6)!($G(FIELD)=58.7) S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY) Q
"RTN","ONCACDU2",145,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<2980000,(FIELD=23)!(FIELD=74)!(FIELD=50.2)!(FIELD=58.2)!(FIELD=58.6)!(FIELD=58.7) S X=$S(FIELD=23:$$GET1^DIQ(160.4,ENTRY,.01,"I"),FIELD=74:$$GET1^DIQ(160.6,ENTRY,.01,"I"),1:ENTRY) Q
"RTN","ONCACDU2",146,0)
 .S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY)
"RTN","ONCACDU2",147,0)
 Q X
"RTN","ONCACDU2",148,0)
 ;
"RTN","ONCACDU2",149,0)
FNODE(ACD160,FIELD) ;FOLLOW-UP (160,400)
"RTN","ONCACDU2",150,0)
 ;Date of Last Contact     [1750] 1294-1301
"RTN","ONCACDU2",151,0)
 ;Vital Status             [1760] 1302-1302
"RTN","ONCACDU2",152,0)
 ;Quality of Survival      [1780] 1304-1304
"RTN","ONCACDU2",153,0)
 ;Follow-Up Source         [1790] 1305-1305
"RTN","ONCACDU2",154,0)
 ;Next Follow-Up Source    [1800] 1306-1306
"RTN","ONCACDU2",155,0)
 ;Unusual Follow-Up Method [1850] 1341-1341
"RTN","ONCACDU2",156,0)
 ;Following Registry       [2440] 2475-2484
"RTN","ONCACDU2",157,0)
 N FNODE,X
"RTN","ONCACDU2",158,0)
 S FNODE=$$LAST(ACD160),X=""
"RTN","ONCACDU2",159,0)
 I FNODE'="" D
"RTN","ONCACDU2",160,0)
 .N IENS
"RTN","ONCACDU2",161,0)
 .S IENS=FNODE_","_ACD160_","
"RTN","ONCACDU2",162,0)
 .S X=$$GET1^DIQ(160.04,IENS,FIELD,"I")
"RTN","ONCACDU2",163,0)
 Q X
"RTN","ONCACDU2",164,0)
 ;
"RTN","ONCACDU2",165,0)
LAST(ACD160) ;Get last FOLLOW-UP(160,400)
"RTN","ONCACDU2",166,0)
 N DLC
"RTN","ONCACDU2",167,0)
 S X="",DLC=0
"RTN","ONCACDU2",168,0)
 S DLC=$O(^ONCO(160,ACD160,"F","AA",DLC))
"RTN","ONCACDU2",169,0)
 S:DLC'="" X=$O(^ONCO(160,ACD160,"F","AA",DLC,0))
"RTN","ONCACDU2",170,0)
 I X'>0 S X=""
"RTN","ONCACDU2",171,0)
 Q X
"RTN","ONCACDU2",172,0)
 ;
"RTN","ONCACDU2",173,0)
FCNODE(ACD160,FIELD,IE) ;FOLLOW-UP CONTACT (160,420)
"RTN","ONCACDU2",174,0)
 ;Follow-Up Contact--City  [1842] 1357-1376
"RTN","ONCACDU2",175,0)
 ;Follow-Up Contact--State [1844] 1377-1378
"RTN","ONCACDU2",176,0)
 ;Follow-Up Contact--Postal[1846] 1379-1387
"RTN","ONCACDU2",177,0)
 ;Follow-Up Contact--Name  [2394] 2284-2313
"RTN","ONCACDU2",178,0)
 ;Follow-Up Contact--No&St [2392] 2314-2353
"RTN","ONCACDU2",179,0)
 ;Follow-Up Contact--Suppl [2393] 2354-2393
"RTN","ONCACDU2",180,0)
 N CONTACT,FCNODE,X
"RTN","ONCACDU2",181,0)
 S X=""
"RTN","ONCACDU2",182,0)
 S FCNODE=$O(^ONCO(160,ACD160,"C","B"),-1)
"RTN","ONCACDU2",183,0)
 I FCNODE'="" D
"RTN","ONCACDU2",184,0)
 .N IENS
"RTN","ONCACDU2",185,0)
 .S IENS=FCNODE_","_ACD160_","
"RTN","ONCACDU2",186,0)
 .S CONTACT=$$GET1^DIQ(160.03,IENS,1,"I")
"RTN","ONCACDU2",187,0)
 I $G(CONTACT) S X=$$GET1^DIQ(165,CONTACT,FIELD,IE)
"RTN","ONCACDU2",188,0)
 Q X
"RTN","ONCACDU2",189,0)
 ;
"RTN","ONCACDU2",190,0)
CS(IEN) ;Cancer Status [1770] 1303-1303
"RTN","ONCACDU2",191,0)
 N X,Z,FNODE
"RTN","ONCACDU2",192,0)
 S FNODE=0
"RTN","ONCACDU2",193,0)
 S X=""
"RTN","ONCACDU2",194,0)
 S FNODE=$O(^ONCO(165.5,IEN,"TS",FNODE))
"RTN","ONCACDU2",195,0)
 I FNODE>0 D
"RTN","ONCACDU2",196,0)
 .N IENS,PT
"RTN","ONCACDU2",197,0)
 .S FNODE=$O(^ONCO(165.5,IEN,"TS"," "),-1)
"RTN","ONCACDU2",198,0)
 .Q:FNODE<1
"RTN","ONCACDU2",199,0)
 .S IENS=FNODE_","_IEN_","
"RTN","ONCACDU2",200,0)
 .S PT=$$GET1^DIQ(165.573,IENS,.02,"I")
"RTN","ONCACDU2",201,0)
 .Q:PT<1
"RTN","ONCACDU2",202,0)
 .S X=$$GET1^DIQ(164.42,PT,1,"I")
"RTN","ONCACDU2",203,0)
 Q X
"RTN","ONCACDU2",204,0)
 ;
"RTN","ONCACDU2",205,0)
CCTST(ACD160) ;
"RTN","ONCACDU2",206,0)
 ;Addr Current--City      [1810] 1307-1326
"RTN","ONCACDU2",207,0)
 N D0,PT,X
"RTN","ONCACDU2",208,0)
 S D0=ACD160
"RTN","ONCACDU2",209,0)
 S X="" S PT=$P($G(^ONCO(160,D0,0)),";",1)
"RTN","ONCACDU2",210,0)
 I $$DPTLRT^ONCOES(D0)="LRT" S X=$$GET1^DIQ(67,PT,.114,"E")
"RTN","ONCACDU2",211,0)
 I $$DPTLRT^ONCOES(D0)="DPT" S X=$$GET1^DIQ(2,PT,.114,"E")
"RTN","ONCACDU2",212,0)
 S X=$$STRIP^XLFSTR(X,"!""""#$%&'()*+,-./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU2",213,0)
 Q X
"RTN","ONCACDU2",214,0)
 ;
"RTN","ONCACDU2",215,0)
CSTST(ACD160) ;
"RTN","ONCACDU2",216,0)
 ;Addr Current--State [1820] 1327-1328
"RTN","ONCACDU2",217,0)
 N X
"RTN","ONCACDU2",218,0)
 S X=$$GET1^DIQ(160,ACD160,.115,"E")
"RTN","ONCACDU2",219,0)
 S X=$S(X="CANAD":"CD",X="EU":"YY",X="MX":"XX",X="NF":"NL",X="PH":"XX",X="UN":"ZZ",1:X)
"RTN","ONCACDU2",220,0)
 Q X
"RTN","ONCACDU2",221,0)
 ;
"RTN","ONCACDU2",222,0)
ICD(ICD) ;ICD Code
"RTN","ONCACDU2",223,0)
 N X
"RTN","ONCACDU2",224,0)
 S ICD=$S(ICD'="":$P($$ICDDX^ICDCODE(ICD),U,2),1:"0000")
"RTN","ONCACDU2",225,0)
 I ICD["." S ICD=$P(ICD,".")_$P(ICD,".",2)
"RTN","ONCACDU2",226,0)
 S:$L(ICD)=3 ICD=ICD_9
"RTN","ONCACDU2",227,0)
 S:$L(ICD)<4 ICD=$E("0000",1,4-$L(ICD))_ICD
"RTN","ONCACDU2",228,0)
 S:$L(ICD)>4 ICD=$E(ICD,1,4)
"RTN","ONCACDU2",229,0)
 I $E(ICD,4)="X"!($E(ICD,4)="-") S ICD=$E(ICD,1,3)_9
"RTN","ONCACDU2",230,0)
 Q ICD
"RTN","ONCACDU2",231,0)
 ;
"RTN","ONCACDU2",232,0)
ICDR(ICD) ;ICD Revision Number [1920] 1392-1392
"RTN","ONCACDU2",233,0)
 N ICDR
"RTN","ONCACDU2",234,0)
 S ICD=$$ICD(ICD)
"RTN","ONCACDU2",235,0)
 S ICDR=$S(ICD="    ":0,1:$$GET1^DIQ(160,ACD160,20,"I"))
"RTN","ONCACDU2",236,0)
 S:ICDR="" ICDR=0
"RTN","ONCACDU2",237,0)
 Q ICDR
"RTN","ONCACDU2",238,0)
 ;
"RTN","ONCACDU2",239,0)
PPAY(IEN) ;PRIMARY PAYER AT DX (165.5,18)
"RTN","ONCACDU2",240,0)
 N X
"RTN","ONCACDU2",241,0)
 S X=$$GET1^DIQ(165.5,IEN,18,"I")
"RTN","ONCACDU2",242,0)
 S X=$$GET1^DIQ(160.3,$S(X'="":X,1:99),.01,"I")
"RTN","ONCACDU2",243,0)
 S X=$S(X<42:X,X>47:X,1:X-1)
"RTN","ONCACDU2",244,0)
 Q X
"RTN","ONCACDU2",245,0)
 ;
"RTN","ONCACDU2",246,0)
DS(IEN) ;RX Date--Surgery [1200] 755-762
"RTN","ONCACDU2",247,0)
 N X
"RTN","ONCACDU2",248,0)
 S X=$$GET1^DIQ(165.5,IEN,50,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",249,0)
 S X=$$GET1^DIQ(165.5,IEN,138.2,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",250,0)
 S X=$$GET1^DIQ(165.5,IEN,139.2,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",251,0)
 S SURGDT=$O(SURGDT(0))
"RTN","ONCACDU2",252,0)
 S X=$$DATE^ONCACDU1(SURGDT)
"RTN","ONCACDU2",253,0)
 K SURGDT
"RTN","ONCACDU2",254,0)
 Q X
"RTN","ONCACDU2",255,0)
STRIP ;Replace punctuation marks with spaces
"RTN","ONCACDU2",256,0)
 S ACDANS=$TR(ACDANS,"!""""@#$%&'()*+,-./:;<=>?[>]^_\{|}~`","                                    ")
"RTN","ONCACDU2",257,0)
 S ACDANS=$$TRIM^XLFSTR(ACDANS)
"RTN","ONCACDU2",258,0)
 Q
"RTN","ONCACDU2",259,0)
 ;
"RTN","ONCACDU2",260,0)
STRIP1 ;Strip out punctuation marks
"RTN","ONCACDU2",261,0)
 S ACDANS=$$STRIP^XLFSTR(ACDANS,"!""""#$%&'()*+,-./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU2",262,0)
 Q
"RTN","ONCACDU2",263,0)
 ;
"RTN","ONCACDU2",264,0)
CLEANUP ;Cleanup
"RTN","ONCACDU2",265,0)
 K EXTRACT
"RTN","ONCATF")
0^3^B47209323^B46881443
"RTN","ONCATF",1,0)
ONCATF ;Hines OIFO/GWB - Treatment @FAC (at this facility) stuffing ;06/15/11
"RTN","ONCATF",2,0)
 ;;2.11;ONCOLOGY;**19,25,27,36,40,42,46,51,53,56**;Mar 07, 1995;Build 10
"RTN","ONCATF",3,0)
 ;
"RTN","ONCATF",4,0)
NCDS ;SURG DX/STAGING PROC @FAC (165.5,58.4) 
"RTN","ONCATF",5,0)
 N COC D CHKCOC I (COC="00")!(COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=34)!(COC=35) D
"RTN","ONCATF",6,0)
 .S $P(^ONCO(165.5,D0,3.1),U,5)=$P($G(^ONCO(165.5,D0,3)),U,27)
"RTN","ONCATF",7,0)
 Q
"RTN","ONCATF",8,0)
 ;
"RTN","ONCATF",9,0)
NCDSDT ;SURG DX/STAGING PROC @FAC DATE (165.5,58.5)
"RTN","ONCATF",10,0)
 N COC D CHKCOC I (COC="00")!(COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=34)!(COC=35) D
"RTN","ONCATF",11,0)
 .S $P(^ONCO(165.5,D0,3.1),U,6)=$P($G(^ONCO(165.5,D0,3)),U,31)
"RTN","ONCATF",12,0)
 Q
"RTN","ONCATF",13,0)
 ;
"RTN","ONCATF",14,0)
DSPNCDS ;Display SURG DX/STAGING PROC @FAC (165.5,58.4)
"RTN","ONCATF",15,0)
 ;N COC D CHKCOC I (COC=20)!(COC=21)!(COC=22)!(COC=31)!(COC=32)!(COC=33)!(COC=36)!(COC=37) D  K TXNO,TXUNK,TXNUL S Y="@36" Q
"RTN","ONCATF",16,0)
 N COC D CHKCOC I (COC=31)!(COC=32)!(COC=33)!(COC=36)!(COC=37) D  K TXNO,TXUNK,TXNUL S Y="@36" Q   ;Patch 56 change
"RTN","ONCATF",17,0)
 .S NTX=1 W ! D NCDSATF^ONCNTX1 K NTX
"RTN","ONCATF",18,0)
 .I $G(DNCATF)=1 K DNCATF,TXNUL Q
"RTN","ONCATF",19,0)
 I $G(DNCATF)=1 K DNCATF,TXNUL S Y="@36" Q
"RTN","ONCATF",20,0)
 I (COC="00")!(COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=34)!(COC=35) G DIQ1
"RTN","ONCATF",21,0)
 I $G(TXNO)=1 S NTX=1 W ! D NCDSATF^ONCNTX1 K NTX,TXNO S Y="@36" Q
"RTN","ONCATF",22,0)
 I $G(TXUNK)=1 S NTX=1 W ! D NCDSATF^ONCUTX1 K NTX,TXUNK S Y="@36" Q
"RTN","ONCATF",23,0)
 I $G(TXNUL)=1 K TXNUL S Y="@36"
"RTN","ONCATF",24,0)
 Q
"RTN","ONCATF",25,0)
 ;
"RTN","ONCATF",26,0)
DIQ1 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF",27,0)
 S DA=D0,DIC="^ONCO(165.5,",DIQ="ONC(",DIQ(0)="E",DR="58.4;58.5"
"RTN","ONCATF",28,0)
 D EN^DIQ1
"RTN","ONCATF",29,0)
 W !!,$P(^DD(165.5,58.4,0),U,1),".....: "_$E(ONC(165.5,DA,58.4,"E"),1,47)
"RTN","ONCATF",30,0)
 W !,$P(^DD(165.5,58.5,0),U,1),": "_ONC(165.5,DA,58.5,"E")
"RTN","ONCATF",31,0)
 K TXNO,TXUNK,TXNUL S Y="@36"
"RTN","ONCATF",32,0)
 Q
"RTN","ONCATF",33,0)
 ;
"RTN","ONCATF",34,0)
SPSR ;SURGERY OF PRIMARY @FAC (R) (165.5,50.2)
"RTN","ONCATF",35,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",36,0)
 S $P(^ONCO(165.5,D0,3.1),U,7)=$P($G(^ONCO(165.5,D0,3)),U,38)
"RTN","ONCATF",37,0)
 Q
"RTN","ONCATF",38,0)
 ;
"RTN","ONCATF",39,0)
DSPSPSR ;Display SURGERY OF PRIMARY @FAC (R) (165.5,50.2)
"RTN","ONCATF",40,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@427" Q
"RTN","ONCATF",41,0)
 .S NTX=1 W ! D SURATFR^ONCNTX1 K NTX
"RTN","ONCATF",42,0)
 .I $G(DSATF)=1 K DSATF,TXNUL Q
"RTN","ONCATF",43,0)
 I $G(DSATF)=1 K DSATF,TXNUL S Y="@427" Q
"RTN","ONCATF",44,0)
 I COC'=37 D  Q
"RTN","ONCATF",45,0)
 .I $G(TXNO)=1 S NTX=1 W ! D SURATFR^ONCNTX1 K NTX,TXNO S Y="@427" Q
"RTN","ONCATF",46,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D SURATFR^ONCUTX1 K NTX,TXUNK S Y="@427" Q
"RTN","ONCATF",47,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@427" Q
"RTN","ONCATF",48,0)
 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF",49,0)
 S DA=D0,DIC="^ONCO(165.5,",DIQ="ONC(",DIQ(0)="E"
"RTN","ONCATF",50,0)
 S DR=50.2
"RTN","ONCATF",51,0)
 D EN^DIQ1
"RTN","ONCATF",52,0)
 I $G(DSATF)'=1 D
"RTN","ONCATF",53,0)
 .W !!,$P(^DD(165.5,50.2,0),U,1),"....: "_$E(ONC(165.5,DA,50.2,"E"),1,48)
"RTN","ONCATF",54,0)
 K DSATF,TXNO,TXUNK,TXNUL S Y="@427"
"RTN","ONCATF",55,0)
 Q
"RTN","ONCATF",56,0)
 ;
"RTN","ONCATF",57,0)
SPS ;SURGERY OF PRIMARY @FAC (F) (165.5,58.7)
"RTN","ONCATF",58,0)
 N SUUP
"RTN","ONCATF",59,0)
 S SUUP=1 D RFNS^ONCATF1
"RTN","ONCATF",60,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",61,0)
 S $P(^ONCO(165.5,D0,3.1),U,30)=$P($G(^ONCO(165.5,D0,3.1)),U,29)
"RTN","ONCATF",62,0)
 Q
"RTN","ONCATF",63,0)
 ;
"RTN","ONCATF",64,0)
SPSDT ;MOST DEFINITIVE SURG @FAC DATE (165.5,50.3)
"RTN","ONCATF",65,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",66,0)
 S $P(^ONCO(165.5,D0,3.1),U,8)=$P($G(^ONCO(165.5,D0,3)),U,1)
"RTN","ONCATF",67,0)
 Q
"RTN","ONCATF",68,0)
 ;
"RTN","ONCATF",69,0)
DSPSPS ;Display SURGERY OF PRIMARY @FAC (F) (165.5,58.7)
"RTN","ONCATF",70,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@43" Q
"RTN","ONCATF",71,0)
 .S NTX=1 W ! D SURATF^ONCNTX1 K NTX
"RTN","ONCATF",72,0)
 .I $G(DSATF)=1 K DSATF,TXNUL Q
"RTN","ONCATF",73,0)
 I $G(DSATF)=1 K DSATF,TXNUL S Y="@43" Q
"RTN","ONCATF",74,0)
 I COC'=37 D  Q
"RTN","ONCATF",75,0)
 .I $G(TXNO)=1 S NTX=1 W ! D SURATF^ONCNTX1 K NTX,TXNO S Y="@43" Q
"RTN","ONCATF",76,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D SURATF^ONCUTX1 K NTX,TXUNK S Y="@43" Q
"RTN","ONCATF",77,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@43" Q
"RTN","ONCATF",78,0)
 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF",79,0)
 S DA=D0,DIC="^ONCO(165.5,",DIQ="ONC(",DIQ(0)="E"
"RTN","ONCATF",80,0)
 S DR="58.7;50.3"
"RTN","ONCATF",81,0)
 D EN^DIQ1
"RTN","ONCATF",82,0)
 I $G(DSATF)'=1 D
"RTN","ONCATF",83,0)
 .W !!,"SURGERY OF PRIMARY @FAC.....(F): "_$E(ONC(165.5,DA,58.7,"E"),1,48)
"RTN","ONCATF",84,0)
 .W !,"MOST DEFINITIVE SURG @FAC DATE.: "_ONC(165.5,DA,50.3,"E") Q
"RTN","ONCATF",85,0)
 K DSATF,TXNO,TXUNK,TXNUL S Y="@43"
"RTN","ONCATF",86,0)
 Q
"RTN","ONCATF",87,0)
 ;
"RTN","ONCATF",88,0)
SCPR ;SCOPE OF LN SURGERY @FAC (R) (165.5,138.1)
"RTN","ONCATF",89,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",90,0)
 S $P(^ONCO(165.5,D0,3.1),U,9)=$P($G(^ONCO(165.5,D0,3)),U,40)
"RTN","ONCATF",91,0)
 Q
"RTN","ONCATF",92,0)
 ;
"RTN","ONCATF",93,0)
SCP ;SCOPE OF LN SURGERY @FAC (F) (165.5,138.5)
"RTN","ONCATF",94,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",95,0)
 S $P(^ONCO(165.5,D0,3.1),U,32)=$P($G(^ONCO(165.5,D0,3.1)),U,31)
"RTN","ONCATF",96,0)
 Q
"RTN","ONCATF",97,0)
 ;
"RTN","ONCATF",98,0)
SCPDT ;SCOPE OF LN SURGERY @FAC DATE (165.5,138.3)
"RTN","ONCATF",99,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",100,0)
 S $P(^ONCO(165.5,D0,3.1),U,23)=$P($G(^ONCO(165.5,D0,3.1)),U,22)
"RTN","ONCATF",101,0)
 Q
"RTN","ONCATF",102,0)
 ;
"RTN","ONCATF",103,0)
NUMND ;NUMBER OF LN REMOVED @FAC (R) (165.5,140.1)
"RTN","ONCATF",104,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",105,0)
 S $P(^ONCO(165.5,D0,3.1),U,11)=$P($G(^ONCO(165.5,D0,3)),U,42)
"RTN","ONCATF",106,0)
 Q
"RTN","ONCATF",107,0)
 ;
"RTN","ONCATF",108,0)
DSPSCPR ;Display SCOPE OF LN SURGERY @FAC (R) (165.5,138.1)
"RTN","ONCATF",109,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@139" Q
"RTN","ONCATF",110,0)
 .S NTX=1 W ! D NODATFR^ONCNTX1 K NTX
"RTN","ONCATF",111,0)
 .I $G(DSCATF)=1 K DSCATF,TXNUL Q
"RTN","ONCATF",112,0)
 I $G(DSCATF)=1 K DSCATF,TXNUL S Y="@139" Q
"RTN","ONCATF",113,0)
 I COC'=37 D  Q
"RTN","ONCATF",114,0)
 .I $G(TXNO)=1 S NTX=1 W ! D NODATFR^ONCNTX1 K NTX,TXNO S Y="@139" Q
"RTN","ONCATF",115,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D NODATFR^ONCUTX1 K NTX,TXUNK S Y="@139" Q
"RTN","ONCATF",116,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@139" Q
"RTN","ONCATF",117,0)
 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF",118,0)
 S DA=D0,DIC="^ONCO(165.5,",DIQ="ONC(",DIQ(0)="E"
"RTN","ONCATF",119,0)
 S DR="138.1;140.1"
"RTN","ONCATF",120,0)
 D EN^DIQ1
"RTN","ONCATF",121,0)
 I $G(DSCATF)'=1 D
"RTN","ONCATF",122,0)
 .W !!,$P(^DD(165.5,138.1,0),U,1),"...: "_$E(ONC(165.5,DA,138.1,"E"),1,48)
"RTN","ONCATF",123,0)
 .W !,$P(^DD(165.5,140.1,0),U,1),"..: "_ONC(165.5,DA,140.1,"E")
"RTN","ONCATF",124,0)
 K DSCATF,TXNO,TXUNK,TXNUL S Y="@139" Q
"RTN","ONCATF",125,0)
 ;
"RTN","ONCATF",126,0)
DSPSCP ;Display SCOPE OF LN SURGERY @FAC (F) (165.5,138.5)
"RTN","ONCATF",127,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@46" Q
"RTN","ONCATF",128,0)
 .S NTX=1 W ! D NODEATF^ONCNTX1 K NTX
"RTN","ONCATF",129,0)
 .I $G(DSCATF)=1 K DSCATF,TXNUL Q
"RTN","ONCATF",130,0)
 I $G(DSCATF)=1 K DSCATF,TXNUL S Y="@46" Q
"RTN","ONCATF",131,0)
 I COC'=37 D  Q
"RTN","ONCATF",132,0)
 .I $G(TXNO)=1 S NTX=1 W ! D NODEATF^ONCNTX1 K NTX,TXNO S Y="@46" Q
"RTN","ONCATF",133,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D NODEATF^ONCUTX1 K NTX,TXUNK S Y="@46" Q
"RTN","ONCATF",134,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@46" Q
"RTN","ONCATF",135,0)
 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF",136,0)
 S DA=D0,DIC="^ONCO(165.5,",DIQ="ONC(",DIQ(0)="E"
"RTN","ONCATF",137,0)
 S DR="138.5;138.3"
"RTN","ONCATF",138,0)
 D EN^DIQ1
"RTN","ONCATF",139,0)
 I $G(DSCATF)'=1 D
"RTN","ONCATF",140,0)
 .W !!,$P(^DD(165.5,138.5,0),U,1),"....: "_$E(ONC(165.5,DA,138.5,"E"),1,48)
"RTN","ONCATF",141,0)
 .W !,$P(^DD(165.5,138.3,0),U,1),".: "_ONC(165.5,DA,138.3,"E")
"RTN","ONCATF",142,0)
 K DSCATF,TXNO,TXUNK,TXNUL S Y="@46" Q
"RTN","ONCATF",143,0)
 ;
"RTN","ONCATF",144,0)
SOSNR ;SURG PROC/OTHER SITE @FAC (R) (165.5,139)
"RTN","ONCATF",145,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",146,0)
 S $P(^ONCO(165.5,D0,3.1),U,10)=$P($G(^ONCO(165.5,D0,3)),U,41)
"RTN","ONCATF",147,0)
 Q
"RTN","ONCATF",148,0)
 ;
"RTN","ONCATF",149,0)
SOSN ;SURG PROC/OTHER SITE @FAC (F) (165.5,139.5)
"RTN","ONCATF",150,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",151,0)
 S $P(^ONCO(165.5,D0,3.1),U,34)=$P($G(^ONCO(165.5,D0,3.1)),U,33)
"RTN","ONCATF",152,0)
 Q
"RTN","ONCATF",153,0)
 ;
"RTN","ONCATF",154,0)
SOSNDT ;SURG PROC/OTHER SITE @FAC DATE (165.5,139.3)
"RTN","ONCATF",155,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF",156,0)
 S $P(^ONCO(165.5,D0,3.1),U,25)=$P($G(^ONCO(165.5,D0,3.1)),U,24)
"RTN","ONCATF",157,0)
 Q
"RTN","ONCATF",158,0)
 ;
"RTN","ONCATF",159,0)
DSPSOSR ;Display SURG PPROC/OTHER SITE @FAC (R) (165.5,139.1)
"RTN","ONCATF",160,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@428" Q
"RTN","ONCATF",161,0)
 .S NTX=1 W ! D SOSATFR^ONCNTX1 K NTX
"RTN","ONCATF",162,0)
 .I $G(DSOATF)=1 K DSOATF,TXNUL Q
"RTN","ONCATF",163,0)
 I $G(DSOATF)=1 K DSOATF,TXNUL S Y="@428" Q
"RTN","ONCATF",164,0)
 I COC'=37 D  Q
"RTN","ONCATF",165,0)
 .I $G(TXNO)=1 S NTX=1 W ! D SOSATFR^ONCNTX1 K NTX,TXNO S Y="@428" Q
"RTN","ONCATF",166,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D SOSATFR^ONCUTX1 K NTX,TXUNK S Y="@428" Q
"RTN","ONCATF",167,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@428" Q
"RTN","ONCATF",168,0)
 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF",169,0)
 S DA=D0,DIC="^ONCO(165.5,",DIQ="ONC(",DIQ(0)="E"
"RTN","ONCATF",170,0)
 S DR=139.1
"RTN","ONCATF",171,0)
 D EN^DIQ1
"RTN","ONCATF",172,0)
 I $G(DSOATF)'=1 D
"RTN","ONCATF",173,0)
 .W !,$P(^DD(165.5,139.1,0),U,1),": "_ONC(165.5,DA,139.1,"E") Q
"RTN","ONCATF",174,0)
 K DSOATF,TXNO,TXUNK,TXNUL S Y="@428" Q
"RTN","ONCATF",175,0)
 ;
"RTN","ONCATF",176,0)
DSPSOSN ;Display SURG PPROC/OTHER SITE @FAC (F) (165.5,139.5)
"RTN","ONCATF",177,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@48" Q
"RTN","ONCATF",178,0)
 .S NTX=1 W ! D SOSNATF^ONCNTX1 K NTX
"RTN","ONCATF",179,0)
 .I $G(DSOATF)=1 K DSOATF,TXNUL Q
"RTN","ONCATF",180,0)
 I $G(DSOATF)=1 K DSOATF,TXNUL S Y="@48" Q
"RTN","ONCATF",181,0)
 I COC'=37 D  Q
"RTN","ONCATF",182,0)
 .I $G(TXNO)=1 S NTX=1 W ! D SOSNATF^ONCNTX1 K NTX,TXNO S Y="@48" Q
"RTN","ONCATF",183,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D SOSNATF^ONCUTX1 K NTX,TXUNK S Y="@48" Q
"RTN","ONCATF",184,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@48" Q
"RTN","ONCATF",185,0)
 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF",186,0)
 S DA=D0,DIC="^ONCO(165.5,",DIQ="ONC(",DIQ(0)="E"
"RTN","ONCATF",187,0)
 S DR="139.5;139.3"
"RTN","ONCATF",188,0)
 D EN^DIQ1
"RTN","ONCATF",189,0)
 I $G(DSOATF)'=1 D
"RTN","ONCATF",190,0)
 .W !!,$P(^DD(165.5,139.5,0),U,1),": "_$E(ONC(165.5,DA,139.5,"E"),1,48)
"RTN","ONCATF",191,0)
 .W !,$P(^DD(165.5,139.3,0),U,1),": "_ONC(165.5,DA,139.3,"E") Q
"RTN","ONCATF",192,0)
 K DSOATF,TXNO,TXUNK,TXNUL S Y="@48" Q
"RTN","ONCATF",193,0)
 ;
"RTN","ONCATF",194,0)
CHKCOC ;CLASS OF CASE
"RTN","ONCATF",195,0)
 S COC=$E($$GET1^DIQ(165.5,DA,.04),1,2)
"RTN","ONCATF",196,0)
 Q
"RTN","ONCATF",197,0)
 ;
"RTN","ONCATF",198,0)
CLEANUP ;Cleanup
"RTN","ONCATF",199,0)
 K D0,Y
"RTN","ONCCSOT")
0^16^B39113425^B33907749
"RTN","ONCCSOT",1,0)
ONCCSOT ;Hines OIFO/GWB - Collaborative Staging OUTPUT TRANSFORMS ;06/23/10
"RTN","ONCCSOT",2,0)
 ;;2.11;ONCOLOGY;**40,51,56**;Mar 07, 1995;Build 10
"RTN","ONCCSOT",3,0)
 ;
"RTN","ONCCSOT",4,0)
TOT ;DERIVED AJCC-6 T (165.5,160) OUTPUT TRANSFORM
"RTN","ONCCSOT",5,0)
 ;DERIVED AJCC-7 T (165.5,160.7) OUTPUT TRANSFORM
"RTN","ONCCSOT",6,0)
 I (Y=99)!(Y=999) S Y="TX" Q
"RTN","ONCCSOT",7,0)
 I (Y="00")!(Y="000") S Y="T0" Q
"RTN","ONCCSOT",8,0)
 I (Y="01")!(Y="010") S Y="Ta" Q
"RTN","ONCCSOT",9,0)
 I (Y="05")!(Y="050") S Y="Tis" Q
"RTN","ONCCSOT",10,0)
 I (Y="06")!(Y="060") S Y="Tispu (urethra only)" Q
"RTN","ONCCSOT",11,0)
 I (Y="07")!(Y="070") S Y="Tispd (urethra only)" Q
"RTN","ONCCSOT",12,0)
 I (Y=10)!(Y=100) S Y="T1" Q
"RTN","ONCCSOT",13,0)
 I (Y=11)!(Y=110) S Y="T1mic" Q
"RTN","ONCCSOT",14,0)
 I (Y=19)!(Y=199) S Y="T1 NOS" Q
"RTN","ONCCSOT",15,0)
 I Y=191 S Y="T1 NOS(s)" Q
"RTN","ONCCSOT",16,0)
 I Y=192 S Y="T1 NOS(m)" Q
"RTN","ONCCSOT",17,0)
 I (Y=12)!(Y=120) S Y="T1a" Q
"RTN","ONCCSOT",18,0)
 I Y=121 S Y="T1a(s)" Q
"RTN","ONCCSOT",19,0)
 I Y=122 S Y="T1a(m)" Q
"RTN","ONCCSOT",20,0)
 I (Y=13)!(Y=130) S Y="T1a1" Q
"RTN","ONCCSOT",21,0)
 I (Y=14)!(Y=140) S Y="T1a2" Q
"RTN","ONCCSOT",22,0)
 I (Y=15)!(Y=150) S Y="T1b" Q
"RTN","ONCCSOT",23,0)
 I Y=151 S Y="T1b(s)" Q
"RTN","ONCCSOT",24,0)
 I Y=152 S Y="T1b(m)" Q
"RTN","ONCCSOT",25,0)
 I (Y=16)!(Y=160) S Y="T1b1" Q
"RTN","ONCCSOT",26,0)
 I (Y=17)!(Y=170) S Y="T1b2" Q
"RTN","ONCCSOT",27,0)
 I (Y=18)!(Y=180) S Y="T1c" Q
"RTN","ONCCSOT",28,0)
 I Y=181 S Y="T1d" Q
"RTN","ONCCSOT",29,0)
 I (Y=20)!(Y=200) S Y="T2" Q
"RTN","ONCCSOT",30,0)
 I Y=201 S Y="T2(s)" Q
"RTN","ONCCSOT",31,0)
 I Y=202 S Y="T2(m)" Q
"RTN","ONCCSOT",32,0)
 I (Y=29)!(Y=299) S Y="T2 NOS" Q
"RTN","ONCCSOT",33,0)
 I (Y=21)!(Y=210) S Y="T2a" Q
"RTN","ONCCSOT",34,0)
 I Y=211 S Y="T2a1" Q
"RTN","ONCCSOT",35,0)
 I Y=212 S Y="T2a2" Q
"RTN","ONCCSOT",36,0)
 I Y=213 S Y="T2a NOS" Q
"RTN","ONCCSOT",37,0)
 I (Y=22)!(Y=220) S Y="T2b" Q
"RTN","ONCCSOT",38,0)
 I (Y=23)!(Y=230) S Y="T2c" Q
"RTN","ONCCSOT",39,0)
 I Y=240 S Y="T2d" Q
"RTN","ONCCSOT",40,0)
 I (Y=30)!(Y=300) S Y="T3" Q
"RTN","ONCCSOT",41,0)
 I Y=301 S Y="T3(s)" Q
"RTN","ONCCSOT",42,0)
 I Y=302 S Y="T3(m)" Q
"RTN","ONCCSOT",43,0)
 I (Y=39)!(Y=399) S Y="T3 NOS" Q
"RTN","ONCCSOT",44,0)
 I (Y=31)!(Y=310) S Y="T3a" Q
"RTN","ONCCSOT",45,0)
 I (Y=32)!(Y=320) S Y="T3b" Q
"RTN","ONCCSOT",46,0)
 I (Y=33)!(Y=330) S Y="T3c" Q
"RTN","ONCCSOT",47,0)
 I Y=340 S Y="T3d" Q
"RTN","ONCCSOT",48,0)
 I (Y=40)!(Y=400) S Y="T4" Q
"RTN","ONCCSOT",49,0)
 I (Y=49)!(Y=499) S Y="T4 NOS" Q
"RTN","ONCCSOT",50,0)
 I Y=491 S Y="T4 NOS(s)" Q
"RTN","ONCCSOT",51,0)
 I Y=492 S Y="T4 NOS(m)" Q
"RTN","ONCCSOT",52,0)
 I (Y=41)!(Y=410) S Y="T4a" Q
"RTN","ONCCSOT",53,0)
 I Y=411 S Y="T4a(s)" Q
"RTN","ONCCSOT",54,0)
 I Y=412 S Y="T4a(m)" Q
"RTN","ONCCSOT",55,0)
 I (Y=42)!(Y=420) S Y="T4b" Q
"RTN","ONCCSOT",56,0)
 I Y=421 S Y="T4b(s)" Q
"RTN","ONCCSOT",57,0)
 I Y=422 S Y="T4b(m)" Q
"RTN","ONCCSOT",58,0)
 I (Y=43)!(Y=430) S Y="T4c" Q
"RTN","ONCCSOT",59,0)
 I (Y=44)!(Y=440) S Y="T4d" Q
"RTN","ONCCSOT",60,0)
 I Y=450 S Y="T4e" Q
"RTN","ONCCSOT",61,0)
 I (Y=80)!(Y=800) S Y="T1a NOS" Q
"RTN","ONCCSOT",62,0)
 I (Y=81)!(Y=810) S Y="T1b NOS" Q
"RTN","ONCCSOT",63,0)
 I (Y=88)!(Y=888) S Y="Not applicable" Q
"RTN","ONCCSOT",64,0)
 Q
"RTN","ONCCSOT",65,0)
 ;
"RTN","ONCCSOT",66,0)
NOT ;DERIVED AJCC-6 N (165.5,162) OUTPUT TRANSFORM
"RTN","ONCCSOT",67,0)
 ;DERIVED AJCC-7 N (165.5,162.7) OUTPUT TRANSFORM
"RTN","ONCCSOT",68,0)
 I (Y=99)!(Y=999) S Y="NX" Q
"RTN","ONCCSOT",69,0)
 I (Y="00")!(Y="000") S Y="N0" Q
"RTN","ONCCSOT",70,0)
 I (Y="01")!(Y="010") S Y="N0(i-)" Q
"RTN","ONCCSOT",71,0)
 I (Y="02")!(Y="020") S Y="N0(i+)" Q
"RTN","ONCCSOT",72,0)
 I (Y="03")!(Y="030") S Y="N0(mol-)" Q
"RTN","ONCCSOT",73,0)
 I (Y="04")!(Y="040") S Y="N0(mol+)" Q
"RTN","ONCCSOT",74,0)
 ;I Y="09" S Y="N0 NOS" Q ;No longer used
"RTN","ONCCSOT",75,0)
 I (Y=10)!(Y=100) S Y="N1" Q
"RTN","ONCCSOT",76,0)
 I (Y=19)!(Y=199) S Y="N1 NOS" Q
"RTN","ONCCSOT",77,0)
 I (Y=11)!(Y=110) S Y="N1a" Q
"RTN","ONCCSOT",78,0)
 I (Y=12)!(Y=120) S Y="N1b" Q
"RTN","ONCCSOT",79,0)
 I (Y=13)!(Y=130) S Y="N1c" Q
"RTN","ONCCSOT",80,0)
 I (Y=18)!(Y=180) S Y="N1mi" Q
"RTN","ONCCSOT",81,0)
 I (Y=20)!(Y=200) S Y="N2" Q
"RTN","ONCCSOT",82,0)
 I (Y=29)!(Y=299) S Y="N2 NOS" Q
"RTN","ONCCSOT",83,0)
 I (Y=21)!(Y=210) S Y="N2a" Q
"RTN","ONCCSOT",84,0)
 I (Y=22)!(Y=220) S Y="N2b" Q
"RTN","ONCCSOT",85,0)
 I (Y=23)!(Y=230) S Y="N2c" Q
"RTN","ONCCSOT",86,0)
 I (Y=30)!(Y=300) S Y="N3" Q
"RTN","ONCCSOT",87,0)
 I (Y=39)!(Y=399) S Y="N3 NOS" Q
"RTN","ONCCSOT",88,0)
 I (Y=31)!(Y=310) S Y="N3a" Q
"RTN","ONCCSOT",89,0)
 I (Y=32)!(Y=320) S Y="N3b" Q
"RTN","ONCCSOT",90,0)
 I (Y=33)!(Y=330) S Y="N3c" Q
"RTN","ONCCSOT",91,0)
 I Y=400 S Y="N4" Q
"RTN","ONCCSOT",92,0)
 I (Y=88)!(Y=888) S Y="Not applicable" Q
"RTN","ONCCSOT",93,0)
 Q
"RTN","ONCCSOT",94,0)
 ;
"RTN","ONCCSOT",95,0)
MOT ;DERIVED AJCC-6 M (165.5,164) OUTPUT TRANSFORM
"RTN","ONCCSOT",96,0)
 ;DERIVED AJCC-7 M (165.5,164.7) OUTPUT TRANSFORM
"RTN","ONCCSOT",97,0)
 I (Y=99)!(Y=999) S Y="MX" Q
"RTN","ONCCSOT",98,0)
 I (Y="00")!(Y="000") S Y="M0" Q
"RTN","ONCCSOT",99,0)
 I Y="010" S Y="M0(i+)" Q
"RTN","ONCCSOT",100,0)
 I (Y=10)!(Y=100) S Y="M1" Q
"RTN","ONCCSOT",101,0)
 I (Y=11)!(Y=110) S Y="M1a" Q
"RTN","ONCCSOT",102,0)
 I (Y=12)!(Y=120) S Y="M1b" Q
"RTN","ONCCSOT",103,0)
 I (Y=13)!(Y=130) S Y="M1c" Q
"RTN","ONCCSOT",104,0)
 I Y=140 S Y="M1d" Q
"RTN","ONCCSOT",105,0)
 I Y=150 S Y="M1e" Q
"RTN","ONCCSOT",106,0)
 I (Y=19)!(Y=199) S Y="M1 NOS" Q
"RTN","ONCCSOT",107,0)
 I (Y=88)!(Y=888) S Y="Not applicable" Q
"RTN","ONCCSOT",108,0)
 Q
"RTN","ONCCSOT",109,0)
 ;
"RTN","ONCCSOT",110,0)
SGOT ;DERIVED AJCC-6 STAGE GROUP (165.5,166) OUTPUT TRANSFORM
"RTN","ONCCSOT",111,0)
 ;DERIVED AJCC-7 STAGE GROUP (165.5,166.7) OUTPUT TRANSFORM
"RTN","ONCCSOT",112,0)
 I (Y="00")!(Y="000") S Y="Stage 0" Q
"RTN","ONCCSOT",113,0)
 I (Y="01")!(Y="010") S Y="Stage 0a" Q
"RTN","ONCCSOT",114,0)
 I (Y="02")!(Y="020") S Y="Stage 0is" Q
"RTN","ONCCSOT",115,0)
 I (Y=10)!(Y=100) S Y="Stage I" Q
"RTN","ONCCSOT",116,0)
 I (Y=11)!(Y=110) S Y="Stage I NOS" Q
"RTN","ONCCSOT",117,0)
 I (Y=12)!(Y=120) S Y="Stage IA" Q
"RTN","ONCCSOT",118,0)
 I (Y=13)!(Y=130) S Y="Stage IA1" Q
"RTN","ONCCSOT",119,0)
 I (Y=14)!(Y=140) S Y="Stage IA2" Q
"RTN","ONCCSOT",120,0)
 I Y=121 S Y="Stage IA NOS" Q
"RTN","ONCCSOT",121,0)
 I (Y=15)!(Y=150) S Y="Stage IB" Q
"RTN","ONCCSOT",122,0)
 I (Y=16)!(Y=160) S Y="Stage IB1" Q
"RTN","ONCCSOT",123,0)
 I (Y=17)!(Y=170) S Y="Stage IB2" Q
"RTN","ONCCSOT",124,0)
 I Y=151 S Y="Stage IB NOS" Q
"RTN","ONCCSOT",125,0)
 I (Y=18)!(Y=180) S Y="Stage IC" Q
"RTN","ONCCSOT",126,0)
 I (Y=19)!(Y=190) S Y="Stage IS" Q
"RTN","ONCCSOT",127,0)
 I (Y=23)!(Y=230) S Y="Stage ISA (lymphoma only)" Q
"RTN","ONCCSOT",128,0)
 I (Y=24)!(Y=240) S Y="Stage ISB (lymphoma only)" Q
"RTN","ONCCSOT",129,0)
 I (Y=20)!(Y=200) S Y="Stage IEA (lymphoma only)" Q
"RTN","ONCCSOT",130,0)
 I (Y=21)!(Y=210) S Y="Stage IEB (lymphoma only)" Q
"RTN","ONCCSOT",131,0)
 I (Y=22)!(Y=220) S Y="Stage IE (lymphoma only)" Q
"RTN","ONCCSOT",132,0)
 I (Y=30)!(Y=300) S Y="Stage II" Q
"RTN","ONCCSOT",133,0)
 I (Y=31)!(Y=310) S Y="Stage II NOS" Q
"RTN","ONCCSOT",134,0)
 I (Y=32)!(Y=320) S Y="Stage IIA" Q
"RTN","ONCCSOT",135,0)
 I Y=321 S Y="Stage IIA NOS" Q
"RTN","ONCCSOT",136,0)
 I Y=322 S Y="Stage IIA1" Q
"RTN","ONCCSOT",137,0)
 I Y=323 S Y="Stage IIA2" Q
"RTN","ONCCSOT",138,0)
 I (Y=33)!(Y=330) S Y="Stage IIB" Q
"RTN","ONCCSOT",139,0)
 I (Y=34)!(Y=340) S Y="Stage IIC" Q
"RTN","ONCCSOT",140,0)
 I (Y=35)!(Y=350) S Y="Stage IIEA (lymphoma only)" Q
"RTN","ONCCSOT",141,0)
 I (Y=36)!(Y=360) S Y="Stage IIEB (lymphoma only)" Q
"RTN","ONCCSOT",142,0)
 I (Y=37)!(Y=370) S Y="Stage IIE (lymphoma only)" Q
"RTN","ONCCSOT",143,0)
 I (Y=38)!(Y=380) S Y="Stage IISA (lymphoma only)" Q
"RTN","ONCCSOT",144,0)
 I (Y=39)!(Y=390) S Y="Stage IISB (lymphoma only)" Q
"RTN","ONCCSOT",145,0)
 I (Y=40)!(Y=400) S Y="Stage IIS (lymphoma only)" Q
"RTN","ONCCSOT",146,0)
 I (Y=41)!(Y=410) S Y="Stage IIESA (lymphoma only)" Q
"RTN","ONCCSOT",147,0)
 I (Y=42)!(Y=420) S Y="Stage IIESB (lymphoma only)" Q
"RTN","ONCCSOT",148,0)
 I (Y=43)!(Y=430) S Y="Stage IIES (lymphoma only)" Q
"RTN","ONCCSOT",149,0)
 I (Y=50)!(Y=500) S Y="Stage III" Q
"RTN","ONCCSOT",150,0)
 I (Y=51)!(Y=510) S Y="Stage III NOS" Q
"RTN","ONCCSOT",151,0)
 I (Y=52)!(Y=520) S Y="Stage IIIA" Q
"RTN","ONCCSOT",152,0)
 I (Y=53)!(Y=530) S Y="Stage IIIB" Q
"RTN","ONCCSOT",153,0)
 I (Y=54)!(Y=540) S Y="Stage IIIC" Q
"RTN","ONCCSOT",154,0)
 I Y=541 S Y="Stage IIIC1" Q
"RTN","ONCCSOT",155,0)
 I Y=542 S Y="Stage IIIC2" Q
"RTN","ONCCSOT",156,0)
 I (Y=55)!(Y=550) S Y="Stage IIIEA (lymphoma only)" Q
"RTN","ONCCSOT",157,0)
 I (Y=56)!(Y=560) S Y="Stage IIIEB (lymphoma only)" Q
"RTN","ONCCSOT",158,0)
 I (Y=57)!(Y=570) S Y="Stage IIIE (lymphoma only)" Q
"RTN","ONCCSOT",159,0)
 I (Y=58)!(Y=580) S Y="Stage IIISA (lymphoma only)" Q
"RTN","ONCCSOT",160,0)
 I (Y=59)!(Y=590) S Y="Stage IIISB (lymphoma only)" Q
"RTN","ONCCSOT",161,0)
 I (Y=60)!(Y=600) S Y="Stage IIIS (lymphoma only)" Q
"RTN","ONCCSOT",162,0)
 I (Y=61)!(Y=610) S Y="Stage IIIESA (lymphoma only)" Q
"RTN","ONCCSOT",163,0)
 I (Y=62)!(Y=620) S Y="Stage IIIESB (lymphoma only)" Q
"RTN","ONCCSOT",164,0)
 I (Y=63)!(Y=630) S Y="Stage IIIES (lymphoma only)" Q
"RTN","ONCCSOT",165,0)
 I (Y=70)!(Y=700) S Y="Stage IV" Q
"RTN","ONCCSOT",166,0)
 I (Y=71)!(Y=710) S Y="Stage IV NOS" Q
"RTN","ONCCSOT",167,0)
 I (Y=72)!(Y=720) S Y="Stage IVA" Q
"RTN","ONCCSOT",168,0)
 I Y=721 S Y="Stage IVA1" Q
"RTN","ONCCSOT",169,0)
 I Y=722 S Y="Stage IVA2" Q
"RTN","ONCCSOT",170,0)
 I (Y=73)!(Y=730) S Y="Stage IVB" Q
"RTN","ONCCSOT",171,0)
 I (Y=74)!(Y=740) S Y="Stage IVC" Q
"RTN","ONCCSOT",172,0)
 I (Y=88)!(Y=888) S Y="Not applicable" Q
"RTN","ONCCSOT",173,0)
 I (Y=90)!(Y=900) S Y="Stage Occult" Q
"RTN","ONCCSOT",174,0)
 I (Y=99)!(Y=999) S Y="Stage Unknown"
"RTN","ONCCSOT",175,0)
 Q
"RTN","ONCCSOT",176,0)
 ;
"RTN","ONCCSOT",177,0)
CLEANUP ;Cleanup
"RTN","ONCCSOT",178,0)
 K Y
"RTN","ONCFUNC")
0^4^B42640935^B42388404
"RTN","ONCFUNC",1,0)
ONCFUNC ;Hines OIFO/GWB - OncoTrax functions ;05/03/12
"RTN","ONCFUNC",2,0)
 ;;2.11;ONCOLOGY;**24,25,26,27,28,30,32,33,35,36,41,49,51,56**;Mar 07, 1995;Build 10
"RTN","ONCFUNC",3,0)
 ;rvd - 05/03/12 p56.  Use ICD API (#3990) instead of direct global read.
"RTN","ONCFUNC",4,0)
 ;
"RTN","ONCFUNC",5,0)
SHN() ;STATE HOSPITAL NUMBER (160.1,1.03)
"RTN","ONCFUNC",6,0)
 N OSP,SHN
"RTN","ONCFUNC",7,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCFUNC",8,0)
 I OSP="" S OSP=$O(^ONCO(160.1,0))
"RTN","ONCFUNC",9,0)
 S SHN=$$GET1^DIQ(160.1,OSP,1.03,"I")
"RTN","ONCFUNC",10,0)
 Q SHN
"RTN","ONCFUNC",11,0)
 ;
"RTN","ONCFUNC",12,0)
IIN() ;INSTITUTION ID NUMBER (160.1,27)
"RTN","ONCFUNC",13,0)
 N IIN,OSP
"RTN","ONCFUNC",14,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCFUNC",15,0)
 I OSP="" S OSP=$O(^ONCO(160.1,0))
"RTN","ONCFUNC",16,0)
 S IIN=$$GET1^DIQ(160.1,OSP,27,"I")
"RTN","ONCFUNC",17,0)
 S IIN=$$GET1^DIQ(160.19,IIN,.01,"I")
"RTN","ONCFUNC",18,0)
 Q IIN
"RTN","ONCFUNC",19,0)
 ;
"RTN","ONCFUNC",20,0)
FLNAME(NAME) ;COMPUTED EXPRESSION for FIRST-LAST (160,.012)
"RTN","ONCFUNC",21,0)
 N DFN,FIRST,LAST,MIDDLE,PL,SUFFIX,TNAME
"RTN","ONCFUNC",22,0)
 S TNAME=NAME,DFN=D0
"RTN","ONCFUNC",23,0)
 S LAST=$P(TNAME,","),TNAME=$P(TNAME,",",2)
"RTN","ONCFUNC",24,0)
 S FIRST=$P(TNAME," "),MIDDLE=$P(TNAME," ",2)
"RTN","ONCFUNC",25,0)
 S SUFFIX=$P(TNAME," ",3)
"RTN","ONCFUNC",26,0)
 I MIDDLE["""" S MIDDLE=""
"RTN","ONCFUNC",27,0)
 S TNAME=FIRST_" "_MIDDLE_" "_LAST_" "_SUFFIX
"RTN","ONCFUNC",28,0)
SP I $F(TNAME,"  ") S PL=$F(TNAME,"  "),TNAME=$E(TNAME,1,PL-2)_$E(TNAME,PL,$L(TNAME)) G SP
"RTN","ONCFUNC",29,0)
 Q TNAME
"RTN","ONCFUNC",30,0)
 ;
"RTN","ONCFUNC",31,0)
DIV(IEN) ;DIVISION (165.5,2000)
"RTN","ONCFUNC",32,0)
 N DIV
"RTN","ONCFUNC",33,0)
 S DIV=$G(^ONCO(165.5,IEN,"DIV"))
"RTN","ONCFUNC",34,0)
 Q DIV
"RTN","ONCFUNC",35,0)
 ;
"RTN","ONCFUNC",36,0)
SUSDIV(IEN,SUSIEN) ;DIVISION (160,30)
"RTN","ONCFUNC",37,0)
 N DIV
"RTN","ONCFUNC",38,0)
 S DIV=$P($G(^ONCO(160,IEN,"SUS",SUSIEN,0)),U,4)
"RTN","ONCFUNC",39,0)
 Q DIV
"RTN","ONCFUNC",40,0)
 ;
"RTN","ONCFUNC",41,0)
PFTD(IEN) ;Primaries for this division
"RTN","ONCFUNC",42,0)
 N PFTD,PRI
"RTN","ONCFUNC",43,0)
 S PFTD="N"
"RTN","ONCFUNC",44,0)
 S PRI=0 F  S PRI=$O(^ONCO(165.5,"C",IEN,PRI)) Q:PRI'>0  I $P($G(^ONCO(165.5,PRI,"DIV")),U,1)=DUZ(2) S PFTD="Y"
"RTN","ONCFUNC",45,0)
 Q PFTD
"RTN","ONCFUNC",46,0)
 ;
"RTN","ONCFUNC",47,0)
PRICNT ;TOTAL PRIMARIES FOR PATIENT (160,17)
"RTN","ONCFUNC",48,0)
 S PRI=0,PRICNT=0 F  S PRI=$O(^ONCO(165.5,"C",D0,PRI)) Q:PRI'>0  I $P($G(^ONCO(165.5,PRI,"DIV")),U,1)=DUZ(2) D
"RTN","ONCFUNC",49,0)
 .S PRICNT=PRICNT+1
"RTN","ONCFUNC",50,0)
 S X=PRICNT
"RTN","ONCFUNC",51,0)
 K PRI,PRICNT
"RTN","ONCFUNC",52,0)
 Q
"RTN","ONCFUNC",53,0)
 ;
"RTN","ONCFUNC",54,0)
DIDIV(IEN) ;Disease Index DIVISION screen
"RTN","ONCFUNC",55,0)
 ;Supported by IAs #417 and #2028
"RTN","ONCFUNC",56,0)
 N DIVMATCH
"RTN","ONCFUNC",57,0)
 S DIVMATCH="N"
"RTN","ONCFUNC",58,0)
 S VIPNT=$P($G(^AUPNVPOV(D0,0)),U,3) G:VIPNT="" DIDIVEX
"RTN","ONCFUNC",59,0)
 S HLPNT=$P($G(^AUPNVSIT(VIPNT,0)),U,22) G:HLPNT="" DIDIVEX
"RTN","ONCFUNC",60,0)
 S MCPNT=$P($G(^SC(HLPNT,0)),U,15) G:MCPNT="" DIDIVEX
"RTN","ONCFUNC",61,0)
 S INPNT=$P($G(^DG(40.8,MCPNT,0)),U,7)
"RTN","ONCFUNC",62,0)
 I (INPNT=DUZ(2))!(AFLDIV[INPNT) S DIVMATCH="Y"
"RTN","ONCFUNC",63,0)
DIDIVEX K HLPNT,INPNT,MCPNT,VIPNT
"RTN","ONCFUNC",64,0)
 Q DIVMATCH
"RTN","ONCFUNC",65,0)
 ;
"RTN","ONCFUNC",66,0)
HIST(IEN,HSTFLD,HISTNAM,ICDFILE,ICDNUM) ;
"RTN","ONCFUNC",67,0)
 ;Histology ICD-O-2 (165.5,22) or Histology ICD-O-3 (165.5,22.3)
"RTN","ONCFUNC",68,0)
 N HISTICD,HNODE,ONCDTDX
"RTN","ONCFUNC",69,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",70,0)
 S ICDNUM=3 I ONCDTDX<3010000 S ICDNUM=2
"RTN","ONCFUNC",71,0)
 S HNODE=$S(ICDNUM=3:2.2,1:2),ICDFILE=$S(ICDNUM=3:169.3,1:164.1)
"RTN","ONCFUNC",72,0)
 S HSTFLD=$S(ICDNUM=3:22.3,1:22)
"RTN","ONCFUNC",73,0)
 S HISTICD=$P($G(^ONCO(165.5,IEN,HNODE)),U,3)
"RTN","ONCFUNC",74,0)
 S HISTNAM=""
"RTN","ONCFUNC",75,0)
 I HISTICD'="" S HISTNAM=$P($G(^ONCO(ICDFILE,HISTICD,0)),U,1)
"RTN","ONCFUNC",76,0)
 Q HISTICD
"RTN","ONCFUNC",77,0)
 ;
"RTN","ONCFUNC",78,0)
LYMPHOMA(IEN) ;Hodgkin and non-Hodgkin Lymphomas
"RTN","ONCFUNC",79,0)
 N LYMPHOMA
"RTN","ONCFUNC",80,0)
 S LYMPHOMA=0
"RTN","ONCFUNC",81,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",82,0)
 S HSTICD=$$HIST^ONCFUNC(IEN)
"RTN","ONCFUNC",83,0)
 S HST123=$E(HSTICD,1,3)
"RTN","ONCFUNC",84,0)
 I ONCDTDX<3010000,(HST123>958)&(HST123<972) S LYMPHOMA=1
"RTN","ONCFUNC",85,0)
 I ONCDTDX>3001231,(HST123>958)&(HST123<973) S LYMPHOMA=1
"RTN","ONCFUNC",86,0)
 I ONCDTDX>3091231,(HSTICD=97353)!(HSTICD=97373)!(HSTICD=97383) S LYMPHOMA=1
"RTN","ONCFUNC",87,0)
 K HST123,HSTICD,ONCDTDX
"RTN","ONCFUNC",88,0)
 Q LYMPHOMA
"RTN","ONCFUNC",89,0)
 ;
"RTN","ONCFUNC",90,0)
LYMPH(IEN) ;Lymphomas
"RTN","ONCFUNC",91,0)
 N LYMPHOMA
"RTN","ONCFUNC",92,0)
 S LYMPHOMA=0
"RTN","ONCFUNC",93,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",94,0)
 S HSTICD=$$HIST^ONCFUNC(IEN)
"RTN","ONCFUNC",95,0)
 S HST14=$E(HSTICD,1,4)
"RTN","ONCFUNC",96,0)
 I ONCDTDX<3100000 D
"RTN","ONCFUNC",97,0)
 .I ((HST14>9589)&(HST14<9597))!((HST14>9649)&(HST14<9720))!((HST14>9726)&(HST14<9730)) S LYMPHOMA=1
"RTN","ONCFUNC",98,0)
 I ONCDTDX>3091221 D
"RTN","ONCFUNC",99,0)
 .I ((HST14>9589)&(HST14<9727))!((HST14>9727)&(HST14<9733))!((HST14>9733)&(HST14<9741))!((HST14>9749)&(HST14<9763))!((HST14>9810)&(HST14<9832))!(HST14=9940)!(HST14=9980)!(HST14=9971) S LYMPHOMA=1
"RTN","ONCFUNC",100,0)
 K HST14,HSTICD,ONCDTDX
"RTN","ONCFUNC",101,0)
 Q LYMPHOMA
"RTN","ONCFUNC",102,0)
 ;
"RTN","ONCFUNC",103,0)
HEMATO(IEN) ;Hematopoietic, reticuloendothelial, immunoproliferative or
"RTN","ONCFUNC",104,0)
 ; myeloproliferative disease
"RTN","ONCFUNC",105,0)
 N HEMATO
"RTN","ONCFUNC",106,0)
 S HEMATO=0
"RTN","ONCFUNC",107,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",108,0)
 S HSTICD=$$HIST^ONCFUNC(IEN)
"RTN","ONCFUNC",109,0)
 S HST14=$E(HSTICD,1,4)
"RTN","ONCFUNC",110,0)
 I ONCDTDX<3100000 D
"RTN","ONCFUNC",111,0)
 .I (HST14=9750)!((HST14>9759)&(HST14<9765))!((HST14>9799)&(HST14<9821))!(HST14=9826)!((HST14>9830)&(HST14<9921))!((HST14>9930)&(HST14<9965))!((HST14>9979)&(HST14<9990)) S HEMATO=1
"RTN","ONCFUNC",112,0)
 I ONCDTDX>3091221 D
"RTN","ONCFUNC",113,0)
 .I (HST14=9727)!(HST14=9733)!(HST14=9741)!(HST14=9742)!((HST14>9763)&(HST14<9810))!(HST14=9832)!((HST14>9839)&(HST14<9932))!(HST14=9945)!(HST14=9946)!((HST14>9949)&(HST14<9968))!((HST14>9974)&(HST14<9993)) S HEMATO=1
"RTN","ONCFUNC",114,0)
 K HST14,HSTICD,ONCDTDX
"RTN","ONCFUNC",115,0)
 Q HEMATO
"RTN","ONCFUNC",116,0)
 ;
"RTN","ONCFUNC",117,0)
CC ;COMORBIDITY/COMPLICATION #1-10 (160,25-25.9) screen
"RTN","ONCFUNC",118,0)
 N ONCICDY
"RTN","ONCFUNC",119,0)
 S ONCICDY=$$ICDDX^ICDCODE(Y) Q:ONCICDY=-1
"RTN","ONCFUNC",120,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>7.1)&+($E($P(ONCICDY,U,2),2,9)<7.4) Q 
"RTN","ONCFUNC",121,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>9.91)&+($E($P(ONCICDY,U,2),2,9)<16) Q 
"RTN","ONCFUNC",122,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>21.9)&+($E($P(ONCICDY,U,2),2,9)<23.2) Q 
"RTN","ONCFUNC",123,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>25.3)&+($E($P(ONCICDY,U,2),2,9)<25.5) Q 
"RTN","ONCFUNC",124,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>43.89)&+($E($P(ONCICDY,U,2),2,9)<46) Q 
"RTN","ONCFUNC",125,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>50.4)&+($E($P(ONCICDY,U,2),2,9)<50.8) Q 
"RTN","ONCFUNC",126,0)
 I $E($P(ONCICDY,U,2),1)'="V",$E($P(ONCICDY,U,2),1)="E",($E($P(ONCICDY,U,2),2,9)>869.9)&($E($P(ONCICDY,U,2),2,9)<880) Q 
"RTN","ONCFUNC",127,0)
 I $E($P(ONCICDY,U,2),1)'="V",$E($P(ONCICDY,U,2),1)="E",($E($P(ONCICDY,U,2),2,9)>929.9)&($E($P(ONCICDY,U,2),2,9)<950) Q 
"RTN","ONCFUNC",128,0)
 I $E($P(ONCICDY,U,2),1)'="V",$E($P(ONCICDY,U,2),1)'="E",($P(ONCICDY,U,2)<140)!($P(ONCICDY,U,2)>239.9) Q
"RTN","ONCFUNC",129,0)
 Q
"RTN","ONCFUNC",130,0)
 ;
"RTN","ONCFUNC",131,0)
DSTS(IEN) ;DATE SYSTEMIC THERAPY STARTED
"RTN","ONCFUNC",132,0)
 N X
"RTN","ONCFUNC",133,0)
 S X=$$GET1^DIQ(165.5,IEN,53,"I") I X'="" S DSTSDT(X)=""
"RTN","ONCFUNC",134,0)
 S X=$$GET1^DIQ(165.5,IEN,54,"I") I X'="" S DSTSDT(X)=""
"RTN","ONCFUNC",135,0)
 S X=$$GET1^DIQ(165.5,IEN,55,"I") I X'="" S DSTSDT(X)=""
"RTN","ONCFUNC",136,0)
 S DSTS=$O(DSTSDT(0))
"RTN","ONCFUNC",137,0)
 S X=$$DATE^ONCACDU1(DSTS)
"RTN","ONCFUNC",138,0)
 K DSTS,DSTSDT
"RTN","ONCFUNC",139,0)
 Q X
"RTN","ONCFUNC",140,0)
 ;
"RTN","ONCFUNC",141,0)
DUPPRI ;Check for duplicate primaries belonging to another DIVISION
"RTN","ONCFUNC",142,0)
 K TMP
"RTN","ONCFUNC",143,0)
 S XD1=0
"RTN","ONCFUNC",144,0)
 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  D
"RTN","ONCFUNC",145,0)
 .S PS=$$GET1^DIQ(165.5,XD1,20,"I")
"RTN","ONCFUNC",146,0)
 .S SN=$$GET1^DIQ(165.5,XD1,.06,"I")
"RTN","ONCFUNC",147,0)
 .S DIV=$$GET1^DIQ(165.5,XD1,2000,"I")
"RTN","ONCFUNC",148,0)
 .S TMP(PS_U_SN,DIV)=XD1
"RTN","ONCFUNC",149,0)
 .S TMP(PS_U_SN)=$G(TMP(PS_U_SN))+1
"RTN","ONCFUNC",150,0)
 S PSSN="" F  S PSSN=$O(TMP(PSSN)) Q:PSSN'>0  I TMP(PSSN)>1 D
"RTN","ONCFUNC",151,0)
 .S DIV="" F  S DIV=$O(TMP(PSSN,DIV)) Q:DIV'>0  I DIV=DUZ(2) D  Q 
"RTN","ONCFUNC",152,0)
 ..W !
"RTN","ONCFUNC",153,0)
 ..W !," NOTE: This patient has more than one primary with the same"
"RTN","ONCFUNC",154,0)
 ..W !,"       SEQUENCE NUMBER and PRIMARY SITE.  These primaries"
"RTN","ONCFUNC",155,0)
 ..W !,"       belong to different divisions.  You may wish to notify"
"RTN","ONCFUNC",156,0)
 ..W !,"       the other division of any significant changes for this patient."
"RTN","ONCFUNC",157,0)
 ..W !
"RTN","ONCFUNC",158,0)
 ..S J=0,XD1=0 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  I $D(^ONCO(165.5,XD1,0)) S J=J+1 D ^ONCOCOML
"RTN","ONCFUNC",159,0)
 ..K DIR S DIR(0)="E" D ^DIR
"RTN","ONCFUNC",160,0)
 K DIR,DIV,J,PS,PSSN,SN,TMP,XD0,XD1
"RTN","ONCFUNC",161,0)
 ;
"RTN","ONCFUNC",162,0)
CLEANUP ;Cleanup
"RTN","ONCFUNC",163,0)
 K AFLDIV,D0,Y
"RTN","ONCOANC1")
0^5^B21219299^B20882646
"RTN","ONCOANC1",1,0)
ONCOANC1 ;Hines OIFO/GWB - CONTINUE ONCOANC2 ;05/03/12
"RTN","ONCOANC1",2,0)
 ;;2.11;ONCOLOGY;**1,6,25,26,56**;Mar 07, 1995;Build 10
"RTN","ONCOANC1",3,0)
 ;rvd - 05/03/12 p56. Use ICD API (#3990) instead of direct global read.
"RTN","ONCOANC1",4,0)
 ;
"RTN","ONCOANC1",5,0)
AASTEOD ; STAGE/EXTENT OF DISEASE
"RTN","ONCOANC1",6,0)
 S AASEODS=$P(AAS1655("N2"),U,17) S AASEODS=$S(AASEODS="":9,AASEODS<0:9,AASEODS>9:9,AASEODS=8:9,1:AASEODS)
"RTN","ONCOANC1",7,0)
 S AASEODT=$P(AAS1655("N2"),U,9) S AASEODT=$S(AASEODT="":999,AASEODT[".":999,AASEODT<0:999,AASEODT>999:999,1:AASEODT)
"RTN","ONCOANC1",8,0)
 S:$L(AASEODT)<3 AASEODT=$E(AASZERO,1,3-$L(AASEODT))_AASEODT
"RTN","ONCOANC1",9,0)
 S AASEODE=$P(AAS1655("N2"),U,10) S AASEODE=$S(AASEODE="":"  ",AASEODE<0:"  ",AASEODE>99:"  ",1:AASEODE)
"RTN","ONCOANC1",10,0)
 S:$L(AASEODE)<2 AASEODE=$E(AASZERO,1,2-$L(AASEODE))_AASEODE
"RTN","ONCOANC1",11,0)
 S AASEODL=$P(AAS1655("N2"),U,11) S AASEODL=$S(AASEODL="":" ",AASEODL<0:" ",AASEODL>9:" ",1:AASEODL)
"RTN","ONCOANC1",12,0)
 S AASNP=$P(AAS1655("N2"),U,12) S AASNP=$S(AASNP="":99,AASNP[".":99,AASNP<0:99,AASNP>99:99,1:AASNP)
"RTN","ONCOANC1",13,0)
 S:$L(AASNP)<2 AASNP=$E(AASZERO,1,2-$L(AASNP))_AASNP
"RTN","ONCOANC1",14,0)
 S AASNE=$P(AAS1655("N2"),U,13) S AASNE=$S(AASNE="":99,AASNE[".":99,AASNE<0:99,AASNE>99:99,1:AASNE)
"RTN","ONCOANC1",15,0)
 S:$L(AASNE)<2 AASNE=$E(AASZERO,1,2-$L(AASNE))_AASNE
"RTN","ONCOANC1",16,0)
 S AASTNME=$$EDT^ONCOANC3($E(AASDXDT,7,8)) ;(AASTNME=2
"RTN","ONCOANC1",17,0)
 N AASTC,AASNC,AASMC,AASAJSM,AASTC2,AASNC2,AASMC2,AASJSM2
"RTN","ONCOANC1",18,0)
 D TNM^ONCOANC3(.AASTC,.AASNC,.AASMC,.AASAJSM,.AASTC2,.AASNC2,.AASMC2,.AASJSM2)
"RTN","ONCOANC1",19,0)
 S AASITME=$$MET^ONCOANC3(AAS1655("N2"))
"RTN","ONCOANC1",20,0)
 S:$L(AASITME)<3 AASITME=AASITME_$E(AASBLNK,1,3-$L(AASITME))
"RTN","ONCOANC1",21,0)
 S AASRT=$P(AAS1655("N3"),U,28) S AASRT=$S(AASRT="":" ",AASRT<0:" ",AASRT>9:" ",1:AASRT)
"RTN","ONCOANC1",22,0)
 I AASRT>2&(AASRT<9) S AASRT=" "
"RTN","ONCOANC1",23,0)
 S AASTM1=$P(AAS1655("N24"),U,2) S AASTM1=$S(AASTM1="":" ",1:$P(^ONCO(164.15,AASTM1,0),U))
"RTN","ONCOANC1",24,0)
 S AASTM2=$P(AAS1655("N24"),U,3) S AASTM2=$S(AASTM2="":" ",1:$P(^ONCO(164.15,AASTM2,0),U))
"RTN","ONCOANC1",25,0)
 S ^TMP($J,D0,225)=^TMP($J,D0,225)_AASEODS_" "_AASEODT_AASEODE_AASEODL_AASNP_AASNE_$E(AASBLNK,1,19)_AASTC_AASNC_AASMC_AASAJSM_AASTC2_AASNC2_AASMC2_AASJSM2
"RTN","ONCOANC1",26,0)
 S ^TMP($J,D0,299)=AASTNME_AASITME_AASRT_$E(AASBLNK,1,4)_AASTM1_AASTM2_$E(AASBLNK,1,12)
"RTN","ONCOANC1",27,0)
AASRXTR ;   TREATMENT(RX)-ENTIRE(SUMMARY) FIRST COURSE
"RTN","ONCOANC1",28,0)
 S AASRTR=1
"RTN","ONCOANC1",29,0)
 S AASRDSR=$$AASDC^ONCOANC4($P(AAS1655("N3"),U))
"RTN","ONCOANC1",30,0)
 S AASRDRA=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,4))
"RTN","ONCOANC1",31,0)
 S AASRDCH=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,11))
"RTN","ONCOANC1",32,0)
 S AASRDHO=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,14))
"RTN","ONCOANC1",33,0)
 S AASRDBR=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,17))
"RTN","ONCOANC1",34,0)
 S AASRDOT=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,23))
"RTN","ONCOANC1",35,0)
 S AASX=$O(^ONCO(165.5,"ATX",D0,0)) S:AASX'="" AASX=$E(AASX,1,7)
"RTN","ONCOANC1",36,0)
 S AASRXBDT=$$AASDC^ONCOANC4(AASX,"ZERO")
"RTN","ONCOANC1",37,0)
 S AASRXREA=$P(AAS1655("N3"),U,26) I AASRXREA=""!(AASRXREA<0)!(AASRXREA>9)!(AASRXREA>2&(AASRXREA<6)) S AASRXREA=9
"RTN","ONCOANC1",38,0)
 S AASRXCN=$P(AAS1655("N3"),U,10) I AASRXCN=""!(AASRXCN<0)!(AASRXCN>9)!(AASRXCN>1&(AASRXCN<7)) S AASRXCN=9
"RTN","ONCOANC1",39,0)
 S AASRXSEQ=$P(AAS1655("N3"),U,7) I AASRXSEQ=""!(AASRXSEQ<0)!(AASRXSEQ>6)!(AASRXSEQ=1) S AASRXSEQ=9
"RTN","ONCOANC1",40,0)
 S AASRDSB=$$AASDC^ONCOANC4($P(AAS1655("N5"),U))
"RTN","ONCOANC1",41,0)
 S ^TMP($J,D0,299)=^TMP($J,D0,299)_AASRTR_AASRDSR_AASRDRA_AASRDCH_AASRDHO_AASRDBR_AASRDOT
"RTN","ONCOANC1",42,0)
 D FOLLOW^ONCOANC3
"RTN","ONCOANC1",43,0)
AASFLUP ;  FOLLOW UP
"RTN","ONCOANC1",44,0)
 S AASDTLC=$$AASDC^ONCOANC4($P(AAS160("NF"),U))
"RTN","ONCOANC1",45,0)
 S ^TMP($J,D0,425)=^TMP($J,D0,425)_$E(AASBLNK,1,20)_AASDTLC
"RTN","ONCOANC1",46,0)
 S AASVSTA=$S($G(AASDTLC):$P(AAS160("NF"),U,2),1:" ") S:AASVSTA=""!(AASVSTA<0)!(AASVSTA>1) AASVSTA=1
"RTN","ONCOANC1",47,0)
 S AASCSTA=$S($G(AASDTLC):$P(AAS1655("N7"),U,6),1:" ") S AASCSTA=$S((AASCSTA="")!(AASCSTA<0)!(AASCSTA>5):9,(AASCSTA=4)!(AASCSTA=5):2,1:AASCSTA)
"RTN","ONCOANC1",48,0)
 S AASQS=$S($G(AASDTLC):$P(AAS160("NF"),U,5),1:" ") S:AASQS=""!(AASQS<0)!(AASQS>9)!(AASQS>4&(AASQS<8)) AASQS=9
"RTN","ONCOANC1",49,0)
 S AASROT=$P(AAS1655("N5"),U,2) I AASROT=""!(AASROT<0)!(AASROT>4) S AASROT=9
"RTN","ONCOANC1",50,0)
 S AASFSIT=$P(AAS1655("N5"),U,3) I AASFSIT=""!(AASFSIT<0)!(AASFSIT>9) S AASFSIT=9
"RTN","ONCOANC1",51,0)
 S:$L(AASFSIT)<3 AASFSIT=AASFSIT_$E(AASBLNK,1,3-$L(AASFSIT))
"RTN","ONCOANC1",52,0)
ASSD ;   CAUSE OF DEATH
"RTN","ONCOANC1",53,0)
 S AASCOD=$P(AAS160("N1"),U,3) S AASCOD=$S(AASCOD'="":$P($$ICDDX^ICDCODE(AASCOD),U,2),1:"0000")
"RTN","ONCOANC1",54,0)
 I AASCOD["." S AASCOD=$P(AASCOD,".")_$P(AASCOD,".",2)
"RTN","ONCOANC1",55,0)
 S:$L(AASCOD)=3 AASCOD=AASCOD_9
"RTN","ONCOANC1",56,0)
 S:$L(AASCOD)<4 AASCOD=$E(AASZERO,1,4-$L(AASCOD))_AASCOD
"RTN","ONCOANC1",57,0)
 S:$L(AASCOD)>4 AASCOD=$E(AASCOD,1,4)
"RTN","ONCOANC1",58,0)
 I $E(AASCOD,4)="X"!($E(AASCOD,4)="-") S AASCOD=$E(AASCOD,1,3)_9
"RTN","ONCOANC1",59,0)
 S AASICDR=$S(AASCOD="0000":0,1:$P(AAS160("N1"),U,4))
"RTN","ONCOANC1",60,0)
 S:AASICDR="" AASICDR=0
"RTN","ONCOANC1",61,0)
 S ^TMP($J,D0,477)=AASVSTA_AASCSTA_AASQS_$E(AASBLNK,1,32)_AASRDSB_AASROT_AASFSIT_AASCOD_AASICDR
"RTN","ONCOANC1",62,0)
 S AASACDS=5
"RTN","ONCOANC1",63,0)
 S AASVNAM="VETAFFAIRS" ;    vendor name
"RTN","ONCOANC1",64,0)
 S AASRVER=1 ;    AACCR record version
"RTN","ONCOANC1",65,0)
 S ^TMP($J,D0,550)=$E(AASBLNK,1,45)_AASACDS_$E(AASBLNK,1,2)_AASVNAM_AASRVER_"              "
"RTN","ONCOANC1",66,0)
 D ^ONCOANC5
"RTN","ONCOANC1",67,0)
 S MLHIX=MLHIX+1
"RTN","ONCOANC1",68,0)
 I $G(ONCOREP)=1 D TPREP^ONCOANC2,CU1P^ONCOANC9 Q
"RTN","ONCOANC1",69,0)
 I $G(ONCOREQ)=1 D REQREP^ONCOANC2,CU1P^ONCOANC9 Q
"RTN","ONCOANC1",70,0)
 F INDEX=76,149,225,299,352,425,477,550,628,706,784,850,925,1000 Q:AASTYPNC="I"&(INDEX>550)  W ^TMP($J,D0,INDEX),"^",!
"RTN","ONCOANC1",71,0)
 I AASTYPNC="A" F INDEX=1075:75:4675 W ^TMP($J,D0,INDEX),"^",!
"RTN","ONCOANC1",72,0)
 W !!!
"RTN","ONCOANC1",73,0)
 D CU1P^ONCOANC9 ;K ^TMP($J)
"RTN","ONCOANC1",74,0)
 Q  ;G AASRETN^ONCOANC0
"RTN","ONCOANC1",75,0)
 ;
"RTN","ONCOANC1",76,0)
MLHTEST S X="" F I=76,149,225,299,352 S X=X_^TMP($J,D0,I)
"RTN","ONCOANC1",77,0)
 Q  ;
"RTN","ONCOCFL1")
0^24^B61829784^B61653818
"RTN","ONCOCFL1",1,0)
ONCOCFL1 ;Hines OIFO/GWB - [CF Automatic Casefinding-Lab Search] ;10/21/11
"RTN","ONCOCFL1",2,0)
 ;;2.11;ONCOLOGY;**25,26,27,28,29,32,33,43,44,46,49,51,53,54,56**;Mar 07, 1995;Build 10
"RTN","ONCOCFL1",3,0)
 ;
"RTN","ONCOCFL1",4,0)
EN ;Start Date default
"RTN","ONCOCFL1",5,0)
 S SDDEF=$P(^ONCO(160.1,OSP,0),U,5)
"RTN","ONCOCFL1",6,0)
 I SDDEF="" S SDDEF=DT
"RTN","ONCOCFL1",7,0)
 S SDDEF=$E(SDDEF,4,5)_"-"_$E(SDDEF,6,7)_"-"_($E(SDDEF,1,3)+1700)
"RTN","ONCOCFL1",8,0)
 ;
"RTN","ONCOCFL1",9,0)
SD ;Start Date
"RTN","ONCOCFL1",10,0)
 W !
"RTN","ONCOCFL1",11,0)
 K DIR
"RTN","ONCOCFL1",12,0)
 S DIR(0)="D"
"RTN","ONCOCFL1",13,0)
 S DIR("A")="          Start Date"
"RTN","ONCOCFL1",14,0)
 S DIR("B")=SDDEF
"RTN","ONCOCFL1",15,0)
 D ^DIR
"RTN","ONCOCFL1",16,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFL1",17,0)
 I (Y>DT) W "  Future dates not allowed" G SD
"RTN","ONCOCFL1",18,0)
 S (LRSDT,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFL1",19,0)
 ;
"RTN","ONCOCFL1",20,0)
ED ;End Date
"RTN","ONCOCFL1",21,0)
 K DIR
"RTN","ONCOCFL1",22,0)
 S DIR(0)="D"
"RTN","ONCOCFL1",23,0)
 S DIR("A")="            End Date"
"RTN","ONCOCFL1",24,0)
 D ^DIR
"RTN","ONCOCFL1",25,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFL1",26,0)
 I (Y<LRSDT) W "  Invalid date sequence" G SD
"RTN","ONCOCFL1",27,0)
 I (Y>DT) W "  Future dates not allowed" G ED
"RTN","ONCOCFL1",28,0)
 S $P(^ONCO(160.1,OSP,0),U,5)=Y
"RTN","ONCOCFL1",29,0)
 S (LRLDT,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFL1",30,0)
 S Y=LRSDT D D^ONCOLRU S LRSTR=Y
"RTN","ONCOCFL1",31,0)
 S Y=LRLDT D D^ONCOLRU S LRLST=Y
"RTN","ONCOCFL1",32,0)
 W !
"RTN","ONCOCFL1",33,0)
 K DIR
"RTN","ONCOCFL1",34,0)
 S DIR(0)="Y"
"RTN","ONCOCFL1",35,0)
 S DIR("A")="          Dates OK"
"RTN","ONCOCFL1",36,0)
 S DIR("B")="Y"
"RTN","ONCOCFL1",37,0)
 D ^DIR
"RTN","ONCOCFL1",38,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFL1",39,0)
 G EN:'Y
"RTN","ONCOCFL1",40,0)
 ;Include Squamous and Basal cell neoplasms (Y/N?)
"RTN","ONCOCFL1",41,0)
 W !
"RTN","ONCOCFL1",42,0)
 S SBCIND="NO"
"RTN","ONCOCFL1",43,0)
 K DIR
"RTN","ONCOCFL1",44,0)
 S DIR(0)="Y"
"RTN","ONCOCFL1",45,0)
 S DIR("A")="          Include Squamous and Basal cell neoplasms"
"RTN","ONCOCFL1",46,0)
 S DIR("B")="Yes"
"RTN","ONCOCFL1",47,0)
 S DIR("?")=" "
"RTN","ONCOCFL1",48,0)
 S DIR("?",1)=" Answer 'YES' if you want to include squamous and basal cell neoplasms."
"RTN","ONCOCFL1",49,0)
 S DIR("?",2)=" Answer  'NO' if you want to exclude these neoplasms."
"RTN","ONCOCFL1",50,0)
 D ^DIR
"RTN","ONCOCFL1",51,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFL1",52,0)
 S:Y=1 SBCIND="YES"
"RTN","ONCOCFL1",53,0)
 K DIR
"RTN","ONCOCFL1",54,0)
 ;
"RTN","ONCOCFL1",55,0)
 S ONCO("SD")=LRSDT,ONCO("ED")=LRLDT
"RTN","ONCOCFL1",56,0)
 S LRSDT=LRSDT-.01,LRLDT=LRLDT+.99
"RTN","ONCOCFL1",57,0)
 F X=8,9 F Y=1,2,3,6,9 S Z=X_"***"_Y,LRM(Z)=5,LRN(Z)=Z
"RTN","ONCOCFL1",58,0)
 S LRM(69760)=5,LRN(69760)=69760
"RTN","ONCOCFL1",59,0)
 S LRM(74000)=5,LRN(74000)=74000
"RTN","ONCOCFL1",60,0)
 S LRM(74006)=5,LRN(74006)=74006
"RTN","ONCOCFL1",61,0)
 S LRM(74007)=5,LRN(74007)=74007
"RTN","ONCOCFL1",62,0)
 S LRM(74008)=5,LRN(74008)=74008
"RTN","ONCOCFL1",63,0)
 W !!?10,"This option will search for ICD-O morphology codes 800-998.",!
"RTN","ONCOCFL1",64,0)
 W !?10,"It will also search for High Grade Dysplasia of Stomach, Colon"
"RTN","ONCOCFL1",65,0)
 W !?10,"and Esophagus cases.",!
"RTN","ONCOCFL1",66,0)
 W !?10,"Exceptions to the above search criteria:",!
"RTN","ONCOCFL1",67,0)
 W !?10,"Behavior Code /0 (Benign) codes will be excluded."
"RTN","ONCOCFL1",68,0)
 W:SBCIND="NO" !?10,"Squamous cell neoplasms (805-808) of the skin will be excluded."
"RTN","ONCOCFL1",69,0)
 W:SBCIND="NO" !?10,"Basal cell neoplasms (809) will be excluded."
"RTN","ONCOCFL1",70,0)
 W !?10,"Benign tumors of the central nervous system will be included."
"RTN","ONCOCFL1",71,0)
 W !
"RTN","ONCOCFL1",72,0)
 S %ZIS="Q" D ^%ZIS I POP G EX
"RTN","ONCOCFL1",73,0)
 I '$D(IO("Q")) D SER^ONCOCFL1 G EX
"RTN","ONCOCFL1",74,0)
 S ZTRTN="SER^ONCOCFL1",ZTSAVE("LR*")="",ZTSAVE("ONCO*")="",ZTSAVE("SBCIND")=""
"RTN","ONCOCFL1",75,0)
 S ZTDESC="ONCOLOGY LAB SEARCH"
"RTN","ONCOCFL1",76,0)
 D ^%ZTLOAD
"RTN","ONCOCFL1",77,0)
 K ZTDESC,ZTRTN,ZTSAVE
"RTN","ONCOCFL1",78,0)
 G EX
"RTN","ONCOCFL1",79,0)
 ;
"RTN","ONCOCFL1",80,0)
SER ;Search LAB DATA (63) file
"RTN","ONCOCFL1",81,0)
 ;Supported by IA #525
"RTN","ONCOCFL1",82,0)
 S AFFDIV=$G(DUZ(2)),ONCDIVSP=$O(^ONCO(160.1,"C",AFFDIV,""))
"RTN","ONCOCFL1",83,0)
 I ONCDIVSP="" W !!,"User does not have an associated DIVISION.",!! G EX
"RTN","ONCOCFL1",84,0)
 F Z=0:0 S Z=$O(^ONCO(160.1,ONCDIVSP,6,Z)) Q:Z'>0  S AFFDIV=AFFDIV_U_$G(^ONCO(160.1,ONCDIVSP,6,Z,0))
"RTN","ONCOCFL1",85,0)
 K ^TMP($J),^TMP("ONCO",$J)
"RTN","ONCOCFL1",86,0)
 D SNOMED
"RTN","ONCOCFL1",87,0)
 S ONSDT=LRSDT,ONLDT=LRLDT
"RTN","ONCOCFL1",88,0)
 S ^TMP("ONCO",$J,0)=0
"RTN","ONCOCFL1",89,0)
 F LRSS="SP","CY","EM","AU" S LRXR="A"_LRSS,LRSDT=ONSDT,LRLDT=ONLDT D LOOP
"RTN","ONCOCFL1",90,0)
 S LRDFN=0
"RTN","ONCOCFL1",91,0)
 F  S LRDFN=$O(^TMP($J,LRDFN)) G RPT:LRDFN="" S LRSDT=0 F  S LRSDT=$O(^TMP($J,LRDFN,LRSDT)) Q:LRSDT'>0  S LD=^(LRSDT),LRSS=$P(LD,U),LRI=$P(LD,U,6),XDT=$S(LRSS="AU":$P(^LR(LRDFN,LRSS),U),1:$P(^LR(LRDFN,LRSS,LRI,0),U,1)) S XDT=$P(XDT,".",1) D CK
"RTN","ONCOCFL1",92,0)
 ;
"RTN","ONCOCFL1",93,0)
CK ;Check ONCOLOGY PATIENT (160) file
"RTN","ONCOCFL1",94,0)
 D DIV Q:DVMTCH=0
"RTN","ONCOCFL1",95,0)
 S XD1=^LR(LRDFN,0) Q:$P(XD1,U,2)'=2  S X=$P(XD1,U,3) Q:'$D(^DPT(X))
"RTN","ONCOCFL1",96,0)
 S X=X_";DPT(",XD0=$O(^ONCO(160,"B",X,0)),ONCIEN=XD0
"RTN","ONCOCFL1",97,0)
 I XD0="" K DO S D="B",DIC="^ONCO(160,",DIC(0)="Z" D FILE^DICN K DO S ONCIEN=+Y D SET Q
"RTN","ONCOCFL1",98,0)
 I XD0'="" S ONCDIVS="",ONCS="" F  S ONCS=$O(^ONCO(160,XD0,"SUS","C",ONCS)) Q:ONCS'>0  S ONCDIVS=ONCDIVS_U_ONCS
"RTN","ONCOCFL1",99,0)
 I ONCDIVS[DUZ(2) Q
"RTN","ONCOCFL1",100,0)
 G SET:'$D(^ONCO(165.5,"C",ONCIEN)) S XD2=0 F  S XD2=$O(^ONCO(165.5,"C",ONCIEN,XD2)) Q:XD2=""  I $$DIV^ONCFUNC(XD2)=DUZ(2) S XDX=$P($G(^ONCO(165.5,+XD2,0)),U,16) Q:XDT=XDX  I $P($G(^ONCO(165.5,+XD2,1)),U,10)=XDT Q
"RTN","ONCOCFL1",101,0)
 Q:XD2'=""  D SET Q
"RTN","ONCOCFL1",102,0)
 ;
"RTN","ONCOCFL1",103,0)
SET ;Create SUSPENSE (160.075) record
"RTN","ONCOCFL1",104,0)
 K DD,DO
"RTN","ONCOCFL1",105,0)
 S DA(1)=ONCIEN,DIC="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFL1",106,0)
 S DIC(0)="L",DIC("P")=$P(^DD(160,75,0),U,2),X=XDT
"RTN","ONCOCFL1",107,0)
 D FILE^DICN K DO
"RTN","ONCOCFL1",108,0)
 S ^TMP("ONCO",$J,0)=^TMP("ONCO",$J,0)+1
"RTN","ONCOCFL1",109,0)
 K DIE S DA(1)=ONCIEN,DIE="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFL1",110,0)
 S (ONCSUB,DA)=+Y,SR="L"_$E(LRSS),$P(^ONCO(160,ONCIEN,0),U,2)=LRDFN
"RTN","ONCOCFL1",111,0)
 S ONCMRPH=$E($P(LD,U,4),1,5) S:$E(ONCMRPH,5)=6 $E(ONCMRPH,5)=3 I '$D(^ONCO(164.1,ONCMRPH)) S ONCMRPH=""
"RTN","ONCOCFL1",112,0)
 S DR="1///^S X=DT;2///^S X=SR;3////^S X=DUZ(2);4////^S X=$P(LD,U,2);5////^S X=$P(LD,U,3);10////^S X=ONCMRPH;11///^S X=LRI;13////^S X=$P(LD,U,7)"
"RTN","ONCOCFL1",113,0)
 D ^DIE
"RTN","ONCOCFL1",114,0)
 Q
"RTN","ONCOCFL1",115,0)
 ;
"RTN","ONCOCFL1",116,0)
LOOP F  S LRSDT=$O(^LR(LRXR,LRSDT)) Q:'LRSDT!(LRSDT>LRLDT)  D LRDFN
"RTN","ONCOCFL1",117,0)
 Q
"RTN","ONCOCFL1",118,0)
 ;
"RTN","ONCOCFL1",119,0)
LRDFN S LRDFN=0 F  S LRDFN=$O(^LR(LRXR,LRSDT,LRDFN)) Q:'LRDFN  D @$S(LRSS'="AU":"LRI",1:"AU")
"RTN","ONCOCFL1",120,0)
 Q
"RTN","ONCOCFL1",121,0)
 ;
"RTN","ONCOCFL1",122,0)
LRI S LRI=0 F  S LRI=$O(^LR(LRXR,LRSDT,LRDFN,LRI)) Q:'LRI  D T
"RTN","ONCOCFL1",123,0)
 Q
"RTN","ONCOCFL1",124,0)
 ;
"RTN","ONCOCFL1",125,0)
T S T=0 F  S T=$O(^LR(LRDFN,LRSS,LRI,2,T)) Q:'T  S LRT=+^(T,0),TIS=$P($G(^LAB(61,LRT,0)),U,1),SNOMED=$P($G(^LAB(61,LRT,0)),U,2) D M
"RTN","ONCOCFL1",126,0)
 Q
"RTN","ONCOCFL1",127,0)
 ;
"RTN","ONCOCFL1",128,0)
M S M=0 F  S M=$O(^LR(LRDFN,LRSS,LRI,2,T,2,M)) Q:'M  S X=^(M,0),LRD=+X,LRM=$P(X,U,2) D MX I I Q
"RTN","ONCOCFL1",129,0)
 S DZX=0 F  S DZX=$O(^LR(LRDFN,LRSS,LRI,2,T,1,DZX)) Q:'DZX  D
"RTN","ONCOCFL1",130,0)
 .S DZPTR=$G(^LR(LRDFN,LRSS,LRI,2,T,1,DZX,0)) I DZPTR="" Q
"RTN","ONCOCFL1",131,0)
 .S DZCODE=$P($G(^LAB(61.4,+DZPTR,0)),U,2) I DZCODE="" Q
"RTN","ONCOCFL1",132,0)
 .I (DZCODE=4006)!((DZCODE>4078)&(DZCODE<4085)) D
"RTN","ONCOCFL1",133,0)
 ..S DZMORP=$S(DZCODE=4006:99833,DZCODE=4079:99803,1:99823)
"RTN","ONCOCFL1",134,0)
 ..S ^TMP($J,LRDFN,LRSDT)=LRSS_U_U_LRT_U_DZMORP_U_TIS_U_LRI_U_DZPTR
"RTN","ONCOCFL1",135,0)
 Q
"RTN","ONCOCFL1",136,0)
 ;
"RTN","ONCOCFL1",137,0)
MX Q:'$D(^LAB(61.1,LRD,0))
"RTN","ONCOCFL1",138,0)
 S W=^LAB(61.1,LRD,0),X=$P(W,U,2),Y=0 F Z=1:1 S Y=$O(LRN(Y)) Q:Y=""  S Y(1)=LRM(Y),Y(2)=LRN(Y) D Y I I S ^TMP($J,LRDFN,LRSDT)=LRSS_U_LRD_U_LRT_U_X_U_TIS_U_LRI
"RTN","ONCOCFL1",139,0)
 Q
"RTN","ONCOCFL1",140,0)
 ;
"RTN","ONCOCFL1",141,0)
AU ;AUTOPSY
"RTN","ONCOCFL1",142,0)
 S LRI=9999999,T=0 F  S T=$O(^LR(LRDFN,"AY",T)) Q:'T  S LRT=+^(T,0),TIS=$P($G(^LAB(61,LRT,0)),U),SNOMED=$P($G(^LAB(61,LRT,0)),U,2) D AUM
"RTN","ONCOCFL1",143,0)
 Q
"RTN","ONCOCFL1",144,0)
 ;
"RTN","ONCOCFL1",145,0)
AUM S M=0 F  S M=$O(^LR(LRDFN,"AY",T,2,M)) Q:'M  S X=^(M,0),LRD=+X,LRM=$P(X,U,2) D MX
"RTN","ONCOCFL1",146,0)
 Q
"RTN","ONCOCFL1",147,0)
 ;
"RTN","ONCOCFL1",148,0)
Y ;Check for eligible cases
"RTN","ONCOCFL1",149,0)
 ;Basal cell carcinomas
"RTN","ONCOCFL1",150,0)
 I SBCIND="NO",$E(X,1,3)=809 S I=0 Q
"RTN","ONCOCFL1",151,0)
 ;Benign brain tumors
"RTN","ONCOCFL1",152,0)
 I SNOMED'="",($E(SNOMED,1,2)?1"X"1N)!($D(BBT(SNOMED))),$E(X,1)>7 S I=1 Q
"RTN","ONCOCFL1",153,0)
 ;Squamous cell neoplasms of the skin
"RTN","ONCOCFL1",154,0)
 I SBCIND="NO",($E(X,1,3)=805)!($E(X,1,3)=806)!($E(X,1,3)=807)!($E(X,1,3)=808),($E(SNOMED,1,2)="01")!($E(SNOMED,1,2)="02") S I=0 Q
"RTN","ONCOCFL1",155,0)
 I $E(X,1,5)=Y(2) D  Q 
"RTN","ONCOCFL1",156,0)
 .S I=1
"RTN","ONCOCFL1",157,0)
 .I (X=74000)!(X=74006)!(X=74007)!(X=74008),($E(SNOMED,1,2)'=62)&($E(SNOMED,1,2)'=63)&($E(SNOMED,1,2)'=67) S I=0
"RTN","ONCOCFL1",158,0)
 S I=1 F I(1)=1:1:Y(1) S I(2)=$E(Y(2),I(1)) I I(2)'="*",I(2)'=$E(X,I(1)) S I=0 Q
"RTN","ONCOCFL1",159,0)
 Q
"RTN","ONCOCFL1",160,0)
 ;
"RTN","ONCOCFL1",161,0)
RPT ;Report
"RTN","ONCOCFL1",162,0)
 N ONCOST,ONCOEN
"RTN","ONCOCFL1",163,0)
 S ONCOST="L",ONCOEN="LS" G RPT^ONCOCFL
"RTN","ONCOCFL1",164,0)
 ;
"RTN","ONCOCFL1",165,0)
DIV ;Check division
"RTN","ONCOCFL1",166,0)
 ;Supported by IA #5343
"RTN","ONCOCFL1",167,0)
 S DVMTCH=1,INST=""
"RTN","ONCOCFL1",168,0)
 I LRSS="AU" D
"RTN","ONCOCFL1",169,0)
 .S LBACC=$P($G(^LR(LRDFN,LRSS)),U,6)
"RTN","ONCOCFL1",170,0)
 .S LBYEAR=$P($G(^LR(LRDFN,LRSS)),U,1)
"RTN","ONCOCFL1",171,0)
 I LRSS'="AU" D
"RTN","ONCOCFL1",172,0)
 .S LBACC=$P($G(^LR(LRDFN,LRSS,LRI,0)),U,6)
"RTN","ONCOCFL1",173,0)
 .S LBYEAR=$P($G(^LR(LRDFN,LRSS,LRI,0)),U,1)
"RTN","ONCOCFL1",174,0)
 I (LBACC="")!(LBYEAR="") Q
"RTN","ONCOCFL1",175,0)
 I LBACC["LEGACY" S DVMTCH=0 Q
"RTN","ONCOCFL1",176,0)
 S LBAREA=$P(LBACC," ",1) I LBAREA="" Q
"RTN","ONCOCFL1",177,0)
 S LBNUM=$P(LBACC," ",3) I LBNUM="" Q
"RTN","ONCOCFL1",178,0)
 S ACCIEN=$O(^LRO(68,"B",LBAREA,"")) I ACCIEN="" Q
"RTN","ONCOCFL1",179,0)
 S LBYEAR=$E(LBYEAR,1,3)_"0000"
"RTN","ONCOCFL1",180,0)
 S INST=$G(^LRO(68,ACCIEN,1,LBYEAR,1,LBNUM,.4)) I INST="" Q
"RTN","ONCOCFL1",181,0)
 I AFFDIV'[INST S DVMTCH=0
"RTN","ONCOCFL1",182,0)
 Q
"RTN","ONCOCFL1",183,0)
 ;
"RTN","ONCOCFL1",184,0)
SNOMED ;Build SNOMED array for benign brain tumors
"RTN","ONCOCFL1",185,0)
 S BBT(45000)=""
"RTN","ONCOCFL1",186,0)
 S BBT(45010)=""
"RTN","ONCOCFL1",187,0)
 S BBT(45020)=""
"RTN","ONCOCFL1",188,0)
 S BBT(45030)=""
"RTN","ONCOCFL1",189,0)
 S BBT(45100)=""
"RTN","ONCOCFL1",190,0)
 S BBT(45110)=""
"RTN","ONCOCFL1",191,0)
 S BBT(45120)=""
"RTN","ONCOCFL1",192,0)
 S BBT(45300)=""
"RTN","ONCOCFL1",193,0)
 S BBT(45300)=""
"RTN","ONCOCFL1",194,0)
 S BBT(45301)=""
"RTN","ONCOCFL1",195,0)
 S BBT(45302)=""
"RTN","ONCOCFL1",196,0)
 S BBT(45303)=""
"RTN","ONCOCFL1",197,0)
 S BBT(45304)=""
"RTN","ONCOCFL1",198,0)
 S BBT(45305)=""
"RTN","ONCOCFL1",199,0)
 S BBT(45520)=""
"RTN","ONCOCFL1",200,0)
 S BBT(45521)=""
"RTN","ONCOCFL1",201,0)
 S BBT(45522)=""
"RTN","ONCOCFL1",202,0)
 S BBT(45523)=""
"RTN","ONCOCFL1",203,0)
 S BBT(45524)=""
"RTN","ONCOCFL1",204,0)
 S BBT(45525)=""
"RTN","ONCOCFL1",205,0)
 Q
"RTN","ONCOCFL1",206,0)
 ;
"RTN","ONCOCFL1",207,0)
EX ;KILL variables
"RTN","ONCOCFL1",208,0)
 D ^%ZISC
"RTN","ONCOCFL1",209,0)
 K %ZIS
"RTN","ONCOCFL1",210,0)
 K ACCIEN,AFFDIV,BBT,D,DA,DIC,DIE,DIR,DR,DVMTCH,DZCODE,DZMORP,DZPTR,DZX
"RTN","ONCOCFL1",211,0)
 K I,INST,LBACC,LBAREA,LBNUM,LBYEAR,LD,LRD,LRDFN,LRI,LRLDT,LRLST,LRM,LRN
"RTN","ONCOCFL1",212,0)
 K LRSDT,LRSS,LRSTR,LRT,LRXR,M,ONCDIVS,ONCDIVSP,ONCIEN,ONCMRPH,ONCO,ONCS
"RTN","ONCOCFL1",213,0)
 K ONCSUB,ONLDT,ONSDT,OSP,POP,SDDEF,SNOMED,SR,T,TIS,W,X,XD0,XD1,XD2,XDT
"RTN","ONCOCFL1",214,0)
 K XDX,Y,Z,SBCIND
"RTN","ONCOCFL1",215,0)
 Q
"RTN","ONCOCFP")
0^6^B50437593^B49907269
"RTN","ONCOCFP",1,0)
ONCOCFP ;Hines OIFO/GWB - [PT Automatic Casefinding-PTF Search] ;05/03/12
"RTN","ONCOCFP",2,0)
 ;;2.11;ONCOLOGY;**22,23,25,26,27,28,29,34,43,46,49,52,53,56**;Mar 07, 1995;Build 10
"RTN","ONCOCFP",3,0)
 ;
"RTN","ONCOCFP",4,0)
 ; rvd - 0403/12 p56. Use ICD API (#3990) instead of direct global call
"RTN","ONCOCFP",5,0)
 W @IOF
"RTN","ONCOCFP",6,0)
 W !!!?10,"****************** PTF CASEFINDING ******************",!
"RTN","ONCOCFP",7,0)
 W !?10,"This option will search the PRINCIPLE DIAGNOSIS and"
"RTN","ONCOCFP",8,0)
 W !?10,"SECONDARY DIAGNOSIS fields of the PTF file for ICD"
"RTN","ONCOCFP",9,0)
 W !?10,"codes which identify cases to be added to the Suspense"
"RTN","ONCOCFP",10,0)
 W !?10,"list."
"RTN","ONCOCFP",11,0)
 ;
"RTN","ONCOCFP",12,0)
T ;Start Date/End Date
"RTN","ONCOCFP",13,0)
 N SDDEF
"RTN","ONCOCFP",14,0)
 W !
"RTN","ONCOCFP",15,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCOCFP",16,0)
 I OSP="" D  Q
"RTN","ONCOCFP",17,0)
 .W !?10,"Casefinding requires an ONCOLOGY SITE PARAMETER"
"RTN","ONCOCFP",18,0)
 .W !?10,"entry which matches the user's login DIVISION."
"RTN","ONCOCFP",19,0)
 .W !?10,"There is no ONCOLOGY SITE PARAMETER for DIVISION:"
"RTN","ONCOCFP",20,0)
 .W !?10,$P($G(^DIC(4,DUZ(2),0)),U,1)
"RTN","ONCOCFP",21,0)
 S SDDEF=$P(^ONCO(160.1,OSP,0),U,7)
"RTN","ONCOCFP",22,0)
 I SDDEF="" S SDDEF=DT
"RTN","ONCOCFP",23,0)
 S SDDEF=$E(SDDEF,4,5)_"-"_$E(SDDEF,6,7)_"-"_($E(SDDEF,1,3)+1700)
"RTN","ONCOCFP",24,0)
SD K DIR
"RTN","ONCOCFP",25,0)
 S DIR(0)="D"
"RTN","ONCOCFP",26,0)
 S DIR("A")="          Start Date"
"RTN","ONCOCFP",27,0)
 S DIR("B")=SDDEF
"RTN","ONCOCFP",28,0)
 D ^DIR
"RTN","ONCOCFP",29,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",30,0)
 I (Y>DT) W "  Future dates not allowed" G SD
"RTN","ONCOCFP",31,0)
 S (SD,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFP",32,0)
ED K DIR
"RTN","ONCOCFP",33,0)
 S DIR(0)="D"
"RTN","ONCOCFP",34,0)
 S DIR("A")="            End Date"
"RTN","ONCOCFP",35,0)
 D ^DIR
"RTN","ONCOCFP",36,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",37,0)
 I (Y<SD) W "  Invalid date sequence" G T
"RTN","ONCOCFP",38,0)
 I (Y>DT) W "  Future dates not allowed" G ED
"RTN","ONCOCFP",39,0)
 S $P(^ONCO(160.1,OSP,0),U,7)=Y
"RTN","ONCOCFP",40,0)
 S (ED,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFP",41,0)
 W !
"RTN","ONCOCFP",42,0)
 K DIR
"RTN","ONCOCFP",43,0)
 S DIR(0)="Y"
"RTN","ONCOCFP",44,0)
 S DIR("A")="          Dates OK"
"RTN","ONCOCFP",45,0)
 S DIR("B")="Y"
"RTN","ONCOCFP",46,0)
 D ^DIR
"RTN","ONCOCFP",47,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",48,0)
 G T:'Y
"RTN","ONCOCFP",49,0)
 S ONCO("SD")=SD,ONCO("ED")=ED
"RTN","ONCOCFP",50,0)
 W !!?3,"The following ICD codes will be searched for:"
"RTN","ONCOCFP",51,0)
 W !
"RTN","ONCOCFP",52,0)
 W !?3,"140-239        NEOPLASMS"
"RTN","ONCOCFP",53,0)
 W !?3,"               (excluding benign neoplasms 210-229 unless listed below)"
"RTN","ONCOCFP",54,0)
 W !?3,"042.2          HIV WITH SPECIFIED MALIGNANT NEOPLASMS"
"RTN","ONCOCFP",55,0)
 W !?3,"225.0-225.9    BENIGN NEOPLASMS OF BRAIN AND OTHER PARTS OF NERVOUS SYSTEM"
"RTN","ONCOCFP",56,0)
 W !?3,"227.3          BENIGN NEOPLASM OF PITUITARY GLAND AND CRANIOPHARYNGEAL DUCT"
"RTN","ONCOCFP",57,0)
 W !?3,"227.4          BENIGN NEOPLASM OF PINEAL GLAND"
"RTN","ONCOCFP",58,0)
 W !?3,"228.02         HEMANGIOMA INTRACRANIAL"
"RTN","ONCOCFP",59,0)
 W !?3,"259.2          CARCINOID SYNDROME"
"RTN","ONCOCFP",60,0)
 W !?3,"273.1-273.9    DISORDERS OF PLASMA PROTEIN METABOLISM"
"RTN","ONCOCFP",61,0)
 W !?3,"284.9          ANAPLASTIC ANEMIA, UNSPECIFIED"
"RTN","ONCOCFP",62,0)
 W !?3,"285.0          SIDEROBLASTIC ANEMIA"
"RTN","ONCOCFP",63,0)
 W !?3,"288.3          EOSINOPHILIA"
"RTN","ONCOCFP",64,0)
 W !?3,"288.4          HEMOPHAGOCYTIC SYNDROMES"
"RTN","ONCOCFP",65,0)
 W !?3,"289.6          FAMILIAL POLYCYTHEMIA"
"RTN","ONCOCFP",66,0)
 W !?3,"289.8          OTHER SPECIFIED DISEASES OF BLOOD AND BLOOD-FORMING ORGANS"
"RTN","ONCOCFP",67,0)
 W !?3,"289.83         MYELOFIBROSIS"
"RTN","ONCOCFP",68,0)
 W !?3,"795.06         PAPANICOLAOU SMEAR OF CERVIX WITH CYTOLOGIC EVIDENCE OF"
"RTN","ONCOCFP",69,0)
 W !?3,"               MALIGNANCY"
"RTN","ONCOCFP",70,0)
 W !?3,"795.16         PAP SMR VAG-CYTOL MALIG"
"RTN","ONCOCFP",71,0)
 W !?3,"796.76         PAP SMR ANUS-CYTOL MALIG"
"RTN","ONCOCFP",72,0)
 ;
"RTN","ONCOCFP",73,0)
 ;NOTE: Code 795.76 is incorrect in the ICD DIAGNOSIS (80) file.
"RTN","ONCOCFP",74,0)
 ;      It is appears as 796.76.  PTF casefinding will look for both
"RTN","ONCOCFP",75,0)
 ;      795.76 and 796.76.
"RTN","ONCOCFP",76,0)
 ;
"RTN","ONCOCFP",77,0)
 W !?3,"V07.3          NEED FOR OTHER PROPHYLACTIC CHEMOTHERAPY"
"RTN","ONCOCFP",78,0)
 W !?3,"V07.8          NEED FOR OTHER SPECIFIED PROPHYLACTIC MEASURE"
"RTN","ONCOCFP",79,0)
 W !?3,"V10.00-V10.09  GASTROINTESINAL TRACT"
"RTN","ONCOCFP",80,0)
 W !?3,"V12.41         PERS HX BENIGN NEOPL OF BRAIN"
"RTN","ONCOCFP",81,0)
 W !?3,"V58.0          ENCOUNTER FOR RADIOTHERAPY"
"RTN","ONCOCFP",82,0)
 W !?3,"V58.1          ENCOUNTER FOR CHEMOTHERAPY"
"RTN","ONCOCFP",83,0)
 W !?3,"V58.11         ANTINEOPLASTIC CHEMO ENC"
"RTN","ONCOCFP",84,0)
 W !?3,"V58.12         IMMUNOTHERAPY ENCOUNTER"
"RTN","ONCOCFP",85,0)
 W !?3,"V66.1-V66.2    CONVALESCENCE FOLLOWING RADIOTHERAPY/CHEMOTHERAPY"
"RTN","ONCOCFP",86,0)
 W !?3,"V67.1-V67.2    FOLLOW-UP EXAMINATION FOLLOWING RADIOTHERAPY/CHEMOTHERAPY"
"RTN","ONCOCFP",87,0)
 W !?3,"V71.1          OBSV-SUSPCT MAL NEOPLASM"
"RTN","ONCOCFP",88,0)
 W !?3,"V76.0-V76.9    SPECIAL SCREENING FOR MALIGNANT NEOPLASMS"
"RTN","ONCOCFP",89,0)
 W !
"RTN","ONCOCFP",90,0)
 S %ZIS="Q" D ^%ZIS I POP G EX
"RTN","ONCOCFP",91,0)
 I '$D(IO("Q")) D SER^ONCOCFP G EX
"RTN","ONCOCFP",92,0)
 S ZTRTN="SER^ONCOCFP",ZTSAVE("ONCO*")="",ZTDESC="ONCOLOGY PTF SEARCH"
"RTN","ONCOCFP",93,0)
 D ^%ZTLOAD
"RTN","ONCOCFP",94,0)
 G EX
"RTN","ONCOCFP",95,0)
 ;
"RTN","ONCOCFP",96,0)
SER ;Search PTF file (#45) file
"RTN","ONCOCFP",97,0)
 ;Supported by IA #418
"RTN","ONCOCFP",98,0)
 S AFFDIV=$G(DUZ(2)),ONCDIVSP=$O(^ONCO(160.1,"C",AFFDIV,""))
"RTN","ONCOCFP",99,0)
 I ONCDIVSP="" W !!,"User does not have an associated DIVISION",!! G EX
"RTN","ONCOCFP",100,0)
 F Z=0:0 S Z=$O(^ONCO(160.1,ONCDIVSP,6,Z)) Q:Z'>0  S AFFDIV=AFFDIV_U_$G(^ONCO(160.1,ONCDIVSP,6,Z,0))
"RTN","ONCOCFP",101,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFP",102,0)
 S XDT=ONCO("SD")-.1111111
"RTN","ONCOCFP",103,0)
 S XED=ONCO("ED")+.9999999
"RTN","ONCOCFP",104,0)
 S ^TMP("ONCO",$J,0)=0
"RTN","ONCOCFP",105,0)
 F  S XDT=$O(^DGPT("ADS",XDT)) Q:(XDT>XED)!(XDT="")  S D0=$O(^(XDT,0)),X70=$G(^DGPT(D0,70)),X71=$G(^DGPT(D0,71)) I X70'="" D IC
"RTN","ONCOCFP",106,0)
 I $G(^TMP("ONCO",$J,0))=0 G WP
"RTN","ONCOCFP",107,0)
 E  D
"RTN","ONCOCFP",108,0)
 .S DIC="^ONCO(160,"
"RTN","ONCOCFP",109,0)
 .S BY="@75,INTERNAL(#3),75,.01"
"RTN","ONCOCFP",110,0)
 .S FR=DUZ(2)_","_ONCO("SD"),TO=DUZ(2)_","_ONCO("ED")
"RTN","ONCOCFP",111,0)
 .S FLDS="[ONCO PTF-CASEFINDING RPT]"
"RTN","ONCOCFP",112,0)
 S L=0,IOP=ION,DIOEND="D WP^ONCOCFP"
"RTN","ONCOCFP",113,0)
 D EN1^DIP G EX
"RTN","ONCOCFP",114,0)
 ;
"RTN","ONCOCFP",115,0)
WP ;Wrap-up report
"RTN","ONCOCFP",116,0)
 W !?3,$G(^TMP("ONCO",$J,0))_" PTF cases added to Suspense"
"RTN","ONCOCFP",117,0)
 Q
"RTN","ONCOCFP",118,0)
 ;
"RTN","ONCOCFP",119,0)
IC ;Search for ICD codes
"RTN","ONCOCFP",120,0)
 K HT,IC9,IC,ICD,ICP
"RTN","ONCOCFP",121,0)
 S P="",CI=0
"RTN","ONCOCFP",122,0)
 F F=10,16:1:24 S ICP=+$P(X70,U,F) I ICP S ICD=$$ICDDX^ICDCODE(ICP),IC9=$P(ICD,U,2) D FD Q:CI=1
"RTN","ONCOCFP",123,0)
 I X71'="",CI=0 F F=1,2,3,4 S ICP=+$P(X71,U,F) I ICP S ICD=$$ICDDX^ICDCODE(ICP),IC9=$P(ICD,U,1) D FD Q:CI=1
"RTN","ONCOCFP",124,0)
 Q:CI=0  G CK
"RTN","ONCOCFP",125,0)
 ;
"RTN","ONCOCFP",126,0)
FD I ((IC9>139.9)&(IC9<210)) S CI=1 Q
"RTN","ONCOCFP",127,0)
 I ((IC9>224.9)&(IC9<226)) S CI=1 Q
"RTN","ONCOCFP",128,0)
 I (IC9=227.3)!(IC9=227.4)!(IC9=228.02) S CI=1 Q
"RTN","ONCOCFP",129,0)
 I ((IC9>229.9)&(IC9<240)) S CI=1 Q
"RTN","ONCOCFP",130,0)
 I (IC9=259.2)!(IC9=273.1)!(IC9=273.2)!(IC9=273.3)!(IC9=273.9)!(IC9=284.9)!(IC9=288.3)!(IC9=288.4)!(IC9=289.6)!(IC9=289.8)!(IC9=289.83)!(IC9=795.06)!(IC9=795.16)!(IC9=795.76)!(IC9=796.76)!(IC9="042.2")!(IC9="285.0") S CI=1 Q
"RTN","ONCOCFP",131,0)
 I $E(IC9)="V" S CD=$E(IC9,2,5) I ((CD>9)&(CD<11))!(CD=12.41)!(CD="58.0")!(CD=58.1)!(CD=66.1)!(CD=66.2)!(CD=67.1)!(CD=67.2)!(CD=71.1)!(CD="07.3")!(CD="07.8")!($E(CD,1,2)=76) S CI=1 Q
"RTN","ONCOCFP",132,0)
 Q
"RTN","ONCOCFP",133,0)
 ;
"RTN","ONCOCFP",134,0)
CK ;Check ONCOLOGY PATIENT (160) file
"RTN","ONCOCFP",135,0)
 ;Supported by IA #418
"RTN","ONCOCFP",136,0)
 Q:IC9=""
"RTN","ONCOCFP",137,0)
 D DIV Q:DVMTCH=0
"RTN","ONCOCFP",138,0)
 S X=^DGPT(D0,0),ADT=$P($P(X,U,2),"."),X=$P(X,U)_";DPT("
"RTN","ONCOCFP",139,0)
 S XD0=$O(^ONCO(160,"B",X,0)),ONCIEN=XD0 I XD0="" G MR
"RTN","ONCOCFP",140,0)
 I XD0'="" S ONCDIVS="",ONCS="" F  S ONCS=$O(^ONCO(160,XD0,"SUS","C",ONCS)) Q:ONCS'>0  S ONCDIVS=ONCDIVS_U_ONCS
"RTN","ONCOCFP",141,0)
 I ONCDIVS[DUZ(2) Q
"RTN","ONCOCFP",142,0)
 S DA=XD0 I '$D(^ONCO(165.5,"C",XD0)) G N2
"RTN","ONCOCFP",143,0)
 ;
"RTN","ONCOCFP",144,0)
CKP ;Check ONCOLOGY PRIMARY (165.5) file
"RTN","ONCOCFP",145,0)
 S XD1=0 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  I $$DIV^ONCFUNC(XD1)=DUZ(2) D
"RTN","ONCOCFP",146,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,0)),U,16) I XDT>(ADT-1)&(XDX<($P(XDT,".")+1)) S HT=1 Q
"RTN","ONCOCFP",147,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,1)),U,10) I XDX=XDT S HT=1 Q
"RTN","ONCOCFP",148,0)
 Q
"RTN","ONCOCFP",149,0)
 ;
"RTN","ONCOCFP",150,0)
MR ;Create ONCOLOGY PATIENT (160) record
"RTN","ONCOCFP",151,0)
 Q:$D(HT)
"RTN","ONCOCFP",152,0)
 K DO S DIC="^ONCO(160,",DIC(0)="Z" D FILE^DICN K DO
"RTN","ONCOCFP",153,0)
 S (ONCIEN,XD0,DA)=+Y
"RTN","ONCOCFP",154,0)
 ;
"RTN","ONCOCFP",155,0)
N2 ;Create SUSPENSE (160.075) record
"RTN","ONCOCFP",156,0)
 N DD,PTFDT,X1,X2
"RTN","ONCOCFP",157,0)
 S X1=ADT,X2=1 D C^%DTC S SDT=X
"RTN","ONCOCFP",158,0)
 S X1=ONCO("SD"),X2=1 D C^%DTC S WSD=X
"RTN","ONCOCFP",159,0)
 S DA(1)=ONCIEN,DIC="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFP",160,0)
 K DO S DIC(0)="L",DIC("P")=$P(^DD(160,75,0),U,2),X=$S(SDT<WSD:WSD,1:SDT)
"RTN","ONCOCFP",161,0)
 D FILE^DICN K DO
"RTN","ONCOCFP",162,0)
 K DIE S DA(1)=ONCIEN,DIE="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFP",163,0)
 S (ONCSUB,DA)=+Y,PTFDT=$P(XDT,".")
"RTN","ONCOCFP",164,0)
 S DR="1///^S X=DT;2///^S X=""PT"";3////^S X=DUZ(2);7///^S X=PTFDT;8////^S X=ICP"
"RTN","ONCOCFP",165,0)
 D ^DIE
"RTN","ONCOCFP",166,0)
 S ^TMP("ONCO",$J,0)=^TMP("ONCO",$J,0)+1
"RTN","ONCOCFP",167,0)
 Q
"RTN","ONCOCFP",168,0)
 ;
"RTN","ONCOCFP",169,0)
DIV ;DIVISION match
"RTN","ONCOCFP",170,0)
 ;Supported by IAs #417 and #1378
"RTN","ONCOCFP",171,0)
 N PTFD0,PTMV,WL
"RTN","ONCOCFP",172,0)
 S DVMTCH=1,INST=""
"RTN","ONCOCFP",173,0)
 S PTFD0=D0,PTMV=$O(^DGPM("APTF",PTFD0,"")) I PTMV="" Q
"RTN","ONCOCFP",174,0)
 S WL=$P($G(^DGPM(PTMV,0)),U,6) I WL="" Q
"RTN","ONCOCFP",175,0)
 S MCDV=$P($G(^DIC(42,WL,0)),U,11) I MCDV="" Q
"RTN","ONCOCFP",176,0)
 S INST=$P($G(^DG(40.8,MCDV,0)),U,7) I INST="" Q
"RTN","ONCOCFP",177,0)
 I AFFDIV'[INST S DVMTCH=0 Q
"RTN","ONCOCFP",178,0)
 Q
"RTN","ONCOCFP",179,0)
 ;
"RTN","ONCOCFP",180,0)
EX ;KILL variables
"RTN","ONCOCFP",181,0)
 K %DT,%T,%ZIS,ADT,AFFDIV,BY,CD,CI,D0,DA,DD,DIC,DIE,DIOEND,DIR,DO,DR
"RTN","ONCOCFP",182,0)
 K DVMTCH,ED,F,FLDS,FR,GLO,HT,IC,IC9,ICD,ICP,INST,IOP,L,MCDV,NM,O2
"RTN","ONCOCFP",183,0)
 K ONCDIVS,ONCDIVSP,ONCIEN,ONCO,ONCS,ONCSUB,OSP,P,POP,PTFD0,PTFDT,PTMV
"RTN","ONCOCFP",184,0)
 K SD,SDDEF,SDT,TO,WED,WSD,X,X1,X2,X70,X71,XD0,XD1,XDT,XDX,XED,Y,Z
"RTN","ONCOCFP",185,0)
 K ZTDESC,ZTRTN,ZTSAVE
"RTN","ONCOCFP",186,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFP",187,0)
 D ^%ZISC
"RTN","ONCOCFP",188,0)
 Q
"RTN","ONCOCFR")
0^14^B30967942^B29802331
"RTN","ONCOCFR",1,0)
ONCOCFR ;Hines OIFO/GWB - RADIOLOGY CASEFINDING ;05/07/12
"RTN","ONCOCFR",2,0)
 ;;2.11;ONCOLOGY;**13,24,25,26,27,34,37,39,46,50,53,56**;Mar 07, 1995;Build 10
"RTN","ONCOCFR",3,0)
 ;rvd - 05/07/12. Add the word 'cancer' to the search criteria
"RTN","ONCOCFR",4,0)
 ;
"RTN","ONCOCFR",5,0)
ST ;Start RAD/NUC MED PATIENT (70) file search
"RTN","ONCOCFR",6,0)
 W @IOF
"RTN","ONCOCFR",7,0)
 W !!!?10,"******** RADIOLOGY: SUSPICIOUS MALIGNANCY SEARCH ********",!
"RTN","ONCOCFR",8,0)
 W !?10,"This option will search the RAD/NUC MED PATIENT file"
"RTN","ONCOCFR",9,0)
 W !?10,"for cases to add to the Suspense List."
"RTN","ONCOCFR",10,0)
MG S MG=0,D0=0 F  S D0=$O(^RA(78.3,"B",D0)) Q:D0=""  S XX=$TR(D0,"malig","MALIG") I XX["MALIG" S MG=$O(^(D0,0)) Q
"RTN","ONCOCFR",11,0)
 G T:MG W !!?15,"MALIGNACY diagnostic code is not defined in the"
"RTN","ONCOCFR",12,0)
 W !?15,"Radiology Diagnostic Codes File (#78.3). Please"
"RTN","ONCOCFR",13,0)
 W !?15,"REQUEST Radiology to code suspicious MALIGNANCIES"
"RTN","ONCOCFR",14,0)
 W !!!?10,"MUST terminate Radiology Search - no meaningful search code" G EX
"RTN","ONCOCFR",15,0)
 ;
"RTN","ONCOCFR",16,0)
T ;Start Date/End Date
"RTN","ONCOCFR",17,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCOCFR",18,0)
 I OSP="" D  Q
"RTN","ONCOCFR",19,0)
 .W !!?10,"Casefinding requires an ONCOLOGY SITE PARAMETER"
"RTN","ONCOCFR",20,0)
 .W !?10,"entry which matches the user's login DIVISION."
"RTN","ONCOCFR",21,0)
 .W !?10,"There is no ONCOLOGY SITE PARAMETER for DIVISION:"
"RTN","ONCOCFR",22,0)
 .W !?10,$P($G(^DIC(4,DUZ(2),0)),U,1)
"RTN","ONCOCFR",23,0)
 S Y=$P(^ONCO(160.1,OSP,0),U,6)
"RTN","ONCOCFR",24,0)
 I Y="" S Y=DT
"RTN","ONCOCFR",25,0)
 S Y=$E(Y,4,5)_"-"_$E(Y,6,7)_"-"_($E(Y,1,3)+1700)
"RTN","ONCOCFR",26,0)
 K DIR
"RTN","ONCOCFR",27,0)
 S DIR("B")=Y
"RTN","ONCOCFR",28,0)
 W !
"RTN","ONCOCFR",29,0)
 S DIR("A")="          Start Date",DIR(0)="D" D ^DIR
"RTN","ONCOCFR",30,0)
 G EX:Y<1!(Y[U)
"RTN","ONCOCFR",31,0)
 S (SD,X)=Y D DD^%DT W "  ",Y S WSD=Y
"RTN","ONCOCFR",32,0)
 K DIR
"RTN","ONCOCFR",33,0)
 S DIR("A")="            End Date",DIR(0)="D" D ^DIR
"RTN","ONCOCFR",34,0)
 G EX:Y=""!(Y[U)
"RTN","ONCOCFR",35,0)
 I Y<SD!(Y>DT) W *7,?40,"Invalid date sequence!!",! G T
"RTN","ONCOCFR",36,0)
 S $P(^ONCO(160.1,OSP,0),U,6)=Y
"RTN","ONCOCFR",37,0)
 S (ED,X)=Y D DD^%DT W "  ",Y,!
"RTN","ONCOCFR",38,0)
 S WED=Y
"RTN","ONCOCFR",39,0)
 S DIR("A")="          Dates OK",DIR("B")="Y",DIR(0)="Y" D ^DIR
"RTN","ONCOCFR",40,0)
 G T:'Y,EX:Y[U!(Y="")
"RTN","ONCOCFR",41,0)
 W !!?15,"We will find suspicious malignancies"
"RTN","ONCOCFR",42,0)
 W !?15,"From: ",WSD_" To: "_WED,!
"RTN","ONCOCFR",43,0)
 W ! S ONCO("SD")=SD,ONCO("ED")=ED,ONCO("MG")=MG
"RTN","ONCOCFR",44,0)
 ;
"RTN","ONCOCFR",45,0)
TSK ;Create task
"RTN","ONCOCFR",46,0)
 K IO("Q") S %ZIS="Q" D ^%ZIS I POP S ONCOUT="" G EX
"RTN","ONCOCFR",47,0)
 I '$D(IO("Q")) D SER^ONCOCFR G EX
"RTN","ONCOCFR",48,0)
 S ZTRTN="SER^ONCOCFR",ZTSAVE("ONCO*")="",ZTDESC="ONCOLOGY RADIOLOGY SEARCH" D ^%ZTLOAD G EX
"RTN","ONCOCFR",49,0)
 ;
"RTN","ONCOCFR",50,0)
SER ;Search RAD/NUC MED PATIENT (70) file/Set multidivisional variables
"RTN","ONCOCFR",51,0)
 S AFFDIV=$G(DUZ(2)),ONCDIVSP=$O(^ONCO(160.1,"C",AFFDIV,""))
"RTN","ONCOCFR",52,0)
 I ONCDIVSP="" W !!,"User does not have an associated DIVISION!",!! G EX
"RTN","ONCOCFR",53,0)
 F Z=0:0 S Z=$O(^ONCO(160.1,ONCDIVSP,6,Z)) Q:Z'>0  S AFFDIV=AFFDIV_U_$G(^ONCO(160.1,ONCDIVSP,6,Z,0))
"RTN","ONCOCFR",54,0)
 K ^TMP("ONCO",$J) S (XSD,XDT)=ONCO("SD")-.1111111,XED=ONCO("ED")+.9999999,MG=ONCO("MG") F J=0,1,2 S ^TMP("ONCO",$J,J)=0
"RTN","ONCOCFR",55,0)
 F  S XDT=$O(^RADPT("AR",XDT)) Q:XDT=""!(XDT>XED)  S D0=0 F  S D0=$O(^RADPT("AR",XDT,D0)) Q:D0'>0  S D1=$O(^RADPT("AR",XDT,D0,0)) D
"RTN","ONCOCFR",56,0)
 .S D2=0 F  S D2=$O(^RADPT(D0,"DT",D1,"P",D2)) Q:D2'>0  D
"RTN","ONCOCFR",57,0)
 ..S RA0=$G(^(D2,0)) I RA0="" Q
"RTN","ONCOCFR",58,0)
 ..S PC13=$P(RA0,U,13) I PC13="" Q
"RTN","ONCOCFR",59,0)
 ..S EXP=$$GET1^DIQ(78.3,PC13,6),EXP=$TR(EXP,"malig","MALIG"),EXP=$TR(EXP,"Suspicious","SUSPICIOUS")
"RTN","ONCOCFR",60,0)
 ..S MG=$P($G(^RA(78.3,PC13,0)),U,1),MG=$TR(MG,"malig","MALIG"),MG=$TR(MG,"cancer","CANCER")
"RTN","ONCOCFR",61,0)
 ..I (MG["MALIG")!(MG["CANCER")!(EXP["MALIG")!(EXP["SUSPICIOUS") S RA($P(^RADPT(D0,0),U))=$P(XDT,".")_U_$P(RA0,U,2)_U_D1
"RTN","ONCOCFR",62,0)
 ..S D3=0 F  S D3=$O(^RADPT(D0,"DT",D1,"P",D2,"DX",D3)) Q:D3'>0  D
"RTN","ONCOCFR",63,0)
 ...S RASDC0=$G(^(D3,0)) I RASDC0="" Q
"RTN","ONCOCFR",64,0)
 ...S PC1=$P(RASDC0,U,1) I PC1="" Q
"RTN","ONCOCFR",65,0)
 ...S EXP=$$GET1^DIQ(78.3,PC1,6),EXP=$TR(EXP,"malig","MALIG"),EXP=$TR(EXP,"Suspicious","SUSPICIOUS")
"RTN","ONCOCFR",66,0)
 ...S MG=$P($G(^RA(78.3,PC1,0)),U,1),MG=$TR(MG,"malig","MALIG"),MG=$TR(MG,"cancer","CANCER")
"RTN","ONCOCFR",67,0)
 ...I (MG["MALIG")!(MG["CANCER")!(EXP["MALIG")!(EXP["SUSPICIOUS") S RA($P(^RADPT(D0,0),U))=$P(XDT,".")_U_$P(RA0,U,2)_U_D1
"RTN","ONCOCFR",68,0)
 ;
"RTN","ONCOCFR",69,0)
CK ;Check ONCOLOGY PATIENT (160) file
"RTN","ONCOCFR",70,0)
GT S XX=0 F  S XX=$O(RA(XX)) Q:XX=""  D
"RTN","ONCOCFR",71,0)
 .D DIV Q:DVMTCH=0
"RTN","ONCOCFR",72,0)
 .S ^TMP("ONCO",$J,0)=^TMP("ONCO",$J,0)+1
"RTN","ONCOCFR",73,0)
 .S HT=0,X=XX_";DPT("
"RTN","ONCOCFR",74,0)
 .S XDT=$P(RA(XX),U),XD0=$O(^ONCO(160,"B",X,0)),ONCIEN=XD0
"RTN","ONCOCFR",75,0)
 .I XD0="" D MR Q
"RTN","ONCOCFR",76,0)
 .I XD0'="" S ONCDIVS="",ONCS="" F  S ONCS=$O(^ONCO(160,XD0,"SUS","C",ONCS)) Q:ONCS'>0  S ONCDIVS=ONCDIVS_U_ONCS
"RTN","ONCOCFR",77,0)
 .I ONCDIVS'[DUZ(2) D
"RTN","ONCOCFR",78,0)
 ..S (D0,DA)=XD0 I '$D(^ONCO(165.5,"C",XD0)) D N2 Q
"RTN","ONCOCFR",79,0)
 ..I $D(^ONCO(165.5,"C",XD0)) D CKP I 'HT D N2 Q
"RTN","ONCOCFR",80,0)
 .Q
"RTN","ONCOCFR",81,0)
 ;
"RTN","ONCOCFR",82,0)
RPT ; Generate report
"RTN","ONCOCFR",83,0)
 I $G(^TMP("ONCO",$J,2))=0 S DIC="^ONCO(160.1,",BY="[ONCO NEG-REPORT]"
"RTN","ONCOCFR",84,0)
 E  D
"RTN","ONCOCFR",85,0)
 .S DIC="^ONCO(160,"
"RTN","ONCOCFR",86,0)
 .S BY="@75,INTERNAL(#3),75,.01"
"RTN","ONCOCFR",87,0)
 .S FR=DUZ(2)_","_ONCO("SD"),TO=DUZ(2)_","_ONCO("ED")
"RTN","ONCOCFR",88,0)
 .S FLDS="[ONCO RAD-CASEFINDING RPT]"
"RTN","ONCOCFR",89,0)
 .Q
"RTN","ONCOCFR",90,0)
 ;
"RTN","ONCOCFR",91,0)
PRT ; Call print routine
"RTN","ONCOCFR",92,0)
 S L=0,IOP=ION,DIOEND="D WP^ONCOCFR"
"RTN","ONCOCFR",93,0)
 D EN1^DIP G EX
"RTN","ONCOCFR",94,0)
 ;
"RTN","ONCOCFR",95,0)
WP ; Wrap-up report
"RTN","ONCOCFR",96,0)
 W !!!?30,"RADIOLOGY CASEFINDING RESULTS"
"RTN","ONCOCFR",97,0)
 W !!?30,^TMP("ONCO",$J,0)_" Cases found",!?30,^TMP("ONCO",$J,1)_" New Patients added",!?30,^TMP("ONCO",$J,2)_" New cases added",!!
"RTN","ONCOCFR",98,0)
 Q
"RTN","ONCOCFR",99,0)
 ;
"RTN","ONCOCFR",100,0)
CKP ;CHECK Primary File
"RTN","ONCOCFR",101,0)
 S XD1=0 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  I $$DIV^ONCFUNC(XD1)=DUZ(2) D
"RTN","ONCOCFR",102,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,0)),U,16) I XDX=XDT S HT=1 Q
"RTN","ONCOCFR",103,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,1)),U,10) I XDX=XDT S HT=1 Q
"RTN","ONCOCFR",104,0)
 .Q
"RTN","ONCOCFR",105,0)
 Q
"RTN","ONCOCFR",106,0)
 ;
"RTN","ONCOCFR",107,0)
MR ;Create new ONCOLOGY PATIENT (160) record
"RTN","ONCOCFR",108,0)
 S DIC="^ONCO(160,",DIC(0)="Z" D FILE^DICN S (ONCIEN,D0,DA)=+Y,^TMP("ONCO",$J,1)=^TMP("ONCO",$J,1)+1
"RTN","ONCOCFR",109,0)
N2 ;Create new SUSPENSE (160,75) record
"RTN","ONCOCFR",110,0)
 K DD,DO
"RTN","ONCOCFR",111,0)
 S DA(1)=ONCIEN,DIC="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFR",112,0)
 S DIC(0)="L",DIC("P")=$P(^DD(160,75,0),U,2),X=XDT
"RTN","ONCOCFR",113,0)
 D FILE^DICN
"RTN","ONCOCFR",114,0)
 K DIE S DA(1)=ONCIEN,DIE="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFR",115,0)
 S (ONCSUB,DA)=+Y,RDP=$P(RA(XX),U,2)
"RTN","ONCOCFR",116,0)
 S DR="1///^S X=DT;2///^S X=""RA"";3////^S X=DUZ(2);6////^S X=RDP" D ^DIE
"RTN","ONCOCFR",117,0)
 S ^TMP("ONCO",$J,2)=^TMP("ONCO",$J,2)+1
"RTN","ONCOCFR",118,0)
 Q
"RTN","ONCOCFR",119,0)
 ;
"RTN","ONCOCFR",120,0)
DIV ;Division match
"RTN","ONCOCFR",121,0)
 S DVMTCH=1,INST="",RE1=$P(RA(XX),U,3) I RE1="" Q
"RTN","ONCOCFR",122,0)
 S INST=$P($G(^RADPT(XX,"DT",RE1,0)),U,3) I INST="" Q
"RTN","ONCOCFR",123,0)
 I AFFDIV'[INST S DVMTCH=0 Q
"RTN","ONCOCFR",124,0)
 Q
"RTN","ONCOCFR",125,0)
 ;
"RTN","ONCOCFR",126,0)
EX ;EXIT
"RTN","ONCOCFR",127,0)
 K %ZIS,AFFDIV,BY,D0,D1,D2,D3,DA,DIC,DIOEND,DR,DVMTCH,ED,EXP,FLDS,FR,HT
"RTN","ONCOCFR",128,0)
 K INST,IOP,J,L,MG,ONCDIVS,ONCDIVSP,ONCIEN,ONCO,ONCOUT,ONCS,ONCSUB,OSP
"RTN","ONCOCFR",129,0)
 K PC1,PC13,POP,RA,RA0,RASDC0,RDP,RE1,SD,TO,WED,WSD,X,XD0,XD1,XDT,XDX
"RTN","ONCOCFR",130,0)
 K XED,XSD,XX,Y,Z,ZTDESC,ZTRTN,ZTSAVE,ONCDIVSP
"RTN","ONCOCFR",131,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFR",132,0)
 D ^%ZISC
"RTN","ONCOCFR",133,0)
 Q
"RTN","ONCODIS")
0^17^B786459^B778372
"RTN","ONCODIS",1,0)
ONCODIS ;Hines OIFO/GWB - OncoTrax Banner ;09/13/11
"RTN","ONCODIS",2,0)
 ;;2.11;Oncology;**6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,55,54,56**;Mar 07, 1995;Build 10
"RTN","ONCODIS",3,0)
 ;
"RTN","ONCODIS",4,0)
MAIN ;OncoTrax Banner
"RTN","ONCODIS",5,0)
 S RC=$$CHKVER^ONCSAPIV()
"RTN","ONCODIS",6,0)
 D LOGO
"RTN","ONCODIS",7,0)
 K I,RC
"RTN","ONCODIS",8,0)
 Q
"RTN","ONCODIS",9,0)
 ;
"RTN","ONCODIS",10,0)
LOGO ;Display banner
"RTN","ONCODIS",11,0)
 W @IOF W !!!!!! F I=1:1:9 W !,?22,$P($T(DISP+I),";",3)
"RTN","ONCODIS",12,0)
 W !!,?22,"Department of Veterans Affairs"
"RTN","ONCODIS",13,0)
 W !?22,"OncoTraX V2.11 P56T10" Q
"RTN","ONCODIS",14,0)
DISP ;
"RTN","ONCODIS",15,0)
 ;;VVVV            VVAA
"RTN","ONCODIS",16,0)
 ;; VVVV          VVAAAA
"RTN","ONCODIS",17,0)
 ;;  VVVV        VVAAAAAA
"RTN","ONCODIS",18,0)
 ;;   VVVV      VVAA  AAAA
"RTN","ONCODIS",19,0)
 ;;    VVVV    VVAA    AAAA
"RTN","ONCODIS",20,0)
 ;;     VVVV  VVAA      AAAA
"RTN","ONCODIS",21,0)
 ;;      VVVVVVAA        AAAA
"RTN","ONCODIS",22,0)
 ;;       VVVVAA   AAAAAAAAAAA
"RTN","ONCODIS",23,0)
 ;;        VVAA     AAAAAAAAAAA
"RTN","ONCODSP")
0^7^B50443707^B47131458
"RTN","ONCODSP",1,0)
ONCODSP ;Hines OIFO/GWB,RTK - MISCELLANEOUS OPTIONS ;05/05/10
"RTN","ONCODSP",2,0)
 ;;2.11;ONCOLOGY;**1,5,6,13,18,22,23,25,26,39,40,44,48,51,53,56**;Mar 07, 1995;Build 10
"RTN","ONCODSP",3,0)
 ;
"RTN","ONCODSP",4,0)
TR ;[TR Define Tumor Registry Parameters]
"RTN","ONCODSP",5,0)
 W ! S DIC="^ONCO(160.1,",DIC(0)="AEMLQ",DLAYGO=160.1 D ^DIC
"RTN","ONCODSP",6,0)
 I Y=-1 G EX
"RTN","ONCODSP",7,0)
 W @IOF,!,"  ONCOLOGY SITE PARAMETERS"
"RTN","ONCODSP",8,0)
 W !,"  ------------------------"
"RTN","ONCODSP",9,0)
 S DIE="^ONCO(160.1,",DA=+Y
"RTN","ONCODSP",10,0)
 S DR=""
"RTN","ONCODSP",11,0)
 S DR(1,160.1,1)=".01  HOSPITAL NAME....."
"RTN","ONCODSP",12,0)
 S DR(1,160.1,2)=".02  STREET ADDRESS...."
"RTN","ONCODSP",13,0)
 S DR(1,160.1,3)=".03  ZIPCODE..........."
"RTN","ONCODSP",14,0)
 ;S DR(1,160.1,3.1)="W !,""  CITY..............: "",$$GET1^DIQ(160.1,DA,66)"
"RTN","ONCODSP",15,0)
 ;S DR(1,160.1,3.2)="W !,""  STATE.............: "",$$GET1^DIQ(160.1,DA,67)"
"RTN","ONCODSP",16,0)
 S DR(1,160.1,4)=".04  REFERENCE DATE...."
"RTN","ONCODSP",17,0)
 S DR(1,160.1,5)="1  TUMOR REGISTRAR..."
"RTN","ONCODSP",18,0)
 S DR(1,160.1,6)="1.02  PHONE NUMBER......"
"RTN","ONCODSP",19,0)
 S DR(1,160.1,7)="1.03  STATE HOSPITAL #.."
"RTN","ONCODSP",20,0)
 S DR(1,160.1,8)="27  FACILITY ID #....."
"RTN","ONCODSP",21,0)
 S DR(1,160.1,8.1)="S FACPNT=$P($G(^ONCO(160.1,DA,1)),U,4) D FNPI^ONCNPI"
"RTN","ONCODSP",22,0)
 S DR(1,160.1,9)="28  CENTRAL REGISTRY #"
"RTN","ONCODSP",23,0)
 S DR(1,160.1,10)="7  VISN.............."
"RTN","ONCODSP",24,0)
 S DR(1,160.1,10.1)="19  CS/EDITS URL......"
"RTN","ONCODSP",25,0)
 S DR(1,160.1,11)="6  DIVISION.........."
"RTN","ONCODSP",26,0)
 S DR(1,160.1,11.1)="68  COC ACCREDITATION."
"RTN","ONCODSP",27,0)
 S DR(1,160.1,12)="W !"
"RTN","ONCODSP",28,0)
 S DR(1,160.1,13)="8  AFFILIATED DIVISION."
"RTN","ONCODSP",29,0)
 S DR(1,160.1,14)="W !"
"RTN","ONCODSP",30,0)
 S DR(1,160.1,15)="5  AUTHORZIED QA USER.."
"RTN","ONCODSP",31,0)
 D ^DIE
"RTN","ONCODSP",32,0)
 W ! K DIR S DIR(0)="E" D ^DIR S:$D(DIRUT) OUT="Y"
"RTN","ONCODSP",33,0)
 G EX
"RTN","ONCODSP",34,0)
 ;
"RTN","ONCODSP",35,0)
DIVID ;DIVISION (160.1,6) identifier
"RTN","ONCODSP",36,0)
 S ONCDIV=""
"RTN","ONCODSP",37,0)
 Q:'$D(^ONCO(160.1,Y,1))
"RTN","ONCODSP",38,0)
 S INSPTR=$P(^ONCO(160.1,Y,1),U,8)
"RTN","ONCODSP",39,0)
 Q:'$D(^DIC(4,INSPTR,99))
"RTN","ONCODSP",40,0)
 S ONCDIV=$P(^DIC(4,INSPTR,99),U,1)
"RTN","ONCODSP",41,0)
 W ?30,ONCDIV
"RTN","ONCODSP",42,0)
 K ONCDIV,INSPTR
"RTN","ONCODSP",43,0)
 Q
"RTN","ONCODSP",44,0)
 ;
"RTN","ONCODSP",45,0)
WS ;[WS Edit/print worksheet]
"RTN","ONCODSP",46,0)
 K DIR
"RTN","ONCODSP",47,0)
 S DIR("A")=" Action",DIR(0)="SO^E:Edit worksheet;P:Print worksheet"
"RTN","ONCODSP",48,0)
 D ^DIR G EW:Y="E",PW:Y="P",EX
"RTN","ONCODSP",49,0)
 ;
"RTN","ONCODSP",50,0)
EW ;Edit worksheet
"RTN","ONCODSP",51,0)
 S DIE="^ONCO(160.2,",DA=5,DR=1 D ^DIE
"RTN","ONCODSP",52,0)
 G WS
"RTN","ONCODSP",53,0)
 ;
"RTN","ONCODSP",54,0)
PW ;Print Worksheet
"RTN","ONCODSP",55,0)
 S DIC="^ONCO(160.2,",L=0,(NUMBER,DA)=5
"RTN","ONCODSP",56,0)
 S BY="@NUMBER",FR=NUMBER,TO=NUMBER,FLDS="[ONCO WORKSHEET]"
"RTN","ONCODSP",57,0)
 D EN1^DIP
"RTN","ONCODSP",58,0)
 G WS
"RTN","ONCODSP",59,0)
 ;
"RTN","ONCODSP",60,0)
RSR ;[RS Registry Summary Reports]
"RTN","ONCODSP",61,0)
 S ONCOS("T")="T",DIR("A")=" Select"
"RTN","ONCODSP",62,0)
 S DIR(0)="S^T:Today;A:Annual;F:Follow-Up",DIR("B")="Today"
"RTN","ONCODSP",63,0)
 D ^DIR G EX:Y=""!(Y[U) G @Y
"RTN","ONCODSP",64,0)
 ;
"RTN","ONCODSP",65,0)
A ;[RS Registry Summary Reports - Annual]
"RTN","ONCODSP",66,0)
 S BYR=$O(^ONCO(165.5,"AY",0))
"RTN","ONCODSP",67,0)
 F YR=$E(DT,1)+17_$E(DT,2,3)-1:-1:BYR-1 S EYR=$O(^ONCO(165.5,"AY",YR))  Q:EYR'=""
"RTN","ONCODSP",68,0)
 W !!
"RTN","ONCODSP",69,0)
 K DIR
"RTN","ONCODSP",70,0)
 S YR=$E(DT,1)+17_$E(DT,2,3)
"RTN","ONCODSP",71,0)
 S DIR("A")=" Select year for summary"
"RTN","ONCODSP",72,0)
 S DIR("B")=YR-1 S:DIR("B")<BYR DIR("B")=BYR
"RTN","ONCODSP",73,0)
 S DIR(0)="N^"_BYR_":"_EYR D ^DIR K DIR
"RTN","ONCODSP",74,0)
 G EX:Y[U!(Y=""),A:Y>YR,A:Y'?1.N S ONCOS("T")=Y
"RTN","ONCODSP",75,0)
 K DIR
"RTN","ONCODSP",76,0)
 S DIR("A")=" Analytic cases only"
"RTN","ONCODSP",77,0)
 S DIR("B")="YES"
"RTN","ONCODSP",78,0)
 S DIR(0)="Y"
"RTN","ONCODSP",79,0)
 S DIR("?")=" "
"RTN","ONCODSP",80,0)
 S DIR("?",1)=" Answer 'YES' if you want only analytic cases (CLASS OF CASE 00-22) displayed."
"RTN","ONCODSP",81,0)
 S DIR("?",2)=" Answer  'NO' if you want all cases (analytic and non-analytic) displayed."
"RTN","ONCODSP",82,0)
 D ^DIR
"RTN","ONCODSP",83,0)
 I $D(DIRUT) Q
"RTN","ONCODSP",84,0)
 S ACO=Y
"RTN","ONCODSP",85,0)
 ;
"RTN","ONCODSP",86,0)
T ;[RS Registry Summary Reports - Today]
"RTN","ONCODSP",87,0)
 K IO("Q") S %ZIS="Q" W !! D ^%ZIS I POP S ONCOUT="" G EX
"RTN","ONCODSP",88,0)
 I '$D(IO("Q")) D WAIT^DICD,TK^ONCODSP G EX
"RTN","ONCODSP",89,0)
 S ZTSAVE("ONCOS*")="",ZTSAVE("ACO")=""
"RTN","ONCODSP",90,0)
 S ZTRTN="TK^ONCODSP",ZTDESC="REGISTRY SUMMARY RPT"
"RTN","ONCODSP",91,0)
 D ^%ZTLOAD G EX
"RTN","ONCODSP",92,0)
 ;
"RTN","ONCODSP",93,0)
F ;[RS Registry Summary Reports - Follow-Up]
"RTN","ONCODSP",94,0)
 K DIR
"RTN","ONCODSP",95,0)
 W !!," Follow-up rate calculation parameters (select 1 or 2):",!
"RTN","ONCODSP",96,0)
 W !," 1) All analytic patients from the cancer registry reference date"
"RTN","ONCODSP",97,0)
 W !," 2) All analytic patients diagnosed within the last five years, or"
"RTN","ONCODSP",98,0)
 W !,"    from the cancer registry reference date, whichever is shorter"
"RTN","ONCODSP",99,0)
 W !
"RTN","ONCODSP",100,0)
 N DIR,X,Y
"RTN","ONCODSP",101,0)
 S DIR(0)="SAO^1:From cancer registry reference date;2:Within last 5 years or reference date (whichever is shorter)"
"RTN","ONCODSP",102,0)
 S DIR("A")=" Select follow-up rate calculation parameter: "
"RTN","ONCODSP",103,0)
 S DIR("?")="Select the starting point to compute the follow-up rate"
"RTN","ONCODSP",104,0)
 D ^DIR G EX:Y=""!(Y[U) S ONCOS("F")=Y
"RTN","ONCODSP",105,0)
 K IO("Q") S %ZIS="Q" W !! D ^%ZIS I POP S ONCOUT="" G EX
"RTN","ONCODSP",106,0)
 I '$D(IO("Q")) D WAIT^DICD G FR^ONCOCOF
"RTN","ONCODSP",107,0)
 S ZTSAVE("ONCOS*")="",ZTRTN="FR^ONCOCOF",ZTDESC="FOLLOWUP RATE REPORT"
"RTN","ONCODSP",108,0)
 D ^%ZTLOAD G EX
"RTN","ONCODSP",109,0)
 ;
"RTN","ONCODSP",110,0)
TK ;Tasked [RS Registry Summary Reports - Today] report 
"RTN","ONCODSP",111,0)
 S YR=ONCOS("T")
"RTN","ONCODSP",112,0)
 G AN:YR'="T"
"RTN","ONCODSP",113,0)
 S V(9)=0,F(8)=0 F I=0,1 S G(I)=0,V(I)=0,F(I)=0
"RTN","ONCODSP",114,0)
 ;S G=0,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2) S G(G)=G(G)+1
"RTN","ONCODSP",115,0)
 ;S G=1,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2) S G(G)=G(G)+1
"RTN","ONCODSP",116,0)
 S G=0,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2),$P($G(^ONCO(165.5,XD0,7)),"^",2)'="A" S G(G)=G(G)+1
"RTN","ONCODSP",117,0)
 S G=1,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2),$P($G(^ONCO(165.5,XD0,7)),"^",2)'="A" S G(G)=G(G)+1
"RTN","ONCODSP",118,0)
 S W=0,X0=0 F  S X0=$O(^ONCO(160,"ADX",X0)) Q:'X0  S X1=0 F  S X1=$O(^ONCO(160,"ADX",X0,X1)) Q:'X1  S X2=0 F  S X2=$O(^ONCO(160,"ADX",X0,X1,X2)) Q:'X2  I $$SUSDIV^ONCFUNC(X1,X2)=DUZ(2) S W=W+1
"RTN","ONCODSP",119,0)
 ;F I=0:1:3 S W(I)=0
"RTN","ONCODSP",120,0)
 ;F I=0:1:3 S X0=0 F  S X0=$O(^ONCO(165.5,"AS",I,X0)) Q:X0'>0  I $$DIV^ONCFUNC(X0)=DUZ(2) S W(I)=W(I)+1
"RTN","ONCODSP",121,0)
 F I=0,1,2,3,"A" S W(I)=0
"RTN","ONCODSP",122,0)
 F I=0,1,2,3,"A" S X0=0 F  S X0=$O(^ONCO(165.5,"AS",I,X0)) Q:X0'>0  I $$DIV^ONCFUNC(X0)=DUZ(2) S W(I)=W(I)+1
"RTN","ONCODSP",123,0)
 W !!?30,"Analytical: ",$J(G(1),5)
"RTN","ONCODSP",124,0)
 W !?26,"Non-Analytical: ",$J(G(0),5)
"RTN","ONCODSP",125,0)
 W !?26,"Accession Only: ",$J(W("A"),5)
"RTN","ONCODSP",126,0)
 W !?42,"-----"
"RTN","ONCODSP",127,0)
 ;W !?35,"Total: ",$J(G(0)+G(1),5),!!
"RTN","ONCODSP",128,0)
 W !?35,"Total: ",$J(G(0)+G(1)+W("A"),5),!!
"RTN","ONCODSP",129,0)
 W !,?30,"WORKLOAD STATISTICS",!!
"RTN","ONCODSP",130,0)
 ;W "Suspense: ",W,?15,"Incomplete: ",W(0),?35,"Minimal: ",W(1),?50,"Partial: ",W(2),?65,"Complete: ",W(3),!!
"RTN","ONCODSP",131,0)
 W "Suspense: ",W,!!,"Incomplete: ",W(0),?19,"Minimal: ",W(1),?34,"Partial: ",W(2),?49,"Complete: ",W(3),?65,"Acc Only: ",W("A"),!
"RTN","ONCODSP",132,0)
 W "---------------",!,"Total: ",W(0)+W(1)+W(2)+W(3)+W("A")
"RTN","ONCODSP",133,0)
 Q
"RTN","ONCODSP",134,0)
 ;
"RTN","ONCODSP",135,0)
AN ;[RS Registry Summary Reports - Annual]
"RTN","ONCODSP",136,0)
 K ^TMP($J,"ANNSUM")
"RTN","ONCODSP",137,0)
 S ^ONCO(164.08,"YR")=YR
"RTN","ONCODSP",138,0)
 S XD0=0 F  S XD0=$O(^ONCO(164.08,XD0)) Q:XD0'>0  F J="CC","RS","SG" S ^ONCO(164.08,XD0,J)=""
"RTN","ONCODSP",139,0)
 S ^TMP($J,"ANNSUM","YR")=YR
"RTN","ONCODSP",140,0)
 S XD0=0 F  S XD0=$O(^ONCO(164.08,XD0)) Q:XD0'>0  S ^TMP($J,"ANNSUM",XD0,0)=$G(^ONCO(164.08,XD0,0)) F J="CC","RS","SG" S ^TMP($J,"ANNSUM",XD0,J)=""
"RTN","ONCODSP",141,0)
 S XD0=0 F  S XD0=$O(^ONCO(165.5,"AY",YR,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2) S X0=^ONCO(165.5,XD0,0),CSG=$P($G(^ONCO(165.5,XD0,2)),U,20),PSG=$P($G(^ONCO(165.5,XD0,2.1)),U,4),SG=$P($G(^ONCO(165.5,XD0,2)),U,28) D
"RTN","ONCODSP",142,0)
 .I $P($G(^ONCO(165.5,XD0,7)),U,2)="A" Q
"RTN","ONCODSP",143,0)
 .S COCANAL=$$GET1^DIQ(165.5,XD0,.042)
"RTN","ONCODSP",144,0)
 .I ACO=1,COCANAL="NONANALYTIC" Q
"RTN","ONCODSP",145,0)
 .I SG'="" S SG=$S(SG=0:0,SG="I":1,SG="II":2,SG="III":3,SG="IV":4,SG="U":99,SG="NA":88,1:"")
"RTN","ONCODSP",146,0)
 .I SG="" S SG=7 ;incomplete=7 (will put them in 8th piece of SG node)
"RTN","ONCODSP",147,0)
 .S ST=$P(X0,U),IC=$P(X0,U,22),PT=$P(X0,U,2),CC=$P(X0,U,20) Q:IC=""
"RTN","ONCODSP",148,0)
 .I IC=6799 S IC=6780
"RTN","ONCODSP",149,0)
 .S P0=$G(^ONCO(160,PT,0)) Q:P0=""  S RC=+$P(P0,U,6),SX=$P(P0,U,8),R=$S(RC=1:"W",RC=2:"B",1:"O"),S=$S(SX=1:"M",1:"F"),RS=R_S
"RTN","ONCODSP",150,0)
 .S CC=$S(CC=0:3,1:2),RS=$S(RS="WM":1,RS="WF":2,RS="BM":3,RS="BF":4,RS="OM":5,1:6)
"RTN","ONCODSP",151,0)
 .S SG=+SG+1,SG=$S(SG=100:6,SG=89:7,1:SG)
"RTN","ONCODSP",152,0)
 .S $P(^TMP($J,"ANNSUM",IC,"CC"),U,CC)=$P(^TMP($J,"ANNSUM",IC,"CC"),U,CC)+1,$P(^TMP($J,"ANNSUM",IC,"CC"),U)=$P(^TMP($J,"ANNSUM",IC,"CC"),U)+1
"RTN","ONCODSP",153,0)
 .S $P(^TMP($J,"ANNSUM",IC,"RS"),U,RS)=$P(^TMP($J,"ANNSUM",IC,"RS"),U,RS)+1
"RTN","ONCODSP",154,0)
 .S $P(^TMP($J,"ANNSUM",IC,"SG"),U,SG)=$P(^TMP($J,"ANNSUM",IC,"SG"),U,SG)+1
"RTN","ONCODSP",155,0)
 ;
"RTN","ONCODSP",156,0)
PRT ;Print report
"RTN","ONCODSP",157,0)
 D ^ONCODSP1
"RTN","ONCODSP",158,0)
 ;
"RTN","ONCODSP",159,0)
EX ;EXIT
"RTN","ONCODSP",160,0)
 K BY,BYR,CC,CSG,EYR,F,FLDS,FR,G,I,IC,J,L,NUMBER,ONCOS,ONCOUT
"RTN","ONCODSP",161,0)
 K P0,PSG,PT,R,RC,RS,SG,ST,SX,TO,V,W,X,X0,X1,X2,XD0,Y,YR
"RTN","ONCODSP",162,0)
 K DA,DIC,DIE,DIR,DIRUT,DLAYGO,DR,SITEPARAM
"RTN","ONCODSP",163,0)
 K ^TMP($J)
"RTN","ONCODSP",164,0)
 Q
"RTN","ONCODSP",165,0)
 ;
"RTN","ONCODSP",166,0)
CLEANUP ;Cleanup
"RTN","ONCODSP",167,0)
 K %ZIS,ACO,COCANAL,OUT,POP,S,ZTDESC,ZTRTN,ZTSAVE
"RTN","ONCODSR")
0^8^B89512891^B82978728
"RTN","ONCODSR",1,0)
ONCODSR ;Hines OIFO/GWB - Surgery of Primary Site ;06/23/10
"RTN","ONCODSR",2,0)
 ;;2.11;ONCOLOGY;**1,5,6,7,11,13,15,16,18,27,36,37,42,46,47,48,50,51,56**;Mar 07, 1995;Build 10
"RTN","ONCODSR",3,0)
 ;
"RTN","ONCODSR",4,0)
 ;^ONCO(164.2,9,"S",1-10) hold SURGICAL DX/STAGING PROC codes 0-9
"RTN","ONCODSR",5,0)
 ;^ONCO(164.2,SITE/GP,"S",11-100) holds surgery coes 10-99
"RTN","ONCODSR",6,0)
 ;
"RTN","ONCODSR",7,0)
CDSIT ;SURGERY OF PRIMARY SITE (165.5,58.2) INPUT TRANSFORM
"RTN","ONCODSR",8,0)
 N T,TOPGRPHY,SS
"RTN","ONCODSR",9,0)
 K:$L(X)>2!(X'?1.N) X G EX:'$D(X)
"RTN","ONCODSR",10,0)
 I X="00" D EN^DDIOL("  00 No surgical procedure") G EX
"RTN","ONCODSR",11,0)
 S TOPGRPHY=$$TOPGRPHY(D0) G ER:TOPGRPHY=""
"RTN","ONCODSR",12,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",13,0)
 I '$D(^ONCO(164.5,SS,1,X+1,0)) K X G EX
"RTN","ONCODSR",14,0)
 I ($P(^ONCO(165.5,D0,0),U,16)>2951231),$E(X,2)=8 K X G EX
"RTN","ONCODSR",15,0)
 D EN^DDIOL("  "_^ONCO(164.5,SS,1,X+1,0)) G EX
"RTN","ONCODSR",16,0)
 ;
"RTN","ONCODSR",17,0)
NCDSIT ;SURGICAL DX/STAGING PROC (165.5,58.1) INPUT TRANSFORM
"RTN","ONCODSR",18,0)
 I '$D(^ONCO(160.14,"B",X)) K X G EX
"RTN","ONCODSR",19,0)
 I $L(X)'=2 K X G EX
"RTN","ONCODSR",20,0)
 S NCDSIEN=$O(^ONCO(160.14,"B",X,0))
"RTN","ONCODSR",21,0)
 D EN^DDIOL("  "_$P(^ONCO(160.14,NCDSIEN,0),U,2))
"RTN","ONCODSR",22,0)
 K NCDSIEN Q
"RTN","ONCODSR",23,0)
 ;
"RTN","ONCODSR",24,0)
NCDSOT ;SURGICAL DX/STAGING PROC (165.5,58.1) OUTPUT TRANSFORM
"RTN","ONCODSR",25,0)
 Q:Y=""
"RTN","ONCODSR",26,0)
 S NCDSIEN=$O(^ONCO(160.14,"B",Y,0))
"RTN","ONCODSR",27,0)
 I NCDSIEN'="" S Y=Y_" "_$P(^ONCO(160.14,NCDSIEN,0),U,2)
"RTN","ONCODSR",28,0)
 G EX
"RTN","ONCODSR",29,0)
 ;
"RTN","ONCODSR",30,0)
HP0 ;SURGICAL DX/STAGING PROC (165.5,58.1) HELP
"RTN","ONCODSR",31,0)
 F XX="00","01","02","03","04","05","06","07","09" S NCDSIEN=$O(^ONCO(160.14,"B",XX,0)) D EN^DDIOL($P(^ONCO(160.14,NCDSIEN,0),U,1)_"  "_$P(^ONCO(160.14,NCDSIEN,0),U,2),,"!?2")
"RTN","ONCODSR",32,0)
 K NCDSIEN G EX
"RTN","ONCODSR",33,0)
 ;
"RTN","ONCODSR",34,0)
CDSOT ;SURGERY OF PRIMARY SITE (165.5,58.2) OUTPUT TRANSFORM
"RTN","ONCODSR",35,0)
 I Y="00" S Y="00 No surgical procedure" G EX
"RTN","ONCODSR",36,0)
 N TOPGRPHY,SS
"RTN","ONCODSR",37,0)
 S TOPGRPHY=$$TOPGRPHY(D0) G EX:TOPGRPHY=""
"RTN","ONCODSR",38,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",39,0)
 S Y=Y_" "_$G(^ONCO(164.5,SS,1,Y+1,0)) G EX
"RTN","ONCODSR",40,0)
 ;
"RTN","ONCODSR",41,0)
HP1 ;SURGERY OF PRIMARY SITE (165.5,58.2) HELP
"RTN","ONCODSR",42,0)
 N TOPGRPHY,TPGRPHYR,SS,XX,XXX
"RTN","ONCODSR",43,0)
 S TOPGRPHY=$$TOPGRPHY(D0) G:TOPGRPHY="" ER
"RTN","ONCODSR",44,0)
 S TPGRPHYR=^ONCO(164,TOPGRPHY,0)
"RTN","ONCODSR",45,0)
 S SS=$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",46,0)
 D EN^DDIOL("SURGERY OF PRIMARY SITE Codes for site "_$P(TPGRPHYR,U,2)_" "_$P(TPGRPHYR,U),,"!?5")
"RTN","ONCODSR",47,0)
 D EN^DDIOL("("_$P(^ONCO(164.5,SS,0),U)_")",,"!?5")
"RTN","ONCODSR",48,0)
 D EN^DDIOL("00  No surgical procedure",,"!!?1")
"RTN","ONCODSR",49,0)
 D EN^DDIOL(,,"!")
"RTN","ONCODSR",50,0)
 S XX=10 F  S XX=$O(^ONCO(164.5,SS,1,XX)) Q:XX'=+XX  D
"RTN","ONCODSR",51,0)
 .S XXX=XX-1
"RTN","ONCODSR",52,0)
 .I ($P(^ONCO(165.5,D0,0),U,16)<2960000)!($E(XXX,2)'=8) D EN^DDIOL(" "_(XX-1)_"  "_^ONCO(164.5,SS,1,XX,0))
"RTN","ONCODSR",53,0)
 G EX
"RTN","ONCODSR",54,0)
 ;
"RTN","ONCODSR",55,0)
ER ;ERROR
"RTN","ONCODSR",56,0)
 D EN^DDIOL("ICDO CODE NOT defined!! - cannot continue",,"!!?10")
"RTN","ONCODSR",57,0)
 G EX
"RTN","ONCODSR",58,0)
 ;
"RTN","ONCODSR",59,0)
EX ;EXIT
"RTN","ONCODSR",60,0)
 K AN,SS,ONCOSR
"RTN","ONCODSR",61,0)
 D EN^DDIOL(,,"!")
"RTN","ONCODSR",62,0)
 Q
"RTN","ONCODSR",63,0)
 ;
"RTN","ONCODSR",64,0)
TOPGRPHY(PRIMIX) ; returns ICDO-2 topography code for primary site PRIMIX
"RTN","ONCODSR",65,0)
 Q $P($G(^ONCO(165.5,PRIMIX,2)),U)
"RTN","ONCODSR",66,0)
 ;
"RTN","ONCODSR",67,0)
ESSPIT ;INPUT TRANSFORM FOR EXTRANODAL SITE SURGICAL PROCEDURE #856
"RTN","ONCODSR",68,0)
 N T,TOPGRPHY,SS
"RTN","ONCODSR",69,0)
 K:$L(X)>2!(X'?1.N) X G EX:'$D(X)
"RTN","ONCODSR",70,0)
 I X="00" D EN^DDIOL("  No additional surgical procedure") G EX
"RTN","ONCODSR",71,0)
 S TOPGRPHY=$P($G(^ONCO(165.5,D0,"NHL2")),U,10) G ER:TOPGRPHY=""
"RTN","ONCODSR",72,0)
 I TOPGRPHY="C888"!(TOPGRPHY="C999") K X G EX
"RTN","ONCODSR",73,0)
 S TOPGRPHY="67"_$E(TOPGRPHY,2,4)
"RTN","ONCODSR",74,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",75,0)
 I '$D(^ONCO(164.5,SS,1,X+1,0)) K X G EX
"RTN","ONCODSR",76,0)
 I ($P(^ONCO(165.5,D0,0),U,16)>2951231),$E(X,2)=8 K X G EX
"RTN","ONCODSR",77,0)
 D EN^DDIOL(^ONCO(164.5,SS,1,X+1,0),,"!?2") G EX
"RTN","ONCODSR",78,0)
 ;
"RTN","ONCODSR",79,0)
ESSPOT ;OUTPUT TRANSFORM FOR EXTRANODAL SITE SURGICAL PROCEDURE #856
"RTN","ONCODSR",80,0)
 I Y="00" S Y=Y_"  No additional surgical procedure" G EX
"RTN","ONCODSR",81,0)
 N TOPGRPHY,SS
"RTN","ONCODSR",82,0)
 S TOPGRPHY=$P($G(^ONCO(165.5,D0,"NHL2")),U,10) G EX:TOPGRPHY=""
"RTN","ONCODSR",83,0)
 I TOPGRPHY="C888"!(TOPGRPHY="C999") G EX
"RTN","ONCODSR",84,0)
 S TOPGRPHY="67"_$E(TOPGRPHY,2,4)
"RTN","ONCODSR",85,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",86,0)
 S Y=Y_" "_$G(^ONCO(164.5,SS,1,Y+1,0)) G EX
"RTN","ONCODSR",87,0)
 ;
"RTN","ONCODSR",88,0)
ESSHP ;EXECUTABLE HELP FOR EXTRANODAL SITE SURGICAL PROCEDURE #856
"RTN","ONCODSR",89,0)
 N TOPGRPHY,TPGRPHYR,SS,XX
"RTN","ONCODSR",90,0)
 S TOPGRPHY=$P($G(^ONCO(165.5,D0,"NHL2")),U,10) G ER:TOPGRPHY=""
"RTN","ONCODSR",91,0)
 I TOPGRPHY="C888"!(TOPGRPHY="C999") D EN^DDIOL("No extranodal site or unknown extranodal site!!",,"!!?5") D EN^DDIOL("00 No additional surgical procedure",,"!?5") G EX
"RTN","ONCODSR",92,0)
 S TOPGRPHY="67"_$E(TOPGRPHY,2,4)
"RTN","ONCODSR",93,0)
 S TPGRPHYR=^ONCO(164,TOPGRPHY,0)
"RTN","ONCODSR",94,0)
 S SS=$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",95,0)
 D EN^DDIOL("SURGERY OF PRIMARY SITE Codes for site ",$P(TPGRPHYR,U,2)_" "_$P(TPGRPHYR,U),,"!!")
"RTN","ONCODSR",96,0)
 D EN^DDIOL("("_$P(^ONCO(164.5,SS,0),U)_")",,"!")
"RTN","ONCODSR",97,0)
 D EN^DDIOL("00 No additional surgical procedure",,"!!?1")
"RTN","ONCODSR",98,0)
 D EN^DDIOL(,,"!")
"RTN","ONCODSR",99,0)
 S XX=10 F  S XX=$O(^ONCO(164.5,SS,1,XX)) Q:XX'=+XX  D
"RTN","ONCODSR",100,0)
 .S XXX=XX-1
"RTN","ONCODSR",101,0)
 .I ($P(^ONCO(165.5,D0,0),U,16)<2960000)!($E(XXX,2)'=8) D EN^DDIOL(" "_(XX-1)_" "_^ONCO(164.5,SS,1,XX,0)) D EN^DDIOL(,,"!")
"RTN","ONCODSR",102,0)
 D EN^DDIOL("Enter a code from the above list.",,"!") G EX
"RTN","ONCODSR",103,0)
 Q
"RTN","ONCODSR",104,0)
 ;
"RTN","ONCODSR",105,0)
FADIT ;DATE OF FIRST CONTACT (165.5,155) Input Transform
"RTN","ONCODSR",106,0)
 D NINES Q:'$D(X)  Q:X=9999999
"RTN","ONCODSR",107,0)
 I $D(X) S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X K %DT
"RTN","ONCODSR",108,0)
 Q
"RTN","ONCODSR",109,0)
 ;
"RTN","ONCODSR",110,0)
DSDTIT ;DATE OF INPATIENT DISCHARGE (165.5,1.1) Input Transform
"RTN","ONCODSR",111,0)
 ;Must be >= DATE OF INPATIENT ADMISSION (165.5,1)
"RTN","ONCODSR",112,0)
 N FAD
"RTN","ONCODSR",113,0)
 D ZS9S Q:'$D(X)  Q:(X="0000000")!(X=9999999)
"RTN","ONCODSR",114,0)
 I $D(X) S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X I $D(X) S FAD=$P($G(^ONCO(165.5,D0,0)),U,8) I FAD'="" K:X<FAD X K %DT
"RTN","ONCODSR",115,0)
 Q
"RTN","ONCODSR",116,0)
 ;
"RTN","ONCODSR",117,0)
DFSPIT ;DATE FIRST SURGICAL PROCEDURE (165.5,170) Input Transform
"RTN","ONCODSR",118,0)
 D ZS9S Q:'$D(X)  Q:(X="0000000")!(X=9999999)
"RTN","ONCODSR",119,0)
 I $D(X) S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X K %DT
"RTN","ONCODSR",120,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3)),U,1) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than MOST DEFINITIVE SURG DATE",,"!!?3") K %DT,SDT Q
"RTN","ONCODSR",121,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,8) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than MOST DEFINITIVE SURG @FAC DATE",,"!!") K %DT,SDT Q
"RTN","ONCODSR",122,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,22) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SCOPE OF LN SURGERY DATE",,"!!") K %DT,SDT Q
"RTN","ONCODSR",123,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,23) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SCOPE OF LN SURGERY @FAC DATE",,"!!") K %DT,SDT Q
"RTN","ONCODSR",124,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,24) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SURG PROC/OTHER SITE DATE",,"!!")
"RTN","ONCODSR",125,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,25) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SURG PROC/OTHER SITE @FAC DATE",,"!!")
"RTN","ONCODSR",126,0)
 K %DT,SDT
"RTN","ONCODSR",127,0)
 Q
"RTN","ONCODSR",128,0)
 ;
"RTN","ONCODSR",129,0)
DFIT ;INPUT TRANSFORM for date fields
"RTN","ONCODSR",130,0)
 ;No future dates and date must be > or = DATE DX (165.5,3)
"RTN","ONCODSR",131,0)
 N DFSP,DTDXE,DTDXI,FAIL,ZS9S
"RTN","ONCODSR",132,0)
 I $G(DIFLD)=124 S NTDD=""
"RTN","ONCODSR",133,0)
 D ZS9S Q:ZS9S=1 
"RTN","ONCODSR",134,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT
"RTN","ONCODSR",135,0)
 S X=Y I Y<1 K X D EN^DDIOL("Future dates are not allowed.",,"!!?5") K %DT Q
"RTN","ONCODSR",136,0)
 S X=X
"RTN","ONCODSR",137,0)
 S DTDXI=$$GET1^DIQ(165.5,D0,3,"I")
"RTN","ONCODSR",138,0)
 I DTDXI=8888888!9999999 Q
"RTN","ONCODSR",139,0)
 S DTDXE=$$GET1^DIQ(165.5,D0,3,"E")
"RTN","ONCODSR",140,0)
 S FAIL=""
"RTN","ONCODSR",141,0)
 I X<DTDXI S FAIL=FAIL_"X"
"RTN","ONCODSR",142,0)
 I FAIL'="" D  Q
"RTN","ONCODSR",143,0)
 .K X
"RTN","ONCODSR",144,0)
 .D EN^DDIOL("The date entered must be later than or equal to the",,"!!?5")
"RTN","ONCODSR",145,0)
 .I FAIL["X" D EN^DDIOL("DATE DX which is "_DTDXE_($S(FAIL["A":" and the",1:".")),,"!?5")
"RTN","ONCODSR",146,0)
 .D EN^DDIOL(,,"!")
"RTN","ONCODSR",147,0)
 S DFSP=$P($G(^ONCO(165.5,D0,3.1)),U,38)
"RTN","ONCODSR",148,0)
 I $D(X),$G(DIFLD)=50 D  D EN^DDIOL(,,"!") Q
"RTN","ONCODSR",149,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("MOST DEFINITIVE SURG DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",150,0)
 I $D(X),$G(DIFLD)=50.3 D  Q
"RTN","ONCODSR",151,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("MOST DEFINITIVE SURG @FAC DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",152,0)
 I $D(X),$G(DIFLD)=138.2 D  Q
"RTN","ONCODSR",153,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SCOPE OF LN SURGERY DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",154,0)
 I $D(X),$G(DIFLD)=138.3 D  Q
"RTN","ONCODSR",155,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SCOPE OF LN SURGERY @FAC DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",156,0)
 I $D(X),$G(DIFLD)=139.2 D  Q
"RTN","ONCODSR",157,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SURG PROC/OTHER SITE DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",158,0)
 I $D(X),$G(DIFLD)=139.3 D  Q
"RTN","ONCODSR",159,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SURG PROC/OTHER SITE @FAC DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",160,0)
 Q
"RTN","ONCODSR",161,0)
 ;
"RTN","ONCODSR",162,0)
NTIT ;DATE OF NO TREATMENT (165.5,124) INPUT TRANSFORM
"RTN","ONCODSR",163,0)
 ;(NO FUTURE DATES AND >= DATE DX)
"RTN","ONCODSR",164,0)
 N DTDX
"RTN","ONCODSR",165,0)
 S NTDD=""
"RTN","ONCODSR",166,0)
 I (X="00/00/00")!(X="00/00/0000")!(X="00000000") K X Q
"RTN","ONCODSR",167,0)
 I (X="99/99/99")!(X="99/99/9999")!(X="99999999") K X Q
"RTN","ONCODSR",168,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y I Y<1 K X D EN^DDIOL("Future dates are not allowed.",,"!!?5") K %DT Q
"RTN","ONCODSR",169,0)
 S DTDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCODSR",170,0)
 I DTDX=8888888!9999999 Q
"RTN","ONCODSR",171,0)
 I DTDX'="" I X<DTDX K X D EN^DDIOL("This date must be later than or equal to the DATE DX of "_$E(DTDX,4,5)_"/"_$E(DTDX,6,7)_"/"_($E(DTDX,1,3)+1700)_".",,"!!?5") K DTDX Q
"RTN","ONCODSR",172,0)
 Q
"RTN","ONCODSR",173,0)
 ;
"RTN","ONCODSR",174,0)
NT ;DATE OF NO TREATMENT (Input transform for treatment fields)
"RTN","ONCODSR",175,0)
 S NTDD=$P($G(^ONCO(165.5,D0,2.1)),U,11)
"RTN","ONCODSR",176,0)
 I (NTDD'="")&(X'=V) K X D EN^DDIOL("This primary has a DATE OF NO TREATMENT of "_$E(NTDD,4,5)_"/"_$E(NTDD,6,7)_"/"_($E(NTDD,1,3)+1700)_".",,"!!?5") D EN^DDIOL("Treatments are not allowed unless the DATE OF NO TREATMENT is deleted.",,"!!?5")
"RTN","ONCODSR",177,0)
 K NTDD,V Q
"RTN","ONCODSR",178,0)
 ;
"RTN","ONCODSR",179,0)
CHKTS ;Check TREATMENT STATUS (165.5,235)
"RTN","ONCODSR",180,0)
 N TS,TSI
"RTN","ONCODSR",181,0)
 S TS=$$GET1^DIQ(165.5,D0,235)
"RTN","ONCODSR",182,0)
 S TSI=$$GET1^DIQ(165.5,D0,235,"I")
"RTN","ONCODSR",183,0)
 I (TSI=0)!(TSI=2) D
"RTN","ONCODSR",184,0)
 .D EN^DDIOL("TREATMENT STATUS = "_TS,,"!!?5")
"RTN","ONCODSR",185,0)
 .D EN^DDIOL("DATE OF NO TREATMENT cannot be blank.",,"!!?5")
"RTN","ONCODSR",186,0)
 .D EN^DDIOL(,,"!")
"RTN","ONCODSR",187,0)
 .S Y=124
"RTN","ONCODSR",188,0)
 E  S Y="@41"
"RTN","ONCODSR",189,0)
 Q
"RTN","ONCODSR",190,0)
 ;
"RTN","ONCODSR",191,0)
DBTS ;DATE BRACHYTHERAPY STARTED INPUT TRANSFORM (NOT FUTURE, DX<=DBS<=DBE)
"RTN","ONCODSR",192,0)
 N DBE
"RTN","ONCODSR",193,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X Q:'$D(X)
"RTN","ONCODSR",194,0)
 S DBE=$P($G(^ONCO(165.5,D0,"STS2")),U,13),DTDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCODSR",195,0)
 I DBE'="" K:X>DBE X Q:'$D(X)
"RTN","ONCODSR",196,0)
 I DTDX'="" K:X<DTDX X K %DT
"RTN","ONCODSR",197,0)
 Q
"RTN","ONCODSR",198,0)
 ;
"RTN","ONCODSR",199,0)
DBTE ;DATE BRACHYTHERAPY ENDED INPUT TRANSFORM (NOT FUTURE, DBS<=DBE)
"RTN","ONCODSR",200,0)
 N DBS
"RTN","ONCODSR",201,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X I $D(X) S DBS=$P($G(^ONCO(165.5,D0,"STS2")),U,12) I DBS'="" K:X<DBS X K %DT
"RTN","ONCODSR",202,0)
 Q
"RTN","ONCODSR",203,0)
 ;
"RTN","ONCODSR",204,0)
ZS9S ;00/00/0000, 88/88/8888 and 99/99/9999 INPUT TRANSFORMS
"RTN","ONCODSR",205,0)
 S ZS9S=1
"RTN","ONCODSR",206,0)
 I X="00/00/00" D EN^DDIOL("00/00/00 is ambiguous.  Enter a 4 digit year. ",,"!?5") K X Q
"RTN","ONCODSR",207,0)
 I X="00/00/0000" S X="0000000" Q
"RTN","ONCODSR",208,0)
 I X="00000000" S X="0000000" Q
"RTN","ONCODSR",209,0)
 ;
"RTN","ONCODSR",210,0)
NINES ;99/99/9999 INPUT TRANSFORM
"RTN","ONCODSR",211,0)
 I X="99/99/99" D EN^DDIOL("99/99/99 is ambiguous.  Enter a 4 digit year. ",,"!?5") K X Q
"RTN","ONCODSR",212,0)
 I X="99/99/9999" S X=9999999 Q
"RTN","ONCODSR",213,0)
 I X="99999999" S X=9999999 Q
"RTN","ONCODSR",214,0)
 ;
"RTN","ONCODSR",215,0)
EIGHTS ;88/88/8888 INPUT TRANSFORM
"RTN","ONCODSR",216,0)
 I ($G(DIFLD)=193)!($G(DIFLD)=195) D  K FLD Q:'$D(X)  Q:X=8888888
"RTN","ONCODSR",217,0)
 .I X="88/88/88" D EN^DDIOL("88/88/88 is ambiguous.  Enter a 4 digit year. ",,"!?5") K X Q
"RTN","ONCODSR",218,0)
 .I X="88/88/8888" S X=8888888
"RTN","ONCODSR",219,0)
 .I X="88888888" S X=8888888
"RTN","ONCODSR",220,0)
 S ZS9S=0
"RTN","ONCODSR",221,0)
 Q
"RTN","ONCODSR",222,0)
 ;
"RTN","ONCODSR",223,0)
CLEANUP ;Cleanup
"RTN","ONCODSR",224,0)
 K D0,DIFLD,Y
"RTN","ONCOPCE")
0^13^B70189715^B70189715
"RTN","ONCOPCE",1,0)
ONCOPCE ;HINES OIFO/GWB PCE MAIN ROUTINE ;08/15/11
"RTN","ONCOPCE",2,0)
 ;;2.11;ONCOLOGY;**6,7,11,13,16,18,19,22,26,29,54,56**;Mar 07, 1995;Build 10
"RTN","ONCOPCE",3,0)
 ;
"RTN","ONCOPCE",4,0)
 N D0,DA,DATEDX,DD,DIC,DIE,DINUM,DIR,DLAYGO,DO,DR,DP,DL,DQ,DM,DK,DI,DIEL
"RTN","ONCOPCE",5,0)
 N DOV,ITFLAG,ONCONUM,ONCOPA,%DT
"RTN","ONCOPCE",6,0)
 G:'ONCOD0P EXIT S ONCONUM=+ONCOD0P N ONCOD0P
"RTN","ONCOPCE",7,0)
 G:'ONCOD0 EXIT S ONCOPA=ONCOD0 N ONCOD0
"RTN","ONCOPCE",8,0)
 S DATEDX=$P($G(^ONCO(165.5,ONCONUM,0)),U,16)
"RTN","ONCOPCE",9,0)
 I DATEDX>3111231 D ^ONCPM Q
"RTN","ONCOPCE",10,0)
 I DATEDX<3120000 D
"RTN","ONCOPCE",11,0)
 .W !!,?10,"DATE DX earlier than 2012.  Performance Measures not collected."
"RTN","ONCOPCE",12,0)
 .W !,?10,"Checking for PCE eligibility..."
"RTN","ONCOPCE",13,0)
 K PCEITC
"RTN","ONCOPCE",14,0)
 S PCEITC("C16.0")="" ;Cardia, NOS
"RTN","ONCOPCE",15,0)
 S PCEITC("C16.1")="" ;Fundus of stomach
"RTN","ONCOPCE",16,0)
 S PCEITC("C16.2")="" ;Body of stomach
"RTN","ONCOPCE",17,0)
 S PCEITC("C16.3")="" ;Gastric antrum
"RTN","ONCOPCE",18,0)
 S PCEITC("C16.4")="" ;Pylorus
"RTN","ONCOPCE",19,0)
 S PCEITC("C16.5")="" ;Lesser curvature of stomach, NOS
"RTN","ONCOPCE",20,0)
 S PCEITC("C16.6")="" ;Greater curvature of stomach, NOS
"RTN","ONCOPCE",21,0)
 S PCEITC("C16.8")="" ;Overlapping lesion of stomach
"RTN","ONCOPCE",22,0)
 S PCEITC("C16.9")="" ;Stomach, NOS
"RTN","ONCOPCE",23,0)
 S PCEITC("C18.0")="" ;Cecum
"RTN","ONCOPCE",24,0)
 S PCEITC("C18.1")="" ;Appendix
"RTN","ONCOPCE",25,0)
 S PCEITC("C18.2")="" ;Ascending
"RTN","ONCOPCE",26,0)
 S PCEITC("C18.3")="" ;Hepatic flexure
"RTN","ONCOPCE",27,0)
 S PCEITC("C18.4")="" ;Transverse
"RTN","ONCOPCE",28,0)
 S PCEITC("C18.5")="" ;Splenic flexure
"RTN","ONCOPCE",29,0)
 S PCEITC("C18.6")="" ;Descending
"RTN","ONCOPCE",30,0)
 S PCEITC("C18.7")="" ;Sigmoid
"RTN","ONCOPCE",31,0)
 S PCEITC("C18.8")="" ;Overlapping lesion
"RTN","ONCOPCE",32,0)
 S PCEITC("C18.9")="" ;Colon, NOS
"RTN","ONCOPCE",33,0)
 S PCEITC("C19.9")="" ;Rectosigmoid junction
"RTN","ONCOPCE",34,0)
 S PCEITC("C20.9")="" ;Rectum
"RTN","ONCOPCE",35,0)
 S PCEITC("C22.0")="" ;Liver
"RTN","ONCOPCE",36,0)
 S PCEITC("C34.0")="" ;Main Bronchus
"RTN","ONCOPCE",37,0)
 S PCEITC("C34.1")="" ;Upper lobe lung
"RTN","ONCOPCE",38,0)
 S PCEITC("C34.2")="" ;Middle lobe lung
"RTN","ONCOPCE",39,0)
 S PCEITC("C34.3")="" ;Lower lobe lung
"RTN","ONCOPCE",40,0)
 S PCEITC("C34.8")="" ;Overlapping lesion of lung
"RTN","ONCOPCE",41,0)
 S PCEITC("C34.9")="" ;Lung, NOS
"RTN","ONCOPCE",42,0)
 S PCEITC("C38.0")="" ;Heart
"RTN","ONCOPCE",43,0)
 S PCEITC("C38.1")="" ;Mediastinum, anterior
"RTN","ONCOPCE",44,0)
 S PCEITC("C38.2")="" ;Mediastinum, posterior
"RTN","ONCOPCE",45,0)
 S PCEITC("C38.3")="" ;Mediastinum, NOS
"RTN","ONCOPCE",46,0)
 S PCEITC("C38.4")="" ;Pleura, NOS
"RTN","ONCOPCE",47,0)
 S PCEITC("C38.8")="" ;Heart/Medias/Pleura, overlap
"RTN","ONCOPCE",48,0)
 S PCEITC("C44.0")="" ;Skin of lip, NOS
"RTN","ONCOPCE",49,0)
 S PCEITC("C44.2")="" ;External ear
"RTN","ONCOPCE",50,0)
 S PCEITC("C44.3")="" ;Skin of other and unspecified parts of face
"RTN","ONCOPCE",51,0)
 S PCEITC("C44.4")="" ;Skin of scalp and neck
"RTN","ONCOPCE",52,0)
 S PCEITC("C44.5")="" ;Skin of trunk
"RTN","ONCOPCE",53,0)
 S PCEITC("C44.6")="" ;Skin of upper limb and shoulder
"RTN","ONCOPCE",54,0)
 S PCEITC("C44.7")="" ;Skin of lower limb and hip
"RTN","ONCOPCE",55,0)
 S PCEITC("C44.8")="" ;Overlapping lesion
"RTN","ONCOPCE",56,0)
 S PCEITC("C44.9")="" ;Skin, NOS
"RTN","ONCOPCE",57,0)
 S PCEITC("C47.0")="" ;Nerves, head & neck
"RTN","ONCOPCE",58,0)
 S PCEITC("C47.1")="" ;Nerves, upper limb
"RTN","ONCOPCE",59,0)
 S PCEITC("C47.2")="" ;Nerves, lower limb
"RTN","ONCOPCE",60,0)
 S PCEITC("C47.3")="" ;Nerves, thorax
"RTN","ONCOPCE",61,0)
 S PCEITC("C47.4")="" ;Nerves, abdomen
"RTN","ONCOPCE",62,0)
 S PCEITC("C47.5")="" ;Nerves, pelvis
"RTN","ONCOPCE",63,0)
 S PCEITC("C47.6")="" ;Nerves, trunk
"RTN","ONCOPCE",64,0)
 S PCEITC("C47.8")="" ;Nerves, overlap
"RTN","ONCOPCE",65,0)
 S PCEITC("C47.9")="" ;Autonomic nervous system, NOS
"RTN","ONCOPCE",66,0)
 S PCEITC("C48.0")="" ;Retroperitoneum
"RTN","ONCOPCE",67,0)
 S PCEITC("C48.1")="" ;Peritoneum, specified
"RTN","ONCOPCE",68,0)
 S PCEITC("C48.2")="" ;Peritoneum, NOS
"RTN","ONCOPCE",69,0)
 S PCEITC("C48.8")="" ;Retroperitoneum overlap
"RTN","ONCOPCE",70,0)
 S PCEITC("C49.0")="" ;Soft tissues, head & neck
"RTN","ONCOPCE",71,0)
 S PCEITC("C49.1")="" ;Soft tissues, upper limb
"RTN","ONCOPCE",72,0)
 S PCEITC("C49.2")="" ;Soft tissues, lower limb
"RTN","ONCOPCE",73,0)
 S PCEITC("C49.3")="" ;Soft tissues, thorax
"RTN","ONCOPCE",74,0)
 S PCEITC("C49.4")="" ;Soft tissues, abdomen
"RTN","ONCOPCE",75,0)
 S PCEITC("C49.5")="" ;Soft tissues, pelvis
"RTN","ONCOPCE",76,0)
 S PCEITC("C49.6")="" ;Soft tissues, trunk
"RTN","ONCOPCE",77,0)
 S PCEITC("C49.8")="" ;Soft tissues overlap
"RTN","ONCOPCE",78,0)
 S PCEITC("C49.9")="" ;Soft tissues NOS
"RTN","ONCOPCE",79,0)
 S PCEITC("C50.0")="" ;Nipple
"RTN","ONCOPCE",80,0)
 S PCEITC("C50.1")="" ;Central portion breast
"RTN","ONCOPCE",81,0)
 S PCEITC("C50.2")="" ;Upper-inner quadrant breast
"RTN","ONCOPCE",82,0)
 S PCEITC("C50.3")="" ;Lower-inner quadrant breast
"RTN","ONCOPCE",83,0)
 S PCEITC("C50.4")="" ;Upper-outer quadrant breast
"RTN","ONCOPCE",84,0)
 S PCEITC("C50.5")="" ;Lower-outer quadrant breast
"RTN","ONCOPCE",85,0)
 S PCEITC("C50.6")="" ;Axillary tail breast
"RTN","ONCOPCE",86,0)
 S PCEITC("C50.8")="" ;Overlapping lesion breast
"RTN","ONCOPCE",87,0)
 S PCEITC("C50.9")="" ;Breast, NOS
"RTN","ONCOPCE",88,0)
 S PCEITC("C61.9")="" ;Prostate
"RTN","ONCOPCE",89,0)
 S PCEITC("C67.0")="" ;Urinary Bladder
"RTN","ONCOPCE",90,0)
 S PCEITC("C67.1")="" ;Urinary Bladder
"RTN","ONCOPCE",91,0)
 S PCEITC("C67.2")="" ;Urinary Bladder
"RTN","ONCOPCE",92,0)
 S PCEITC("C67.3")="" ;Urinary Bladder
"RTN","ONCOPCE",93,0)
 S PCEITC("C67.4")="" ;Urinary Bladder
"RTN","ONCOPCE",94,0)
 S PCEITC("C67.5")="" ;Urinary Bladder
"RTN","ONCOPCE",95,0)
 S PCEITC("C67.6")="" ;Urinary Bladder
"RTN","ONCOPCE",96,0)
 S PCEITC("C67.7")="" ;Urinary Bladder
"RTN","ONCOPCE",97,0)
 S PCEITC("C67.8")="" ;Urinary Bladder
"RTN","ONCOPCE",98,0)
 S PCEITC("C67.9")="" ;Urinary Bladder
"RTN","ONCOPCE",99,0)
 S PCEITC("C68.0")="" ;Urinary Bladder (Urethra)
"RTN","ONCOPCE",100,0)
 S PCEITC("C70.0")="" ;Cerebral meninges
"RTN","ONCOPCE",101,0)
 S PCEITC("C70.1")="" ;Spinal meninges
"RTN","ONCOPCE",102,0)
 S PCEITC("C70.9")="" ;Meninges, NOS
"RTN","ONCOPCE",103,0)
 S PCEITC("C71.0")="" ;Cerebrum
"RTN","ONCOPCE",104,0)
 S PCEITC("C71.1")="" ;Frontal lobe
"RTN","ONCOPCE",105,0)
 S PCEITC("C71.2")="" ;Temporal lobe
"RTN","ONCOPCE",106,0)
 S PCEITC("C71.3")="" ;Parietal lobe
"RTN","ONCOPCE",107,0)
 S PCEITC("C71.4")="" ;Occipital lobe
"RTN","ONCOPCE",108,0)
 S PCEITC("C71.5")="" ;Ventricle, NOS
"RTN","ONCOPCE",109,0)
 S PCEITC("C71.6")="" ;Cerebellum, NOS
"RTN","ONCOPCE",110,0)
 S PCEITC("C71.7")="" ;Brain stem
"RTN","ONCOPCE",111,0)
 S PCEITC("C71.8")="" ;Overlapping lesion on brain
"RTN","ONCOPCE",112,0)
 S PCEITC("C71.9")="" ;Brain, NOS
"RTN","ONCOPCE",113,0)
 S PCEITC("C72.0")="" ;Spinal cord
"RTN","ONCOPCE",114,0)
 S PCEITC("C72.1")="" ;Cauda equina
"RTN","ONCOPCE",115,0)
 S PCEITC("C72.2")="" ;Olfactory nerve
"RTN","ONCOPCE",116,0)
 S PCEITC("C72.3")="" ;Optic nerve
"RTN","ONCOPCE",117,0)
 S PCEITC("C72.4")="" ;Acoustic nerve
"RTN","ONCOPCE",118,0)
 S PCEITC("C72.5")="" ;Cranial nerve
"RTN","ONCOPCE",119,0)
 S PCEITC("C72.8")="" ;Overlapping lesion of brain and cns
"RTN","ONCOPCE",120,0)
 S PCEITC("C72.9")="" ;Nervous system, NOS
"RTN","ONCOPCE",121,0)
 S PCEITC("C73.9")="" ;Thyroid gland
"RTN","ONCOPCE",122,0)
 S PCEITC("C75.1")="" ;Pituitary gland
"RTN","ONCOPCE",123,0)
 S PCEITC("C75.2")="" ;Craniopharyngeal duct
"RTN","ONCOPCE",124,0)
 S PCEITC("C75.3")="" ;Pineal gland
"RTN","ONCOPCE",125,0)
 S ICDO=0,NODE2=$G(^ONCO(165.5,ONCONUM,2)),ICDOTOP=$P(NODE2,U,1)
"RTN","ONCOPCE",126,0)
 S HIST=$$HIST^ONCFUNC(ONCONUM)
"RTN","ONCOPCE",127,0)
 ;
"RTN","ONCOPCE",128,0)
 ;Check if HISTOLOGY is relevant to NON-HODGKIN'S LYMPHOMA and if 
"RTN","ONCOPCE",129,0)
 ;ACCESSION YEAR = 1997
"RTN","ONCOPCE",130,0)
 S HIST1234=$E(HIST,1,4),BEH=$E(HIST,5)
"RTN","ONCOPCE",131,0)
 I ((HIST1234>9589)&(HIST1234<9596))!((HIST1234>9669)&(HIST1234<9718)),$P(^ONCO(165.5,ONCONUM,0),U,7)=1997 D ^ONCNPC0 G EXIT
"RTN","ONCOPCE",132,0)
 ;
"RTN","ONCOPCE",133,0)
 ;Check if HISTOLOGY is relevant to MELANOMA and if ACCESSION YEAR = 1999
"RTN","ONCOPCE",134,0)
 S HIST123=$E(HIST,1,3),BEH=$E(HIST,5)
"RTN","ONCOPCE",135,0)
 I ((HIST123>871)&(HIST123<880))!((HIST=90443)&($E(ICDOTOP,1,4)=6749)),$P(^ONCO(165.5,ONCONUM,0),U,7)=1999 D ^ONCMPC0 G EXIT
"RTN","ONCOPCE",136,0)
 ;
"RTN","ONCOPCE",137,0)
 ;Check for pediatric cases of rhabdomyosarcoma (Soft Tissue Sarcoma)
"RTN","ONCOPCE",138,0)
 S D0=ONCOPA D DOB1^ONCOES S X1=DT,X2=X D ^%DTC S AGE=X\365.25,D0=ONCONUM
"RTN","ONCOPCE",139,0)
 I AGE<21,((HIST=89003)!(HIST=89013)!(HIST=89023)!(HIST=89103)!(HIST=89203)) D ^ONCSPC0 G EXIT
"RTN","ONCOPCE",140,0)
 ;
"RTN","ONCOPCE",141,0)
 ;Check Primary Site
"RTN","ONCOPCE",142,0)
 I ICDOTOP'="" S ICDO=$P(^ONCO(164,ICDOTOP,0),U,2)
"RTN","ONCOPCE",143,0)
 I ICDO=0 G:ONCOANS'=5 EXIT W !!,?10,"There is no ICDO-TOPOGRAPHY for this primary." R Z:10 G EXIT
"RTN","ONCOPCE",144,0)
 I '$D(PCEITC(ICDO)) G:ONCOANS'=5 EXIT W !!,?10,"There is currently no PCE for this primary site",!,?10,"nor is it a 1997 Non-Hodgkin's Lymphoma or 1999",!,?10,"Melanoma." R Z:10 G EXIT
"RTN","ONCOPCE",145,0)
 I ($E(ICDO,2,3)=67)!($E(ICDO,2,3)=68) D ^ONCBPC0 G EXIT
"RTN","ONCOPCE",146,0)
 I ($E(ICDO,2,3)=38)!($E(ICDO,2,3)=47)!($E(ICDO,2,3)=48)!($E(ICDO,2,3)=49)!($E(ICDO,2,3)=44) D ^ONCSPC0 G EXIT
"RTN","ONCOPCE",147,0)
 I ICDO="C73.9" D ^ONCTPC0 G EXIT
"RTN","ONCOPCE",148,0)
 I ICDO="C61.9" D ^ONCP2P0 G EXIT
"RTN","ONCOPCE",149,0)
 I ($E(ICDO,2,3)=18)!($E(ICDO,2,3)=19)!($E(ICDO,2,3)=20) D ^ONCCPC0 G EXIT
"RTN","ONCOPCE",150,0)
 I $E(ICDO,2,3)=50 D ^ONCBRP0 G EXIT
"RTN","ONCOPCE",151,0)
 I ICDO="C22.0" D ^ONCHPC0 G EXIT
"RTN","ONCOPCE",152,0)
 I ($E(ICDO,2,3)=70)!($E(ICDO,2,3)=71)!($E(ICDO,2,3)=72)!(ICDO="C75.1")!(ICDO="C75.2")!(ICDO="C75.3") D ^ONCIPC0 G EXIT
"RTN","ONCOPCE",153,0)
 I $E(ICDO,2,3)=16 D ^ONCGPC0 G EXIT
"RTN","ONCOPCE",154,0)
 I $E(ICDO,2,3)=34 D ^ONCLPC0 G EXIT
"RTN","ONCOPCE",155,0)
 Q
"RTN","ONCOPCE",156,0)
EXIT K PCEITC,NODE2,ICDOTOP,ICDO,Z,X1,X2,AGE,HIST,HIST1234,HIST123,BEH
"RTN","ONCOPCE",157,0)
 Q
"RTN","ONCOPCE",158,0)
DATEIT ;Date input transform
"RTN","ONCOPCE",159,0)
 I X="00/00/00" W *7,!!?5,"'00/00/00' is ambiguous, enter a 4 digit year.",!! S ITFLAG="YES" K X Q
"RTN","ONCOPCE",160,0)
 I X="00/00/0000" S X="0000000" S ITFLAG="YES" Q
"RTN","ONCOPCE",161,0)
 I X="00000000" S X="0000000" S ITFLAG="YES" W "  00/00/0000" Q
"RTN","ONCOPCE",162,0)
 I X="88/88/88" W *7,!!?5,"'88/88/88' is ambiguous, enter a 4 digit year.",!! S ITFLAG="YES" K X Q
"RTN","ONCOPCE",163,0)
 I X="88/88/8888" S X=8888888 S ITFLAG="YES" Q
"RTN","ONCOPCE",164,0)
 I X="88888888" S X=8888888 S ITFLAG="YES" W "  88/88/8888" Q
"RTN","ONCOPCE",165,0)
 I X="99/99/99" W *7,!!?5,"'99/99/99' is ambiguous, enter a 4 digit year.",!! S ITFLAG="YES" K X Q
"RTN","ONCOPCE",166,0)
 I X="99/99/9999" S X=9999999 S ITFLAG="YES" Q
"RTN","ONCOPCE",167,0)
 I X="99999999" S X=9999999 S ITFLAG="YES" W "  99/99/9999" Q
"RTN","ONCOPCE",168,0)
 Q
"RTN","ONCOPCE",169,0)
DATEOT ;Date output transform in format MM/DD/YYYY
"RTN","ONCOPCE",170,0)
 Q:Y=""
"RTN","ONCOPCE",171,0)
 S Y=$S(Y="0000000":"00/00/0000",Y=9999999:"99/99/9999",Y=8888888:"88/88/8888",1:$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_($E(Y,1,3)+1700))
"RTN","ONCOPCE",172,0)
 Q
"RTN","ONCOPCE",173,0)
CHDTIT ;Date input transform for fields #1103 and #1105
"RTN","ONCOPCE",174,0)
 I X="00/00/00" W *7,!!?5,"'00/00/00' is ambiguous, enter a 4 digit year.",!! S ITFLAG="YES" K X Q
"RTN","ONCOPCE",175,0)
 I X="00/0000" S X="0000000" S ITFLAG="YES" Q
"RTN","ONCOPCE",176,0)
 I (X="00000000")!(X="00/00/0000") S X="0000000" S ITFLAG="YES" W "  00/0000" Q
"RTN","ONCOPCE",177,0)
 I X="99/99/99" W *7,!!?5,"'99/99/99' is ambiguous, enter a 4 digit year.",!! S ITFLAG="YES" K X Q
"RTN","ONCOPCE",178,0)
 I X="99/9999" S X=9999999 S ITFLAG="YES" Q
"RTN","ONCOPCE",179,0)
 I (X="99999999")!(X="99/99/9999") S X=9999999 S ITFLAG="YES" W "  99/9999" Q
"RTN","ONCOPCE",180,0)
 I X="88/88/88" W *7,!!?5,"'88/88/88' is ambiguous, enter a 4 digit year.",!! S ITFLAG="YES" K X Q
"RTN","ONCOPCE",181,0)
 I X="88/8888" S X="8888888" S ITFLAG="YES" Q
"RTN","ONCOPCE",182,0)
 I (X="88888888")!(X="88/88/8888") S X="8888888" S ITFLAG="YES" W "  88/8888" Q
"RTN","ONCOPCE",183,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y I Y<1 K X W !!?5,"Future dates are not allowed.",! K %DT(0) Q
"RTN","ONCOPCE",184,0)
 Q
"RTN","ONCOPCE",185,0)
CHDTOT ;Date output transform for fields #1103 and #1105
"RTN","ONCOPCE",186,0)
 Q:Y=""
"RTN","ONCOPCE",187,0)
 I Y="0000000" S Y="00/0000" Q
"RTN","ONCOPCE",188,0)
 I Y=9999999 S Y="99/9999" Q
"RTN","ONCOPCE",189,0)
 I Y=8888888 S Y="88/8888" Q
"RTN","ONCOPCE",190,0)
 S Y=$E(Y,4,5)_"/"_($E(Y,1,3)+1700)
"RTN","ONCOPCE",191,0)
 Q
"RTN","ONCOPCE",192,0)
 ;
"RTN","ONCOPCE",193,0)
CLEANUP ;Cleanup
"RTN","ONCOPCE",194,0)
 K ONCOANS,Y
"RTN","ONCOPRT")
0^9^B41204141^B139700452
"RTN","ONCOPRT",1,0)
ONCOPRT ;Hines OIFO/GWB - OncoTrax reports ;05/03/12
"RTN","ONCOPRT",2,0)
 ;;2.11;ONCOLOGY;**24,25,26,27,36,50,51,52,53,56**;Mar 07, 1995;Build 10
"RTN","ONCOPRT",3,0)
 ;This routine invokes Integration Agreement #3151
"RTN","ONCOPRT",4,0)
SUS ;[SP Print Suspense List by Suspense Date (132c)]
"RTN","ONCOPRT",5,0)
 S BY="@75,INTERNAL(#3),@75,.01,75,2;C2"
"RTN","ONCOPRT",6,0)
 S (FR,TO)=DUZ(2)_",?"
"RTN","ONCOPRT",7,0)
 S FLDS="[ONCO SUSPENSE]"
"RTN","ONCOPRT",8,0)
 G PRT60
"RTN","ONCOPRT",9,0)
 ;
"RTN","ONCOPRT",10,0)
DI ;[DI Disease Index]
"RTN","ONCOPRT",11,0)
 ;Supported by IA #3151
"RTN","ONCOPRT",12,0)
 S (COUNT,SUSCOUNT)=0
"RTN","ONCOPRT",13,0)
 S OSPIEN=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCOPRT",14,0)
 S AFLDIV=""
"RTN","ONCOPRT",15,0)
 I $O(^ONCO(160.1,OSPIEN,6,0)) D
"RTN","ONCOPRT",16,0)
 .S ADIEN=0 F  S ADIEN=$O(^ONCO(160.1,OSPIEN,6,ADIEN)) Q:ADIEN'>0  S AFLDIV=AFLDIV_^ONCO(160.1,OSPIEN,6,ADIEN,0)_U
"RTN","ONCOPRT",17,0)
 W !
"RTN","ONCOPRT",18,0)
 K DIR
"RTN","ONCOPRT",19,0)
 S DIR(0)="SAO^1:Casefinding;2:Customized search"
"RTN","ONCOPRT",20,0)
 S DIR("A")=" Select DISEASE INDEX report: "
"RTN","ONCOPRT",21,0)
 S DIR("?",1)=" Select 'Casefinding' if you want to find and add to SUSPENSE"
"RTN","ONCOPRT",22,0)
 S DIR("?",2)=" cases with reportable tumors for the selected date range."
"RTN","ONCOPRT",23,0)
 S DIR("?",3)=""
"RTN","ONCOPRT",24,0)
 S DIR("?",4)=" Select 'Customized search' if you want to search for an"
"RTN","ONCOPRT",25,0)
 S DIR("?",5)=" individual ICD-CM code or range of codes."
"RTN","ONCOPRT",26,0)
 S DIR("?")=" "
"RTN","ONCOPRT",27,0)
 D ^DIR
"RTN","ONCOPRT",28,0)
 I $D(DIRUT) K DIRUT Q
"RTN","ONCOPRT",29,0)
 I Y<1 Q
"RTN","ONCOPRT",30,0)
 I +Y=1 S (SORT,BY)="[ONC DISEASE INDEX CASEFINDING]"
"RTN","ONCOPRT",31,0)
 I +Y=2 S (SORT,BY)="[ONC DISEASE INDEX]"
"RTN","ONCOPRT",32,0)
 S DIC="^AUPNVPOV(",L=0
"RTN","ONCOPRT",33,0)
 S FLDS="[ONC DISEASE INDEX]"
"RTN","ONCOPRT",34,0)
 S DIS(0)="I $$DIDIV^ONCFUNC(D0)=""Y"""
"RTN","ONCOPRT",35,0)
 ;sets the ICD screens
"RTN","ONCOPRT",36,0)
 D ICD^ONCOPRT1
"RTN","ONCOPRT",37,0)
 ;
"RTN","ONCOPRT",38,0)
 S DHIT="S SAVED0=D0 D DISUS^ONCOPRT S D0=SAVED0"
"RTN","ONCOPRT",39,0)
 I SORT="[ONC DISEASE INDEX CASEFINDING]" S DIOEND="W !?6,""-----"",!,""COUNT "",COUNT,!,""Added to SUSPENSE "",SUSCOUNT"
"RTN","ONCOPRT",40,0)
 E  S DIOEND="W !?6,""-----"",!,""COUNT "",COUNT"
"RTN","ONCOPRT",41,0)
 D EN1^DIP
"RTN","ONCOPRT",42,0)
 K AFLDIV,ADIEN,COUNT,D0,DHIT,DIOEND,DIR,DR,ONCSUB,OSPIEN,POV,SAVED0,SORT,SUSCOUNT
"RTN","ONCOPRT",43,0)
 G EX
"RTN","ONCOPRT",44,0)
 ;
"RTN","ONCOPRT",45,0)
DISUS ;Add DISEASE INDEX case to suspense
"RTN","ONCOPRT",46,0)
 N DA,DC,DIC,DPTIEN,ICD,ONCS,ONCDIV,ONCIEN,ONCPAT,X
"RTN","ONCOPRT",47,0)
 S ICD=$P(^AUPNVPOV(D0,0),U,1)
"RTN","ONCOPRT",48,0)
 S DPTIEN=$P(^AUPNVPOV(D0,0),U,2)
"RTN","ONCOPRT",49,0)
 I '$D(POV(DPTIEN)) S COUNT=COUNT+1,POV(DPTIEN)=""
"RTN","ONCOPRT",50,0)
 Q:SORT="[ONC DISEASE INDEX]"
"RTN","ONCOPRT",51,0)
 S ONCPAT=DPTIEN_";DPT("
"RTN","ONCOPRT",52,0)
 S ONCIEN=$O(^ONCO(160,"B",ONCPAT,0))
"RTN","ONCOPRT",53,0)
 I ONCIEN'>0 D
"RTN","ONCOPRT",54,0)
 .K DO
"RTN","ONCOPRT",55,0)
 .S DIC="^ONCO(160,",DIC(0)="Z"
"RTN","ONCOPRT",56,0)
 .S X=ONCPAT
"RTN","ONCOPRT",57,0)
 .D FILE^DICN
"RTN","ONCOPRT",58,0)
 .K DO
"RTN","ONCOPRT",59,0)
 .S ONCIEN=+Y
"RTN","ONCOPRT",60,0)
 S ONCDIV="",ONCS=""
"RTN","ONCOPRT",61,0)
 F  S ONCS=$O(^ONCO(160,ONCIEN,"SUS","C",ONCS)) Q:ONCS'>0  S ONCDIV=ONCDIV_U_ONCS
"RTN","ONCOPRT",62,0)
 I ONCDIV[DUZ(2) Q
"RTN","ONCOPRT",63,0)
 S DA(1)=ONCIEN
"RTN","ONCOPRT",64,0)
 S DIC="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOPRT",65,0)
 K DO
"RTN","ONCOPRT",66,0)
 S DIC(0)="L"
"RTN","ONCOPRT",67,0)
 S DIC("P")=$P(^DD(160,75,0),U,2)
"RTN","ONCOPRT",68,0)
 S X=$$GET1^DIQ(9000010,$$GET1^DIQ(9000010.07,D0,.03,"I"),.01,"I")
"RTN","ONCOPRT",69,0)
 S X=$P(X,".",1)
"RTN","ONCOPRT",70,0)
 D FILE^DICN
"RTN","ONCOPRT",71,0)
 K DO,DIE
"RTN","ONCOPRT",72,0)
 S DA(1)=ONCIEN
"RTN","ONCOPRT",73,0)
 S DIE="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOPRT",74,0)
 S (ONCSUB,DA)=+Y
"RTN","ONCOPRT",75,0)
 S DR="1///^S X=DT;2///^S X=""DI"";3////^S X=DUZ(2);8////^S X=ICD"
"RTN","ONCOPRT",76,0)
 D ^DIE
"RTN","ONCOPRT",77,0)
 S SUSCOUNT=SUSCOUNT+1
"RTN","ONCOPRT",78,0)
 Q
"RTN","ONCOPRT",79,0)
 ;
"RTN","ONCOPRT",80,0)
DNP ;[NP Oncology Patient List-NO Primaries/Suspense]
"RTN","ONCOPRT",81,0)
 S BY="@75,INTERNAL(#3),@NO PRIMARY;L1,NAME"
"RTN","ONCOPRT",82,0)
 S (FR,TO)=DUZ(2)
"RTN","ONCOPRT",83,0)
 S FLDS="[ONCO PATIENT ONLY]"
"RTN","ONCOPRT",84,0)
 G PRT60
"RTN","ONCOPRT",85,0)
 ;
"RTN","ONCOPRT",86,0)
ABI ;[NC Print Abstract NOT Complete List]
"RTN","ONCOPRT",87,0)
 W !
"RTN","ONCOPRT",88,0)
 N BY,FLDS,FR,DIR,DIS,TO,Y
"RTN","ONCOPRT",89,0)
 K DIR
"RTN","ONCOPRT",90,0)
 S DIR(0)="SAO^1:Date Dx;2:Date of First Contact"
"RTN","ONCOPRT",91,0)
 S DIR("A")=" Select date field to be used for sorting: "
"RTN","ONCOPRT",92,0)
 S DIR("?")="Select the date field you wish to use for sorting this report."
"RTN","ONCOPRT",93,0)
 D ^DIR
"RTN","ONCOPRT",94,0)
 I $D(DIRUT) K DIRUT Q
"RTN","ONCOPRT",95,0)
 I Y<1 S OUT=1 Q
"RTN","ONCOPRT",96,0)
 I +Y=1 S BY="#+91,@INTERNAL(#3)"
"RTN","ONCOPRT",97,0)
 I +Y=2 S BY="#+91,@INTERNAL(#155)"
"RTN","ONCOPRT",98,0)
 S FR=",@"
"RTN","ONCOPRT",99,0)
 S TO=""
"RTN","ONCOPRT",100,0)
 S FLDS="[ONCO ABSTRACT NOT-COMPLETE]"
"RTN","ONCOPRT",101,0)
 S DIS(0)="I $P($G(^ONCO(165.5,D0,7)),U,2)'=3"
"RTN","ONCOPRT",102,0)
 G PRT655
"RTN","ONCOPRT",103,0)
 ;
"RTN","ONCOPRT",104,0)
PFH ;[FH Patient Follow-up History]
"RTN","ONCOPRT",105,0)
 D PAT I Y'<0 D  G EX
"RTN","ONCOPRT",106,0)
 .S BY="@NUMBER"
"RTN","ONCOPRT",107,0)
 .S (FR,TO)=+Y
"RTN","ONCOPRT",108,0)
 .S FLDS="[ONCO FOLLOWUP HISTORY]"
"RTN","ONCOPRT",109,0)
 .D PRT60
"RTN","ONCOPRT",110,0)
 Q
"RTN","ONCOPRT",111,0)
 ;
"RTN","ONCOPRT",112,0)
DUF ;[DF Print Due Follow-up List by Month Due]
"RTN","ONCOPRT",113,0)
 W !
"RTN","ONCOPRT",114,0)
 N BY,FLDS,DIR,DIS,Y
"RTN","ONCOPRT",115,0)
 D DIR
"RTN","ONCOPRT",116,0)
 I $D(DIRUT) K DIRUT Q
"RTN","ONCOPRT",117,0)
 I Y<1 Q
"RTN","ONCOPRT",118,0)
 I +Y=1 S (BY,FLDS)="[ONCO DUE FOLLOWUP]"
"RTN","ONCOPRT",119,0)
 I +Y=2 S BY="[ONCO DUE FOLLOWUP]",FLDS="[ONCO DUE FOLLOWUP2]"
"RTN","ONCOPRT",120,0)
 S DIS(0)="I $$PFTD^ONCFUNC(D0)=""Y"""
"RTN","ONCOPRT",121,0)
 G PRT60
"RTN","ONCOPRT",122,0)
 ;
"RTN","ONCOPRT",123,0)
DEL ;[LF Print Delinquent (LTF) List]
"RTN","ONCOPRT",124,0)
 N BY,FLDS,DIR,DIS,Y
"RTN","ONCOPRT",125,0)
 W !!?5,"FOLLOW-UP STATUS will be changed from ""Active"" to ""LTF""."
"RTN","ONCOPRT",126,0)
 W !?5,"After 15 months the patient is considered LOST TO FOLLOW-UP."
"RTN","ONCOPRT",127,0)
 W !
"RTN","ONCOPRT",128,0)
 D DIR
"RTN","ONCOPRT",129,0)
 I $D(DIRUT) K DIRUT Q
"RTN","ONCOPRT",130,0)
 I Y<1 Q
"RTN","ONCOPRT",131,0)
 I +Y=1 S (BY,FLDS)="[ONCO DELINQUENT(LTF) LIST]"
"RTN","ONCOPRT",132,0)
 I +Y=2 S BY="[ONCO DELINQUENT(LTF) LIST]",FLDS="[ONCO DELINQUENT(LTF) LIST2]"
"RTN","ONCOPRT",133,0)
 S DIS(0)="I $$PFTD^ONCFUNC(D0)=""Y"""
"RTN","ONCOPRT",134,0)
 G PRT60
"RTN","ONCOPRT",135,0)
 ;
"RTN","ONCOPRT",136,0)
DIR ;DIR
"RTN","ONCOPRT",137,0)
 K DIR
"RTN","ONCOPRT",138,0)
 S DIR(0)="SAO^1:Standard format;2:Remote employees format"
"RTN","ONCOPRT",139,0)
 S DIR("A")=" Select report format: "
"RTN","ONCOPRT",140,0)
 S DIR("?")="Select the report format you wish to use for this report."
"RTN","ONCOPRT",141,0)
 D ^DIR
"RTN","ONCOPRT",142,0)
 Q
"RTN","ONCOPRT",143,0)
 ;
"RTN","ONCOPRT",144,0)
FST ;[SR Follow-up Status Report by Patient (132c)]
"RTN","ONCOPRT",145,0)
 W ! S (BY,FLDS)="[ONCO FOLLOWUP STATUS RPT]"
"RTN","ONCOPRT",146,0)
 S DIS(0)="I $$PFTD^ONCFUNC(D0)=""Y"""
"RTN","ONCOPRT",147,0)
 G PRT60
"RTN","ONCOPRT",148,0)
 ;
"RTN","ONCOPRT",149,0)
PFR ;[FR Individual Follow-up Report]
"RTN","ONCOPRT",150,0)
 D PAT I Y'<0 D  G EX
"RTN","ONCOPRT",151,0)
 .S BY="@NUMBER"
"RTN","ONCOPRT",152,0)
 .S (FR,TO)=+Y
"RTN","ONCOPRT",153,0)
 .S FLDS="[ONCO FOLLOWUP PATIENT RPT]"
"RTN","ONCOPRT",154,0)
 .D PRT60
"RTN","ONCOPRT",155,0)
 Q
"RTN","ONCOPRT",156,0)
 ;
"RTN","ONCOPRT",157,0)
ACOS80 ;[AA Accession Register-ACOS (80c)]
"RTN","ONCOPRT",158,0)
 S (BY,FLDS)="[ONCO ACCREG-ACOS80]" D HA G PRT655
"RTN","ONCOPRT",159,0)
 ;
"RTN","ONCOPRT",160,0)
AC80ST ;[AS Accession Register-Site (80c)]
"RTN","ONCOPRT",161,0)
 S (BY,FLDS)="[ONCO ACCREG-SITE/GP80]" D HA G PRT655
"RTN","ONCOPRT",162,0)
 ;
"RTN","ONCOPRT",163,0)
EOAC ;[AE Accession Register-EOVA (132c)]
"RTN","ONCOPRT",164,0)
 S (BY,FLDS)="[ONCO ACCREG-EOVA132]" D HA G PRT655
"RTN","ONCOPRT",165,0)
 ;
"RTN","ONCOPRT",166,0)
HA ;Help for Accession Registers
"RTN","ONCOPRT",167,0)
 W !!?3,"For a complete register:"
"RTN","ONCOPRT",168,0)
 W !?5,"START WITH ACC/SEQ NUMBER: FIRST// <Enter>"
"RTN","ONCOPRT",169,0)
 W !!?3,"For a single accession year (e.g. 1999):"
"RTN","ONCOPRT",170,0)
 W !,?5,"START WITH ACC/SEQ NUMBER: FIRST// 1999-00000"
"RTN","ONCOPRT",171,0)
 W !,?5,"GO TO ACC/SEQ NUMBER: LAST// 1999-99999"
"RTN","ONCOPRT",172,0)
 W !!?3,"For a single patient (e.g. 1999-00001):"
"RTN","ONCOPRT",173,0)
 W !,?5,"START WITH ACC/SEQ NUMBER: FIRST// 1999-00001/00"
"RTN","ONCOPRT",174,0)
 W !,?5,"GO TO ACC/SEQ NUMBER: LAST// 1999-00001/99"
"RTN","ONCOPRT",175,0)
 W !
"RTN","ONCOPRT",176,0)
 Q
"RTN","ONCOPRT",177,0)
 ;
"RTN","ONCOPRT",178,0)
ACOSPT ;[PA Patient Index-ACOS (132c)]
"RTN","ONCOPRT",179,0)
 S BY="NAME",(FR,TO)=""
"RTN","ONCOPRT",180,0)
 S FLDS="[ONCO PATIENT INDX-ACOS]"
"RTN","ONCOPRT",181,0)
 S DIS(0)="I $$PFTD^ONCFUNC(D0)=""Y"""
"RTN","ONCOPRT",182,0)
 G PRT60
"RTN","ONCOPRT",183,0)
 ;
"RTN","ONCOPRT",184,0)
PAT80 ;[PS Patient Index-Site (80c)]
"RTN","ONCOPRT",185,0)
 S BY="NAME"
"RTN","ONCOPRT",186,0)
 S (FR,TO)=""
"RTN","ONCOPRT",187,0)
 S FLDS="[ONCO PATIENT INDX80]"
"RTN","ONCOPRT",188,0)
 S DIS(0)="I $$PFTD^ONCFUNC(D0)=""Y"""
"RTN","ONCOPRT",189,0)
 G PRT60
"RTN","ONCOPRT",190,0)
 ;
"RTN","ONCOPRT",191,0)
EOVA ;[PE Patient Index-EOVA (132c)]
"RTN","ONCOPRT",192,0)
 S BY="NAME"
"RTN","ONCOPRT",193,0)
 S (FR,TO)=""
"RTN","ONCOPRT",194,0)
 S FLDS="[ONCO PATIENT INDX-EOVA132]"
"RTN","ONCOPRT",195,0)
 S DIS(0)="I $$PFTD^ONCFUNC(D0)=""Y"""
"RTN","ONCOPRT",196,0)
 G PRT60
"RTN","ONCOPRT",197,0)
 ;
"RTN","ONCOPRT",198,0)
ICD80 ;[IN Primary ICDO Listing (80c)]
"RTN","ONCOPRT",199,0)
 S (BY,FLDS)="[ONCO ICDO-SITE80]"
"RTN","ONCOPRT",200,0)
 G PRT655
"RTN","ONCOPRT",201,0)
 ;
"RTN","ONCOPRT",202,0)
SIT80 ;[SG Primary Site/GP Listing (80c)]
"RTN","ONCOPRT",203,0)
 S (BY,FLDS)="[ONCO SITE/GP80]"
"RTN","ONCOPRT",204,0)
 G PRT655
"RTN","ONCOPRT",205,0)
 ;
"RTN","ONCOPRT",206,0)
ICD132 ;[IW Primary ICDO Listing (132c)]
"RTN","ONCOPRT",207,0)
 S (BY,FLDS)="[ONCO ICDO-SITE132]"
"RTN","ONCOPRT",208,0)
 G PRT655
"RTN","ONCOPRT",209,0)
 ;
"RTN","ONCOPRT",210,0)
PAT ;ONCOLOGY PATIENT (160) lookup
"RTN","ONCOPRT",211,0)
 W !
"RTN","ONCOPRT",212,0)
 S DIC="^ONCO(160,",DIC(0)="AEQM",DIC("A")=" Select Patient Name: "
"RTN","ONCOPRT",213,0)
 D ^DIC K DIC W !
"RTN","ONCOPRT",214,0)
 Q
"RTN","ONCOPRT",215,0)
 ;
"RTN","ONCOPRT",216,0)
PRT60 ;Print ONCOLOGY PATIENT (160) file
"RTN","ONCOPRT",217,0)
 S DIC="^ONCO(160,",L=0 D EN1^DIP G EX
"RTN","ONCOPRT",218,0)
 ;
"RTN","ONCOPRT",219,0)
PRT655 ;Print ONCOLOGY PRIMARY (165.5) file
"RTN","ONCOPRT",220,0)
 S DIC="^ONCO(165.5,",L=0 D EN1^DIP G EX
"RTN","ONCOPRT",221,0)
 ;
"RTN","ONCOPRT",222,0)
EX ;Exit
"RTN","ONCOPRT",223,0)
 K BY,DIC,DHD,DIS,FLDS,FR,L,TO,Y
"RTN","ONCOPRT",224,0)
 Q
"RTN","ONCOPRT",225,0)
 ;
"RTN","ONCOPRT",226,0)
CLEANUP ;Cleanup
"RTN","ONCOPRT",227,0)
 K OUT
"RTN","ONCOPRT1")
0^18^B57470448^n/a
"RTN","ONCOPRT1",1,0)
ONCOPRT1 ;Hines OIFO/RVD - OncoTrax Reports ICD ;05/14/12
"RTN","ONCOPRT1",2,0)
 ;;2.11;ONCOLOGY;**56**;Mar 07, 1995;Build 10
"RTN","ONCOPRT1",3,0)
 ;This routine invokes Integration Agreement #3151 and #3990.
"RTN","ONCOPRT1",4,0)
 ;
"RTN","ONCOPRT1",5,0)
ICD ;check for particular ICD code.
"RTN","ONCOPRT1",6,0)
 I SORT="[ONC DISEASE INDEX CASEFINDING]" D
"RTN","ONCOPRT1",7,0)
 .S DIS(1)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>139.99)&(CODE<208.93)"
"RTN","ONCOPRT1",8,0)
 .S DIS(2)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>208.99)&(CODE<209.30)"
"RTN","ONCOPRT1",9,0)
 .S DIS(3)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=209.30"
"RTN","ONCOPRT1",10,0)
 .S DIS(4)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>209.30)&(CODE<209.37)"
"RTN","ONCOPRT1",11,0)
 .S DIS(5)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>209.69)&(CODE<209.80)"
"RTN","ONCOPRT1",12,0)
 .S DIS(6)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>224.99)&(CODE<226)"
"RTN","ONCOPRT1",13,0)
 .S DIS(7)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=227.3"
"RTN","ONCOPRT1",14,0)
 .S DIS(8)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=227.4"
"RTN","ONCOPRT1",15,0)
 .S DIS(9)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=227.9"
"RTN","ONCOPRT1",16,0)
 .S DIS(10)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=228.02"
"RTN","ONCOPRT1",17,0)
 .S DIS(11)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=228.1"
"RTN","ONCOPRT1",18,0)
 .S DIS(12)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>229.99)&(CODE<235)"
"RTN","ONCOPRT1",19,0)
 .S DIS(13)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""236.0"""
"RTN","ONCOPRT1",20,0)
 .S DIS(14)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>236.99)&(CODE<238)"
"RTN","ONCOPRT1",21,0)
 .S DIS(15)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.4"
"RTN","ONCOPRT1",22,0)
 .S DIS(16)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.6"
"RTN","ONCOPRT1",23,0)
 .S DIS(17)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.7"
"RTN","ONCOPRT1",24,0)
 .S DIS(18)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.71"
"RTN","ONCOPRT1",25,0)
 .S DIS(19)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.72"
"RTN","ONCOPRT1",26,0)
 .S DIS(20)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.73"
"RTN","ONCOPRT1",27,0)
 .S DIS(21)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.74"
"RTN","ONCOPRT1",28,0)
 .S DIS(22)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.75"
"RTN","ONCOPRT1",29,0)
 .S DIS(23)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.76"
"RTN","ONCOPRT1",30,0)
 .S DIS(24)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.77"
"RTN","ONCOPRT1",31,0)
 .S DIS(25)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=238.79"
"RTN","ONCOPRT1",32,0)
 .S DIS(26)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=239.6"
"RTN","ONCOPRT1",33,0)
 .S DIS(27)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=239.7"
"RTN","ONCOPRT1",34,0)
 .S DIS(28)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>239.80)&(CODE<239.90)"
"RTN","ONCOPRT1",35,0)
 .S DIS(29)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=273.2"
"RTN","ONCOPRT1",36,0)
 .S DIS(30)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=273.3"
"RTN","ONCOPRT1",37,0)
 .S DIS(31)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=288.3"
"RTN","ONCOPRT1",38,0)
 .S DIS(32)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=795.06"
"RTN","ONCOPRT1",39,0)
 .S DIS(33)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=795.16"
"RTN","ONCOPRT1",40,0)
 .S DIS(34)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=795.76"
"RTN","ONCOPRT1",41,0)
 .S DIS(35)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)[""V10"""
"RTN","ONCOPRT1",42,0)
 .S DIS(36)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V12.41"""
"RTN","ONCOPRT1",43,0)
 .S DIS(37)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>258.01)&(CODE<258.04)"
"RTN","ONCOPRT1",44,0)
 .S DIS(38)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=338.3"
"RTN","ONCOPRT1",45,0)
 .S DIS(39)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=511.81"
"RTN","ONCOPRT1",46,0)
 .S DIS(40)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=789.51"
"RTN","ONCOPRT1",47,0)
 .S DIS(41)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""042."""
"RTN","ONCOPRT1",48,0)
 .S DIS(42)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""079.4"""
"RTN","ONCOPRT1",49,0)
 .S DIS(43)="S CODE=+$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>79.49)&(CODE<79.60)"
"RTN","ONCOPRT1",50,0)
 .S DIS(44)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>209.9)&(CODE<230)"
"RTN","ONCOPRT1",51,0)
 .S DIS(45)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>234.9)&(CODE<236.7)"
"RTN","ONCOPRT1",52,0)
 .S DIS(46)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>237.9)&(CODE<240)"
"RTN","ONCOPRT1",53,0)
 .S DIS(47)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=253.6"
"RTN","ONCOPRT1",54,0)
 .S DIS(48)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=259.2"
"RTN","ONCOPRT1",55,0)
 .S DIS(49)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""273.0"""
"RTN","ONCOPRT1",56,0)
 .S DIS(50)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=273.1"
"RTN","ONCOPRT1",57,0)
 .S DIS(51)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=273.9"
"RTN","ONCOPRT1",58,0)
 .S DIS(52)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=275.42"
"RTN","ONCOPRT1",59,0)
 .S DIS(53)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=277.88"
"RTN","ONCOPRT1",60,0)
 .S DIS(54)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""279.00"""
"RTN","ONCOPRT1",61,0)
 .S DIS(55)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>279.01)&(CODE<279.07)"
"RTN","ONCOPRT1",62,0)
 .S DIS(56)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""279.10"""
"RTN","ONCOPRT1",63,0)
 .S DIS(57)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=279.12"
"RTN","ONCOPRT1",64,0)
 .S DIS(58)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=279.13"
"RTN","ONCOPRT1",65,0)
 .S DIS(59)="S CODE=$P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2) I (CODE>279.1)&(CODE<280)"
"RTN","ONCOPRT1",66,0)
 .S DIS(60)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=284.81"
"RTN","ONCOPRT1",67,0)
 .S DIS(61)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=284.89"
"RTN","ONCOPRT1",68,0)
 .S DIS(62)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=285.22"
"RTN","ONCOPRT1",69,0)
 .S DIS(63)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=285.3"
"RTN","ONCOPRT1",70,0)
 .S DIS(64)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=288.03"
"RTN","ONCOPRT1",71,0)
 .S DIS(65)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=289.83"
"RTN","ONCOPRT1",72,0)
 .S DIS(66)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=323.81"
"RTN","ONCOPRT1",73,0)
 .S DIS(67)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=379.59"
"RTN","ONCOPRT1",74,0)
 .S DIS(68)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=528.01"
"RTN","ONCOPRT1",75,0)
 .S DIS(69)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=686.01"
"RTN","ONCOPRT1",76,0)
 .S DIS(70)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=695.89"
"RTN","ONCOPRT1",77,0)
 .S DIS(71)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=701.2"
"RTN","ONCOPRT1",78,0)
 .S DIS(72)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=710.3"
"RTN","ONCOPRT1",79,0)
 .S DIS(73)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=710.4"
"RTN","ONCOPRT1",80,0)
 .S DIS(74)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=785.6"
"RTN","ONCOPRT1",81,0)
 .S DIS(75)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=790.93"
"RTN","ONCOPRT1",82,0)
 .S DIS(76)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=795.8"
"RTN","ONCOPRT1",83,0)
 .S DIS(77)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=795.81"
"RTN","ONCOPRT1",84,0)
 .S DIS(78)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=795.82"
"RTN","ONCOPRT1",85,0)
 .S DIS(79)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=795.89"
"RTN","ONCOPRT1",86,0)
 .S DIS(80)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=999.31"
"RTN","ONCOPRT1",87,0)
 .S DIS(81)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=999.81"
"RTN","ONCOPRT1",88,0)
 .S DIS(82)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""E879.2"""
"RTN","ONCOPRT1",89,0)
 .S DIS(83)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""E930.7"""
"RTN","ONCOPRT1",90,0)
 .S DIS(84)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""E933.1"""
"RTN","ONCOPRT1",91,0)
 .S DIS(85)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V07.3"""
"RTN","ONCOPRT1",92,0)
 .S DIS(86)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V07.8"""
"RTN","ONCOPRT1",93,0)
 .S DIS(87)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V12.72"""
"RTN","ONCOPRT1",94,0)
 .S DIS(88)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V15.3"""
"RTN","ONCOPRT1",95,0)
 .S DIS(89)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V42.81"""
"RTN","ONCOPRT1",96,0)
 .S DIS(90)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V42.82"""
"RTN","ONCOPRT1",97,0)
 .S DIS(91)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V51.0"""
"RTN","ONCOPRT1",98,0)
 .S DIS(92)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V52.4"""
"RTN","ONCOPRT1",99,0)
 .S DIS(93)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V54.2"""
"RTN","ONCOPRT1",100,0)
 .S DIS(94)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V58.0"""
"RTN","ONCOPRT1",101,0)
 .S DIS(95)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V58.1"""
"RTN","ONCOPRT1",102,0)
 .S DIS(96)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V58.11"""
"RTN","ONCOPRT1",103,0)
 .S DIS(97)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V58.12"""
"RTN","ONCOPRT1",104,0)
 .S DIS(98)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V58.42"""
"RTN","ONCOPRT1",105,0)
 .S DIS(99)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V66.1"""
"RTN","ONCOPRT1",106,0)
 .S DIS(100)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V66.2"""
"RTN","ONCOPRT1",107,0)
 .S DIS(101)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V67.1"""
"RTN","ONCOPRT1",108,0)
 .S DIS(102)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V67.2"""
"RTN","ONCOPRT1",109,0)
 .S DIS(103)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)[""V76"""
"RTN","ONCOPRT1",110,0)
 .S DIS(104)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)[""V78"""
"RTN","ONCOPRT1",111,0)
 .S DIS(105)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V82.71"""
"RTN","ONCOPRT1",112,0)
 .S DIS(106)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V82.79"""
"RTN","ONCOPRT1",113,0)
 .S DIS(107)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V82.89"""
"RTN","ONCOPRT1",114,0)
 .S DIS(108)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V82.9"""
"RTN","ONCOPRT1",115,0)
 .S DIS(109)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V84.01"""
"RTN","ONCOPRT1",116,0)
 .S DIS(110)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V84.02"""
"RTN","ONCOPRT1",117,0)
 .S DIS(111)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V84.03"""
"RTN","ONCOPRT1",118,0)
 .S DIS(112)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V84.04"""
"RTN","ONCOPRT1",119,0)
 .S DIS(113)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V84.09"""
"RTN","ONCOPRT1",120,0)
 .S DIS(114)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V84.81"""
"RTN","ONCOPRT1",121,0)
 .S DIS(115)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V86.0"""
"RTN","ONCOPRT1",122,0)
 .S DIS(116)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V86.1"""
"RTN","ONCOPRT1",123,0)
 .S DIS(117)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=""V87.41"""
"RTN","ONCOPRT1",124,0)
 .S DIS(118)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=259.8"
"RTN","ONCOPRT1",125,0)
 .S DIS(119)="I $P($$ICDDX^ICDCODE($P($G(^AUPNVPOV(D0,0)),U,1)),U,2)=624.01"
"RTN","ONCOPRT1",126,0)
 Q
"RTN","ONCOTN")
0^22^B119940311^B117635742
"RTN","ONCOTN",1,0)
ONCOTN ;Hines OIFO/GWB - TNM Staging ;02/28/11
"RTN","ONCOTN",2,0)
 ;;2.11;ONCOLOGY;**1,3,6,7,11,15,19,22,25,28,29,35,36,37,41,42,43,44,46,47,49,50,51,52,53,54,56**;Mar 07, 1995;Build 10
"RTN","ONCOTN",3,0)
 ;
"RTN","ONCOTN",4,0)
 N DATEDX,H,ONCED,S,YR
"RTN","ONCOTN",5,0)
 S DATEDX=$P(^ONCO(165.5,D0,0),U,16)
"RTN","ONCOTN",6,0)
 S YR=$E(DATEDX,1,3)
"RTN","ONCOTN",7,0)
 S ONCED=$S(YR<283:1,YR<288:2,YR<292:3,YR<298:4,YR<303:5,YR<310:6,1:7)
"RTN","ONCOTN",8,0)
 S S=$P(^ONCO(165.5,D0,0),U,1)
"RTN","ONCOTN",9,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",10,0)
 I T="" W !!?5,"PRIMARY SITE not defined.",! S Y=20 Q
"RTN","ONCOTN",11,0)
 S H=$$HIST^ONCFUNC(D0)
"RTN","ONCOTN",12,0)
 S HT14=$E(H,1,4)
"RTN","ONCOTN",13,0)
 S SD=$P($G(^ONCO(165.5,D0,"CS3")),U,1)
"RTN","ONCOTN",14,0)
 I H="" W !!?5,"HISTOLOGY not defined.",! S Y=$S(DATEDX>3001231:22.3,1:22) Q
"RTN","ONCOTN",15,0)
 S Y="@69"
"RTN","ONCOTN",16,0)
 ;
"RTN","ONCOTN",17,0)
 ;Dermatofibrosarcomas of the skin 
"RTN","ONCOTN",18,0)
 I (HT14=8832)!(HT14=8833),($E(T,3,4)=44) D  S Y="@313" Q
"RTN","ONCOTN",19,0)
 .W !!?3,"AJCC does not define staging for dermatofibrosarcomas of the skin.",!
"RTN","ONCOTN",20,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",21,0)
 ;
"RTN","ONCOTN",22,0)
 ;Laryngeal cartilage C32.3 - 7th Edition
"RTN","ONCOTN",23,0)
 ;Removed from 7th Edition Larynx chapter 5
"RTN","ONCOTN",24,0)
 I ONCED>6,T=67323 D  Q
"RTN","ONCOTN",25,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",26,0)
 ;
"RTN","ONCOTN",27,0)
7 ;Major Salivary Glands - 7th Edition
"RTN","ONCOTN",28,0)
 I ONCED>6,($E(T,3,4)="07")!($E(T,3,4)="08"),(HT14<8000)!((HT14>8576)&(HT14<8940))!((HT14>8950)&(HT14<8980))!(HT14>8981) D  Q
"RTN","ONCOTN",29,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",30,0)
 ;
"RTN","ONCOTN",31,0)
8 ;Mycosis fungoides and Sezary Disease of Skin, Vulva, Penis, Scrotum
"RTN","ONCOTN",32,0)
 I (H=97003)!(H=97013),($E(T,3,4)=44)!($E(T,3,4)=51)!($E(T,3,4)=60)!(T=67632),ONCED>5 Q
"RTN","ONCOTN",33,0)
 ;
"RTN","ONCOTN",34,0)
 I (S=62)!($$LYMPHOMA^ONCFUNC(D0)) D  Q
"RTN","ONCOTN",35,0)
 .I ONCED>6,(T=67441)!(T=67690)!(T=67695)!(T=67696) Q
"RTN","ONCOTN",36,0)
 .W !!?3,"No TNM classification is available for Lymphoid Neoplasms.",!
"RTN","ONCOTN",37,0)
 .D CTNM88,PTNM88
"RTN","ONCOTN",38,0)
 .S Y="@376"
"RTN","ONCOTN",39,0)
 ;
"RTN","ONCOTN",40,0)
 I (T=67301)!(T=67339)!(T=67379)!($E(T,1,4)=6739)!(T=67630)!(T=67631)!(T=67637)!(T=67638)!(T=67639)!(T=67691)!(T=67750)!(T=67754)!(T=67755)!(T=67758)!(T=67759)!($E(T,1,4)=6776)!($E(T,1,4)=6726) D  S Y="@313" Q
"RTN","ONCOTN",41,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",42,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",43,0)
 ;
"RTN","ONCOTN",44,0)
 I $E(T,1,4)=6774,ONCED<7 D  S Y="@313" Q
"RTN","ONCOTN",45,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",46,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",47,0)
 ;
"RTN","ONCOTN",48,0)
 I (T=67248)!(T=67249),ONCED>6 D  S Y="@313" Q
"RTN","ONCOTN",49,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",50,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",51,0)
 ;
"RTN","ONCOTN",52,0)
 I T=67695,SD="020",ONCED>6 D  S Y="@313" Q
"RTN","ONCOTN",53,0)
 .W !!?3,"AJCC does not define staging for lacrimal sac.",!
"RTN","ONCOTN",54,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",55,0)
 ;
"RTN","ONCOTN",56,0)
 I (T=67254)!(T=67312)!(T=67313)!(T=67318)!(T=67319) D  S Y="@313" Q
"RTN","ONCOTN",57,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",58,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",59,0)
 ;
"RTN","ONCOTN",60,0)
 I ONCED=6,$$MELANOMA^ONCOU55(D0),($E(T,3,4)=44)!($E(T,3,4)=51)!($E(T,3,4)=60)!(T=67632),(H=87233)!(H=87283)!(H=87303)!(H=87403)!(H=87412)!(H=87413)!(H=87463)!(H=87703)!(H=87733)!(H=87743)!(H=87422) D  S Y="@313" Q
"RTN","ONCOTN",61,0)
 .W !!?1,"Histology ",$E(H,1,4)_"/"_$E(H,5)," is not appropriate for or relevant to the staging of melanoma.",!
"RTN","ONCOTN",62,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",63,0)
 ;
"RTN","ONCOTN",64,0)
 I (ONCED<7),((H<8020)!(H>8090)),(T=67140)!(T=67142)!(T=67148) D   S Y="@313" Q 
"RTN","ONCOTN",65,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",66,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",67,0)
 ;
"RTN","ONCOTN",68,0)
 I (T=67250)!($E(T,1,4)=6715)!($E(T,1,4)=6716)!($E(T,1,4)=6717)!($E(T,1,4)=6718),$E(H,1,4)=8936,ONCED=6 D   S Y="@313" Q 
"RTN","ONCOTN",69,0)
 .W !!," No TNM coding/staging available for GASTROINTESTINAL STROMA of ",$S($E(T,1,4)=6715:"ESOPHAGUS",$E(T,1,4)=6716:"STOMACH",$E(T,1,4)=6717:"SMALL INTESTINE",$E(T,1,4)=6718:"COLON",T=67250:"PANCREAS, HEAD",1:""),".",!
"RTN","ONCOTN",70,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",71,0)
 ;
"RTN","ONCOTN",72,0)
 ;Carcinoid Tumors
"RTN","ONCOTN",73,0)
 I ($E(T,3,4)=16)!($E(T,3,4)=17)!($E(T,3,4)=18)!(T=67199)!(T=67209)!($E(T,3,4)=21)!(T=67239)!($E(T,3,4)=24)!($E(T,3,4)=25),($E(H,1,4)=8240)!($E(H,1,4)=8241)!($E(H,1,4)=8242)!($E(H,1,4)=8243)!($E(H,1,4)=8249)!($E(H,1,4)=9091) D  Q
"RTN","ONCOTN",74,0)
 .I ONCED>6,($E(T,3,4)=16)!($E(T,3,4)=17)!(T=67180)!(T=67182)!(T=67183)!(T=67184)!(T=67185)!(T=67186)!(T=67187)!(T=67188)!(T=67189)!(T=67199)!(T=67209)!(T=67241) Q
"RTN","ONCOTN",75,0)
 .W !!?3,"No TNM coding/staging is available for carcinoid tumors" D
"RTN","ONCOTN",76,0)
 ..I ($E(T,3,4)=16)!($E(T,3,4)=17)!($E(T,3,4)=18)!($E(T,3,4)=21)!(T=67239)!($E(T,3,4)=24)!(T=67241)!($E(T,3,4)=25) W !?3,"of the ",$P($G(^ONCO(164,T,0)),U,1),"."
"RTN","ONCOTN",77,0)
 ..W !
"RTN","ONCOTN",78,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",79,0)
 .S Y="@313"
"RTN","ONCOTN",80,0)
 ;
"RTN","ONCOTN",81,0)
 I $E(T,1,4)=6734 D ^ONCLNG,^ONCLNG1 I $D(ONCLUNG(H)) D   S Y="@313" Q 
"RTN","ONCOTN",82,0)
 .W !!?3,"No TNM coding/staging available for sarcomas and rare tumors of the lung.",!
"RTN","ONCOTN",83,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",84,0)
 .K ONCLUNG
"RTN","ONCOTN",85,0)
 K ONCLUNG
"RTN","ONCOTN",86,0)
 ;
"RTN","ONCOTN",87,0)
 I (T=67380)!(T=67381)!(T=67382)!(T=67383)!(T=67388)!($E(T,1,4)=6747)!($E(T,1,4)=6748)!($E(T,1,4)=6749),(H=91203)!(H=89903) D   S Y="@313" Q 
"RTN","ONCOTN",88,0)
 .W !!?3,"No TNM coding/staging available for angiosarcoma or malignant mesenchymoma.",! D
"RTN","ONCOTN",89,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",90,0)
 ;
"RTN","ONCOTN",91,0)
 I $E(T,1,4)=6748,H=90503 D   S Y="@313" Q 
"RTN","ONCOTN",92,0)
 .W !!?3,"No TNM coding/staging available for malignant peritoneal mesothelioma.",! D
"RTN","ONCOTN",93,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",94,0)
 ;
"RTN","ONCOTN",95,0)
 ;I (T=67300)!(T=67310)!(T=67311),(H=95223) D   S Y="@313" Q 
"RTN","ONCOTN",96,0)
 ;.W !!," No TNM coding available for OLFACTORY NEUROMBLASTOMA of ",$S(T=67300:"NASAL CAVITY",T=67310:"SINUS, MAXILLARY",T=67311:"SINUS ETHMOID",1:""),".",!
"RTN","ONCOTN",97,0)
 ;.D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",98,0)
 ;
"RTN","ONCOTN",99,0)
 ;Fallopian Tube (C57.0)
"RTN","ONCOTN",100,0)
 ;Other/unspecified female genitalia (C57.1-C57.9)
"RTN","ONCOTN",101,0)
 I ((T=67570)&(ONCED<5))!(($E(T,1,4)=6757)&(T'=67570)) D  S Y="@313" Q
"RTN","ONCOTN",102,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",103,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",104,0)
 ;
"RTN","ONCOTN",105,0)
 ;Paraurethral gland (C68.1)
"RTN","ONCOTN",106,0)
 ;Overlapping lesion of urinary organs (C68.8)
"RTN","ONCOTN",107,0)
 ;Urinary system, NOS (C68.9)
"RTN","ONCOTN",108,0)
 I ONCED>5,((T=67681)!(T=67688)!(T=67689)) D  S Y="@313" Q
"RTN","ONCOTN",109,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",110,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",111,0)
 ;
"RTN","ONCOTN",112,0)
 ;Melanoma of the Eyelid
"RTN","ONCOTN",113,0)
 I ONCED<5,T=67441,$$MELANOMA^ONCOU55(D0) D  S Y=37.2 Q
"RTN","ONCOTN",114,0)
 .W !!?3,"No classification is recommended at present.",!
"RTN","ONCOTN",115,0)
 .S $P(^ONCO(165.5,D0,2),U,25)=88
"RTN","ONCOTN",116,0)
 .W !,"CLINICAL T: T88 NA"
"RTN","ONCOTN",117,0)
 ;
"RTN","ONCOTN",118,0)
 ;Brain and Spinal Cord
"RTN","ONCOTN",119,0)
 I ONCED>4,(T=67700)!(T=67701)!(T=67709)!(T=67751)!(T=67752)!(T=67753)!($E(T,3,4)=71)!($E(T,3,4)=72) D  S Y="@313" Q
"RTN","ONCOTN",120,0)
 .W !!?3,"Central Nervous System Tumors have no TNM designation.",!
"RTN","ONCOTN",121,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",122,0)
 ;
"RTN","ONCOTN",123,0)
 ;Kaposi's sarcoma
"RTN","ONCOTN",124,0)
 I H=91403 D  S Y="@313" Q
"RTN","ONCOTN",125,0)
 .W !!?3,"No TNM classification or staging is available for Kaposi's sarcoma.",!
"RTN","ONCOTN",126,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",127,0)
 ;
"RTN","ONCOTN",128,0)
 I $P(^ONCO(164,T,0),U,11)="" D  S Y="@313" Q
"RTN","ONCOTN",129,0)
 .W !!?3,"No stage grouping is presently recommended.",!
"RTN","ONCOTN",130,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",131,0)
 Q
"RTN","ONCOTN",132,0)
 ;
"RTN","ONCOTN",133,0)
CN2 ;GTT - clinical
"RTN","ONCOTN",134,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",135,0)
 I T=67589 D  S Y=37.3 Q
"RTN","ONCOTN",136,0)
 .W !!,"  Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",137,0)
 .S $P(^ONCO(165.5,D0,2),U,26)=""
"RTN","ONCOTN",138,0)
 .W !,"CLINICAL N:"
"RTN","ONCOTN",139,0)
 Q
"RTN","ONCOTN",140,0)
 ;
"RTN","ONCOTN",141,0)
CN4 ;GTT - pathologic
"RTN","ONCOTN",142,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",143,0)
 I T=67589 D  S Y=87 Q
"RTN","ONCOTN",144,0)
 .W !!,"   Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",145,0)
 .S $P(^ONCO(165.5,D0,2.1),U,2)=""
"RTN","ONCOTN",146,0)
 .W !,"PATHOLOGIC N:"
"RTN","ONCOTN",147,0)
 Q
"RTN","ONCOTN",148,0)
 ;
"RTN","ONCOTN",149,0)
CN5 ;GTT - other
"RTN","ONCOTN",150,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",151,0)
 I T=67589 D  S Y=99 Q
"RTN","ONCOTN",152,0)
 .W !!,"   Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",153,0)
 .S $P(^ONCO(165.5,D0,2.1),U,7)=""
"RTN","ONCOTN",154,0)
 .W !,"OTHER N:"
"RTN","ONCOTN",155,0)
 Q
"RTN","ONCOTN",156,0)
 ;
"RTN","ONCOTN",157,0)
RECN ;GTT - Subsequent Recurrences - other
"RTN","ONCOTN",158,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",159,0)
 I T=67589 D  S Y=3 Q
"RTN","ONCOTN",160,0)
 .W !!,"   Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",161,0)
 .S $P(^ONCO(165.5,D0,23,D1,0),U,8)=""
"RTN","ONCOTN",162,0)
 .W !,"OTHER N:"
"RTN","ONCOTN",163,0)
 Q
"RTN","ONCOTN",164,0)
 ;
"RTN","ONCOTN",165,0)
ES ;Automatic Staging
"RTN","ONCOTN",166,0)
 N CM,G,HT,HT14,N,M,SD,SP,STGTYP,T,TX,XX,XXX,YR
"RTN","ONCOTN",167,0)
 S YR=$E($P($G(^ONCO(165.5,D0,0)),U,16),1,3)
"RTN","ONCOTN",168,0)
 S ONCED=$S(YR<283:1,YR<288:2,YR<292:3,YR<298:4,YR<303:5,YR<310:6,1:7)
"RTN","ONCOTN",169,0)
 I ONCED<3 D  Q
"RTN","ONCOTN",170,0)
 .W !!,"DATE DX prior to 1988.  Automatic staging unavailable.",!
"RTN","ONCOTN",171,0)
 S STGTYP=$S(STGIND="C":"CLINICAL",STGIND="P":"PATHOLOGIC",STGIND="O":"OTHER",STGIND="R":"RECURRENCE",1:"")
"RTN","ONCOTN",172,0)
 S XX=$G(^ONCO(165.5,D0,2))
"RTN","ONCOTN",173,0)
 G EX:XX=""
"RTN","ONCOTN",174,0)
 S ST=$P(^ONCO(165.5,D0,0),U,1)
"RTN","ONCOTN",175,0)
 S G=$P(^ONCO(165.5,D0,2),U,5)
"RTN","ONCOTN",176,0)
 S TX=$P(^ONCO(165.5,D0,2),U,1)
"RTN","ONCOTN",177,0)
 S HT=$$HIST^ONCFUNC(D0)
"RTN","ONCOTN",178,0)
 S SP=$P($G(^ONCO(164,+TX,0)),U,11)
"RTN","ONCOTN",179,0)
 S SD=$P($G(^ONCO(165.5,D0,"CS3")),U,1)
"RTN","ONCOTN",180,0)
 I STGIND="C" D
"RTN","ONCOTN",181,0)
 .S XXX=$G(^ONCO(165.5,D0,2))
"RTN","ONCOTN",182,0)
 .S T=$P(XXX,U,25)
"RTN","ONCOTN",183,0)
 .S N=$P(XXX,U,26)
"RTN","ONCOTN",184,0)
 .S M=$P(XXX,U,27)
"RTN","ONCOTN",185,0)
 I STGIND="P" D
"RTN","ONCOTN",186,0)
 .S XXX=$G(^ONCO(165.5,D0,2.1))
"RTN","ONCOTN",187,0)
 .S T=$P(XXX,U,1)
"RTN","ONCOTN",188,0)
 .S N=$P(XXX,U,2)
"RTN","ONCOTN",189,0)
 .S M=$P(XXX,U,3)
"RTN","ONCOTN",190,0)
 .S CM=$P($G(^ONCO(165.5,D0,2)),U,27)
"RTN","ONCOTN",191,0)
 .I (T'="X")!(N'="X"),$E(M,1)'=1,CM'="X" D
"RTN","ONCOTN",192,0)
 ..S M=CM
"RTN","ONCOTN",193,0)
 ..W !!?12,"CLINICAL M will be used to calculate PATHOLOGIC STAGE GROUPING."
"RTN","ONCOTN",194,0)
 I STGIND="O" D
"RTN","ONCOTN",195,0)
 .S XXX=$G(^ONCO(165.5,D0,2.1))
"RTN","ONCOTN",196,0)
 .S T=$P(XXX,U,6)
"RTN","ONCOTN",197,0)
 .S N=$P(XXX,U,7)
"RTN","ONCOTN",198,0)
 .S M=$P(XXX,U,8)
"RTN","ONCOTN",199,0)
 I STGIND="R" D
"RTN","ONCOTN",200,0)
 .S XXX=$G(^ONCO(165.5,D0,23,DA,0))
"RTN","ONCOTN",201,0)
 .S T=$P(XXX,U,6)
"RTN","ONCOTN",202,0)
 .S N=$P(XXX,U,7)
"RTN","ONCOTN",203,0)
 .S M=$P(XXX,U,8)
"RTN","ONCOTN",204,0)
 I T="" D  G SG
"RTN","ONCOTN",205,0)
 .W !!?3,"No ",STGTYP," T category has been assigned."
"RTN","ONCOTN",206,0)
 .S SG=99
"RTN","ONCOTN",207,0)
 I N="",ST'=58,'$$GTT^ONCOU55(D0) D  G SG
"RTN","ONCOTN",208,0)
 .W !!?3,"No ",STGTYP," N category has been assigned."
"RTN","ONCOTN",209,0)
 .S SG=99
"RTN","ONCOTN",210,0)
 I M="" D  G SG
"RTN","ONCOTN",211,0)
 .W !?3,"No ",STGTYP," M category has been assigned."
"RTN","ONCOTN",212,0)
 .S SG=99
"RTN","ONCOTN",213,0)
 ;
"RTN","ONCOTN",214,0)
 ;Esophagus/GE Junction C16.0-C16.2
"RTN","ONCOTN",215,0)
 I TX=67160,ONCED>6 S AG="9" G AG
"RTN","ONCOTN",216,0)
 I TX=67161!(TX=67162),ONCED>6,SD="010"!(SD="020")!(SD="040")!(SD="060") S AG="9" G AG
"RTN","ONCOTN",217,0)
 ;
"RTN","ONCOTN",218,0)
 ;Gastrointestinal Stromal Tumor (Gist) 8935-8936
"RTN","ONCOTN",219,0)
 I ($E(HT,1,4)=8935)!($E(HT,1,4)=8936),(($E(TX,3,4)=15)!($E(TX,3,4)=16)!($E(TX,3,4)=17)!($E(TX,3,4)=18)!($E(TX,3,4)=21)!($E(TX,3,4)=48)!(TX=67199)!(TX=67209)),ONCED>6 S AG="121" G AG
"RTN","ONCOTN",220,0)
 ;
"RTN","ONCOTN",221,0)
 ;Neuroendocrine Tumor 8153, 8240-8242, 8246, 8249
"RTN","ONCOTN",222,0)
 I ONCED>6,(($E(HT,1,4)=8153)!($E(HT,1,4)=8240)!($E(HT,1,4)=8241)!($E(HT,1,4)=8242)!($E(HT,1,4)=8246)!($E(HT,1,4)=8249)),(($E(TX,3,4)=16)!($E(TX,3,4)=17)!($E(TX,3,4)=18)!(TX=67241)!(TX=67199)!(TX=67209)) S AG=122 G AG
"RTN","ONCOTN",223,0)
 ;
"RTN","ONCOTN",224,0)
 ;Gallbladder
"RTN","ONCOTN",225,0)
 ;Distal Bile Duct
"RTN","ONCOTN",226,0)
 I TX=67240,ONCED>6,(SD="040")!(SD="070") S AG=63 G AG
"RTN","ONCOTN",227,0)
 I TX=67240,ONCED>6,SD="030" S AG=14 G AG
"RTN","ONCOTN",228,0)
 ;
"RTN","ONCOTN",229,0)
 ;Melanoma of the Eyelid (C44.1)
"RTN","ONCOTN",230,0)
 I TX=67441,ONCED<5,$$MELANOMA^ONCOU55(D0) S AG=37 G AG
"RTN","ONCOTN",231,0)
 ;
"RTN","ONCOTN",232,0)
 ;Melanoma of the Skin
"RTN","ONCOTN",233,0)
 I $$MELANOMA^ONCOU55(D0),$P($G(^ONCO(164,+TX,0)),U,15) S AG=22 G AG
"RTN","ONCOTN",234,0)
 ;
"RTN","ONCOTN",235,0)
 ;Merkel Cell Carcinoma
"RTN","ONCOTN",236,0)
 I $E(HT,1,4)=8247,ONCED>6 S AG=21 G AG
"RTN","ONCOTN",237,0)
 ;
"RTN","ONCOTN",238,0)
 ;Ovary and Primary Peritoneal Carcinoma - 7th edition
"RTN","ONCOTN",239,0)
 S HT14=$E(HT,1,4)
"RTN","ONCOTN",240,0)
 I ONCED>6,(TX=67481)!(TX=67482)!(TX=67488),(HT14>7999)&(HT14<8577)!(HT14>8929)&(HT14<9111) S AG=26,SP=67569 G AG
"RTN","ONCOTN",241,0)
 ;
"RTN","ONCOTN",242,0)
 ;GTT
"RTN","ONCOTN",243,0)
 I TX=67589 S AG=54 G AG
"RTN","ONCOTN",244,0)
 ;
"RTN","ONCOTN",245,0)
 ;Urethra (C68.9)
"RTN","ONCOTN",246,0)
 ;Urothelial (Transitional Cell) Carcinoma of the Prostate
"RTN","ONCOTN",247,0)
 I ONCED>4,TX=67619,(HT=81203)!(HT=81303)!(HT=81223)!(HT=81202) D  G AG
"RTN","ONCOTN",248,0)
 .S AG=35
"RTN","ONCOTN",249,0)
 ;
"RTN","ONCOTN",250,0)
 ;Melanoma of the Conjunctiva
"RTN","ONCOTN",251,0)
 I $$MELANOMA^ONCOU55(D0),TX=67690 S AG=39 G AG
"RTN","ONCOTN",252,0)
 ;
"RTN","ONCOTN",253,0)
 ;Melanoma of the Uvea
"RTN","ONCOTN",254,0)
 I $$MELANOMA^ONCOU55(D0),((TX=67693)!(TX=67694)) S AG=40 G AG
"RTN","ONCOTN",255,0)
 ;
"RTN","ONCOTN",256,0)
 ;Ocular Adnexa Lymphoma
"RTN","ONCOTN",257,0)
 I ONCED>6,$$LYMPHOMA^ONCFUNC(D0),((TX=67441)!(TX=67690)!(TX=67695)!(TX=67696)) S AG=431 G AG
"RTN","ONCOTN",258,0)
 ;
"RTN","ONCOTN",259,0)
 ;Lymphoid Neoplasms
"RTN","ONCOTN",260,0)
 ;Mycosis fungoides (9700/3)
"RTN","ONCOTN",261,0)
 ;Sezary Disease    (9701/3)
"RTN","ONCOTN",262,0)
 I ONCED>5,(HT=97003)!(HT=97013) S AG=55 G AG
"RTN","ONCOTN",263,0)
 ;
"RTN","ONCOTN",264,0)
 S AG=$P($G(^ONCO(164,+TX,0)),U,12)
"RTN","ONCOTN",265,0)
 ;
"RTN","ONCOTN",266,0)
AG ;DO staging subroutine
"RTN","ONCOTN",267,0)
 S SG=99
"RTN","ONCOTN",268,0)
 I T=88,N=88,M=88 S SG=88 G SG
"RTN","ONCOTN",269,0)
 S ONCOED=ONCED
"RTN","ONCOTN",270,0)
 D @(AG_"^ONCOTN0")
"RTN","ONCOTN",271,0)
 W:SG=99 !!,?12,"TNM combination not in staging table."
"RTN","ONCOTN",272,0)
 ;
"RTN","ONCOTN",273,0)
SG ;Computed stage
"RTN","ONCOTN",274,0)
 I STGIND="C" S $P(^ONCO(165.5,D0,2),U,20)=SG
"RTN","ONCOTN",275,0)
 I STGIND="P" S $P(^ONCO(165.5,D0,2.1),U,4)=SG
"RTN","ONCOTN",276,0)
 I STGIND="O" S $P(^ONCO(165.5,D0,2.1),U,9)=SG
"RTN","ONCOTN",277,0)
 I STGIND="R" S $P(^ONCO(165.5,D0,23,DA,0),U,9)=SG
"RTN","ONCOTN",278,0)
 I SG'="" S X=SG D KSG^ONCOCRC D
"RTN","ONCOTN",279,0)
 .I STGIND="C" D CSSG^ONCOCRC Q
"RTN","ONCOTN",280,0)
 .I STGIND="P" D PSSG^ONCOCRC Q
"RTN","ONCOTN",281,0)
 N CMPFLG S CMPFLG="COMPUTING TNM"
"RTN","ONCOTN",282,0)
 W !!?12,"Computed "_$S(STGIND="C":"CLINICAL",STGIND="P":"PATHOLOGIC",STGIND="O":"OTHER",STGIND="R":"RECURRENCE",1:"")," STAGE GROUPING: ",$$SGOUT^ONCOTNO(D0),!
"RTN","ONCOTN",283,0)
EX Q
"RTN","ONCOTN",284,0)
 ;
"RTN","ONCOTN",285,0)
CTNM88 ;CLINICAL TNM 88
"RTN","ONCOTN",286,0)
 S $P(^ONCO(165.5,D0,2),U,25)=88
"RTN","ONCOTN",287,0)
 S $P(^ONCO(165.5,D0,2),U,26)=88
"RTN","ONCOTN",288,0)
 S $P(^ONCO(165.5,D0,2),U,27)=88
"RTN","ONCOTN",289,0)
 W !,"CLINICAL T: T88 NA"
"RTN","ONCOTN",290,0)
 W !,"CLINICAL N: N88 NA"
"RTN","ONCOTN",291,0)
 W !,"CLINICAL M: M88 NA",!
"RTN","ONCOTN",292,0)
 I $$LYMPHOMA^ONCFUNC(D0) Q
"RTN","ONCOTN",293,0)
 S:$P($G(^ONCO(165.5,D0,7)),U,7)="" $P(^ONCO(165.5,D0,7),U,7)="0000000"
"RTN","ONCOTN",294,0)
 S:$P($G(^ONCO(165.5,D0,7)),U,14)="" $P(^ONCO(165.5,D0,7),U,14)="0000000"
"RTN","ONCOTN",295,0)
 Q
"RTN","ONCOTN",296,0)
 ;
"RTN","ONCOTN",297,0)
CSB I DATEDX>2951231 D
"RTN","ONCOTN",298,0)
 .S $P(^ONCO(165.5,D0,3),U,32)=0
"RTN","ONCOTN",299,0)
 .W !,"STAGED BY (CLINICAL STAGE): Not staged",!
"RTN","ONCOTN",300,0)
 Q
"RTN","ONCOTN",301,0)
 ;
"RTN","ONCOTN",302,0)
PTNM88 ;PATHOLOGIC TNM 88
"RTN","ONCOTN",303,0)
 S $P(^ONCO(165.5,D0,7),U,17)="N"
"RTN","ONCOTN",304,0)
 S $P(^ONCO(165.5,D0,2.1),U,1)=88
"RTN","ONCOTN",305,0)
 S $P(^ONCO(165.5,D0,2.1),U,2)=88
"RTN","ONCOTN",306,0)
 S $P(^ONCO(165.5,D0,2.1),U,3)=88
"RTN","ONCOTN",307,0)
 W !,"MULTIMODALITY THERAPY: NO"
"RTN","ONCOTN",308,0)
 W !,"PATHOLOGIC T: T88 NA"
"RTN","ONCOTN",309,0)
 W !,"PATHOLOGIC N: N88 NA"
"RTN","ONCOTN",310,0)
 W !,"PATHOLOGIC M: M88 NA",!
"RTN","ONCOTN",311,0)
 Q
"RTN","ONCOTN",312,0)
 ;
"RTN","ONCOTN",313,0)
PSB I DATEDX>2951231 D
"RTN","ONCOTN",314,0)
 .S $P(^ONCO(165.5,D0,2.1),U,5)=0
"RTN","ONCOTN",315,0)
 .W !,"STAGED BY (PATHOLOGIC STAGE): Not staged",!
"RTN","ONCOTN",316,0)
 Q
"RTN","ONCOTN",317,0)
 ;
"RTN","ONCOTN",318,0)
CSTG88 ;CLINICAL STAGE 88
"RTN","ONCOTN",319,0)
 S $P(^ONCO(165.5,D0,2),U,20)=88
"RTN","ONCOTN",320,0)
 W !,"STAGE GROUP CLINICAL: NA",!
"RTN","ONCOTN",321,0)
 S TMP=$G(X),X=88 D CSSG^ONCOCRC S X=TMP
"RTN","ONCOTN",322,0)
 K TMP
"RTN","ONCOTN",323,0)
 Q
"RTN","ONCOTN",324,0)
 ;
"RTN","ONCOTN",325,0)
PSTG88 ;PATHOLOGIC STAGE 88
"RTN","ONCOTN",326,0)
 S $P(^ONCO(165.5,D0,2.1),U,4)=88
"RTN","ONCOTN",327,0)
 W !,"STAGE GROUP PATHOLOGIC: NA",!
"RTN","ONCOTN",328,0)
 S TMP=$G(X),X=88 D PSSG^ONCOCRC S X=TMP
"RTN","ONCOTN",329,0)
 K TMP
"RTN","ONCOTN",330,0)
 Q
"RTN","ONCOTN",331,0)
 ;
"RTN","ONCOTN",332,0)
CN1 ;No longer used. Called by PCEs.
"RTN","ONCOTN",333,0)
CN3 ;No longer used. Called by PCEs.
"RTN","ONCOTN",334,0)
 Q
"RTN","ONCOTN",335,0)
 ;
"RTN","ONCOTN",336,0)
CLEANUP ;Cleanup
"RTN","ONCOTN",337,0)
 K AG,D0,D1,DA,ONCOED,SG,ST,STGIND,X,Y
"RTN","ONCOTNM")
0^20^B137993546^B136328827
"RTN","ONCOTNM",1,0)
ONCOTNM ;Hines OIFO/GWB - TNM coding ;02/22/11
"RTN","ONCOTNM",2,0)
 ;;2.11;ONCOLOGY;**1,6,15,22,25,28,30,33,35,36,41,42,43,51,52,53,54,56**;Mar 07, 1995;Build 10
"RTN","ONCOTNM",3,0)
 ;
"RTN","ONCOTNM",4,0)
 ;INPUT TRANSFORM, OUTPUT TRANSFORM and HELP for:
"RTN","ONCOTNM",5,0)
 ;CLINICAL T   (165.5,37.1)
"RTN","ONCOTNM",6,0)
 ;CLINICAL N   (165.5,37.2)
"RTN","ONCOTNM",7,0)
 ;CLINICAL M   (165.5,37.3)
"RTN","ONCOTNM",8,0)
 ;PATHOLOGIC T (165.5,85)
"RTN","ONCOTNM",9,0)
 ;PATHOLOGIC N (165.5,86)
"RTN","ONCOTNM",10,0)
 ;PATHOLOGIC M (165.5,87)
"RTN","ONCOTNM",11,0)
 ;OTHER T      (165.5,93)
"RTN","ONCOTNM",12,0)
 ;OTHER N      (165.5,98)
"RTN","ONCOTNM",13,0)
 ;OTHER M      (165.5,99)
"RTN","ONCOTNM",14,0)
 ;
"RTN","ONCOTNM",15,0)
IN ;INPUT TRANSFORM
"RTN","ONCOTNM",16,0)
 D SETVAR
"RTN","ONCOTNM",17,0)
 G EX:(ST="")!(TX="")
"RTN","ONCOTNM",18,0)
 S X=$TR(X,"abcdilmopsuvx","ABCDILMOPSUVX")
"RTN","ONCOTNM",19,0)
 I (X="X")!(X="IS")!(X="A") G IN1
"RTN","ONCOTNM",20,0)
 S XX=$E(X)
"RTN","ONCOTNM",21,0)
 S X=$S(XX?1.A:$E(X,2,$L(X)),1:X) I X="" K X G EX
"RTN","ONCOTNM",22,0)
IN1 S TRANSFRM="INPUT" D FILSC
"RTN","ONCOTNM",23,0)
 I $D(^ONCO(FIL,SC,ONCOX_ONCOED)) S ONCOX=ONCOX_ONCOED G CKIN
"RTN","ONCOTNM",24,0)
 I $D(^ONCO(FIL,SC,ONCOX_(ONCOED-1))) S ONCOX=ONCOX_(ONCOED-1) G CKIN
"RTN","ONCOTNM",25,0)
 I $D(^ONCO(FIL,SC,ONCOX_(ONCOED-2))) S ONCOX=ONCOX_(ONCOED-2)
"RTN","ONCOTNM",26,0)
CKIN D CK I 'XD0 S X=$TR(X,"abcd","ABCD") D CK
"RTN","ONCOTNM",27,0)
 I 'XD0 K X
"RTN","ONCOTNM",28,0)
 E  D
"RTN","ONCOTNM",29,0)
 .S TD=$P(^ONCO(FIL,SC,ONCOX,XD0,0),U,1)
"RTN","ONCOTNM",30,0)
 .I ONCOX["T" S T=$S(TD="CBA":"Primary tumor cannot be assessed",TD="NET":"No evidence of primary tumor",TD="CIS":"Carcinoma 'in situ'",TD="TIAS":"Tumor invades adjacent structures",TD="TIAO":"Tumor invades adjacent organs",1:TD)
"RTN","ONCOTNM",31,0)
 .I ONCOX["N" S T=$S(TD="NCA":"Regional lymph nodes cannot be assessed",TD="NRN":"No regional lymph node metastasis",TD="MET":"Metastasis in regional lymph node(s)",1:TD)
"RTN","ONCOTNM",32,0)
 .I ONCOX["M" S T=TD
"RTN","ONCOTNM",33,0)
 I ONCOED>6,STGIND="P",ONCOX["M",$G(X)'[1 K X
"RTN","ONCOTNM",34,0)
 D EX
"RTN","ONCOTNM",35,0)
 Q
"RTN","ONCOTNM",36,0)
 ;
"RTN","ONCOTNM",37,0)
CK ;Check for existence of code
"RTN","ONCOTNM",38,0)
 S XD0=$G(^ONCO(FIL,SC,ONCOX,"X",X))
"RTN","ONCOTNM",39,0)
 Q
"RTN","ONCOTNM",40,0)
 ;
"RTN","ONCOTNM",41,0)
OT ;OUTPUT TRANSFORM
"RTN","ONCOTNM",42,0)
 D SETVAR
"RTN","ONCOTNM",43,0)
 G EX:(ST="")!(TX="")
"RTN","ONCOTNM",44,0)
 D @$S(ONCOED<3:"OT12",1:"OT3456")
"RTN","ONCOTNM",45,0)
 Q
"RTN","ONCOTNM",46,0)
 ;
"RTN","ONCOTNM",47,0)
OT12 ;1st and 2nd editions
"RTN","ONCOTNM",48,0)
 S:Y'="" Y=$E(ONCOX)_Y
"RTN","ONCOTNM",49,0)
 Q
"RTN","ONCOTNM",50,0)
 ;
"RTN","ONCOTNM",51,0)
OT3456 ;3rd, 4th, 5th, 6th and 7th editions
"RTN","ONCOTNM",52,0)
 S TRANSFRM="OUTPUT" D FILSC
"RTN","ONCOTNM",53,0)
 I Y="" G EX
"RTN","ONCOTNM",54,0)
 I $D(^ONCO(FIL,SC,ONCOX_ONCOED)) S ONCOX=ONCOX_ONCOED G CKOT
"RTN","ONCOTNM",55,0)
 I $D(^ONCO(FIL,SC,ONCOX_(ONCOED-1))) S ONCOX=ONCOX_(ONCOED-1) G CKOT
"RTN","ONCOTNM",56,0)
 I $D(^ONCO(FIL,SC,ONCOX_(ONCOED-2))) S ONCOX=ONCOX_(ONCOED-2)
"RTN","ONCOTNM",57,0)
CKOT S XD0=$G(^ONCO(FIL,SC,ONCOX,"X",Y)) G EX:XD0=""
"RTN","ONCOTNM",58,0)
 S TC=^ONCO(FIL,SC,ONCOX,XD0,0),MM=""
"RTN","ONCOTNM",59,0)
 D TC
"RTN","ONCOTNM",60,0)
 I ONCOED<7 S Y=$E(ONCOX)_$P(TC,U,2)_MM_" "_TT G OTEX
"RTN","ONCOTNM",61,0)
 I (ONCOED=7)&($E(ONCOX)="M") S Y=$E(ONCOX)_Y(0)_MM G OTEX
"RTN","ONCOTNM",62,0)
 I ONCOED=7 S Y=$E(ONCOX)_Y(0)_MM
"RTN","ONCOTNM",63,0)
 ;I (ONCOED=7)&($E(ONCOX)="M") S Y=$E(ONCOX)_$P(TC,U,2)_MM G OTEX 
"RTN","ONCOTNM",64,0)
 ;I ONCOED=7 S Y=$E(ONCOX)_$P(TC,U,1)_MM
"RTN","ONCOTNM",65,0)
OTEX S YSTRING=$E(Y,2,99)
"RTN","ONCOTNM",66,0)
 S YSTRING=$TR(YSTRING,"ABCDEIMOLSUX","abcdeimolsux")
"RTN","ONCOTNM",67,0)
 S Y=$E(Y,1)_YSTRING
"RTN","ONCOTNM",68,0)
 G EX
"RTN","ONCOTNM",69,0)
 ;
"RTN","ONCOTNM",70,0)
TC I $E(ONCOX)="T" D
"RTN","ONCOTNM",71,0)
 .S TT=$S(Y="X":"Primary tumor cannot be assessed",Y=0:"No evidence of primary tumor",1:$P(TC,U))
"RTN","ONCOTNM",72,0)
 .S TT=$S(TT="TIAS":"Tumor invades adjacent structures",1:TT)
"RTN","ONCOTNM",73,0)
 .N MC,MM,MT,XXDTDX
"RTN","ONCOTNM",74,0)
 .S MT=$P($G(^ONCO(165.5,D0,2)),U,31) ;MULTIPLE TUMORS (165.5,69)
"RTN","ONCOTNM",75,0)
 .S MC=$P($G(^ONCO(165.5,D0,24)),U,16) ;MULTIPLICITY COUNTER (165.5,196)
"RTN","ONCOTNM",76,0)
 .S XXDTDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCOTNM",77,0)
 .I XXDTDX<3070000 S MM=MT
"RTN","ONCOTNM",78,0)
 .I XXDTDX>3069999 S MM=MC I (+MM=0)!(+MM=1)!(MM>87) S MM=""
"RTN","ONCOTNM",79,0)
 .I MM'="" S MM=$S(+MM>1:"m"_+MM,1:"m")
"RTN","ONCOTNM",80,0)
 E  I $E(ONCOX)="N" S TT=$S($P(TC,U,1)="NCA":"Regional lymph nodes cannot be assessed",$P(TC,U,1)="NRN":"No regional lymph node metastasis",ST=58:"NA",1:$P(TC,U)),TT=$S(TT="MET":"Metastasis in regional lymph node(s)",1:TT)
"RTN","ONCOTNM",81,0)
 E  I $E(ONCOX)="M" S TT=$P(TC,U) Q
"RTN","ONCOTNM",82,0)
 Q
"RTN","ONCOTNM",83,0)
 ;
"RTN","ONCOTNM",84,0)
HP ;HELP
"RTN","ONCOTNM",85,0)
 D SETVAR
"RTN","ONCOTNM",86,0)
 G EX:(ST="")!(TX="")
"RTN","ONCOTNM",87,0)
 D @$S(ONCOED<3:"P12",1:"P3456")
"RTN","ONCOTNM",88,0)
 Q
"RTN","ONCOTNM",89,0)
 ;
"RTN","ONCOTNM",90,0)
P12 ;1st and 2nd edition
"RTN","ONCOTNM",91,0)
 D EN^DDIOL("Enter the appropriate TNM code.",,"!!")
"RTN","ONCOTNM",92,0)
 Q
"RTN","ONCOTNM",93,0)
 ;
"RTN","ONCOTNM",94,0)
P3456 ;3rd, 4th, 5th, 6th and 7th editions
"RTN","ONCOTNM",95,0)
 S TRANSFRM="HELP" D FILSC
"RTN","ONCOTNM",96,0)
 I $D(^ONCO(FIL,SC,ONCOX_ONCOED)) S ONCOX=ONCOX_ONCOED
"RTN","ONCOTNM",97,0)
 ;
"RTN","ONCOTNM",98,0)
 ;Full text help from AJCC STAGING GROUPS (164.33)
"RTN","ONCOTNM",99,0)
 N S,SUB
"RTN","ONCOTNM",100,0)
 S S=SC
"RTN","ONCOTNM",101,0)
 I ONCOED>6,FIL=164.33,(S=31)!(S=25)!(S=39)!(S=41)!(S=50)!(S=51)!(S=55)!(S=56)!(S=57)!(S=58)!(S=59)!(S=60)!(S=61)!(S=62)!(S=63)!(S=64)!(S=66) S SUB=$S($E(ONCOX,1)="T":7,$E(ONCOX,1)="N":8,1:9) I $D(^ONCO(164.33,S,SUB)) D  D EN^DDIOL(" ") Q
"RTN","ONCOTNM",102,0)
 .S HIEN=0 F  S HIEN=$O(^ONCO(164.33,SC,SUB,HIEN)) Q:HIEN'>0  D
"RTN","ONCOTNM",103,0)
 ..I STGIND="P",ONCOX["M",(^ONCO(164.33,SC,SUB,HIEN,0)'["M1")&(^ONCO(164.33,SC,SUB,HIEN,0)'="Distant Metastasis (M)")&(^ONCO(164.33,SC,SUB,HIEN,0)'="")&(^ONCO(164.33,SC,SUB,HIEN,0)'=" ") Q
"RTN","ONCOTNM",104,0)
 ..D EN^DDIOL(^ONCO(164.33,SC,SUB,HIEN,0),,"!?1")
"RTN","ONCOTNM",105,0)
 ;
"RTN","ONCOTNM",106,0)
 I ONCOED>5,FIL=164.33,(SC=22)!(SC=23)!(SC=25)!(SC=29)!(SC=30)!(SC=35)!(SC=39)!(SC=41)!(SC=50)!(SC=51)!(SC=55)!(SC=61)!(SC=62)!(SC=63) S SUB=$S($E(ONCOX,1)="T":4,$E(ONCOX,1)="N":5,1:6) I $D(^ONCO(164.33,SC,SUB)) D  D EN^DDIOL(" ") K SUB Q
"RTN","ONCOTNM",107,0)
 .S HIEN=0 F  S HIEN=$O(^ONCO(164.33,SC,SUB,HIEN)) Q:HIEN'>0  D
"RTN","ONCOTNM",108,0)
 ..I ONCOED>6,STGIND="P",ONCOX["M",(^ONCO(164.33,SC,SUB,HIEN,0)'["M1")&(^ONCO(164.33,SC,SUB,HIEN,0)'="Distant Metastasis (M)")&(^ONCO(164.33,SC,SUB,HIEN,0)'="") Q
"RTN","ONCOTNM",109,0)
 ..D EN^DDIOL(^ONCO(164.33,SC,SUB,HIEN,0),,"!?1")
"RTN","ONCOTNM",110,0)
 ;
"RTN","ONCOTNM",111,0)
 I ONCOED>4,ONCOED<7,FIL=164.33,(SC=22)!(SC=23)!(SC=25)!(SC=29)!(SC=30)!(SC=35)!(SC=39)!(SC=41)!(SC=50)!(SC=51) S SUB=$S($E(ONCOX,1)="T":1,$E(ONCOX,1)="N":2,1:3) I $D(^ONCO(164.33,SC,SUB)) D  D EN^DDIOL(" ") K SUB Q
"RTN","ONCOTNM",112,0)
 .S HIEN=0 F  S HIEN=$O(^ONCO(164.33,SC,SUB,HIEN)) Q:HIEN'>0  D EN^DDIOL(^ONCO(164.33,SC,SUB,HIEN,0),,"!?1")
"RTN","ONCOTNM",113,0)
 ;
"RTN","ONCOTNM",114,0)
 ;Full text help from ICDO TOPOGRAPHY (164)
"RTN","ONCOTNM",115,0)
 I ONCOED>6 S SUB=$S($E(ONCOX,1)="T":11,$E(ONCOX,1)="N":12,1:13) I $D(^ONCO(164,SC,SUB)) D  D EN^DDIOL(" ") K SUB Q
"RTN","ONCOTNM",116,0)
 .S HIEN=0 F  S HIEN=$O(^ONCO(164,SC,SUB,HIEN)) Q:HIEN'>0  D
"RTN","ONCOTNM",117,0)
 ..I ONCOED>6,STGIND="P",SUB=13,(^ONCO(164,SC,SUB,HIEN,0)["M0")!(^ONCO(164,SC,SUB,HIEN,0)["MX") D  Q
"RTN","ONCOTNM",118,0)
 ...I SC=67500 S HIEN=HIEN+5 Q
"RTN","ONCOTNM",119,0)
 ..D EN^DDIOL(^ONCO(164,SC,SUB,HIEN,0),,"!?1")
"RTN","ONCOTNM",120,0)
 ;
"RTN","ONCOTNM",121,0)
 I ONCOED>5 S SUB=$S($E(ONCOX,1)="T":8,$E(ONCOX,1)="N":9,1:10) I $D(^ONCO(164,SC,SUB)) D  D EN^DDIOL(" ") K SUB Q
"RTN","ONCOTNM",122,0)
 .S HIEN=0 F  S HIEN=$O(^ONCO(164,SC,SUB,HIEN)) Q:HIEN'>0  D EN^DDIOL(^ONCO(164,SC,SUB,HIEN,0),,"!?1")
"RTN","ONCOTNM",123,0)
 ;
"RTN","ONCOTNM",124,0)
 I ONCOED>4 S SUB=$S($E(ONCOX,1)="T":5,$E(ONCOX,1)="N":6,1:7) I $D(^ONCO(164,SC,SUB)) D  D EN^DDIOL(" ") K SUB Q
"RTN","ONCOTNM",125,0)
 .S HIEN=0 F  S HIEN=$O(^ONCO(164,SC,SUB,HIEN)) Q:HIEN'>0  D EN^DDIOL(^ONCO(164,SC,SUB,HIEN,0),,"!?1")
"RTN","ONCOTNM",126,0)
 ;
"RTN","ONCOTNM",127,0)
 S XD0=0
"RTN","ONCOTNM",128,0)
 D EN^DDIOL($S(ONCOX["T":" Primary Tumor (T)",ONCOX["N":" Regional Lymph Nodes (N)",ONCOX["M":" Distant Metastasis (M)",1:""))
"RTN","ONCOTNM",129,0)
 D EN^DDIOL(" ")
"RTN","ONCOTNM",130,0)
 F  S XD0=$O(^ONCO(FIL,SC,ONCOX,XD0)) Q:XD0'>0  D
"RTN","ONCOTNM",131,0)
 .N Y,T
"RTN","ONCOTNM",132,0)
 .S Y=^(XD0,0),T=$P(Y,U)
"RTN","ONCOTNM",133,0)
 .I ONCOX["T" D
"RTN","ONCOTNM",134,0)
 ..I $P(Y,U,2)'=88 D EN^DDIOL("T"_$P(Y,U,2),,"!?1")
"RTN","ONCOTNM",135,0)
 ..D EN^DDIOL($S(T="CBA":"Primary tumor cannot be assessed",T="NET":"No evidence of primary tumor",T="CIS":"Carcinoma 'in situ'",T="TIAS":"Tumor invades adjacent structures",T="TIAO":"Tumor invades adjacent organs",1:T),,"?12")
"RTN","ONCOTNM",136,0)
 .E  I ONCOX["N" I $P(Y,U,2)'=88 D EN^DDIOL("N"_$P(Y,U,2),,"!?1") D EN^DDIOL($S(T="NCA":"Regional lymph nodes cannot be assessed",T="NRN":"No regional lymph node metastasis",T="MET":"Regional lymph nodes metastasis",1:T),,"?13")
"RTN","ONCOTNM",137,0)
 .E  I ONCOX["M" D
"RTN","ONCOTNM",138,0)
 ..I ONCOED>6,STGIND="P",($P(Y,U,2)="X")!($P(Y,U,2)=0) Q
"RTN","ONCOTNM",139,0)
 ..I $P(Y,U,2)'=88 D EN^DDIOL("M"_$P(Y,U,2),,"!?1") D EN^DDIOL(T,,"?6")
"RTN","ONCOTNM",140,0)
 D EN^DDIOL(" ") Q
"RTN","ONCOTNM",141,0)
 ;
"RTN","ONCOTNM",142,0)
SETVAR ;Set variables
"RTN","ONCOTNM",143,0)
 S ST=$P(^ONCO(165.5,D0,0),U,1)              ;SITE/GP
"RTN","ONCOTNM",144,0)
 S TX=$P($G(^ONCO(165.5,D0,2)),U,1)          ;PRIMARY SITE
"RTN","ONCOTNM",145,0)
 Q:TX=""
"RTN","ONCOTNM",146,0)
 S HT=$$HIST^ONCFUNC(D0)                     ;Histology
"RTN","ONCOTNM",147,0)
 S HT14=$E(HT,1,4)
"RTN","ONCOTNM",148,0)
 S SC=$P(^ONCO(164,TX,0),U,11)               ;T & N CODES
"RTN","ONCOTNM",149,0)
 S DATEDX=$P(^ONCO(165.5,D0,0),U,16)         ;DATE DX
"RTN","ONCOTNM",150,0)
 S YR=$E($P($G(^ONCO(165.5,D0,0)),U,16),1,3) ;DATE DX (Year)
"RTN","ONCOTNM",151,0)
 S ONCOED=$S(YR<283:1,YR<288:2,YR<292:3,YR<298:4,YR<303:5,YR<310:6,1:7)
"RTN","ONCOTNM",152,0)
 S SD=$P($G(^ONCO(165.5,D0,"CS3")),U,1)      ;SCHEMA DISCRIMINATOR
"RTN","ONCOTNM",153,0)
 S FIL=164
"RTN","ONCOTNM",154,0)
 Q
"RTN","ONCOTNM",155,0)
 ;
"RTN","ONCOTNM",156,0)
FILSC ;Get file (FIL) and IEN (SC) for appropriate TNM list
"RTN","ONCOTNM",157,0)
 ;
"RTN","ONCOTNM",158,0)
 ;PART II: HEAD AND NECK
"RTN","ONCOTNM",159,0)
 ;Mucosal Melanoma of the Head and Neck
"RTN","ONCOTNM",160,0)
 N TC
"RTN","ONCOTNM",161,0)
 S TC=$E(TX,3,4)
"RTN","ONCOTNM",162,0)
 I ONCOED>6,(HT>87199)&(HT<87910),((TC="00")!(TC="01")!(TC="02")!(TC="03")!(TC="04")!(TC="05")!(TC="06")!(TC="09")!(TC=10)!(TC=11)!(TC=12)!(TC=13)!(TC=32)!(TX=67300)!(TX=67310)!(TX=67311)!(TX=67140)!(TX=67142)!(TX=67148)) S FIL=164.33,SC=61 Q
"RTN","ONCOTNM",163,0)
 ;
"RTN","ONCOTNM",164,0)
 ;PART III: DIGESTIVE SYSTEM
"RTN","ONCOTNM",165,0)
 ;Esophagus and Esophagastric Junction
"RTN","ONCOTNM",166,0)
 I ONCOED>4,ONCOED<7,TX=67151,ONCOX="M" S FIL=164,SC=67154 Q
"RTN","ONCOTNM",167,0)
 I ONCOED>4,ONCOED<7,TX=67152,ONCOX="M" S FIL=164,SC=67155 Q
"RTN","ONCOTNM",168,0)
 I ONCOED>4,ONCOED<7,TX=67153,ONCOX="M" S FIL=164,SC=67153 Q
"RTN","ONCOTNM",169,0)
 I ONCOED>4,ONCOED<7,TX=67154,ONCOX="M" S FIL=164,SC=67154 Q
"RTN","ONCOTNM",170,0)
 I ONCOED>4,ONCOED<7,TX=67155,ONCOX="M" S FIL=164,SC=67155 Q
"RTN","ONCOTNM",171,0)
 I ONCOED>6,(TX=67161)!(TX=67162),(SD="010")!(SD="020")!(SD="040")!(SD="060") S FIL=164,SC=67150 Q
"RTN","ONCOTNM",172,0)
 I ONCOED>6,TX=67160,((HT14>7999)&(HT14<8153)!(HT14>8153)&(HT14<8232)!(HT14>8242)&(HT14<8246)!(HT14>8249)&(HT14<8577)!(HT14>8939)&(HT14<8951)!(HT14>8979)&(HT14<8982)) S FIL=164,SC=67150 Q
"RTN","ONCOTNM",173,0)
 ;
"RTN","ONCOTNM",174,0)
 ;Appendix, 7th Edition
"RTN","ONCOTNM",175,0)
 I ONCOED>6,TX=67181 D  Q
"RTN","ONCOTNM",176,0)
 .I (HT14=8153)!(HT14=8240)!(HT14=8241)!(HT14=8242)!(HT14=8246)!(HT14=8249) S FIL=164.33,SC=62 Q
"RTN","ONCOTNM",177,0)
 .S FIL=164,SC=67181
"RTN","ONCOTNM",178,0)
 ;
"RTN","ONCOTNM",179,0)
 ;Gastrointestinal Stromal Tumor (GIST), 7th Edition
"RTN","ONCOTNM",180,0)
 I ($E(HT,1,4)=8935)!($E(HT,1,4)=8936),(($E(TX,3,4)=15)!($E(TX,3,4)=16)!($E(TX,3,4)=17)!($E(TX,3,4)=18)!($E(TX,3,4)=21)!($E(TX,3,4)=48)!(TX=67199)!(TX=67209)),ONCOED>6 S FIL=164.33,SC=56 Q
"RTN","ONCOTNM",181,0)
 ;
"RTN","ONCOTNM",182,0)
 ;Neuroendocrine Tumor (Stomach), 7th Edition
"RTN","ONCOTNM",183,0)
 I (($E(HT,1,4)=8153)!($E(HT,1,4)=8240)!($E(HT,1,4)=8241)!($E(HT,1,4)=8242)!($E(HT,1,4)=8246)!($E(HT,1,4)=8249)),$E(TX,3,4)=16,ONCOED>6 S FIL=164.33,SC=57 Q
"RTN","ONCOTNM",184,0)
 ;
"RTN","ONCOTNM",185,0)
 ;Neuroendocrine Tumor (Duodenum/Ampulla/Jejunum/Ileum), 7th Edition
"RTN","ONCOTNM",186,0)
 I (($E(HT,1,4)=8153)!($E(HT,1,4)=8240)!($E(HT,1,4)=8241)!($E(HT,1,4)=8242)!($E(HT,1,4)=8246)!($E(HT,1,4)=8249)),(($E(TX,3,4)=17)!(TX=67241)),ONCOED>6 S FIL=164.33,SC=58 Q
"RTN","ONCOTNM",187,0)
 ;
"RTN","ONCOTNM",188,0)
 ;Neuroendocrine Tumor (Colon or Rectum), 7th Edition
"RTN","ONCOTNM",189,0)
 I $$MELANOMA^ONCOU55(D0),(($E(TX,3,4)=44)!($E(TX,3,4)=51)!($E(TX,3,4)=60)!(TX=67632)) S FIL=164.33,SC=22 Q
"RTN","ONCOTNM",190,0)
 I (($E(HT,1,4)=8153)!($E(HT,1,4)=8240)!($E(HT,1,4)=8241)!($E(HT,1,4)=8242)!($E(HT,1,4)=8246)!($E(HT,1,4)=8249)),(($E(TX,3,4)=18)!(TX=67199)!(TX=67209)),ONCOED>6 S FIL=164.33,SC=59 Q
"RTN","ONCOTNM",191,0)
 ;
"RTN","ONCOTNM",192,0)
 ;Intrahepatic Bile Ducts
"RTN","ONCOTNM",193,0)
 I ONCOED>6,TX=67221 S FIL=164,SC=67221 Q
"RTN","ONCOTNM",194,0)
 ;
"RTN","ONCOTNM",195,0)
 ;Gallbladder
"RTN","ONCOTNM",196,0)
 I ONCOED>6,TX=67240,SD="030" S FIL=164,SC=67239 Q
"RTN","ONCOTNM",197,0)
 ;
"RTN","ONCOTNM",198,0)
 ;Extraheptic Bile Ducts
"RTN","ONCOTNM",199,0)
 I ((TX=67240)!(TX=67248)!(67249)),ONCOED=3,ONCOX="N" S FIL=164.33,SC=15 Q
"RTN","ONCOTNM",200,0)
 ;
"RTN","ONCOTNM",201,0)
 ;Perihilar Bile Duct
"RTN","ONCOTNM",202,0)
 ;I ONCOED>6,TX=67240,(SD="040")!(SD="070") S FIL=164.33,SC=63 Q
"RTN","ONCOTNM",203,0)
 ;
"RTN","ONCOTNM",204,0)
 ;Distal Bile Duct
"RTN","ONCOTNM",205,0)
 I ONCOED>6,TX=67240,(SD="040")!(SD="070") S FIL=164.33,SC=63 Q
"RTN","ONCOTNM",206,0)
 ;
"RTN","ONCOTNM",207,0)
 ;PART VI: SKIN
"RTN","ONCOTNM",208,0)
 ;Merkel Cell Carcinoma
"RTN","ONCOTNM",209,0)
 I ONCOED>6,$E(HT,1,4)=8247,((TX=67440)!(TX=67442)!(TX=67443)!(TX=67444)!(TX=67445)!(TX=67446)!(TX=67447)!(TX=67448)!(TX=67449)!($E(TX,3,4)=51)!($E(TX,3,4)=60)!(TX=67632)) S FIL=164.33,SC=60 Q
"RTN","ONCOTNM",210,0)
 ;
"RTN","ONCOTNM",211,0)
 ;Melanoma of the Skin
"RTN","ONCOTNM",212,0)
 I $$MELANOMA^ONCOU55(D0),(($E(TX,3,4)=44)!($E(TX,3,4)=51)!($E(TX,3,4)=60)!(TX=67632)) S FIL=164.33,SC=22 Q
"RTN","ONCOTNM",213,0)
 ;
"RTN","ONCOTNM",214,0)
 ;PART VII: BREAST
"RTN","ONCOTNM",215,0)
 ;Breast
"RTN","ONCOTNM",216,0)
 I $E(TX,1,4)=6750,ONCOX="N" D  Q
"RTN","ONCOTNM",217,0)
 .I STGIND="C" Q
"RTN","ONCOTNM",218,0)
 .I STGIND="P" S FIL=164.33,SC=23
"RTN","ONCOTNM",219,0)
 ;
"RTN","ONCOTNM",220,0)
 ;PART VIII: GYNECOLOGIC SITES
"RTN","ONCOTNM",221,0)
 ;Vulva
"RTN","ONCOTNM",222,0)
 I ONCOED>4,$E(TX,3,4)=51,ONCOX="M" S FIL=164,SC=67518 Q
"RTN","ONCOTNM",223,0)
 ;
"RTN","ONCOTNM",224,0)
 ;Vagina - 3rd and 4th editions
"RTN","ONCOTNM",225,0)
 I TX=67529,ONCOX="N",ONCOED<5 D  Q
"RTN","ONCOTNM",226,0)
 .S ONCUL=$P($G(^ONCO(165.5,D0,24)),U,4)
"RTN","ONCOTNM",227,0)
 .I ONCUL="U" Q
"RTN","ONCOTNM",228,0)
 .I ONCUL="L" S FIL=164.33,SC=52 Q
"RTN","ONCOTNM",229,0)
 ;
"RTN","ONCOTNM",230,0)
 ;Corpus Uteri - 7th edition
"RTN","ONCOTNM",231,0)
 I ONCOED>6,($E(TX,3,4)=54)!($E(TX,3,4)=55) D
"RTN","ONCOTNM",232,0)
 .I (HT14>7999)&(HT14<8791) S FIL=164,SC=67540 Q
"RTN","ONCOTNM",233,0)
 .I (HT14>8979)&(HT14<8982) S FIL=164,SC=67540 Q
"RTN","ONCOTNM",234,0)
 .I (HT14>9699)&(HT14<9702) S FIL=164,SC=67540 Q
"RTN","ONCOTNM",235,0)
 .I (HT14>8889)&(HT14<8899) S FIL=164.33,SC=25 Q
"RTN","ONCOTNM",236,0)
 .I (HT14>8929)&(HT14<8932) S FIL=164.33,SC=25 Q
"RTN","ONCOTNM",237,0)
 .I HT14=8933 S FIL=164.33,SC=64 Q
"RTN","ONCOTNM",238,0)
 ;
"RTN","ONCOTNM",239,0)
 ;Ovary and Primary Peritoneal Carcinoma - 7th edition
"RTN","ONCOTNM",240,0)
 I ONCOED>6,(TX=67481)!(TX=67482)!(TX=67488) D
"RTN","ONCOTNM",241,0)
 .I (HT14>7999)&(HT14<8577) S FIL=164,SC=67569 Q
"RTN","ONCOTNM",242,0)
 .I (HT14>8929)&(HT14<9111) S FIL=164,SC=67569 Q
"RTN","ONCOTNM",243,0)
 ;
"RTN","ONCOTNM",244,0)
 ;Gestational Trophoblastic Tumors - 5th, 6th and 7th editions
"RTN","ONCOTNM",245,0)
 ;I ONCOED>4,TX=67589,ONCOX="M" S FIL=164,SC=67540 Q
"RTN","ONCOTNM",246,0)
 I $$GTT^ONCOU55(D0),ONCOED>4,ONCOX="M" S FIL=164,SC=67589 Q
"RTN","ONCOTNM",247,0)
 ;I ONCOED=5,(($E(TX,3,4)=54)!($E(TX,3,4)=55)) S ONCOED=4
"RTN","ONCOTNM",248,0)
 ;
"RTN","ONCOTNM",249,0)
 ;PART IX: GENITOURINARY SITES
"RTN","ONCOTNM",250,0)
 ;Penis
"RTN","ONCOTNM",251,0)
 I $E(TX,3,4)=60,ONCOED>6,ONCOX="N",STGIND="C" S FIL=164.33,SC=31 Q
"RTN","ONCOTNM",252,0)
 I $E(TX,3,4)=60,ONCOED>6,ONCOX="N",STGIND="P" S FIL=164,SC=67600 Q
"RTN","ONCOTNM",253,0)
 ;
"RTN","ONCOTNM",254,0)
 ;Prostate
"RTN","ONCOTNM",255,0)
 I TX=67619,ONCOED>4,ONCOX="T",STGIND="P" S FIL=164.33,SC=29 Q
"RTN","ONCOTNM",256,0)
 I TX=67619,ONCOED=6,ONCOX="N",STGIND="P" S FIL=164.33,SC=29 Q
"RTN","ONCOTNM",257,0)
 I TX=67619,ONCOX="M" S FIL=164.33,SC=$S(ONCOED>3:29,1:3) Q
"RTN","ONCOTNM",258,0)
 ;
"RTN","ONCOTNM",259,0)
 ;Testis - 5th and 6th editions
"RTN","ONCOTNM",260,0)
 I $E(TX,3,4)=62,ONCOED>4,ONCOX="N",STGIND="P" S FIL=164.33,SC=30 Q
"RTN","ONCOTNM",261,0)
 I $E(TX,3,4)=62,ONCOED>4,ONCOX="M" S FIL=164,SC=67620 Q
"RTN","ONCOTNM",262,0)
 ;
"RTN","ONCOTNM",263,0)
 ;Urethra - Urothelial (Transitional Cell) Carcinoma of the Prostate
"RTN","ONCOTNM",264,0)
 I ONCOED>4,TX=67619,(HT=81203)!(HT=81303)!(HT=81223)!(HT=81202) D  Q
"RTN","ONCOTNM",265,0)
 .I ONCOX="T" S FIL=164.33,SC=35
"RTN","ONCOTNM",266,0)
 .I ONCOX="N" S FIL=164,SC=67680
"RTN","ONCOTNM",267,0)
 .I ONCOX="M" S FIL=164.33,SC=3
"RTN","ONCOTNM",268,0)
 ;
"RTN","ONCOTNM",269,0)
 ;PART X: OPHTHALMIC SITES
"RTN","ONCOTNM",270,0)
 ;Malignant Melanoma of the Eyelid -3rd and 4th editions
"RTN","ONCOTNM",271,0)
 I TX=67441,ONCOED<5,$$MELANOMA^ONCOU55(D0) S FIL=164.33,SC=37 Q
"RTN","ONCOTNM",272,0)
 ;
"RTN","ONCOTNM",273,0)
 ;Malignant Melanoma of the Conjunctiva
"RTN","ONCOTNM",274,0)
 I $$MELANOMA^ONCOU55(D0),TX=67690 S FIL=164.33,SC=$S(STGIND="P":50,1:39) Q
"RTN","ONCOTNM",275,0)
 ;
"RTN","ONCOTNM",276,0)
 ;Malignant Melanoma of the Uvea
"RTN","ONCOTNM",277,0)
 I TX=67693 S FIL=164.33,SC=51 Q
"RTN","ONCOTNM",278,0)
 I TX=67694,($P($G(^ONCO(165.5,D0,2)),U,22)="C")!($P($G(^ONCO(165.5,D0,"CS3")),U,1)="010") S FIL=164.33,SC=51 Q
"RTN","ONCOTNM",279,0)
 ;
"RTN","ONCOTNM",280,0)
 ;Retinoblastoma
"RTN","ONCOTNM",281,0)
 I TX=67692,STGIND="P" S FIL=164.33,SC=41 Q
"RTN","ONCOTNM",282,0)
 ;
"RTN","ONCOTNM",283,0)
 ;Ocular Adnexal Lymphoma
"RTN","ONCOTNM",284,0)
 I ONCOED>6,(TX=67441)!(TX=67690)!(TX=67695)!(TX=67696) D
"RTN","ONCOTNM",285,0)
 .I (HT14>9589)&(HT14<9700) S FIL=164.33,SC=66 Q
"RTN","ONCOTNM",286,0)
 .I (HT14>9701)&(HT14<9739) S FIL=164.33,SC=66 Q
"RTN","ONCOTNM",287,0)
 .I (HT14>9810)&(HT14<9819) S FIL=164.33,SC=66 Q
"RTN","ONCOTNM",288,0)
 .I (HT14>9819)&(HT14<9838) S FIL=164.33,SC=66 Q
"RTN","ONCOTNM",289,0)
 ;
"RTN","ONCOTNM",290,0)
 ;PART XI: CENTRAL NERVOUS SYSTEM
"RTN","ONCOTNM",291,0)
 ;Brain - 3rd and 4th editions
"RTN","ONCOTNM",292,0)
 I ((TX=67700)!($E(TX,3,4)=71)),ONCOED<5 D
"RTN","ONCOTNM",293,0)
 .I ONCOX="T" S SC=$S($P($G(^ONCO(165.5,D0,2)),U,7)="I":67710,1:67700) Q
"RTN","ONCOTNM",294,0)
 .I TRANSFRM'="OUTPUT",ONCOX="N" D EN^DDIOL(" This category does not apply to this site.",,"?12")
"RTN","ONCOTNM",295,0)
 ;
"RTN","ONCOTNM",296,0)
 ;PART XII: LYMPHOID NEOPLASMS
"RTN","ONCOTNM",297,0)
 ;Mycosis fungoides and Sezary Disease of Skin, Vulva, Penis, Scrotum
"RTN","ONCOTNM",298,0)
 ;9700/3 and 9701/3
"RTN","ONCOTNM",299,0)
 ;C44.0-C44.9, C51.0-C51.2, C51.8-C51.9, C60.0-C60.2, C60.8-C60.9, C63.2
"RTN","ONCOTNM",300,0)
 I (HT=97003)!(HT=97013),($E(TX,3,4)=44)!($E(TX,3,4)=51)!($E(TX,3,4)=60)!(TX=67632),ONCOED>5 S FIL=164.33,SC=55 Q
"RTN","ONCOTNM",301,0)
 ;
"RTN","ONCOTNM",302,0)
 ;Bone metastasis
"RTN","ONCOTNM",303,0)
 I ONCOX="M",((HT14>8797)&(HT14<9137))!((HT14>9141)&(HT14<9583)) S FIL=164,SC=67400 Q
"RTN","ONCOTNM",304,0)
 ;
"RTN","ONCOTNM",305,0)
 I ONCOX="M",'$D(^ONCO(FIL,SC,"M"_ONCOED)) S FIL=164.33,SC=3
"RTN","ONCOTNM",306,0)
 ;
"RTN","ONCOTNM",307,0)
 Q
"RTN","ONCOTNM",308,0)
 ;
"RTN","ONCOTNM",309,0)
EX ;Exit
"RTN","ONCOTNM",310,0)
 K FIL,HIEN,HT,HT14,MM,ONCOX,ONCUL,SC,SD,ST,TC,TD,TRANSFRM,TT,TX,XD0
"RTN","ONCOTNM",311,0)
 K XX,YR,YSTRING
"RTN","ONCOTNM",312,0)
 Q
"RTN","ONCOTNM",313,0)
 ;
"RTN","ONCOTNM",314,0)
CLEANUP ;Cleanup
"RTN","ONCOTNM",315,0)
 K D0,DATEDX,ONCOED,STGIND
"RTN","ONCOU55")
0^26^B28674677^B28540990
"RTN","ONCOU55",1,0)
ONCOU55 ;Hines OIFO/GWB - Utility routine # 1 ;06/23/10
"RTN","ONCOU55",2,0)
 ;;2.11;ONCOLOGY;**6,7,15,19,22,28,35,41,43,44,51,56**;Mar 07, 1995;Build 10
"RTN","ONCOU55",3,0)
 ;
"RTN","ONCOU55",4,0)
LTS(DA,NOTTHIS) ;Sets LAST TUMOR STATUS field (165.5,95)
"RTN","ONCOU55",5,0)
 ;Called by AC cross-reference of CANCER STATUS (165.573,.02)
"RTN","ONCOU55",6,0)
 ;NOTTHIS is defined by CANCER STATUS (165.573,.02) KILL logic
"RTN","ONCOU55",7,0)
 ;If the latest CANCER STATUSis deleted, LAST TUMOR STATUS is updated
"RTN","ONCOU55",8,0)
 ;with the next most recent CANCER STATUS. 
"RTN","ONCOU55",9,0)
 N OX,DIE,DR,NTS,OTS
"RTN","ONCOU55",10,0)
 S NTS=""
"RTN","ONCOU55",11,0)
 S OX=$$TSLAST(DA,+$G(NOTTHIS))
"RTN","ONCOU55",12,0)
 S:OX NTS=$P($G(^ONCO(165.5,DA,"TS",OX,0)),U,2)
"RTN","ONCOU55",13,0)
 S OTS=$P($G(^ONCO(165.5,DA,7)),U,6)
"RTN","ONCOU55",14,0)
 S $P(^ONCO(165.5,DA,7),U,6)=NTS
"RTN","ONCOU55",15,0)
 K:$L(OTS) ^ONCO(165.5,"ACS",OTS,DA)
"RTN","ONCOU55",16,0)
 S:$L(NTS) ^ONCO(165.5,"ACS",NTS,DA)=""
"RTN","ONCOU55",17,0)
 Q
"RTN","ONCOU55",18,0)
 ;
"RTN","ONCOU55",19,0)
TSLAST(DA,NOTTHIS) ;Get last TUMOR STATUS DATE (165.573,.01)
"RTN","ONCOU55",20,0)
 N IEN
"RTN","ONCOU55",21,0)
 S IEN=$O(^ONCO(165.5,DA,"TS","AA",""))
"RTN","ONCOU55",22,0)
 I IEN,$D(NOTTHIS),$D(^ONCO(165.5,DA,"TS","AA",IEN,NOTTHIS)) S IEN=$O(^ONCO(165.5,DA,"TS","AA",IEN))
"RTN","ONCOU55",23,0)
 S:IEN IEN=$O(^ONCO(165.5,DA,"TS","AA",IEN,""))
"RTN","ONCOU55",24,0)
 Q IEN
"RTN","ONCOU55",25,0)
 ;
"RTN","ONCOU55",26,0)
SETTS(IEN,FOLDATE) ;Set TUMOR STATUS (165.5,73)
"RTN","ONCOU55",27,0)
 ;Called by FINDSET^ONCOAIS
"RTN","ONCOU55",28,0)
 N DA,DO,DIC,PREVENT,PREVTS,SUBENT,TOFR,X,Y
"RTN","ONCOU55",29,0)
 S TOFR=$$GET1^DIQ(165.5,IEN,71)
"RTN","ONCOU55",30,0)
 S PREVTS=""
"RTN","ONCOU55",31,0)
 S PREVENT=$O(^ONCO(165.5,IEN,"TS","AA",9999999-FOLDATE))
"RTN","ONCOU55",32,0)
 I PREVENT D
"RTN","ONCOU55",33,0)
 .I TOFR'="Never disease-free" D
"RTN","ONCOU55",34,0)
 ..S PREVENT=$O(^ONCO(165.5,IEN,"TS","AA",PREVENT,0))
"RTN","ONCOU55",35,0)
 ..S PREVTS=$P($G(^ONCO(165.5,IEN,"TS",PREVENT,0)),U,2)
"RTN","ONCOU55",36,0)
 K DO,DIC
"RTN","ONCOU55",37,0)
 S DA(1)=IEN,DIC="^ONCO(165.5,DA(1),""TS"","
"RTN","ONCOU55",38,0)
 S DIC(0)="L",X=FOLDATE
"RTN","ONCOU55",39,0)
 S DIC("DR")=".02////^S X=PREVTS"
"RTN","ONCOU55",40,0)
 D FILE^DICN
"RTN","ONCOU55",41,0)
 S SUBENT=+Y
"RTN","ONCOU55",42,0)
 D LTS(IEN)
"RTN","ONCOU55",43,0)
 Q SUBENT
"RTN","ONCOU55",44,0)
 ;
"RTN","ONCOU55",45,0)
TNMED(IEN) ;AJCC Cancer Staging Manual Edition
"RTN","ONCOU55",46,0)
 N CSG,PSG,TNMED,TNMMO,TOP,YR
"RTN","ONCOU55",47,0)
 S YR=$E($P($G(^ONCO(165.5,IEN,0)),U,16),1,3)
"RTN","ONCOU55",48,0)
 S TNMED=$S(YR<283:1,YR<288:2,YR<292:3,YR<298:4,YR<303:5,YR<310:6,1:7)
"RTN","ONCOU55",49,0)
 I $$LYMPHOMA^ONCFUNC(IEN) G TNMEX
"RTN","ONCOU55",50,0)
 S TNMMO=$$HIST^ONCFUNC(IEN),TNMMO=$E(TNMMO,1,4)
"RTN","ONCOU55",51,0)
 S TOP=$P($G(^ONCO(165.5,IEN,2)),U,1)
"RTN","ONCOU55",52,0)
 I YR>295!($$LEUKEMIA^ONCOAIP2(IEN)) D
"RTN","ONCOU55",53,0)
 .S CSG=$P($G(^ONCO(165.5,IEN,2)),U,20)
"RTN","ONCOU55",54,0)
 .S PSG=$P($G(^ONCO(165.5,IEN,2.1)),U,4)
"RTN","ONCOU55",55,0)
 .I (CSG=88)&(PSG=88) S TNMED=88
"RTN","ONCOU55",56,0)
 I TNMED=5 D
"RTN","ONCOU55",57,0)
 .I (TNMMO>9730)&(TNMMO<9990) S TNMED=88 Q
"RTN","ONCOU55",58,0)
 .I TNMMO=9140 S TNMED=88 Q
"RTN","ONCOU55",59,0)
 .I (TOP=67173)!(TOP=67254)!(TOP=67260)!(TOP=67268)!(TOP=67269)!(TOP=67300)!(TOP=67301)!(TOP=67312)!(TOP=67313)!(TOP=67318)!(TOP=67319)!(TOP=67339)!(TOP=67379)!(TOP=67390)!(TOP=67398)!(TOP=67399)!(TOP=67420)!(TOP=67421) S TNMED=88 Q
"RTN","ONCOU55",60,0)
 .I (TOP=67422)!(TOP=67423)!(TOP=67424)!(TOP=67571)!(TOP=67572)!(TOP=67573)!(TOP=67574)!(TOP=67577)!(TOP=67578)!(TOP=67579)!(TOP=67630)!(TOP=67631)!(TOP=67637)!(TOP=67638)!(TOP=67639)!(TOP=67691)!(TOP=67699)!(TOP=67700) S TNMED=88 Q
"RTN","ONCOU55",61,0)
 .I (TOP=67701)!(TOP=67709)!(TOP=67710)!(TOP=67711)!(TOP=67712)!(TOP=67713)!(TOP=67714)!(TOP=67715)!(TOP=67716)!(TOP=67717)!(TOP=67718)!(TOP=67719)!(TOP=67720)!(TOP=67721)!(TOP=67722)!(TOP=67723)!(TOP=67724)!(TOP=67725) S TNMED=88 Q
"RTN","ONCOU55",62,0)
 .I (TOP=67728)!(TOP=67729)!(TOP=67750)!(TOP=67751)!(TOP=67752)!(TOP=67753)!(TOP=67754)!(TOP=67755)!(TOP=67758)!(TOP=67759)!(TOP=67760)!(TOP=67761)!(TOP=67762)!(TOP=67763)!(TOP=67764) S TNMED=88 Q
"RTN","ONCOU55",63,0)
 .I (TOP=67765)!(TOP=67767)!(TOP=67768)!(TOP=67809) S TNMED=88 Q
"RTN","ONCOU55",64,0)
 I TNMED>5 D
"RTN","ONCOU55",65,0)
 .I TNMED<7,(TOP=67740)!(TOP=67741)!(TOP=67749) S TNMED=88 Q
"RTN","ONCOU55",66,0)
 .I (TNMMO>9730)&(TNMMO<9990) S TNMED=88 Q
"RTN","ONCOU55",67,0)
 .I TNMMO=9140 S TNMED=88 Q
"RTN","ONCOU55",68,0)
 .I (TOP=67173)!(TOP=67254)!(TOP=67260)!(TOP=67268)!(TOP=67269)!(TOP=67301)!(TOP=67312)!(TOP=67313)!(TOP=67318)!(TOP=67319)!(TOP=67339)!(TOP=67379)!(TOP=67390) S TNMED=88 Q
"RTN","ONCOU55",69,0)
 .I (TOP=67398)!(TOP=67399)!(TOP=67420)!(TOP=67421)!(TOP=67422)!(TOP=67423)!(TOP=67424)!(TOP=67571)!(TOP=67572)!(TOP=67573)!(TOP=67574)!(TOP=67577)!(TOP=67578)!(TOP=67579) S TNMED=88 Q
"RTN","ONCOU55",70,0)
 .I (TOP=67630)!(TOP=67631)!(TOP=67637)!(TOP=67638)!(TOP=67639)!(TOP=67681)!(TOP=67688)!(TOP=67689)!(TOP=67691)!(TOP=67699)!(TOP=67701)!(TOP=67709)!(TOP=67710) S TNMED=88 Q
"RTN","ONCOU55",71,0)
 .I (TOP=67750)!(TOP=67754)!(TOP=67755)!(TOP=67758)!(TOP=67759)!(TOP=67760)!(TOP=67761)!(TOP=67762)!(TOP=67763)!(TOP=67764)!(TOP=67765)!(TOP=67767)!(TOP=67768)!(TOP=67809) S TNMED=88 Q
"RTN","ONCOU55",72,0)
TNMEX Q TNMED
"RTN","ONCOU55",73,0)
 ;
"RTN","ONCOU55",74,0)
MELANOMA(IEN) ;Melanoma
"RTN","ONCOU55",75,0)
 N XX
"RTN","ONCOU55",76,0)
 S XX=$$HIST^ONCFUNC(IEN)
"RTN","ONCOU55",77,0)
 Q (XX'<87200)&(XX<87910)
"RTN","ONCOU55",78,0)
 ;
"RTN","ONCOU55",79,0)
GTT(D0) ;Gestational Trophoblastic Tumors - 5th, 6th and 7th editions
"RTN","ONCOU55",80,0)
 ;
"RTN","ONCOU55",81,0)
 N HIST,HIST14,TNMED,TOP
"RTN","ONCOU55",82,0)
 S TNMED=$$TNMED^ONCOU55(D0)
"RTN","ONCOU55",83,0)
 S TOP=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOU55",84,0)
 S HIST=$$HIST^ONCFUNC(D0)
"RTN","ONCOU55",85,0)
 S HIST14=$E(HIST,1,4)
"RTN","ONCOU55",86,0)
 Q (TNMED>4)&(TOP=67589)&((HIST14>9099)&(HIST14<9106))
"RTN","ONCOU55",87,0)
 ;
"RTN","ONCOU55",88,0)
T(D0) ;Testis - 5th, 6th and 7th editions
"RTN","ONCOU55",89,0)
 N TNMED,TOP
"RTN","ONCOU55",90,0)
 S TNMED=$$TNMED^ONCOU55(D0)
"RTN","ONCOU55",91,0)
 S TOP=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOU55",92,0)
 Q (TNMED>4)&((TOP=67620)!(TOP=67621)!(TOP=67629))
"RTN","ONCOU55",93,0)
 ;
"RTN","ONCOU55",94,0)
EDITION(IEN) ;SEER Extent of Disease Edition
"RTN","ONCOU55",95,0)
 Q $S($$DATEDX(IEN)>2980000:3,$$DATEDX(IEN)>2920000:2,1:1)
"RTN","ONCOU55",96,0)
 ;
"RTN","ONCOU55",97,0)
DATEDX(IEN) ;DATE DX (165.5,3)
"RTN","ONCOU55",98,0)
 Q $P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCOU55",99,0)
 ;
"RTN","ONCOU55",100,0)
MYCOSIS(IEN) ;MYCOSIS FUNGOIDES
"RTN","ONCOU55",101,0)
 N XX
"RTN","ONCOU55",102,0)
 S XX=$$HIST^ONCFUNC(IEN)
"RTN","ONCOU55",103,0)
 Q ((XX=97002)!(XX=97003))
"RTN","ONCOU55",104,0)
 ;
"RTN","ONCOU55",105,0)
NOSTAGE(IEN) ;AUTOMATIC STAGING OVERRIDDEN (165.5,37.9)
"RTN","ONCOU55",106,0)
 Q $P($G(^ONCO(165.5,D0,24)),U)
"RTN","ONCOU55",107,0)
 ;
"RTN","ONCOU55",108,0)
TMARKER ;TUMOR MARKER 1 (165.5,25.1)
"RTN","ONCOU55",109,0)
 ;TUMOR MARKER 2 (165.5,25.2)
"RTN","ONCOU55",110,0)
 ;TUMOR MARKER 3 (165.5,25.3)
"RTN","ONCOU55",111,0)
 N TOP
"RTN","ONCOU55",112,0)
 S (TM1,TM2,TM3)=0
"RTN","ONCOU55",113,0)
 S TOP=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOU55",114,0)
 I TOP'="" S TOP=$P($G(^ONCO(164,TOP,0)),U,2)
"RTN","ONCOU55",115,0)
 I $E(TOP,2,3)=50 S (TM1,TM2)=1 Q
"RTN","ONCOU55",116,0)
 I $E(TOP,2,3)=18 S TM1=1 Q
"RTN","ONCOU55",117,0)
 I $E(TOP,2,3)=19 S TM1=1 Q
"RTN","ONCOU55",118,0)
 I $E(TOP,2,3)=20 S TM1=1 Q
"RTN","ONCOU55",119,0)
 I $E(TOP,2,3)=22 S TM1=1 Q
"RTN","ONCOU55",120,0)
 I $E(TOP,2,3)=56 S TM1=1 Q
"RTN","ONCOU55",121,0)
 I $E(TOP,2,3)=61 S (TM1,TM2)=1 Q
"RTN","ONCOU55",122,0)
 I $E(TOP,2,3)=62 S (TM1,TM2,TM3)=1 Q
"RTN","ONCOU55",123,0)
 I $$HIST^ONCFUNC(D0)=95003 S TM1=1 Q
"RTN","ONCOU55",124,0)
 Q
"RTN","ONCOU55",125,0)
 ;
"RTN","ONCOU55",126,0)
CLEANUP ;Cleanup
"RTN","ONCOU55",127,0)
 K TM1,TM2,TM3
"RTN","ONCPCI")
0^19^B24563873^B23887389
"RTN","ONCPCI",1,0)
ONCPCI ;Hines OIFO/GWB - Patient Identification/Cancer Identification screen display ;09/22/11
"RTN","ONCPCI",2,0)
 ;;2.11;ONCOLOGY;**15,19,24,26,27,28,33,35,36,42,43,44,45,46,47,49,51,53,54,56**;Mar 07, 1995;Build 10
"RTN","ONCPCI",3,0)
 ;
"RTN","ONCPCI",4,0)
PI ;Patient Identification
"RTN","ONCPCI",5,0)
 K DASH S $P(DASH,"-",80)="-"
"RTN","ONCPCI",6,0)
 N DI,DIC,DR,DA,DIQ,ONC,TM1,TM2,TM3,DOTS1,DOTS2,DOTS3
"RTN","ONCPCI",7,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPCI",8,0)
 S DR=".03;1.2;2;2.1;2.2;2.3;2.4;8;8.1;8.2;9;10;11;16;18;147"
"RTN","ONCPCI",9,0)
 S DA=D0,DIQ="ONC" D EN^DIQ1
"RTN","ONCPCI",10,0)
 F I=.03,1.2,2,2.1,2.2,2.3,2.4,8,8.1,8.2,9,10,11,16,18 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPCI",11,0)
 W !," Reporting Facility...........: ",ONC(165.5,D0,.03)
"RTN","ONCPCI",12,0)
 W !," Marital Status at Dx.........: ",ONC(165.5,D0,11)
"RTN","ONCPCI",13,0)
 W !," Patient Address at Dx........: ",ONC(165.5,D0,8)
"RTN","ONCPCI",14,0)
 W !," Patient Address at Dx - Supp.: ",ONC(165.5,D0,8.2)
"RTN","ONCPCI",15,0)
 W !," City/town at Dx..............: ",ONC(165.5,D0,8.1)
"RTN","ONCPCI",16,0)
 W !," State at Dx..................: ",ONC(165.5,D0,16)
"RTN","ONCPCI",17,0)
 W !," Postal Code at Dx............: ",ONC(165.5,D0,9)
"RTN","ONCPCI",18,0)
 W !," County at Dx.................: ",ONC(165.5,D0,10)
"RTN","ONCPCI",19,0)
 W !," Census Tract.................: ",ONC(165.5,D0,147)
"RTN","ONCPCI",20,0)
 I DATEDX>3061231 D
"RTN","ONCPCI",21,0)
 .W !," Managing Physician...........: ",ONC(165.5,D0,2.2)
"RTN","ONCPCI",22,0)
 W !," Following Physician..........: ",ONC(165.5,D0,2.1)
"RTN","ONCPCI",23,0)
 W !," Primary Surgeon..............: ",ONC(165.5,D0,2)
"RTN","ONCPCI",24,0)
 W !," Physician #3.................: ",ONC(165.5,D0,2.3)
"RTN","ONCPCI",25,0)
 W !," Physician #4       ..........: ",ONC(165.5,D0,2.4)
"RTN","ONCPCI",26,0)
 W !," Primary Payer at Dx..........: ",ONC(165.5,D0,18)
"RTN","ONCPCI",27,0)
 W !," Type of Reporting Source.....: ",ONC(165.5,D0,1.2)
"RTN","ONCPCI",28,0)
 W !,DASH
"RTN","ONCPCI",29,0)
 K DASH,I,X
"RTN","ONCPCI",30,0)
 Q
"RTN","ONCPCI",31,0)
 ;
"RTN","ONCPCI",32,0)
CI ;Cancer Identification
"RTN","ONCPCI",33,0)
 K DASH S $P(DASH,"-",80)="-"
"RTN","ONCPCI",34,0)
 N DI,DIC,DR,DA,DIQ,ONC,TM1,TM2,TM3,DOTS1,DOTS2,DOTS3
"RTN","ONCPCI",35,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPCI",36,0)
 S DR=".04;6;7;155;3;28;22;22.1;22.3;24;26;25.1;25.2;25.3;83;623;684;120;121;1010;5;171;172;173;21;96;102;156;159;193;194;195;196;24.1;24.2;233;237;237.1;238;250"
"RTN","ONCPCI",37,0)
 S DA=D0,DIQ="ONC" D EN^DIQ1
"RTN","ONCPCI",38,0)
 F I=.04,28,24,25.1,25.2,25.3,26,83,120,684,1010,5,21,102,159,194,24.1,24.2,233,237,237.1,238 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPCI",39,0)
 S COC=$E($$GET1^DIQ(165.5,D0,.04,"E"),1,2)
"RTN","ONCPCI",40,0)
 S TM1=$$PRINT^ONCOTM(D0,1)
"RTN","ONCPCI",41,0)
 K DOTS1 S $P(DOTS1,".",25-$L(TM1))="."
"RTN","ONCPCI",42,0)
 S TM2=$$PRINT^ONCOTM(D0,2)
"RTN","ONCPCI",43,0)
 K DOTS2 S $P(DOTS2,".",25-$L(TM2))="."
"RTN","ONCPCI",44,0)
 S TM3=$$PRINT^ONCOTM(D0,3)
"RTN","ONCPCI",45,0)
 K DOTS3 S $P(DOTS3,".",25-$L(TM3))="."
"RTN","ONCPCI",46,0)
 S TXT=ONC(165.5,D0,.04),LEN=48 D TXT
"RTN","ONCPCI",47,0)
 W !," Class of Case................: ",TXT1 W:TXT2'="" !,?35,TXT2
"RTN","ONCPCI",48,0)
 I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14) D
"RTN","ONCPCI",49,0)
 .W !," Date of First Symptoms.......: ",ONC(165.5,D0,171)
"RTN","ONCPCI",50,0)
 .W !," Date Workup Ordered/Started..: ",ONC(165.5,D0,172),"  ",ONC(165.5,D0,173)
"RTN","ONCPCI",51,0)
 S TXT=ONC(165.5,D0,6),LEN=46 D TXT
"RTN","ONCPCI",52,0)
 W !," Facility referred from.......: ",TXT1 W:TXT2'="" !,?32,TXT2
"RTN","ONCPCI",53,0)
 S TXT=ONC(165.5,D0,7),LEN=46 D TXT
"RTN","ONCPCI",54,0)
 W !," Facility referred to.........: ",TXT1 W:TXT2'="" !,?32,TXT2
"RTN","ONCPCI",55,0)
 W !," Fee Basis....................: ",ONC(165.5,D0,237)
"RTN","ONCPCI",56,0)
 I ONC(165.5,D0,237)="YES",$G(ONC(165.5,D0,237.1))'="" W " (",ONC(165.5,D0,237.1),")"
"RTN","ONCPCI",57,0)
 W !," Date of First Contact........: ",ONC(165.5,D0,155)
"RTN","ONCPCI",58,0)
 W !," Date Dx......................: ",ONC(165.5,D0,3)
"RTN","ONCPCI",59,0)
 I DATEDX>3091231 D
"RTN","ONCPCI",60,0)
 .W !," Inpatient Status.............: ",ONC(165.5,D0,233)
"RTN","ONCPCI",61,0)
 I DATEDX>3061231 D
"RTN","ONCPCI",62,0)
 .W !," Ambiguous Terminology Dx.....: ",ONC(165.5,D0,159)
"RTN","ONCPCI",63,0)
 .W !," Date of Conclusive Dx........: ",ONC(165.5,D0,193)
"RTN","ONCPCI",64,0)
 S TXT=ONC(165.5,D0,5),LEN=46 D TXT
"RTN","ONCPCI",65,0)
 W !," Dx Facility..................: ",TXT1 W:TXT2'="" !,?32,TXT2
"RTN","ONCPCI",66,0)
 W:ONC(165.5,D0,238)'="" !," Outside Slides Reviewed......: ",ONC(165.5,D0,238)
"RTN","ONCPCI",67,0)
 S HIST=$$HIST^ONCFUNC(D0,.HSTFLD,.HISTNAM)
"RTN","ONCPCI",68,0)
 S TXT=ONC(165.5,D0,HSTFLD),LEN=46 D TXT
"RTN","ONCPCI",69,0)
 W !," Histology/Behavior Code......: ",ONC(165.5,D0,22.1)_" "_TXT1 W:TXT2'="" !,?32,TXT2
"RTN","ONCPCI",70,0)
 W:$G(TOP)=67619 !," Gleason Score (Clinical).....: ",ONC(165.5,D0,623)
"RTN","ONCPCI",71,0)
 W:$G(TOP)=67619 !," Gleason Score (Pathologic)...: ",ONC(165.5,D0,250)
"RTN","ONCPCI",72,0)
 W:$G(TOP)=67619 !," PSA..........................: ",ONC(165.5,D0,96)," ",ONC(165.5,D0,684)
"RTN","ONCPCI",73,0)
 W:$G(TOP)=67619 !," DRE +/-......................: ",ONC(165.5,D0,156)," ",ONC(165.5,D0,102)
"RTN","ONCPCI",74,0)
 S TXT=ONC(165.5,D0,28),LEN=46 D TXT
"RTN","ONCPCI",75,0)
 W !," Laterality...................: ",TXT1 W:TXT2'="" !,?32,TXT2
"RTN","ONCPCI",76,0)
 W !," Grade/Differentiation........: ",ONC(165.5,D0,24)
"RTN","ONCPCI",77,0)
 I DATEDX>3091231 D
"RTN","ONCPCI",78,0)
 .W:ONC(165.5,D0,24.1)'="" !," Grade Path System............: ",ONC(165.5,D0,24.1)
"RTN","ONCPCI",79,0)
 .W:ONC(165.5,D0,24.2)'="" !," Grade Path Value.............: ",ONC(165.5,D0,24.2)
"RTN","ONCPCI",80,0)
 I DATEDX>3061231 D
"RTN","ONCPCI",81,0)
 .W !," Mult Tum Rpt as One Prim.....: ",ONC(165.5,D0,194)
"RTN","ONCPCI",82,0)
 .W !," Date of Multiple Tumors......: ",ONC(165.5,D0,195)
"RTN","ONCPCI",83,0)
 .W !," Multiplicity Counter.........: ",ONC(165.5,D0,196)
"RTN","ONCPCI",84,0)
 W !," AFIP/JPC submission..........: ",ONC(165.5,D0,83)
"RTN","ONCPCI",85,0)
 W !," Diagnostic Confirmation......: ",ONC(165.5,D0,26)
"RTN","ONCPCI",86,0)
 W:($$GET1^DIQ(165.5,D0,.01,"E")="LIVER")!($G(TOP)=67220) !," Hepatitis C..................: ",ONC(165.5,D0,1010)
"RTN","ONCPCI",87,0)
 ;I DATEDX<3030000 D
"RTN","ONCPCI",88,0)
 ;.W !," ",TM1,DOTS1,"....: ",ONC(165.5,D0,25.1)
"RTN","ONCPCI",89,0)
 ;.W !," ",TM2,DOTS2,"....: ",ONC(165.5,D0,25.2)
"RTN","ONCPCI",90,0)
 ;.W !," ",TM3,DOTS3,"....: ",ONC(165.5,D0,25.3)
"RTN","ONCPCI",91,0)
 W !," Presentation at Cancer Conf..: ",ONC(165.5,D0,121)," ",ONC(165.5,D0,120)
"RTN","ONCPCI",92,0)
 W !," Casefinding Source...........: ",ONC(165.5,D0,21)
"RTN","ONCPCI",93,0)
 W !,DASH
"RTN","ONCPCI",94,0)
 K DASH,HIST,HSTFLD,HISTNAM,LEN,LOS,NOP,TXT,TXT1,TXT2,X
"RTN","ONCPCI",95,0)
 Q
"RTN","ONCPCI",96,0)
 ;
"RTN","ONCPCI",97,0)
TXT ;Text formatting
"RTN","ONCPCI",98,0)
 S (TXT1,TXT2)="",LOS=$L(TXT) I LOS<LEN S TXT1=TXT Q
"RTN","ONCPCI",99,0)
 S NOP=$L($E(TXT,1,LEN)," ")
"RTN","ONCPCI",100,0)
 S TXT1=$P(TXT," ",1,NOP-1),TXT2=$P(TXT," ",NOP,999)
"RTN","ONCPCI",101,0)
 Q
"RTN","ONCPCI",102,0)
 ;
"RTN","ONCPCI",103,0)
UCASE ;Mixed case to uppercase conversion
"RTN","ONCPCI",104,0)
 S X=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","ONCPCI",105,0)
 Q
"RTN","ONCPCI",106,0)
 ;
"RTN","ONCPCI",107,0)
CLEANUP ;Cleanup
"RTN","ONCPCI",108,0)
 K COC,D0,DATEDX,TOP
"RTN","ONCPST56")
0^21^B53878693^n/a
"RTN","ONCPST56",1,0)
ONCPST56 ;Hines OIFO/RVD,RTK - POST-INSTALL ROUTINE FOR PATCH ONC*2.11*56 ;06/04/12
"RTN","ONCPST56",2,0)
 ;;2.11;ONCOLOGY;**56**;Mar 07, 1995;Build 10
"RTN","ONCPST56",3,0)
 ;
"RTN","ONCPST56",4,0)
 ;Set url to DC server.
"RTN","ONCPST56",5,0)
 S RC=$$UPDCSURL^ONCSAPIU("http://10.41.100.26:1757/cgi_bin/oncsrv.exe")
"RTN","ONCPST56",6,0)
 D ZIP,SD160,SD695,TCODES
"RTN","ONCPST56",7,0)
 Q
"RTN","ONCPST56",8,0)
ZIP ;Add 85083 zip code.  [PATCH DESCRIPTION ITEM #13]
"RTN","ONCPST56",9,0)
 K DD,DO,DIC
"RTN","ONCPST56",10,0)
 I $D(^VIC(5.11,"B","85083 ")) D BMES^XPDUTL("Zip code 85083 is already in file #5.11...") Q
"RTN","ONCPST56",11,0)
 D BMES^XPDUTL("Adding zip code 85083 ...")
"RTN","ONCPST56",12,0)
 S DIC="^VIC(5.11,"
"RTN","ONCPST56",13,0)
 S DIC(0)="L"
"RTN","ONCPST56",14,0)
 S DIC("DR")="1///PHOENIX;2///285;3///4",X="85083" D FILE^DICN
"RTN","ONCPST56",15,0)
 D BMES^XPDUTL("Done adding zip code 85083!!!")
"RTN","ONCPST56",16,0)
 K DD,D0,DIC
"RTN","ONCPST56",17,0)
 Q
"RTN","ONCPST56",18,0)
 ;
"RTN","ONCPST56",19,0)
SD160 ;Add Schema Discriminator for STOMACH (67160) in file #164
"RTN","ONCPST56",20,0)
 ; [PATCH DESCRIPTION ITEM #16]
"RTN","ONCPST56",21,0)
 I $D(^ONCO(164,67160,14,"B",982)) Q
"RTN","ONCPST56",22,0)
 K DIC,DO S DA(1)=67160,DIC="^ONCO(164,"_DA(1)_",14,"
"RTN","ONCPST56",23,0)
 S DIC(0)="L",X=982
"RTN","ONCPST56",24,0)
 D FILE^DICN
"RTN","ONCPST56",25,0)
 K DIC,DO S DA(1)=67160,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",26,0)
 S DIC(0)="L"
"RTN","ONCPST56",27,0)
 S X="982  Primary site coded to C16.0"
"RTN","ONCPST56",28,0)
 D FILE^DICN
"RTN","ONCPST56",29,0)
 K DIC,DO S DA(1)=67160,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",30,0)
 S DIC(0)="L"
"RTN","ONCPST56",31,0)
 S X="     May include cases which were converted to this code from a blank"
"RTN","ONCPST56",32,0)
 D FILE^DICN K DIC,DO
"RTN","ONCPST56",33,0)
 D BMES^XPDUTL("Schema Discriminator added for STOMACH, CARDIA (C16.0) Topography...")
"RTN","ONCPST56",34,0)
 Q
"RTN","ONCPST56",35,0)
SD695 ;Update Schema Discriminator for LACRIMAL (67695) in file #164
"RTN","ONCPST56",36,0)
 ; [PATCH DESCRIPTION ITEM #17]
"RTN","ONCPST56",37,0)
 I $D(^ONCO(164,67695,14,"B","015")) Q
"RTN","ONCPST56",38,0)
 ; first add the 2 new codes
"RTN","ONCPST56",39,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",14,"
"RTN","ONCPST56",40,0)
 S DIC(0)="L",X="015"
"RTN","ONCPST56",41,0)
 D FILE^DICN
"RTN","ONCPST56",42,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",14,"
"RTN","ONCPST56",43,0)
 S DIC(0)="L",X="025"
"RTN","ONCPST56",44,0)
 D FILE^DICN
"RTN","ONCPST56",45,0)
 ; next update the help - delete old help and add new help
"RTN","ONCPST56",46,0)
 K ^ONCO(164,67695,15)
"RTN","ONCPST56",47,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",48,0)
 S DIC(0)="L"
"RTN","ONCPST56",49,0)
 S X="Schema Discriminator: Lacrimal Gland/Lacrimal Sac"
"RTN","ONCPST56",50,0)
 D FILE^DICN
"RTN","ONCPST56",51,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",52,0)
 S DIC(0)="L"
"RTN","ONCPST56",53,0)
 S X=" "
"RTN","ONCPST56",54,0)
 D FILE^DICN
"RTN","ONCPST56",55,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",56,0)
 S DIC(0)="L"
"RTN","ONCPST56",57,0)
 S X="OBSOLETE DATA REVIEWED AND CHANGED V0203"
"RTN","ONCPST56",58,0)
 D FILE^DICN
"RTN","ONCPST56",59,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",60,0)
 S DIC(0)="L"
"RTN","ONCPST56",61,0)
 S X="See codes 015,025"
"RTN","ONCPST56",62,0)
 D FILE^DICN
"RTN","ONCPST56",63,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",64,0)
 S DIC(0)="L"
"RTN","ONCPST56",65,0)
 S X="010  Lacrimal gland"
"RTN","ONCPST56",66,0)
 D FILE^DICN
"RTN","ONCPST56",67,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",68,0)
 S DIC(0)="L"
"RTN","ONCPST56",69,0)
 S X="     Lacrimal duct, NOS"
"RTN","ONCPST56",70,0)
 D FILE^DICN
"RTN","ONCPST56",71,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",72,0)
 S DIC(0)="L"
"RTN","ONCPST56",73,0)
 S X="       Nasal lacrimal duct"
"RTN","ONCPST56",74,0)
 D FILE^DICN
"RTN","ONCPST56",75,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",76,0)
 S DIC(0)="L"
"RTN","ONCPST56",77,0)
 S X="       Nasolacrimal duct"
"RTN","ONCPST56",78,0)
 D FILE^DICN
"RTN","ONCPST56",79,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",80,0)
 S DIC(0)="L"
"RTN","ONCPST56",81,0)
 S X="     Lacrimal, NOS"
"RTN","ONCPST56",82,0)
 D FILE^DICN
"RTN","ONCPST56",83,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",84,0)
 S DIC(0)="L"
"RTN","ONCPST56",85,0)
 S X=" "
"RTN","ONCPST56",86,0)
 D FILE^DICN
"RTN","ONCPST56",87,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",88,0)
 S DIC(0)="L"
"RTN","ONCPST56",89,0)
 S X="015  Lacrimal gland"
"RTN","ONCPST56",90,0)
 D FILE^DICN
"RTN","ONCPST56",91,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",92,0)
 S DIC(0)="L"
"RTN","ONCPST56",93,0)
 S X="     Lacrimal, NOS"
"RTN","ONCPST56",94,0)
 D FILE^DICN
"RTN","ONCPST56",95,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",96,0)
 S DIC(0)="L"
"RTN","ONCPST56",97,0)
 S X=" "
"RTN","ONCPST56",98,0)
 D FILE^DICN
"RTN","ONCPST56",99,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",100,0)
 S DIC(0)="L"
"RTN","ONCPST56",101,0)
 S X="OBSOLETE DATA CONVERTED V0203"
"RTN","ONCPST56",102,0)
 D FILE^DICN
"RTN","ONCPST56",103,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",104,0)
 S DIC(0)="L"
"RTN","ONCPST56",105,0)
 S X="See code 025"
"RTN","ONCPST56",106,0)
 D FILE^DICN
"RTN","ONCPST56",107,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",108,0)
 S DIC(0)="L"
"RTN","ONCPST56",109,0)
 S X="020  Lacrimal sac "
"RTN","ONCPST56",110,0)
 D FILE^DICN
"RTN","ONCPST56",111,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",112,0)
 S DIC(0)="L"
"RTN","ONCPST56",113,0)
 S X=" "
"RTN","ONCPST56",114,0)
 D FILE^DICN
"RTN","ONCPST56",115,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",116,0)
 S DIC(0)="L"
"RTN","ONCPST56",117,0)
 S X="025  Lacrimal sac"
"RTN","ONCPST56",118,0)
 D FILE^DICN
"RTN","ONCPST56",119,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",120,0)
 S DIC(0)="L"
"RTN","ONCPST56",121,0)
 S X="     Lacrimal duct, NOS"
"RTN","ONCPST56",122,0)
 D FILE^DICN
"RTN","ONCPST56",123,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",124,0)
 S DIC(0)="L"
"RTN","ONCPST56",125,0)
 S X="       Nasal lacrimal duct"
"RTN","ONCPST56",126,0)
 D FILE^DICN
"RTN","ONCPST56",127,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",128,0)
 S DIC(0)="L"
"RTN","ONCPST56",129,0)
 S X="       Nasolacrimal duct"
"RTN","ONCPST56",130,0)
 D FILE^DICN
"RTN","ONCPST56",131,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",132,0)
 S DIC(0)="L"
"RTN","ONCPST56",133,0)
 S X=" "
"RTN","ONCPST56",134,0)
 D FILE^DICN
"RTN","ONCPST56",135,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",136,0)
 S DIC(0)="L"
"RTN","ONCPST56",137,0)
 S X="100  OBSOLETE DATA RETAINED V0200"
"RTN","ONCPST56",138,0)
 D FILE^DICN
"RTN","ONCPST56",139,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",140,0)
 S DIC(0)="L"
"RTN","ONCPST56",141,0)
 S X="     C69.5- originally coded in CSv1 and"
"RTN","ONCPST56",142,0)
 D FILE^DICN
"RTN","ONCPST56",143,0)
 K DIC,DO S DA(1)=67695,DIC="^ONCO(164,"_DA(1)_",15,"
"RTN","ONCPST56",144,0)
 S DIC(0)="L"
"RTN","ONCPST56",145,0)
 S X="       case diagnosed before 1/1/2010"
"RTN","ONCPST56",146,0)
 D FILE^DICN K DIC,DO
"RTN","ONCPST56",147,0)
 D BMES^XPDUTL("Schema Discriminator updated for LACRIMAL GLAND (C69.5) Topography...")
"RTN","ONCPST56",148,0)
 Q
"RTN","ONCPST56",149,0)
TCODES ;Update the 7th Edition T Codes (Clin & Path) for Mycosis Fungoides
"RTN","ONCPST56",150,0)
 ; in entry #55 of file #164.33 [fields 16 & 17]
"RTN","ONCPST56",151,0)
 ; [PATCH DESCRIPTION ITEM #20]
"RTN","ONCPST56",152,0)
 ; First delete codes T1A, T1B, T2A, T2B and TX if they exist
"RTN","ONCPST56",153,0)
T1A I '$D(^ONCO(164.33,55,"T7","B","1A")) G T1B
"RTN","ONCPST56",154,0)
 S DA(1)=55,DIK="^ONCO(164.33,"_DA(1)_",""T7"","
"RTN","ONCPST56",155,0)
 S DA=$O(^ONCO(164.33,55,"T7","B","1A","")) D ^DIK
"RTN","ONCPST56",156,0)
T1B I '$D(^ONCO(164.33,55,"T7","B","1B")) G T2A
"RTN","ONCPST56",157,0)
 S DA(1)=55,DIK="^ONCO(164.33,"_DA(1)_",""T7"","
"RTN","ONCPST56",158,0)
 S DA=$O(^ONCO(164.33,55,"T7","B","1B","")) D ^DIK
"RTN","ONCPST56",159,0)
T2A I '$D(^ONCO(164.33,55,"T7","B","2A")) G T2B
"RTN","ONCPST56",160,0)
 S DA(1)=55,DIK="^ONCO(164.33,"_DA(1)_",""T7"","
"RTN","ONCPST56",161,0)
 S DA=$O(^ONCO(164.33,55,"T7","B","2A","")) D ^DIK
"RTN","ONCPST56",162,0)
T2B I '$D(^ONCO(164.33,55,"T7","B","2B")) G TX
"RTN","ONCPST56",163,0)
 S DA(1)=55,DIK="^ONCO(164.33,"_DA(1)_",""T7"","
"RTN","ONCPST56",164,0)
 S DA=$O(^ONCO(164.33,55,"T7","B","2B","")) D ^DIK
"RTN","ONCPST56",165,0)
TX I '$D(^ONCO(164.33,55,"T7","B","X")) G X7
"RTN","ONCPST56",166,0)
 S DA(1)=55,DIK="^ONCO(164.33,"_DA(1)_",""T7"","
"RTN","ONCPST56",167,0)
 S DA=$O(^ONCO(164.33,55,"T7","B","X","")) D ^DIK
"RTN","ONCPST56",168,0)
 ;
"RTN","ONCPST56",169,0)
 ; next update the help - delete old help and add new help
"RTN","ONCPST56",170,0)
X7 K ^ONCO(164.33,55,7)
"RTN","ONCPST56",171,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",172,0)
 S DIC(0)="L"
"RTN","ONCPST56",173,0)
 S X="Primary Tumor (T) Skin"
"RTN","ONCPST56",174,0)
 D FILE^DICN
"RTN","ONCPST56",175,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",176,0)
 S DIC(0)="L"
"RTN","ONCPST56",177,0)
 S X=" "
"RTN","ONCPST56",178,0)
 D FILE^DICN
"RTN","ONCPST56",179,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",180,0)
 S DIC(0)="L"
"RTN","ONCPST56",181,0)
 S X="T1  Limited patches, papules, and/or plaques covering <10% of the skin surface"
"RTN","ONCPST56",182,0)
 D FILE^DICN
"RTN","ONCPST56",183,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",184,0)
 S DIC(0)="L"
"RTN","ONCPST56",185,0)
 S X="    **per ISCL/EORTC: 'May further stratify into T1a (patch only) vs T1b"
"RTN","ONCPST56",186,0)
 D FILE^DICN
"RTN","ONCPST56",187,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",188,0)
 S DIC(0)="L"
"RTN","ONCPST56",189,0)
 S X="    (plaque  patch)'. The T1a & T1b values are not part of the AJCC algorithm."
"RTN","ONCPST56",190,0)
 D FILE^DICN
"RTN","ONCPST56",191,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",192,0)
 S DIC(0)="L"
"RTN","ONCPST56",193,0)
 S X="T2  Patches, papules or plaques covering 10% of the skin surface."
"RTN","ONCPST56",194,0)
 D FILE^DICN
"RTN","ONCPST56",195,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",196,0)
 S DIC(0)="L"
"RTN","ONCPST56",197,0)
 S X="    **per ISCL/EORTC: 'May further stratify into T1a (patch only) vs T1b"
"RTN","ONCPST56",198,0)
 D FILE^DICN
"RTN","ONCPST56",199,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",200,0)
 S DIC(0)="L"
"RTN","ONCPST56",201,0)
 S X="    (plaque  patch)'. The T2a & T2b values are not part of the AJCC algorithm."
"RTN","ONCPST56",202,0)
 D FILE^DICN
"RTN","ONCPST56",203,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",204,0)
 S DIC(0)="L"
"RTN","ONCPST56",205,0)
 S X="T3  One or more tumors (1-cm diameter)"
"RTN","ONCPST56",206,0)
 D FILE^DICN
"RTN","ONCPST56",207,0)
 K DIC,DO S DA(1)=55,DIC="^ONCO(164.33,"_DA(1)_",7,"
"RTN","ONCPST56",208,0)
 S DIC(0)="L"
"RTN","ONCPST56",209,0)
 S X="T4  Confluence of erythema covering 80% body surface area"
"RTN","ONCPST56",210,0)
 D FILE^DICN
"RTN","ONCPST56",211,0)
 ;
"RTN","ONCPST56",212,0)
 D BMES^XPDUTL("Updated the 7th Edition T-Codes for Mycosis Fungoides...")
"RTN","ONCPST56",213,0)
 Q
"RTN","ONCSG1")
0^23^B152734191^B134157890
"RTN","ONCSG1",1,0)
ONCSG1 ;Hines OIFO/GWB - Automatic Staging Tables ;10/28/10
"RTN","ONCSG1",2,0)
 ;;2.11;ONCOLOGY;**35,51,52,54,56**;Mar 07, 1995;Build 10
"RTN","ONCSG1",3,0)
 ;
"RTN","ONCSG1",4,0)
 ;DIGESTIVE SYSTEM
"RTN","ONCSG1",5,0)
 ;
"RTN","ONCSG1",6,0)
ESO1234 ;Esophagus - 1st, 2nd, 3rd and 4th editions
"RTN","ONCSG1",7,0)
 I M[1 S SG=4
"RTN","ONCSG1",8,0)
 E  I T["IS",N[0,M[0 S SG=0
"RTN","ONCSG1",9,0)
 E  I T[1,N[0,M[0 S SG=1
"RTN","ONCSG1",10,0)
 E  I (T[2)!(T[3),N[0,M[0 S SG="2A"
"RTN","ONCSG1",11,0)
 E  I (T[1)!(T[2),N[1,M[0 S SG="2B"
"RTN","ONCSG1",12,0)
 E  I T[3,N[1,M[0 S SG=3
"RTN","ONCSG1",13,0)
 E  I T[4,M[0 S SG=3
"RTN","ONCSG1",14,0)
 E  S SG=99
"RTN","ONCSG1",15,0)
 Q
"RTN","ONCSG1",16,0)
 ;
"RTN","ONCSG1",17,0)
ESO56 ;Esophagus - 5th and 6th editions
"RTN","ONCSG1",18,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",19,0)
 .I TNM="IS00" S SG=0 Q        ;0    Tis   N0    M0
"RTN","ONCSG1",20,0)
 .I TNM=100 S SG=1 Q           ;I    T1    N0    M0
"RTN","ONCSG1",21,0)
 .I TNM=200 S SG="2A" Q        ;IIA  T2    N0    M0
"RTN","ONCSG1",22,0)
 .I TNM=300 S SG="2A" Q        ;     T3    N0    M0
"RTN","ONCSG1",23,0)
 .I TNM=110 S SG="2B" Q        ;IIB  T1    N1    M0
"RTN","ONCSG1",24,0)
 .I TNM=210 S SG="2B" Q        ;     T2    N1    M0
"RTN","ONCSG1",25,0)
 .I TNM=310 S SG=3 Q           ;III  T3    N1    M0
"RTN","ONCSG1",26,0)
 .I T=4,M=0 S SG=3 Q           ;     T4    Any N M0
"RTN","ONCSG1",27,0)
 .I M=1 S SG=4 Q               ;IV   Any T Any N M1
"RTN","ONCSG1",28,0)
 .I M="1A" S SG="4A" Q         ;IVA  Any T Any N M1a
"RTN","ONCSG1",29,0)
 .I M="1B" S SG="4B" Q         ;IVB  Any T Any N M1b
"RTN","ONCSG1",30,0)
 ;
"RTN","ONCSG1",31,0)
ESO7 ;Esophagus - 7th edition  (+ some Stomach/GE Junction cases)
"RTN","ONCSG1",32,0)
 N VAR I (TX=67160)!(TX=67161)!(TX=67162) D  G:VAR="S" ESO7A G:VAR="A" ESO7B
"RTN","ONCSG1",33,0)
 .S VAR="A"
"RTN","ONCSG1",34,0)
 .I ($E(HT,1,4)>7999)&($E(HT,1,4)<8047) S VAR="S" Q
"RTN","ONCSG1",35,0)
 .I ($E(HT,1,4)>8050)&($E(HT,1,4)<8032) S VAR="S" Q
"RTN","ONCSG1",36,0)
 .I ($E(HT,1,4)>8147)&($E(HT,1,4)<8153) S VAR="S" Q
"RTN","ONCSG1",37,0)
 .I ($E(HT,1,4)>8153)&($E(HT,1,4)<8158) S VAR="S" Q
"RTN","ONCSG1",38,0)
 .I ($E(HT,1,4)>8169)&($E(HT,1,4)<8176) S VAR="S" Q
"RTN","ONCSG1",39,0)
 .I ($E(HT,1,4)>8229)&($E(HT,1,4)<8232) S VAR="S" Q
"RTN","ONCSG1",40,0)
 .I ($E(HT,1,4)>8244)&($E(HT,1,4)<8246) S VAR="S" Q
"RTN","ONCSG1",41,0)
 .I ($E(HT,1,4)>8246)&($E(HT,1,4)<8249) S VAR="S" Q
"RTN","ONCSG1",42,0)
 .I ($E(HT,1,4)>8507)&($E(HT,1,4)<8514) S VAR="S" Q
"RTN","ONCSG1",43,0)
 .I ($E(HT,1,4)>8559)&($E(HT,1,4)<8571) S VAR="S" Q
"RTN","ONCSG1",44,0)
 .I ($E(HT,1,4)=8575)!($E(HT,1,4)=8950) S VAR="S" Q
"RTN","ONCSG1",45,0)
 .I ($E(HT,1,4)>8979)&($E(HT,1,4)<8982) S VAR="S" Q
"RTN","ONCSG1",46,0)
 .I ($E(HT,1,4)=8050)!($E(HT,1,4)=8576) S VAR="A" Q
"RTN","ONCSG1",47,0)
 .I ($E(HT,1,4)>8139)&($E(HT,1,4)<8148) S VAR="A" Q
"RTN","ONCSG1",48,0)
 .I ($E(HT,1,4)>8159)&($E(HT,1,4)<8163) S VAR="A" Q
"RTN","ONCSG1",49,0)
 .I ($E(HT,1,4)>8179)&($E(HT,1,4)<8222) S VAR="A" Q
"RTN","ONCSG1",50,0)
 .I ($E(HT,1,4)>8249)&($E(HT,1,4)<8508) S VAR="A" Q
"RTN","ONCSG1",51,0)
 .I ($E(HT,1,4)>8513)&($E(HT,1,4)<8552) S VAR="A" Q
"RTN","ONCSG1",52,0)
 .I ($E(HT,1,4)>8570)&($E(HT,1,4)<8575) S VAR="A" Q
"RTN","ONCSG1",53,0)
 .I ($E(HT,1,4)>8939)&($E(HT,1,4)<8942) S VAR="A" Q
"RTN","ONCSG1",54,0)
 I ($E(HT,1,3)>804)&($E(HT,1,3)<808) G ESO7A
"RTN","ONCSG1",55,0)
 E  G ESO7B
"RTN","ONCSG1",56,0)
ESO7A ;Squamous Cell Carcinoma
"RTN","ONCSG1",57,0)
 I T="IS" S TNM=T_N_M
"RTN","ONCSG1",58,0)
 E  S TNM=$E(T,1)_N_M
"RTN","ONCSG1",59,0)
 D  K TNM Q
"RTN","ONCSG1",60,0)
 .I (TNM="IS00")&(G=1) S SG=0 Q
"RTN","ONCSG1",61,0)
 .I (TNM=100)&(G=1) S SG="1A" Q
"RTN","ONCSG1",62,0)
 .I (TNM=100)&((G=2)!(G=3)) S SG="1B" Q
"RTN","ONCSG1",63,0)
 .I TNM=100 S SG="1A" Q
"RTN","ONCSG1",64,0)
 .I ((TNM=200)!(TNM=300))&(G=1)&((TX=67152)!(TX=67155)!(TX=67160)!(TX=67161)!(TX=67162)) S SG="1B" Q
"RTN","ONCSG1",65,0)
 .I ((TNM=200)!(TNM=300))&(G=1)&((TX=67150)!(TX=67151)!(TX=67153)!(TX=67154)) S SG="2A" Q
"RTN","ONCSG1",66,0)
 .I ((TNM=200)!(TNM=300))&((G=2)!(G=3))&((TX=67152)!(TX=67155)!(TX=67160)!(TX=67161)!(TX=67162)) S SG="2A" Q
"RTN","ONCSG1",67,0)
 .I ((TNM=200)!(TNM=300))&((G=2)!(G=3))&((TX=67150)!(TX=67151)!(TX=67153)!(TX=67154)) S SG="2B" Q
"RTN","ONCSG1",68,0)
 .I ((TNM=200)!(TNM=300))&(G=1) S SG="1B" Q
"RTN","ONCSG1",69,0)
 .I ((TNM=200)!(TNM=300))&((TX=67152)!(TX=67155)!(TX=67160)!(TX=67161)!(TX=67162)) S SG="1B" Q
"RTN","ONCSG1",70,0)
 .I ((TNM=200)!(TNM=300))&((TX=67150)!(TX=67151)!(TX=67153)!(TX=67154)) S SG="2A" Q
"RTN","ONCSG1",71,0)
 .I ((TNM=200)!(TNM=300))&((G=2)!(G=3)) S SG="2A" Q
"RTN","ONCSG1",72,0)
 .I (TNM=200)!(TNM=300) S SG="1B" Q
"RTN","ONCSG1",73,0)
 .I (TNM=110)!(TNM=210) S SG="2B" Q
"RTN","ONCSG1",74,0)
 .I (TNM=120)!(TNM=220) S SG="3A" Q
"RTN","ONCSG1",75,0)
 .I TNM=310 S SG="3A" Q
"RTN","ONCSG1",76,0)
 .I (T="4A")&(N=0)&(M=0) S SG="3A" Q
"RTN","ONCSG1",77,0)
 .I TNM=320 S SG="3B" Q
"RTN","ONCSG1",78,0)
 .I ((TNM="410")!(TNM="420")) S SG="3C" Q
"RTN","ONCSG1",79,0)
 .I (T="4B")&(M=0) S SG="3C" Q
"RTN","ONCSG1",80,0)
 .I (N=3)&(M=0) S SG="3C" Q
"RTN","ONCSG1",81,0)
 .I M=1 S SG=4 Q
"RTN","ONCSG1",82,0)
 ;
"RTN","ONCSG1",83,0)
ESO7B ;Adenocarcinoma
"RTN","ONCSG1",84,0)
 I T="IS" S TNM=T_N_M
"RTN","ONCSG1",85,0)
 E  S TNM=$E(T,1)_N_M
"RTN","ONCSG1",86,0)
 D  K TNM Q
"RTN","ONCSG1",87,0)
 .I (TNM="IS00")&(G=1) S SG=0 Q
"RTN","ONCSG1",88,0)
 .I (TNM=100)&((G=1)!(G=2)) S SG="1A" Q
"RTN","ONCSG1",89,0)
 .I (TNM=100)&(G=3) S SG="1B" Q
"RTN","ONCSG1",90,0)
 .I (TNM=200)&((G=1)!(G=2)) S SG="1B" Q
"RTN","ONCSG1",91,0)
 .I (TNM=200)&(G=3) S SG="2A" Q
"RTN","ONCSG1",92,0)
 .I (TNM=300) S SG="2B" Q
"RTN","ONCSG1",93,0)
 .I ((TNM=110)!(TNM=210)) S SG="2B" Q
"RTN","ONCSG1",94,0)
 .I ((TNM=120)!(TNM=220)) S SG="3A" Q
"RTN","ONCSG1",95,0)
 .I TNM=310 S SG="3A" Q
"RTN","ONCSG1",96,0)
 .I (T="4A")&(N=0)&(M=0) S SG="3A" Q
"RTN","ONCSG1",97,0)
 .I TNM=320 S SG="3B" Q
"RTN","ONCSG1",98,0)
 .I ((TNM="410")!(TNM="420")) S SG="3C" Q
"RTN","ONCSG1",99,0)
 .I (T="4B")&(M=0) S SG="3C" Q
"RTN","ONCSG1",100,0)
 .I (N=3)&(M=0) S SG="3C" Q
"RTN","ONCSG1",101,0)
 .I M=1 S SG=4 Q
"RTN","ONCSG1",102,0)
 ;
"RTN","ONCSG1",103,0)
STO34 ;Stomach - 3rd and 4th editions
"RTN","ONCSG1",104,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",105,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",106,0)
 .I TNM=100 S SG="1A" Q     ;IA   T1    N0    M0
"RTN","ONCSG1",107,0)
 .I TNM=110 S SG="1B" Q     ;IB   T1    N1    M0
"RTN","ONCSG1",108,0)
 .I TNM=200 S SG="1B" Q     ;     T2    N0    M0
"RTN","ONCSG1",109,0)
 .I TNM=120 S SG=2 Q        ;II   T1    N2    M0
"RTN","ONCSG1",110,0)
 .I TNM=210 S SG=2 Q        ;     T2    N1    M0
"RTN","ONCSG1",111,0)
 .I TNM=300 S SG=2 Q        ;     T3    N0    M0
"RTN","ONCSG1",112,0)
 .I TNM=220 S SG="3A" Q     ;IIIA T2    N2    M0
"RTN","ONCSG1",113,0)
 .I TNM=310 S SG="3A" Q     ;     T3    N1    M0
"RTN","ONCSG1",114,0)
 .I TNM=400 S SG="3A" Q     ;     T4    N0    M0
"RTN","ONCSG1",115,0)
 .I TNM=320 S SG="3B" Q     ;IIIB T3    N2    M0
"RTN","ONCSG1",116,0)
 .I TNM=410 S SG="3B" Q     ;     T4    N1    M0
"RTN","ONCSG1",117,0)
 .I TNM=420 S SG=4 Q        ;IV   T4    N2    M0
"RTN","ONCSG1",118,0)
 .I M=1 S SG=4 Q            ;     Any T Any N M1
"RTN","ONCSG1",119,0)
 ;
"RTN","ONCSG1",120,0)
STO5 ;Stomach - 5th edition
"RTN","ONCSG1",121,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",122,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",123,0)
 .I TNM=100 S SG="1A" Q     ;IA   T1    N0    M0
"RTN","ONCSG1",124,0)
 .I TNM=110 S SG="1B" Q     ;IB   T1    N1    M0
"RTN","ONCSG1",125,0)
 .I TNM=200 S SG="1B" Q     ;     T2    N0    M0
"RTN","ONCSG1",126,0)
 .I TNM=120 S SG=2 Q        ;II   T1    N2    M0
"RTN","ONCSG1",127,0)
 .I TNM=210 S SG=2 Q        ;     T2    N1    M0
"RTN","ONCSG1",128,0)
 .I TNM=300 S SG=2 Q        ;     T3    N0    M0
"RTN","ONCSG1",129,0)
 .I TNM=220 S SG="3A" Q     ;IIIA T2    N2    M0
"RTN","ONCSG1",130,0)
 .I TNM=310 S SG="3A" Q     ;     T3    N1    M0
"RTN","ONCSG1",131,0)
 .I TNM=400 S SG="3A" Q     ;     T4    N0    M0
"RTN","ONCSG1",132,0)
 .I TNM=320 S SG="3B" Q     ;IIIB T3    N2    M0
"RTN","ONCSG1",133,0)
 .I TNM=410 S SG=4 Q        ;IV   T4    N1    M0
"RTN","ONCSG1",134,0)
 .I TNM=130 S SG=4 Q        ;     T1    N3    M0
"RTN","ONCSG1",135,0)
 .I TNM=230 S SG=4 Q        ;     T2    N3    M0
"RTN","ONCSG1",136,0)
 .I TNM=330 S SG=4 Q        ;     T3    N3    M0
"RTN","ONCSG1",137,0)
 .I TNM=420 S SG=4 Q        ;     T4    N2    M0
"RTN","ONCSG1",138,0)
 .I TNM=430 S SG=4 Q        ;     T4    N3    M0
"RTN","ONCSG1",139,0)
 .I M=1 S SG=4 Q            ;     Any T Any N M1
"RTN","ONCSG1",140,0)
 ;
"RTN","ONCSG1",141,0)
STO6 ;Stomach - 6th edition
"RTN","ONCSG1",142,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",143,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",144,0)
 .I TNM=100 S SG="1A" Q     ;IA   T1    N0    M0
"RTN","ONCSG1",145,0)
 .I TNM=110 S SG="1B" Q     ;IB   T1    N1    M0
"RTN","ONCSG1",146,0)
 .I TNM="2A00" S SG="1B" Q  ;     T2a   N0    M0
"RTN","ONCSG1",147,0)
 .I TNM="2B00" S SG="1B" Q  ;     T2b   N0    M0
"RTN","ONCSG1",148,0)
 .I TNM=120 S SG=2 Q        ;II   T1    N2    M0
"RTN","ONCSG1",149,0)
 .I TNM="2A10" S SG=2 Q     ;     T2a   N1    M0
"RTN","ONCSG1",150,0)
 .I TNM="2B10" S SG=2 Q     ;     T2b   N1    M0
"RTN","ONCSG1",151,0)
 .I TNM=300 S SG=2 Q        ;     T3    N0    M0
"RTN","ONCSG1",152,0)
 .I TNM="2A20" S SG="3A" Q  ;IIIA T2a   N2    M0
"RTN","ONCSG1",153,0)
 .I TNM="2B20" S SG="3A" Q  ;     T2b   N2    M0
"RTN","ONCSG1",154,0)
 .I TNM=310 S SG="3A" Q     ;     T3    N1    M0
"RTN","ONCSG1",155,0)
 .I TNM=400 S SG="3A" Q     ;     T4    N0    M0
"RTN","ONCSG1",156,0)
 .I TNM=320 S SG="3B" Q     ;IIIB T3    N2    M0
"RTN","ONCSG1",157,0)
 .I TNM=410 S SG=4 Q        ;IV   T4    N1    M0
"RTN","ONCSG1",158,0)
 .I TNM=130 S SG=4 Q        ;     T1    N3    M0
"RTN","ONCSG1",159,0)
 .I TNM="2A30" S SG=4 Q     ;     T2a   N3    M0
"RTN","ONCSG1",160,0)
 .I TNM="2B30" S SG=4 Q     ;     T2b   N3    M0
"RTN","ONCSG1",161,0)
 .I TNM=330 S SG=4 Q        ;     T3    N3    M0
"RTN","ONCSG1",162,0)
 .I TNM=420 S SG=4 Q        ;     T4    N2    M0
"RTN","ONCSG1",163,0)
 .I TNM=430 S SG=4 Q        ;     T4    N3    M0
"RTN","ONCSG1",164,0)
 .I M=1 S SG=4 Q            ;     Any T Any N M1
"RTN","ONCSG1",165,0)
 ;
"RTN","ONCSG1",166,0)
STO7 ;Stomach - 7th edition
"RTN","ONCSG1",167,0)
 I $E(T,1)=1 S T=$E(T,1)
"RTN","ONCSG1",168,0)
 I $E(N,1)=3 S N=$E(N,1)
"RTN","ONCSG1",169,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",170,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",171,0)
 .I TNM=100 S SG="1A" Q     ;IA   T1    N0    M0
"RTN","ONCSG1",172,0)
 .I TNM=200 S SG="1B" Q     ;IB   T2    N0    M0
"RTN","ONCSG1",173,0)
 .I TNM=110 S SG="1B" Q     ;     T1    N1    M0
"RTN","ONCSG1",174,0)
 .I TNM=300 S SG="2A" Q     ;IIA  T3    N0    M0
"RTN","ONCSG1",175,0)
 .I TNM=210 S SG="2A" Q     ;     T2    N1    M0
"RTN","ONCSG1",176,0)
 .I TNM=120 S SG="2A" Q     ;     T1    N2    M0
"RTN","ONCSG1",177,0)
 .I TNM="4A00" S SG="2B" Q  ;IIB  T4a   N0    M0
"RTN","ONCSG1",178,0)
 .I TNM=310 S SG="2B" Q     ;     T3    N1    M0
"RTN","ONCSG1",179,0)
 .I TNM=220 S SG="2B" Q     ;     T2    N2    M0
"RTN","ONCSG1",180,0)
 .I TNM=130 S SG="2B" Q     ;     T1    N3    M0
"RTN","ONCSG1",181,0)
 .I TNM="4A10" S SG="3A" Q  ;IIIA T4a   N1    M0
"RTN","ONCSG1",182,0)
 .I TNM=320 S SG="3A" Q     ;     T3    N2    M0
"RTN","ONCSG1",183,0)
 .I TNM=230 S SG="3A" Q     ;     T2    N3    M0
"RTN","ONCSG1",184,0)
 .I TNM="4B00" S SG="3B" Q  ;IIIB T4b   N0    M0
"RTN","ONCSG1",185,0)
 .I TNM="4B10" S SG="3B" Q  ;     T4b   N1    M0
"RTN","ONCSG1",186,0)
 .I TNM="4A20" S SG="3B" Q  ;     T4a   N2    M0
"RTN","ONCSG1",187,0)
 .I TNM=330 S SG="3B" Q     ;     T3    N3    M0
"RTN","ONCSG1",188,0)
 .I TNM="4B20" S SG="3C" Q  ;IIIC T4b   N2    M0
"RTN","ONCSG1",189,0)
 .I TNM="4B30" S SG="3C" Q  ;     T4b   N3    M0
"RTN","ONCSG1",190,0)
 .I TNM="4A30" S SG="3C" Q  ;     T4a   N3    M0
"RTN","ONCSG1",191,0)
 .I M=1 S SG=4 Q            ;     Any T Any N M1
"RTN","ONCSG1",192,0)
 ;
"RTN","ONCSG1",193,0)
SI456 ;Small Intestine - 4th, 5th and 6th editions
"RTN","ONCSG1",194,0)
 I M S SG=4
"RTN","ONCSG1",195,0)
 E  I T["IS",N[0,M[0 S SG=0
"RTN","ONCSG1",196,0)
 E  I (T[1)!(T[2),N[0,M[0 S SG=1
"RTN","ONCSG1",197,0)
 E  I (T[3)!(T[4),N[0,M[0 S SG=2
"RTN","ONCSG1",198,0)
 E  I N[1,M[0 S SG=3
"RTN","ONCSG1",199,0)
 E  S SG=99
"RTN","ONCSG1",200,0)
 Q
"RTN","ONCSG1",201,0)
 ;
"RTN","ONCSG1",202,0)
SI7 ;Small Intestine - 7th edition
"RTN","ONCSG1",203,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",204,0)
 .I TNM="IS00" S SG=0 Q  ;0    Tis   N0    M0
"RTN","ONCSG1",205,0)
 .I TNM="1A00" S SG=1 Q  ;I    T1a   N0    M0
"RTN","ONCSG1",206,0)
 .I TNM="1B00" S SG=1 Q  ;I    T1b   N0    M0
"RTN","ONCSG1",207,0)
 .I TNM=200 S SG=1 Q     ;     T2    N0    M0
"RTN","ONCSG1",208,0)
 .I TNM=300 S SG="2A" Q  ;IIA  T3    N0    M0
"RTN","ONCSG1",209,0)
 .I TNM=400 S SG="2B" Q  ;IIB  T0    N0    M0
"RTN","ONCSG1",210,0)
 .I N=1,M=0 S SG="3A" Q  ;IIIA Any T N1    M0
"RTN","ONCSG1",211,0)
 .I N=2,M=0 S SG="3B" Q  ;IIIB Any T N2    M0
"RTN","ONCSG1",212,0)
 .I M=1 S SG=4 Q         ;IV   Any T Any N M1
"RTN","ONCSG1",213,0)
 ;
"RTN","ONCSG1",214,0)
APP7 ;Appendix- 7th edition
"RTN","ONCSG1",215,0)
 N HT14
"RTN","ONCSG1",216,0)
 S HT14=$E(HT,1,4)
"RTN","ONCSG1",217,0)
 I (HT14=8153)!(HT14=8240)!(HT14=8241)!(HT14=8242)!(HT14=8246)!(HT14=8249) G APP7B
"RTN","ONCSG1",218,0)
 ;
"RTN","ONCSG1",219,0)
APP7A ;Carcinoma
"RTN","ONCSG1",220,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",221,0)
 .I TNM="IS00" S SG=0 Q                  ;0    Tis   N0    M0
"RTN","ONCSG1",222,0)
 .I TNM=100 S SG=1 Q                    ;I    T1    N0    M0
"RTN","ONCSG1",223,0)
 .I TNM=200 S SG=1 Q                    ;I    T2    N0    M0
"RTN","ONCSG1",224,0)
 .I TNM=300 S SG="2A" Q                 ;IIA  T3    N0    M0
"RTN","ONCSG1",225,0)
 .I TNM="4A00" S SG="2B" Q              ;IIB  T4a   N0    M0
"RTN","ONCSG1",226,0)
 .I TNM="4B00" S SG="2C" Q              ;IIC  T4b   N0    M0
"RTN","ONCSG1",227,0)
 .I TNM=110 S SG="3A" Q                 ;IIIA T1    N1    M0
"RTN","ONCSG1",228,0)
 .I TNM=210 S SG="3A" Q                 ;     T2    N1    M0
"RTN","ONCSG1",229,0)
 .I TNM=310 S SG="3B" Q                 ;IIIB T3    N1    M0
"RTN","ONCSG1",230,0)
 .I TNM=410 S SG="3B" Q                 ;     T4    N1    M0
"RTN","ONCSG1",231,0)
 .I N=2,M=0 S SG="3C" Q                 ;IIIC Any T N2    M0
"RTN","ONCSG1",232,0)
 .I N=0,M="1A",G=1 S SG="4A" Q          ;IVA  Any T N0    M1a G1
"RTN","ONCSG1",233,0)
 .I N=0,M="1A",(G=2)!(G=3) S SG="4B" Q  ;IVB  Any T N0    M1a G2,3
"RTN","ONCSG1",234,0)
 .I N=1,M="1A" S SG="4B" Q              ;     Any T N1    M1a Any G
"RTN","ONCSG1",235,0)
 .I N=2,M="1A" S SG="4B" Q              ;     Any T N2    M1a Any G
"RTN","ONCSG1",236,0)
 .I M="1B" S SG="4C" Q                  ;IVC  Any T Any N M1b Any G
"RTN","ONCSG1",237,0)
 ;
"RTN","ONCSG1",238,0)
APP7B ;Carcinoid
"RTN","ONCSG1",239,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",240,0)
 .I TNM=100 S SG=1 Q  ;I    T1    N0    M0
"RTN","ONCSG1",241,0)
 .I TNM=200 S SG=2 Q  ;II   T2    N0    M0
"RTN","ONCSG1",242,0)
 .I TNM=300 S SG=2 Q  ;     T3    N0    M0
"RTN","ONCSG1",243,0)
 .I TNM=400 S SG=3 Q  ;III  T4    N0    M0
"RTN","ONCSG1",244,0)
 .I N=1,M=0 S SG=3 Q  ;     Any T N1    M0
"RTN","ONCSG1",245,0)
 .I M=1 S SG=4 Q      ;IV   Any T Any N M1
"RTN","ONCSG1",246,0)
 ;
"RTN","ONCSG1",247,0)
COL34 ;Colon and Rectum - 3rd and 4th editions
"RTN","ONCSG1",248,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",249,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",250,0)
 .I TNM=100 S SG=1 Q        ;I    T1    N0    M0
"RTN","ONCSG1",251,0)
 .I TNM=200 S SG=1 Q        ;     T2    N0    M0
"RTN","ONCSG1",252,0)
 .I TNM=300 S SG=2 Q        ;II   T3    N0    M0
"RTN","ONCSG1",253,0)
 .I TNM=400 S SG=2 Q        ;     T4    N0    M0
"RTN","ONCSG1",254,0)
 .I N=1,M=0 S SG=3 Q        ;III  Any T N1    M0
"RTN","ONCSG1",255,0)
 .I N=2,M=0 S SG=3 Q        ;     Any T N2    M0
"RTN","ONCSG1",256,0)
 .I N=3,M=0 S SG=3 Q        ;     Any T N3    M0
"RTN","ONCSG1",257,0)
 .I M=1 S SG=4 Q            ;IV   Any T Any N M1
"RTN","ONCSG1",258,0)
 ;
"RTN","ONCSG1",259,0)
COL5 ;Colon and Rectum - 5th edition
"RTN","ONCSG1",260,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",261,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",262,0)
 .I TNM=100 S SG=1 Q        ;I    T1    N0    M0
"RTN","ONCSG1",263,0)
 .I TNM=200 S SG=1 Q        ;     T2    N0    M0
"RTN","ONCSG1",264,0)
 .I TNM=300 S SG=2 Q        ;II   T3    N0    M0
"RTN","ONCSG1",265,0)
 .I TNM=400 S SG=2 Q        ;     T4    N0    M0
"RTN","ONCSG1",266,0)
 .I N=1,M=0 S SG=3 Q        ;III  Any T N1    M0
"RTN","ONCSG1",267,0)
 .I N=2,M=0 S SG=3 Q        ;     Any T N2    M0
"RTN","ONCSG1",268,0)
 .I M=1 S SG=4 Q            ;IV   Any T Any N M1
"RTN","ONCSG1",269,0)
 ;
"RTN","ONCSG1",270,0)
COL6 ;Colon and Rectum - 6th edition
"RTN","ONCSG1",271,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",272,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",273,0)
 .I TNM=100 S SG=1 Q        ;I    T1    N0    M0
"RTN","ONCSG1",274,0)
 .I TNM=200 S SG=1 Q        ;     T2    N0    M0
"RTN","ONCSG1",275,0)
 .I TNM=300 S SG="2A" Q     ;IIA  T3    N0    M0
"RTN","ONCSG1",276,0)
 .I TNM=400 S SG="2B" Q     ;IIB  T4    N0    M0
"RTN","ONCSG1",277,0)
 .I TNM=110 S SG="3A" Q     ;IIIA T1    N1    M0
"RTN","ONCSG1",278,0)
 .I TNM=210 S SG="3A" Q     ;     T2    N1    M0
"RTN","ONCSG1",279,0)
 .I TNM=310 S SG="3B" Q     ;IIIB T3    N1    M0
"RTN","ONCSG1",280,0)
 .I TNM=410 S SG="3B" Q     ;     T4    N1    M0
"RTN","ONCSG1",281,0)
 .I N=2,M=0 S SG="3C" Q     ;IIIC Any T N2    M0
"RTN","ONCSG1",282,0)
 .I M=1 S SG=4 Q            ;IV   Any T Any N M1
"RTN","ONCSG1",283,0)
 ;
"RTN","ONCSG1",284,0)
COL7 ;Colon and Rectum - 7th edition
"RTN","ONCSG1",285,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",286,0)
 .I TNM="IS00" S SG=0 Q
"RTN","ONCSG1",287,0)
 .I TNM=100 S SG=1 Q
"RTN","ONCSG1",288,0)
 .I TNM=200 S SG=1 Q
"RTN","ONCSG1",289,0)
 .I TNM=300 S SG="2A" Q
"RTN","ONCSG1",290,0)
 .I TNM="4A00" S SG="2B" Q
"RTN","ONCSG1",291,0)
 .I TNM="4B00" S SG="2C" Q
"RTN","ONCSG1",292,0)
 .I ((T=1)!(T=2))&($E(N,1)=1)&(M=0) S SG="3A" Q
"RTN","ONCSG1",293,0)
 .I TNM="12A0" S SG="3A" Q
"RTN","ONCSG1",294,0)
 .I ((T=3)!(T="4A"))&($E(N,1)=1)&(M=0) S SG="3B" Q
"RTN","ONCSG1",295,0)
 .I ((TNM="22A0")!(TNM="32A0")) S SG="3B" Q
"RTN","ONCSG1",296,0)
 .I ((TNM="12B0")!(TNM="22A0")) S SG="3B" Q
"RTN","ONCSG1",297,0)
 .I TNM="4A2A0" S SG="3C" Q
"RTN","ONCSG1",298,0)
 .I ((TNM="32B0")!(TNM="4A2B0")) S SG="3C" Q
"RTN","ONCSG1",299,0)
 .I ((TNM="4B10")!(TNM="4B20")) S SG="3C" Q
"RTN","ONCSG1",300,0)
 .I M="1A" S SG="4A" Q
"RTN","ONCSG1",301,0)
 .I M="1B" S SG="4B" Q
"RTN","ONCSG1",302,0)
 ;
"RTN","ONCSG1",303,0)
AC ;Anus - all editions
"RTN","ONCSG1",304,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",305,0)
 .I TNM="IS00" S SG=0 Q     ;0    Tis   N0    M0
"RTN","ONCSG1",306,0)
 .I TNM=100 S SG=1 Q        ;I    T1    N0    M0
"RTN","ONCSG1",307,0)
 .I TNM=200 S SG=2 Q        ;II   T2    N0    M0
"RTN","ONCSG1",308,0)
 .I TNM=300 S SG=2 Q        ;     T3    N0    M0
"RTN","ONCSG1",309,0)
 .I TNM=110 S SG="3A" Q     ;IIIA T1    N1    M0
"RTN","ONCSG1",310,0)
 .I TNM=210 S SG="3A" Q     ;     T2    N1    M0
"RTN","ONCSG1",311,0)
 .I TNM=310 S SG="3A" Q     ;     T3    N1    M0
"RTN","ONCSG1",312,0)
 .I TNM=400 S SG="3A" Q     ;     T4    N0    M0
"RTN","ONCSG1",313,0)
 .I TNM=410 S SG="3B" Q     ;IIIB T4    N1    M0
"RTN","ONCSG1",314,0)
 .I N=2,M=0 S SG="3B" Q     ;     Any T N2    M0
"RTN","ONCSG1",315,0)
 .I N=3,M=0 S SG="3B" Q     ;     Any T N3    M0
"RTN","ONCSG1",316,0)
 .I M=1 S SG=4 Q            ;IV   Any T Any N M1
"RTN","ONCSG1",317,0)
 ;
"RTN","ONCSG1",318,0)
GIST ;Gastrointestinal Stromal Tumor - 7th Edition
"RTN","ONCSG1",319,0)
 N MR
"RTN","ONCSG1",320,0)
 S MR=$P($G(^ONCO(165.5,D0,2.3)),U,9)
"RTN","ONCSG1",321,0)
 I MR="" W !!?12,"MITOTIC RATE is required for AJCC 7th Edition GIST staging." Q
"RTN","ONCSG1",322,0)
 I $E(TX,3,4)=16 G GASTRIC
"RTN","ONCSG1",323,0)
SI ;Small Intestinal GIST - 7th Edition
"RTN","ONCSG1",324,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",325,0)
 .I TNM=100,MR="L" S SG=1 Q           ;I     T1    N0    M0  Low
"RTN","ONCSG1",326,0)
 .I TNM=200,MR="L" S SG=1 Q           ;      T2    N0    M0  Low
"RTN","ONCSG1",327,0)
 .I TNM=300,MR="L" S SG=2 Q           ;II    T3    N0    M0  Low
"RTN","ONCSG1",328,0)
 .I TNM=100,MR="H" S SG="3A" Q        ;IIIA  T1    N0    M0  High
"RTN","ONCSG1",329,0)
 .I TNM=400,MR="L" S SG="3A" Q        ;      T4    N0    M0  Low
"RTN","ONCSG1",330,0)
 .I TNM=200,MR="H" S SG="3B" Q        ;IIIB  T2    N0    M0  High
"RTN","ONCSG1",331,0)
 .I TNM=300,MR="H" S SG="3B" Q        ;      T3    N0    M0  High
"RTN","ONCSG1",332,0)
 .I TNM=400,MR="H" S SG="3B" Q        ;      T4    N0    M0  High
"RTN","ONCSG1",333,0)
 .I N=1,M=0 S SG=4 Q                  ;IV    Any T N1    M0  Any rate
"RTN","ONCSG1",334,0)
 .I M=1 S SG=4 Q                      ;      Any T Any N M1  Any rate
"RTN","ONCSG1",335,0)
 ;
"RTN","ONCSG1",336,0)
GASTRIC ;Gastric GIST
"RTN","ONCSG1",337,0)
 S TNM=T_N_M D  K TNM Q
"RTN","ONCSG1",338,0)
 .I TNM=100,MR="L" S SG="1A" Q        ;IA    T1    N0    M0  Low
"RTN","ONCSG1",339,0)
 .I TNM=200,MR="L" S SG="1A" Q        ;      T2    N0    M0  Low
"RTN","ONCSG1",340,0)
 .I TNM=300,MR="L" S SG="1B" Q        ;IB    T3    N0    M0  Low
"RTN","ONCSG1",341,0)
 .I TNM=100,MR="H" S SG=2 Q           ;II    T1    N0    M0  High
"RTN","ONCSG1",342,0)
 .I TNM=200,MR="H" S SG=2 Q           ;      T2    N0    M0  High
"RTN","ONCSG1",343,0)
 .I TNM=400,MR="L" S SG=2 Q           ;      T4    N0    M0  Low
"RTN","ONCSG1",344,0)
 .I TNM=300,MR="H" S SG="3A" Q        ;IIIA  T3    N0    M0  High
"RTN","ONCSG1",345,0)
 .I TNM=400,MR="H" S SG="3B" Q        ;IIIB  T4    N0    M0  High
"RTN","ONCSG1",346,0)
 .I N=1,M=0 S SG=4 Q                  ;IV    Any T N1    M0  Any rate
"RTN","ONCSG1",347,0)
 .I M=1 S SG=4 Q                      ;      Any T Any N M1  Any rate
"RTN","ONCSG1",348,0)
 ;
"RTN","ONCSG1",349,0)
NT ;Neuroendocrine Tumor - 7th Edition
"RTN","ONCSG1",350,0)
 S TNM=$E(T,1)_N_M D  K TNM Q
"RTN","ONCSG1",351,0)
 .I TNM="IS00",$E(TX,3,4)=16 S SG=0 Q  ;0     Tis*  N0    M0
"RTN","ONCSG1",352,0)
 .I TNM=100 S SG=1 Q                   ;I     T1    N0    M0
"RTN","ONCSG1",353,0)
 .I TNM=200 S SG="2A" Q                ;IIA   T2    N0    M0
"RTN","ONCSG1",354,0)
 .I TNM=300 S SG="2B" Q                ;IIB   T3    N0    M0
"RTN","ONCSG1",355,0)
 .I TNM=400 S SG="3A" Q                ;IIIA  T4    N0    M0
"RTN","ONCSG1",356,0)
 .I N=1,M=0 S SG="3B" Q                ;IIIB  Any T N1    M0
"RTN","ONCSG1",357,0)
 .I M=1 S SG=4 Q                       ;IV    Any T Any N M1
"RTN","ONCSG1",358,0)
 ;                                     ;Note: TIS applies only to stomach
"RTN","ONCSG1",359,0)
 ;
"RTN","ONCSG1",360,0)
CLEANUP ;Cleanup
"RTN","ONCSG1",361,0)
 K D0,G,HT,M,N,SG,T,TX
"RTN","ONCSUBS")
0^25^B7009875^B5242717
"RTN","ONCSUBS",1,0)
ONCSUBS ;Hines OIFO/GWB - CS SCHEMA DISCRIMINATOR (165.5,240) ;11/03/10
"RTN","ONCSUBS",2,0)
 ;;2.11;ONCOLOGY;**51,52,53,56**;Mar 07, 1995;Build 10
"RTN","ONCSUBS",3,0)
 ;
"RTN","ONCSUBS",4,0)
 ;Called from [ONCO ABSTRACT-I] INPUT TEMPLATE
"RTN","ONCSUBS",5,0)
 ;CS SCHEMA DISCRIMINATOR (165.5,240) prompt/no prompt logic
"RTN","ONCSUBS",6,0)
 N DTDX,HT,TX
"RTN","ONCSUBS",7,0)
 S DTDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCSUBS",8,0)
 I DTDX<3040000 S Y="@623" Q
"RTN","ONCSUBS",9,0)
 S TX=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCSUBS",10,0)
 Q:TX=""
"RTN","ONCSUBS",11,0)
 S HT=$$HIST^ONCFUNC(D0)
"RTN","ONCSUBS",12,0)
 I '$D(^ONCO(164,TX,15)) S Y="@623" Q
"RTN","ONCSUBS",13,0)
 I TX=67694,'$$MELANOMA^ONCOU55(D0) S Y="@623" Q
"RTN","ONCSUBS",14,0)
 I TX=67695,$$MELANOMA^ONCOU55(D0) S Y="@623" Q
"RTN","ONCSUBS",15,0)
 I $E(TX,3,4)=16 D
"RTN","ONCSUBS",16,0)
 .I ($E(HT,1,4)=8153)!($E(HT,1,4)=8240)!($E(HT,1,4)=8241)!($E(HT,1,4)=8242)!($E(HT,1,4)=8246)!($E(HT,1,4)=8249)!($E(HT,1,4)=8935)!($E(HT,1,4)=8936) S Y="@623" Q
"RTN","ONCSUBS",17,0)
 I (TX=67481)!(TX=67482)!(TX=67488) D
"RTN","ONCSUBS",18,0)
 .I ($E(HT,1,4)=8935)!($E(HT,1,4)=8936) S Y="@623" Q
"RTN","ONCSUBS",19,0)
 Q
"RTN","ONCSUBS",20,0)
 ;
"RTN","ONCSUBS",21,0)
IN ;CS SCHEMA DISCRIMINATOR (165.5,240) INPUT TRANSFORM
"RTN","ONCSUBS",22,0)
 N DTDX,HT,SD,TX,XD0,HT4
"RTN","ONCSUBS",23,0)
 S DTDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCSUBS",24,0)
 S TX=$P($G(^ONCO(165.5,D0,2)),U,1) Q:TX=""
"RTN","ONCSUBS",25,0)
 S HT=$$HIST^ONCFUNC(D0)
"RTN","ONCSUBS",26,0)
 S HT4=$E(HT,1,4)
"RTN","ONCSUBS",27,0)
 S SD=$P($G(^ONCO(165.5,D0,"CS3")),U,1)
"RTN","ONCSUBS",28,0)
 I X'?3N K X Q
"RTN","ONCSUBS",29,0)
 I '$D(^ONCO(164,TX,14,"B",X)) W !!?5,"Invalid code for this PRIMARY SITE",! K X Q
"RTN","ONCSUBS",30,0)
 S XD0=$O(^ONCO(164,TX,14,"B",X,0))
"RTN","ONCSUBS",31,0)
 S X=^ONCO(164,TX,14,XD0,0)
"RTN","ONCSUBS",32,0)
 I DTDX>3091231,X=100 W "  OBSOLETE code" K X Q
"RTN","ONCSUBS",33,0)
 I SD'=X D
"RTN","ONCSUBS",34,0)
 .W !
"RTN","ONCSUBS",35,0)
 .W !?3,"You have changed the CS SCHEMA DISCRIMINATOR.  This change may"
"RTN","ONCSUBS",36,0)
 .W !?3,"affect the validity of the COLLABORATIVE STAGING data."
"RTN","ONCSUBS",37,0)
 .W !?3,"Therefore, the CS fields have been initialized and need to"
"RTN","ONCSUBS",38,0)
 .W !?3,"be re-entered."
"RTN","ONCSUBS",39,0)
 .W !
"RTN","ONCSUBS",40,0)
 .F PIECE=1:1:12 S $P(^ONCO(165.5,D0,"CS"),U,PIECE)=""
"RTN","ONCSUBS",41,0)
 .F PIECE=1:1:19 S $P(^ONCO(165.5,D0,"CS1"),U,PIECE)=""
"RTN","ONCSUBS",42,0)
 .F PIECE=1:1:18 S $P(^ONCO(165.5,D0,"CS2"),U,PIECE)=""
"RTN","ONCSUBS",43,0)
 ;for lacrimal gland c69.5
"RTN","ONCSUBS",44,0)
 I TX=67695,X="025",((HT4>7999&HT4<8577)!(HT4>8989&HT4<8951)!(HT4>8979&HT4<8982)) D
"RTN","ONCSUBS",45,0)
 .S $P(^ONCO(165.5,D0,2),U,20)=88
"RTN","ONCSUBS",46,0)
 .S $P(^ONCO(165.5,D0,2),U,25)=88
"RTN","ONCSUBS",47,0)
 .S $P(^ONCO(165.5,D0,2),U,26)=88
"RTN","ONCSUBS",48,0)
 .S $P(^ONCO(165.5,D0,2),U,27)=88
"RTN","ONCSUBS",49,0)
 .S $P(^ONCO(165.5,D0,2.1),U,1)=88
"RTN","ONCSUBS",50,0)
 .S $P(^ONCO(165.5,D0,2.1),U,2)=88
"RTN","ONCSUBS",51,0)
 .S $P(^ONCO(165.5,D0,2.1),U,3)=88
"RTN","ONCSUBS",52,0)
 .S $P(^ONCO(165.5,D0,2.1),U,4)=88
"RTN","ONCSUBS",53,0)
 K PIECE
"RTN","ONCSUBS",54,0)
 Q
"RTN","ONCSUBS",55,0)
 ;
"RTN","ONCSUBS",56,0)
HELP ;CS SCHEMA DISCRIMINATOR (165.5,240) XECUTABLE 'HELP'
"RTN","ONCSUBS",57,0)
 N HIEN,TX
"RTN","ONCSUBS",58,0)
 S TX=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCSUBS",59,0)
 Q:TX=""
"RTN","ONCSUBS",60,0)
 I $D(^ONCO(164,TX,15)) D  W ! Q
"RTN","ONCSUBS",61,0)
 .S HIEN=0 F  S HIEN=$O(^ONCO(164,TX,15,HIEN)) Q:HIEN'>0  W !?1,^ONCO(164,TX,15,HIEN,0)
"RTN","ONCSUBS",62,0)
 Q
"RTN","ONCSUBS",63,0)
 ;
"RTN","ONCSUBS",64,0)
CLEANUP ;Cleanup
"RTN","ONCSUBS",65,0)
 K D0,Y
"VER")
8.0^22.0
"^DD",160,160,19,0)
CAUSE OF DEATH^P80'O^ICD9(^1;3^Q
"^DD",160,160,19,.1)

"^DD",160,160,19,1,0)
^.1
"^DD",160,160,19,1,1,0)
160^C^MUMPS
"^DD",160,160,19,1,1,1)
S $P(^ONCO(160,DA,1),U,14)=""
"^DD",160,160,19,1,1,2)
Q
"^DD",160,160,19,1,1,"%D",0)
^^1^1^2990813^^^
"^DD",160,160,19,1,1,"%D",1,0)
If this field is entered, delete any data in STATE DEATH CERT field (19.1).
"^DD",160,160,19,1,1,"DT")
2990813
"^DD",160,160,19,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,19,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,19,10)

"^DD",160,160,19,20,0)
^.3LA^^0
"^DD",160,160,19,21,0)
^^5^5^2991201^^^^
"^DD",160,160,19,21,1,0)

"^DD",160,160,19,21,2,0)
Record the CAUSE OF DEATH listed on the death certificate.  Central
"^DD",160,160,19,21,3,0)
registries are the primary users of this data item.  Use the underlying
"^DD",160,160,19,21,4,0)
CAUSE OF DEATH (ICD code) identified by state health department.
"^DD",160,160,19,21,5,0)

"^DD",160,160,19,23,0)
^^1^1^2991201^^^
"^DD",160,160,19,23,1,0)
This field is referenced directly by UVSALIVE^ONCOCRFA.
"^DD",160,160,19,"DT")
3120619
"^DD",160,160,25,0)
COMORBIDITY/COMPLICATION #1^*P80'O^ICD9(^0;19^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25,12)
Record the patient's 1st pre-existing condition and/or complication using the ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.  Blank values will be converted to "00000" for NAACCR export.
"^DD",160,160,25,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25,21,0)
^.001^22^22^3120502^^^^
"^DD",160,160,25,21,1,0)
 
"^DD",160,160,25,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25,21,4,0)
hospital stay for the treatment of this cancer using ICD-CM codes.
"^DD",160,160,25,21,5,0)
All are considered secondary diagnoses.
"^DD",160,160,25,21,6,0)
 
"^DD",160,160,25,21,7,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25,21,8,0)
      leave this field blank.  When this item is extracted for
"^DD",160,160,25,21,9,0)
      export a blank value will be converted to "00000" as per
"^DD",160,160,25,21,10,0)
      the NAACCR instructions. 
"^DD",160,160,25,21,11,0)
 
"^DD",160,160,25,21,12,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25,21,13,0)
secondary diagnoses for this data item.
"^DD",160,160,25,21,14,0)
 
"^DD",160,160,25,21,15,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25,21,16,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25,21,17,0)
 
"^DD",160,160,25,21,18,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25,21,19,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91,
"^DD",160,160,25,21,20,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25,21,21,0)
 
"^DD",160,160,25,21,22,0)
For further information see FORDS pages 69-70.
"^DD",160,160,25,"DT")
3120608
"^DD",160,160,25.1,0)
COMORBIDITY/COMPLICATION #2^*P80'O^ICD9(^0;20^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.1,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.1,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.1,12)
Record the patient's 2nd pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.1,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.1,21,0)
^^17^17^3120502^
"^DD",160,160,25.1,21,1,0)
 
"^DD",160,160,25.1,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.1,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.1,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.1,21,5,0)
secondary diagnoses.
"^DD",160,160,25.1,21,6,0)
 
"^DD",160,160,25.1,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.1,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.1,21,9,0)
 
"^DD",160,160,25.1,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.1,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.1,21,12,0)
 
"^DD",160,160,25.1,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.1,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91,
"^DD",160,160,25.1,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.1,21,16,0)
 
"^DD",160,160,25.1,21,17,0)
For further information see FORDS page 71.
"^DD",160,160,25.1,"DT")
3120608
"^DD",160,160,25.2,0)
COMORBIDITY/COMPLICATION #3^*P80'O^ICD9(^0;21^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.2,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.2,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.2,12)
Record the patient's 3rd pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.2,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.2,21,0)
^^17^17^3120502^
"^DD",160,160,25.2,21,1,0)
 
"^DD",160,160,25.2,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.2,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.2,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.2,21,5,0)
secondary diagnoses.
"^DD",160,160,25.2,21,6,0)
 
"^DD",160,160,25.2,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.2,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.2,21,9,0)
 
"^DD",160,160,25.2,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.2,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.2,21,12,0)
 
"^DD",160,160,25.2,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.2,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91,
"^DD",160,160,25.2,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.2,21,16,0)
 
"^DD",160,160,25.2,21,17,0)
For further information see FORDS page 72.
"^DD",160,160,25.2,"DT")
3120608
"^DD",160,160,25.3,0)
COMORBIDITY/COMPLICATION #4^*P80'O^ICD9(^0;22^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.3,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.3,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.3,12)
Record the patient's 4th pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.3,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.3,21,0)
^^17^17^3120502^^
"^DD",160,160,25.3,21,1,0)
 
"^DD",160,160,25.3,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.3,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.3,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.3,21,5,0)
secondary diagnoses.
"^DD",160,160,25.3,21,6,0)
 
"^DD",160,160,25.3,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.3,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.3,21,9,0)
 
"^DD",160,160,25.3,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.3,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.3,21,12,0)
 
"^DD",160,160,25.3,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.3,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91,
"^DD",160,160,25.3,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.3,21,16,0)
 
"^DD",160,160,25.3,21,17,0)
For further information see FORDS page 73.
"^DD",160,160,25.3,"DT")
3120608
"^DD",160,160,25.4,0)
COMORBIDITY/COMPLICATION #5^*P80'O^ICD9(^0;23^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.4,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.4,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.4,12)
Record the patient's 5th pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.4,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.4,21,0)
^^17^17^3120502^
"^DD",160,160,25.4,21,1,0)
 
"^DD",160,160,25.4,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.4,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.4,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.4,21,5,0)
secondary diagnoses.
"^DD",160,160,25.4,21,6,0)
 
"^DD",160,160,25.4,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.4,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.4,21,9,0)
 
"^DD",160,160,25.4,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.4,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.4,21,12,0)
 
"^DD",160,160,25.4,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.4,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91,
"^DD",160,160,25.4,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.4,21,16,0)
 
"^DD",160,160,25.4,21,17,0)
For further information see FORDS page 74.
"^DD",160,160,25.4,"DT")
3120608
"^DD",160,160,25.5,0)
COMORBIDITY/COMPLICATION #6^*P80'O^ICD9(^0;24^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.5,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.5,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.5,12)
Record the patient's 6th pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.5,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.5,21,0)
^^17^17^3120502^
"^DD",160,160,25.5,21,1,0)
 
"^DD",160,160,25.5,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.5,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.5,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.5,21,5,0)
secondary diagnoses.
"^DD",160,160,25.5,21,6,0)
 
"^DD",160,160,25.5,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.5,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.5,21,9,0)
 
"^DD",160,160,25.5,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.5,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.5,21,12,0)
 
"^DD",160,160,25.5,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.5,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91,
"^DD",160,160,25.5,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.5,21,16,0)
 
"^DD",160,160,25.5,21,17,0)
For further information see FORDS page 75.
"^DD",160,160,25.5,"DT")
3120608
"^DD",160,160,25.6,0)
COMORBIDITY/COMPLICATION #7^*P80'O^ICD9(^0;28^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.6,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.6,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.6,12)
Record the patient's 7th pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.6,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.6,21,0)
^^17^17^3120502^
"^DD",160,160,25.6,21,1,0)
 
"^DD",160,160,25.6,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.6,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.6,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.6,21,5,0)
secondary diagnoses.
"^DD",160,160,25.6,21,6,0)
 
"^DD",160,160,25.6,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.6,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.6,21,9,0)
        
"^DD",160,160,25.6,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.6,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.6,21,12,0)
        
"^DD",160,160,25.6,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.6,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91, 
"^DD",160,160,25.6,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.6,21,16,0)
        
"^DD",160,160,25.6,21,17,0)
For further information see FORDS page 75A.
"^DD",160,160,25.6,"DT")
3120608
"^DD",160,160,25.7,0)
COMORBIDITY/COMPLICATION #8^*P80'O^ICD9(^0;29^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.7,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.7,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.7,12)
Record the patient's 8th pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.7,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.7,21,0)
^^17^17^3120502^
"^DD",160,160,25.7,21,1,0)
 
"^DD",160,160,25.7,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.7,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.7,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.7,21,5,0)
secondary diagnoses.
"^DD",160,160,25.7,21,6,0)
 
"^DD",160,160,25.7,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.7,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.7,21,9,0)
 
"^DD",160,160,25.7,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.7,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.7,21,12,0)
 
"^DD",160,160,25.7,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.7,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91, 
"^DD",160,160,25.7,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.7,21,16,0)
 
"^DD",160,160,25.7,21,17,0)
For further information see FORDS page 75B.
"^DD",160,160,25.7,"DT")
3120608
"^DD",160,160,25.8,0)
COMORBIDITY/COMPLICATION #9^*P80'O^ICD9(^0;30^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.8,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.8,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.8,12)
Record the patient's 9th pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.8,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.8,21,0)
^^17^17^3120502^
"^DD",160,160,25.8,21,1,0)
 
"^DD",160,160,25.8,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.8,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.8,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.8,21,5,0)
secondary diagnoses.
"^DD",160,160,25.8,21,6,0)
 
"^DD",160,160,25.8,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.8,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.8,21,9,0)
 
"^DD",160,160,25.8,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.8,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.8,21,12,0)
 
"^DD",160,160,25.8,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.8,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91, 
"^DD",160,160,25.8,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.8,21,16,0)
 
"^DD",160,160,25.8,21,17,0)
For further information see FORDS page 75C.
"^DD",160,160,25.8,"DT")
3120608
"^DD",160,160,25.9,0)
COMORBIDITY/COMPLICATION #10^*P80'O^ICD9(^0;31^S DIC("S")="D CC^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.9,2)
S Y(0)=Y I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.9,2.1)
I Y'="" N ONCICD,CODE,SPACE S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),Y=CODE_SPACE_$P(ONCICD,U,4)
"^DD",160,160,25.9,12)
Record the patient's 10th pre-existing condition and/or complication using ICD-CM codes.  If no comorbid conditions or complications were documented, leave this item blank.
"^DD",160,160,25.9,12.1)
S DIC("S")="D CC^ONCFUNC"
"^DD",160,160,25.9,21,0)
^^17^17^3120502^
"^DD",160,160,25.9,21,1,0)
 
"^DD",160,160,25.9,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.9,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.9,21,4,0)
hospital stay for the treatment of this cancer.  Both are considered
"^DD",160,160,25.9,21,5,0)
secondary diagnoses.
"^DD",160,160,25.9,21,6,0)
 
"^DD",160,160,25.9,21,7,0)
DO NOT record any neoplasms (ICD-CM codes 140-239.9) listed as
"^DD",160,160,25.9,21,8,0)
secondary diagnoses for this data item.
"^DD",160,160,25.9,21,9,0)
 
"^DD",160,160,25.9,21,10,0)
DO NOT record causes of injury and poisoning unrelated to the patient's
"^DD",160,160,25.9,21,11,0)
medical care (ICD-CM codes E800-E869.9, E880-E929.9, or E950-E999).
"^DD",160,160,25.9,21,12,0)
 
"^DD",160,160,25.9,21,13,0)
DO NOT record the following factors influencing health status and
"^DD",160,160,25.9,21,14,0)
contact with health services (ICD-CM codes V01-V07.1, V07.4-V09.91, 
"^DD",160,160,25.9,21,15,0)
V16-V21.9, V23.2-V25.3, V25.5-V43.89, V46-V50.4, or V50.8-V83.89).
"^DD",160,160,25.9,21,16,0)
 
"^DD",160,160,25.9,21,17,0)
For further information see FORDS page 75D.
"^DD",160,160,25.9,"DT")
3120608
"^DD",165.5,165.5,237.1,0)
FEE BASIS LOCATION^F^^2.3;11^K:$L(X)>30!($L(X)<3) X
"^DD",165.5,165.5,237.1,3)
Answer must be 3-30 characters in length.
"^DD",165.5,165.5,237.1,21,0)
^.001^6^6^3120524^^^^
"^DD",165.5,165.5,237.1,21,1,0)
In many cases the FACILITY REFERRED TO may not be the same place that 
"^DD",165.5,165.5,237.1,21,2,0)
the FEE BASIS treatment was performed.  Therefore, this field enables  
"^DD",165.5,165.5,237.1,21,3,0)
facilities to track where the patient was referred to.  This field  
"^DD",165.5,165.5,237.1,21,4,0)
is available to be displayed on ad hoc reports. 
"^DD",165.5,165.5,237.1,21,5,0)
 
"^DD",165.5,165.5,237.1,21,6,0)
Enter the name of the FEE BASIS LOCATION in free text.
"^DD",165.5,165.5,237.1,"DT")
3120524
"^DD",165.5,165.5,258,0)
INTENT OF CHEMOTHERAPY^S^0:No chemotherapy;1:Curative (primary);2:Curative (adjuvant);4:Palliative (pain control);5:Palliative (other);6:Prophylactic (no symptoms, preventive);8:Other, NOS;9:Unknown;^PM;8^Q
"^DD",165.5,165.5,258,1,0)
^.1
"^DD",165.5,165.5,258,1,1,0)
^^TRIGGER^165.5^259
"^DD",165.5,165.5,258,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=Y(0),X=X S X=X=0 I X S X=DIV S Y(1)=$S($D(^ONCO(165.5,D0,"PM")):^("PM"),1:"") S X=$P(Y(1),U,9),X=X S DIU=X K Y S X=DIV S X="0" X ^DD(165.5,258,1,1,1.4)
"^DD",165.5,165.5,258,1,1,1.4)
S DIH=$G(^ONCO(165.5,DIV(0),"PM")),DIV=X S $P(^("PM"),U,9)=DIV,DIH=165.5,DIG=259 D ^DICR
"^DD",165.5,165.5,258,1,1,2)
Q
"^DD",165.5,165.5,258,1,1,"CREATE CONDITION")
INTERNAL(INTENT OF CHEMOTHERAPY)=0
"^DD",165.5,165.5,258,1,1,"CREATE VALUE")
"0"
"^DD",165.5,165.5,258,1,1,"DELETE VALUE")
NO EFFECT
"^DD",165.5,165.5,258,1,1,"DT")
3120612
"^DD",165.5,165.5,258,1,1,"FIELD")
#259
"^DD",165.5,165.5,258,1,2,0)
^^TRIGGER^165.5^382
"^DD",165.5,165.5,258,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=Y(0),X=X S X=X=0 I X S X=DIV S Y(1)=$S($D(^ONCO(165.5,D0,"BLA2")):^("BLA2"),1:"") S X=$P(Y(1),U,41),X=X S DIU=X K Y S X=DIV S X="0" X ^DD(165.5,258,1,2,1.4)
"^DD",165.5,165.5,258,1,2,1.4)
S DIH=$G(^ONCO(165.5,DIV(0),"BLA2")),DIV=X S $P(^("BLA2"),U,41)=DIV,DIH=165.5,DIG=382 D ^DICR
"^DD",165.5,165.5,258,1,2,2)
Q
"^DD",165.5,165.5,258,1,2,"CREATE CONDITION")
INTERNAL(INTENT OF CHEMOTHERAPY)=0
"^DD",165.5,165.5,258,1,2,"CREATE VALUE")
"0"
"^DD",165.5,165.5,258,1,2,"DELETE VALUE")
NO EFFECT
"^DD",165.5,165.5,258,1,2,"DT")
3120612
"^DD",165.5,165.5,258,1,2,"FIELD")
#382
"^DD",165.5,165.5,258,1,3,0)
^^TRIGGER^165.5^272
"^DD",165.5,165.5,258,1,3,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=Y(0),X=X S X=X=0 I X S X=DIV S Y(1)=$S($D(^ONCO(165.5,D0,"PM")):^("PM"),1:"") S X=$P(Y(1),U,21),X=X S DIU=X K Y S X=DIV S X="0000000" X ^DD(165.5,258,1,3,1.4)
"^DD",165.5,165.5,258,1,3,1.4)
S DIH=$G(^ONCO(165.5,DIV(0),"PM")),DIV=X S $P(^("PM"),U,21)=DIV,DIH=165.5,DIG=272 D ^DICR
"^DD",165.5,165.5,258,1,3,2)
Q
"^DD",165.5,165.5,258,1,3,"CREATE CONDITION")
INTERNAL(INTENT OF CHEMOTHERAPY)=0
"^DD",165.5,165.5,258,1,3,"CREATE VALUE")
"0000000"
"^DD",165.5,165.5,258,1,3,"DELETE VALUE")
NO EFFECT
"^DD",165.5,165.5,258,1,3,"DT")
3120612
"^DD",165.5,165.5,258,1,3,"FIELD")
#272
"^DD",165.5,165.5,258,3)
Enter the documented intent of chemotherapy.
"^DD",165.5,165.5,258,5,1,0)
165.5^257^1
"^DD",165.5,165.5,258,21,0)
^.001^5^5^3120217^^^^
"^DD",165.5,165.5,258,21,1,0)
 
"^DD",165.5,165.5,258,21,2,0)
Code the intent of chemotherapy treatment.
"^DD",165.5,165.5,258,21,3,0)
                
"^DD",165.5,165.5,258,21,4,0)
This item is useful in assessing the appropriateness of treatment 
"^DD",165.5,165.5,258,21,5,0)
and correlating outcome with original intent of the treatment.
"^DD",165.5,165.5,258,"DT")
3120612
"^DD",165.5,165.5,267,0)
EGFR MUTATION TESTING^S^0:No testing;1:EGFR mutation positive, NOS;2:EGFR mutation negative;8:NA;9:Unknown/not documented;^PM;17^Q
"^DD",165.5,165.5,267,1,0)
^.1
"^DD",165.5,165.5,267,1,1,0)
^^TRIGGER^165.5^268
"^DD",165.5,165.5,267,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=Y(0),X=X S X=X="0" I X S X=DIV S Y(1)=$S($D(^ONCO(165.5,D0,"PM")):^("PM"),1:"") S X=$P(Y(1),U,18),X=X S DIU=X K Y S X=DIV S X="9" X ^DD(165.5,267,1,1,1.4)
"^DD",165.5,165.5,267,1,1,1.4)
S DIH=$G(^ONCO(165.5,DIV(0),"PM")),DIV=X S $P(^("PM"),U,18)=DIV,DIH=165.5,DIG=268 D ^DICR
"^DD",165.5,165.5,267,1,1,2)
Q
"^DD",165.5,165.5,267,1,1,"CREATE CONDITION")
INTERNAL(EGFR MUTATION TESTING)="0"
"^DD",165.5,165.5,267,1,1,"CREATE VALUE")
"9"
"^DD",165.5,165.5,267,1,1,"DELETE VALUE")
NO EFFECT
"^DD",165.5,165.5,267,1,1,"DT")
3120619
"^DD",165.5,165.5,267,1,1,"FIELD")
#268
"^DD",165.5,165.5,267,1,2,0)
^^TRIGGER^165.5^269
"^DD",165.5,165.5,267,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=Y(0),X=X S X=X="0" I X S X=DIV S Y(1)=$S($D(^ONCO(165.5,D0,"PM")):^("PM"),1:"") S X=$P(Y(1),U,19),X=X S DIU=X K Y S X=DIV S X="9" X ^DD(165.5,267,1,2,1.4)
"^DD",165.5,165.5,267,1,2,1.4)
S DIH=$G(^ONCO(165.5,DIV(0),"PM")),DIV=X S $P(^("PM"),U,19)=DIV,DIH=165.5,DIG=269 D ^DICR
"^DD",165.5,165.5,267,1,2,2)
Q
"^DD",165.5,165.5,267,1,2,"CREATE CONDITION")
INTERNAL(EGFR MUTATION TESTING)="0"
"^DD",165.5,165.5,267,1,2,"CREATE VALUE")
"9"
"^DD",165.5,165.5,267,1,2,"DELETE VALUE")
NO EFFECT
"^DD",165.5,165.5,267,1,2,"DT")
3120619
"^DD",165.5,165.5,267,1,2,"FIELD")
#269
"^DD",165.5,165.5,267,3)
Enter if an Epidermal Growth Factor Receptor (EGFR) mutation test was performed and the results.
"^DD",165.5,165.5,267,21,0)
^.001^4^4^3120619^^^
"^DD",165.5,165.5,267,21,1,0)
 
"^DD",165.5,165.5,267,21,2,0)
Records if the Pathology Department performed an EGFR
"^DD",165.5,165.5,267,21,3,0)
(Epidermal Growth Factor Receptor) mutation test and 
"^DD",165.5,165.5,267,21,4,0)
the results.
"^DD",165.5,165.5,267,"DT")
3120619
"^DD",165.5,165.5,272,0)
DATE CHEMOTHERAPY RECOMMENDED^DOX^^PM;21^D DFIT^ONCODSR
"^DD",165.5,165.5,272,2)
S Y(0)=Y S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,272,2.1)
S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,272,3)
Enter the date on which chemotherapy was recommended.
"^DD",165.5,165.5,272,5,1,0)
165.5^258^3
"^DD",165.5,165.5,272,21,0)
^^2^2^3110927^
"^DD",165.5,165.5,272,21,1,0)
 
"^DD",165.5,165.5,272,21,2,0)
Records the date on which chemotherapy was recommended.
"^DD",165.5,165.5,272,"DT")
3120424
"^DD",165.5,165.5,276,0)
ANDROGEN DEPRIVATION THERAPY^S^0:ADT not administered;1:GnRH/LHRH agonist;2:Antiandrogen;3:CYP17 inhibitor;4:Combination;8:NA;9:Unknown/not documented;^PM;25^Q
"^DD",165.5,165.5,276,3)
Enter the type of ADT administered.
"^DD",165.5,165.5,276,21,0)
^^15^15^3110927^
"^DD",165.5,165.5,276,21,1,0)
 
"^DD",165.5,165.5,276,21,2,0)
Records the type of ADT (Androgen Deprivation Therapy) administered.
"^DD",165.5,165.5,276,21,3,0)
 
"^DD",165.5,165.5,276,21,4,0)
1 GnRH/LHRH agonist
"^DD",165.5,165.5,276,21,5,0)
        Goserelin Acetate
"^DD",165.5,165.5,276,21,6,0)
        Leuprolide Acetate
"^DD",165.5,165.5,276,21,7,0)
 
"^DD",165.5,165.5,276,21,8,0)
2 Antiandrogen
"^DD",165.5,165.5,276,21,9,0)
        Bicalutamide
"^DD",165.5,165.5,276,21,10,0)
        Flutamide
"^DD",165.5,165.5,276,21,11,0)
        Nilutamide
"^DD",165.5,165.5,276,21,12,0)
 
"^DD",165.5,165.5,276,21,13,0)
3 CYP17 inhibitor
"^DD",165.5,165.5,276,21,14,0)
        Abiraterone acetate
"^DD",165.5,165.5,276,21,15,0)
        Ketoconazole
"^DD",165.5,165.5,276,"DT")
3120705
"^DD",165.5,165.5,277,0)
DATE ADT INITIATED^DOX^^PM;26^D DFIT^ONCODSR
"^DD",165.5,165.5,277,2)
S Y(0)=Y S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,277,2.1)
S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,277,3)
Enter the date Androgen Deprivation Therapy was initiated.
"^DD",165.5,165.5,277,21,0)
^.001^3^3^3110926^^^
"^DD",165.5,165.5,277,21,1,0)
 
"^DD",165.5,165.5,277,21,2,0)
Records the date on which ADT (Androgen Deprivation Therapy) was 
"^DD",165.5,165.5,277,21,3,0)
initiated.
"^DD",165.5,165.5,277,"DT")
3120424
"^DD",165.5,165.5,1400,0)
LNG CO-MORBID CONDITION 1^*P80'OX^ICD9(^LUN1;1^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1400,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400,12)
If the CO-MORBID CONDITIONS (Y/N) field is set to "NO", then no editing of this field is allowed.
"^DD",165.5,165.5,1400,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1400,21,0)
^^12^12^3120502^
"^DD",165.5,165.5,1400,21,1,0)
 
"^DD",165.5,165.5,1400,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1400,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1400,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1400,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1400,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1400,21,7,0)
 
"^DD",165.5,165.5,1400,21,8,0)
Allowable Codes: 000.00
"^DD",165.5,165.5,1400,21,9,0)
                 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1400,21,10,0)
 
"^DD",165.5,165.5,1400,21,11,0)
If no co-morbid conditions were documented, answer "No" to the
"^DD",165.5,165.5,1400,21,12,0)
CO-MORBID CONDITIONS (YES/NO) prompt.
"^DD",165.5,165.5,1400,"DT")
3120608
"^DD",165.5,165.5,1400.1,0)
LNG CO-MORBID CONDITION 2^*P80'O^ICD9(^LUN1;2^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1400.1,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.1,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.1,12)
If the CO-MORBID CONDITIONS (Y/N) field is set to "NO", then no editing of this field is allowed.
"^DD",165.5,165.5,1400.1,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1400.1,21,0)
^^10^10^3120502^
"^DD",165.5,165.5,1400.1,21,1,0)
 
"^DD",165.5,165.5,1400.1,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1400.1,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1400.1,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1400.1,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1400.1,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1400.1,21,7,0)
 
"^DD",165.5,165.5,1400.1,21,8,0)
Allowable Codes: 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1400.1,21,9,0)
 
"^DD",165.5,165.5,1400.1,21,10,0)
If there was only one co-morbid condition, leave this field blank.
"^DD",165.5,165.5,1400.1,"DT")
3120608
"^DD",165.5,165.5,1400.2,0)
LNG CO-MORBID CONDITION 3^*P80'O^ICD9(^LUN1;3^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1400.2,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.2,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.2,12)
If the CO-MORBID CONDITIONS (Y/N) field is set to "NO", then no editing of this field is allowed.
"^DD",165.5,165.5,1400.2,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1400.2,21,0)
^^10^10^3120502^
"^DD",165.5,165.5,1400.2,21,1,0)
 
"^DD",165.5,165.5,1400.2,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1400.2,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1400.2,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1400.2,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1400.2,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1400.2,21,7,0)
 
"^DD",165.5,165.5,1400.2,21,8,0)
Allowable Codes: 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1400.2,21,9,0)
 
"^DD",165.5,165.5,1400.2,21,10,0)
If there was only one co-morbid condition, leave this field blank.
"^DD",165.5,165.5,1400.2,"DT")
3120608
"^DD",165.5,165.5,1400.3,0)
LNG CO-MORBID CONDITION 4^*P80'O^ICD9(^LUN1;4^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1400.3,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.3,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.3,12)
If the CO-MORBID CONDITIONS (Y/N) field is set to "NO", then no editing of this field is allowed.
"^DD",165.5,165.5,1400.3,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1400.3,21,0)
^^10^10^3120502^
"^DD",165.5,165.5,1400.3,21,1,0)
 
"^DD",165.5,165.5,1400.3,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1400.3,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1400.3,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1400.3,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1400.3,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1400.3,21,7,0)
 
"^DD",165.5,165.5,1400.3,21,8,0)
Allowable Codes: 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1400.3,21,9,0)
 
"^DD",165.5,165.5,1400.3,21,10,0)
If there was only one co-morbid condition, leave this field blank.
"^DD",165.5,165.5,1400.3,"DT")
3120608
"^DD",165.5,165.5,1400.4,0)
LNG CO-MORBID CONDITION 5^*P80'O^ICD9(^LUN1;5^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1400.4,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.4,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.4,12)
If the CO-MORBID CONDITIONS (Y/N) field is set to "NO", then no editing of this field is allowed.
"^DD",165.5,165.5,1400.4,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1400.4,21,0)
^^10^10^3120502^
"^DD",165.5,165.5,1400.4,21,1,0)
 
"^DD",165.5,165.5,1400.4,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1400.4,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1400.4,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1400.4,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1400.4,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1400.4,21,7,0)
 
"^DD",165.5,165.5,1400.4,21,8,0)
Allowable Codes: 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1400.4,21,9,0)
 
"^DD",165.5,165.5,1400.4,21,10,0)
If there was only one co-morbid condition, leave this field blank.
"^DD",165.5,165.5,1400.4,"DT")
3120608
"^DD",165.5,165.5,1400.5,0)
LNG CO-MORBID CONDITION 6^*P80'O^ICD9(^LUN1;6^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1400.5,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.5,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1400.5,12)
If the CO-MORBID CONDITIONS (Y/N) field is set to "NO", then no editing of this field is allowed.
"^DD",165.5,165.5,1400.5,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1400.5,21,0)
^^10^10^3120502^
"^DD",165.5,165.5,1400.5,21,1,0)
 
"^DD",165.5,165.5,1400.5,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1400.5,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1400.5,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1400.5,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1400.5,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1400.5,21,7,0)
 
"^DD",165.5,165.5,1400.5,21,8,0)
Allowable Codes: 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1400.5,21,9,0)
 
"^DD",165.5,165.5,1400.5,21,10,0)
If there was only one co-morbid condition, leave this field blank.
"^DD",165.5,165.5,1400.5,"DT")
3120608
"^DD",165.5,165.5,1426,0)
LNG COMPLICATION #1^*P80'O^ICD9(^LUN2;33^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1426,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1426,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1426,21,0)
^^7^7^3120502^
"^DD",165.5,165.5,1426,21,1,0)
 
"^DD",165.5,165.5,1426,21,2,0)
This item describes the first medical complication acquired by
"^DD",165.5,165.5,1426,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1426,21,4,0)
Record valid ICD-CM codes.
"^DD",165.5,165.5,1426,21,5,0)
 
"^DD",165.5,165.5,1426,21,6,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1426,21,7,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1426,"DT")
3120608
"^DD",165.5,165.5,1426.1,0)
LNG COMPLICATION #2^*P80'O^ICD9(^LUN2;34^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1426.1,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.1,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.1,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1426.1,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1426.1,21,0)
^^6^6^3120502^
"^DD",165.5,165.5,1426.1,21,1,0)
 
"^DD",165.5,165.5,1426.1,21,2,0)
This item describes the second medical complication acquired by
"^DD",165.5,165.5,1426.1,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1426.1,21,4,0)
 
"^DD",165.5,165.5,1426.1,21,5,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1426.1,21,6,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1426.1,"DT")
3120608
"^DD",165.5,165.5,1426.2,0)
LNG COMPLICATION #3^*P80'O^ICD9(^LUN2;35^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1426.2,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.2,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.2,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1426.2,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1426.2,21,0)
^^6^6^3120502^
"^DD",165.5,165.5,1426.2,21,1,0)
 
"^DD",165.5,165.5,1426.2,21,2,0)
This item describes the third medical complication acquired by
"^DD",165.5,165.5,1426.2,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1426.2,21,4,0)
 
"^DD",165.5,165.5,1426.2,21,5,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1426.2,21,6,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1426.2,"DT")
3120608
"^DD",165.5,165.5,1426.3,0)
LNG COMPLICATION #4^*P80'O^ICD9(^LUN2;36^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1426.3,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.3,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.3,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1426.3,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1426.3,21,0)
^^6^6^3120502^
"^DD",165.5,165.5,1426.3,21,1,0)
 
"^DD",165.5,165.5,1426.3,21,2,0)
This item describes the fourth medical complication acquired by
"^DD",165.5,165.5,1426.3,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1426.3,21,4,0)
 
"^DD",165.5,165.5,1426.3,21,5,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1426.3,21,6,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1426.3,"DT")
3120608
"^DD",165.5,165.5,1426.4,0)
LNG COMPLICATION #5^*P80'O^ICD9(^LUN2;37^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1426.4,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.4,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1426.4,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1426.4,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1426.4,21,0)
^^6^6^3120502^
"^DD",165.5,165.5,1426.4,21,1,0)
 
"^DD",165.5,165.5,1426.4,21,2,0)
This item describes the fifth medical complication acquired by
"^DD",165.5,165.5,1426.4,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1426.4,21,4,0)
 
"^DD",165.5,165.5,1426.4,21,5,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1426.4,21,6,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1426.4,"DT")
3120608
"^DD",165.5,165.5,1571,0)
GAS CO-MORBID CONDITION 1^*P80'O^ICD9(^GAS2;33^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1571,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571,12)
Enter the ICD-CM code.
"^DD",165.5,165.5,1571,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1571,21,0)
^^12^12^3120502^
"^DD",165.5,165.5,1571,21,1,0)
 
"^DD",165.5,165.5,1571,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1571,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1571,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1571,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1571,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1571,21,7,0)
 
"^DD",165.5,165.5,1571,21,8,0)
Allowable Codes: 000.00
"^DD",165.5,165.5,1571,21,9,0)
                 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1571,21,10,0)
 
"^DD",165.5,165.5,1571,21,11,0)
If no co-morbid conditions were documented, then code 000.00 in this
"^DD",165.5,165.5,1571,21,12,0)
field and leave the remaining co-morbid fields blank.
"^DD",165.5,165.5,1571,"DT")
3120608
"^DD",165.5,165.5,1571.1,0)
GAS CO-MORBID CONDITION 2^*P80'O^ICD9(^GAS2;34^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1571.1,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.1,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.1,12)
Enter the ICD-CM code.
"^DD",165.5,165.5,1571.1,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1571.1,21,0)
^^12^12^3120502^
"^DD",165.5,165.5,1571.1,21,1,0)
 
"^DD",165.5,165.5,1571.1,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1571.1,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1571.1,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1571.1,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1571.1,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1571.1,21,7,0)
 
"^DD",165.5,165.5,1571.1,21,8,0)
Allowable Codes: 000.00
"^DD",165.5,165.5,1571.1,21,9,0)
                 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1571.1,21,10,0)
 
"^DD",165.5,165.5,1571.1,21,11,0)
If no co-morbid conditions were documented, then code 000.00 in this
"^DD",165.5,165.5,1571.1,21,12,0)
field and leave the remaining co-morbid fields blank.
"^DD",165.5,165.5,1571.1,"DT")
3120608
"^DD",165.5,165.5,1571.2,0)
GAS CO-MORBID CONDITION 3^*P80'O^ICD9(^GAS2;35^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1571.2,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.2,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.2,12)
Enter the ICD-CM code.
"^DD",165.5,165.5,1571.2,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1571.2,21,0)
^^13^13^3120502^
"^DD",165.5,165.5,1571.2,21,1,0)
 
"^DD",165.5,165.5,1571.2,21,2,0)
 
"^DD",165.5,165.5,1571.2,21,3,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1571.2,21,4,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1571.2,21,5,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1571.2,21,6,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1571.2,21,7,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1571.2,21,8,0)
 
"^DD",165.5,165.5,1571.2,21,9,0)
Allowable Codes: 000.00
"^DD",165.5,165.5,1571.2,21,10,0)
                 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1571.2,21,11,0)
 
"^DD",165.5,165.5,1571.2,21,12,0)
If no co-morbid conditions were documented, then code 000.00 in this
"^DD",165.5,165.5,1571.2,21,13,0)
field and leave the remaining co-morbid fields blank.
"^DD",165.5,165.5,1571.2,"DT")
3120608
"^DD",165.5,165.5,1571.3,0)
GAS CO-MORBID CONDITION 4^*P80'O^ICD9(^GAS2;36^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1571.3,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.3,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.3,12)
Enter the ICD-CM code.
"^DD",165.5,165.5,1571.3,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1571.3,21,0)
^^12^12^3120502^
"^DD",165.5,165.5,1571.3,21,1,0)
 
"^DD",165.5,165.5,1571.3,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1571.3,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1571.3,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1571.3,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1571.3,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1571.3,21,7,0)
 
"^DD",165.5,165.5,1571.3,21,8,0)
Allowable Codes: 000.00
"^DD",165.5,165.5,1571.3,21,9,0)
                 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1571.3,21,10,0)
 
"^DD",165.5,165.5,1571.3,21,11,0)
If no co-morbid conditions were documented, then code 000.00 in this
"^DD",165.5,165.5,1571.3,21,12,0)
field and leave the remaining co-morbid fields blank.
"^DD",165.5,165.5,1571.3,"DT")
3120608
"^DD",165.5,165.5,1571.4,0)
GAS CO-MORBID CONDITION 5^*P80'O^ICD9(^GAS2;37^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1571.4,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.4,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.4,12)
Enter the ICD-CM code.
"^DD",165.5,165.5,1571.4,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1571.4,21,0)
^^12^12^3120502^
"^DD",165.5,165.5,1571.4,21,1,0)
 
"^DD",165.5,165.5,1571.4,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1571.4,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1571.4,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1571.4,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1571.4,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1571.4,21,7,0)
 
"^DD",165.5,165.5,1571.4,21,8,0)
Allowable Codes: 000.00
"^DD",165.5,165.5,1571.4,21,9,0)
                 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1571.4,21,10,0)
 
"^DD",165.5,165.5,1571.4,21,11,0)
If no co-morbid conditions were documented, then code 000.00 in this
"^DD",165.5,165.5,1571.4,21,12,0)
field and leave the remaining co-morbid fields blank.
"^DD",165.5,165.5,1571.4,"DT")
3120608
"^DD",165.5,165.5,1571.5,0)
GAS CO-MORBID CONDITION 6^*P80'O^ICD9(^GAS2;38^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1571.5,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.5,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1571.5,12)
Enter the ICD-CM code.
"^DD",165.5,165.5,1571.5,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN1"")),U,76)'=0"
"^DD",165.5,165.5,1571.5,21,0)
^^12^12^3120502^
"^DD",165.5,165.5,1571.5,21,1,0)
 
"^DD",165.5,165.5,1571.5,21,2,0)
This field records a pre-existing medical condition that was present
"^DD",165.5,165.5,1571.5,21,3,0)
at the time of diagnosis for this cancer or the patient was first seen
"^DD",165.5,165.5,1571.5,21,4,0)
at your facility following diagnosis.  Report the ICD-CM code.  Pre-
"^DD",165.5,165.5,1571.5,21,5,0)
existing conditions should be coded; do NOT code conditions which the
"^DD",165.5,165.5,1571.5,21,6,0)
patient acquired while being treated for this condition.
"^DD",165.5,165.5,1571.5,21,7,0)
 
"^DD",165.5,165.5,1571.5,21,8,0)
Allowable Codes: 000.00
"^DD",165.5,165.5,1571.5,21,9,0)
                 001.00 thru 994.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1571.5,21,10,0)
 
"^DD",165.5,165.5,1571.5,21,11,0)
If no co-morbid conditions were documented, then code 000.00 in this
"^DD",165.5,165.5,1571.5,21,12,0)
field and leave the remaining co-morbid fields blank.
"^DD",165.5,165.5,1571.5,"DT")
3120608
"^DD",165.5,165.5,1579,0)
GAS COMPLICATION #1^*P80'O^ICD9(^GAS2;48^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1579,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1579,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1579,21,0)
^^7^7^3120502^
"^DD",165.5,165.5,1579,21,1,0)
 
"^DD",165.5,165.5,1579,21,2,0)
This item describes the first medical complication acquired by
"^DD",165.5,165.5,1579,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1579,21,4,0)
Record valid ICD-CM codes.
"^DD",165.5,165.5,1579,21,5,0)
 
"^DD",165.5,165.5,1579,21,6,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1579,21,7,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1579,"DT")
3120608
"^DD",165.5,165.5,1579.1,0)
GAS COMPLICATION #2^*P80'O^ICD9(^GAS2;49^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1579.1,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.1,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.1,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1579.1,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1579.1,21,0)
^^7^7^3120502^
"^DD",165.5,165.5,1579.1,21,1,0)
 
"^DD",165.5,165.5,1579.1,21,2,0)
This item describes the first medical complication acquired by
"^DD",165.5,165.5,1579.1,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1579.1,21,4,0)
Record valid ICD-CM codes.
"^DD",165.5,165.5,1579.1,21,5,0)
 
"^DD",165.5,165.5,1579.1,21,6,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1579.1,21,7,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1579.1,"DT")
3120608
"^DD",165.5,165.5,1579.2,0)
GAS COMPLICATION #3^*P80'O^ICD9(^GAS2;50^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1579.2,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.2,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.2,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1579.2,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1579.2,21,0)
^^7^7^3120502^
"^DD",165.5,165.5,1579.2,21,1,0)
 
"^DD",165.5,165.5,1579.2,21,2,0)
This item describes the first medical complication acquired by
"^DD",165.5,165.5,1579.2,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1579.2,21,4,0)
Record valid ICD-CM codes.
"^DD",165.5,165.5,1579.2,21,5,0)
 
"^DD",165.5,165.5,1579.2,21,6,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1579.2,21,7,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1579.2,"DT")
3120608
"^DD",165.5,165.5,1579.3,0)
GAS COMPLICATION #4^*P80'O^ICD9(^GAS2;51^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",165.5,165.5,1579.3,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.3,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.3,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1579.3,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1579.3,21,0)
^^7^7^3120502^
"^DD",165.5,165.5,1579.3,21,1,0)
 
"^DD",165.5,165.5,1579.3,21,2,0)
This item describes the first medical complication acquired by
"^DD",165.5,165.5,1579.3,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1579.3,21,4,0)
Record valid ICD-CM codes.
"^DD",165.5,165.5,1579.3,21,5,0)
 
"^DD",165.5,165.5,1579.3,21,6,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1579.3,21,7,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1579.3,"DT")
3120608
"^DD",165.5,165.5,1579.4,0)
GAS COMPLICATION #5^*P80'O^ICD9(^GAS2;52^S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",165.5,165.5,1579.4,2)
S Y(0)=Y I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.4,2.1)
I Y'="" N ONCICD S ONCICD=$$ICDDX^ICDCODE(Y) S:(ONCICD=-1) Y=-1 S:(Y'=-1) Y=$P(ONCICD,U,2)_" "_$P(ONCICD,U,4)
"^DD",165.5,165.5,1579.4,12)
If the COMPLICATIONS (YES/NO) field is set to "No", then no editing of this field is allowed.
"^DD",165.5,165.5,1579.4,12.1)
S DIC("S")="I $P($G(^ONCO(165.5,DA,""LUN2"")),U,40)'=0"
"^DD",165.5,165.5,1579.4,21,0)
^^7^7^3120502^
"^DD",165.5,165.5,1579.4,21,1,0)
 
"^DD",165.5,165.5,1579.4,21,2,0)
This item describes the first medical complication acquired by
"^DD",165.5,165.5,1579.4,21,3,0)
the patient during or resulting from the first course of therapy.
"^DD",165.5,165.5,1579.4,21,4,0)
Record valid ICD-CM codes.
"^DD",165.5,165.5,1579.4,21,5,0)
 
"^DD",165.5,165.5,1579.4,21,6,0)
Allowable Codes: 001.00 - 999.90 (valid ICD-CM codes)
"^DD",165.5,165.5,1579.4,21,7,0)
                 E930.0 - E949.7 (valid ICD-CM adverse effect codes)
"^DD",165.5,165.5,1579.4,"DT")
3120608
"BLD",8344,6)
^56
**END**
**END**
