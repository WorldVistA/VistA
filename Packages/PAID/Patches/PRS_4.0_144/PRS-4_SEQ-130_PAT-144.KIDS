EMERGENCY Released PRS*4*144 SEQ #130
Extracted from mail message
**KIDS**:PRS*4.0*144^

**INSTALL NAME**
PRS*4.0*144
"BLD",9874,0)
PRS*4.0*144^PAID^0^3141210^y
"BLD",9874,1,0)
^^3^3^3141208^
"BLD",9874,1,1,0)
Presidential Executive Order declares December 26, 2014 as an official 
"BLD",9874,1,2,0)
federal holiday.  PAID ETA must be updated to reflect this additional  
"BLD",9874,1,3,0)
holiday.
"BLD",9874,4,0)
^9.64PA^^
"BLD",9874,6.3)
12
"BLD",9874,"INID")
^n
"BLD",9874,"INIT")
START^PRSXP144
"BLD",9874,"KRN",0)
^9.67PA^779.2^20
"BLD",9874,"KRN",.4,0)
.4
"BLD",9874,"KRN",.401,0)
.401
"BLD",9874,"KRN",.402,0)
.402
"BLD",9874,"KRN",.403,0)
.403
"BLD",9874,"KRN",.5,0)
.5
"BLD",9874,"KRN",.84,0)
.84
"BLD",9874,"KRN",3.6,0)
3.6
"BLD",9874,"KRN",3.8,0)
3.8
"BLD",9874,"KRN",9.2,0)
9.2
"BLD",9874,"KRN",9.8,0)
9.8
"BLD",9874,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9874,"KRN",9.8,"NM",1,0)
PRS8HD^^0^B31839963
"BLD",9874,"KRN",9.8,"NM","B","PRS8HD",1)

"BLD",9874,"KRN",19,0)
19
"BLD",9874,"KRN",19.1,0)
19.1
"BLD",9874,"KRN",101,0)
101
"BLD",9874,"KRN",409.61,0)
409.61
"BLD",9874,"KRN",771,0)
771
"BLD",9874,"KRN",779.2,0)
779.2
"BLD",9874,"KRN",870,0)
870
"BLD",9874,"KRN",8989.51,0)
8989.51
"BLD",9874,"KRN",8989.52,0)
8989.52
"BLD",9874,"KRN",8994,0)
8994
"BLD",9874,"KRN","B",.4,.4)

"BLD",9874,"KRN","B",.401,.401)

"BLD",9874,"KRN","B",.402,.402)

"BLD",9874,"KRN","B",.403,.403)

"BLD",9874,"KRN","B",.5,.5)

"BLD",9874,"KRN","B",.84,.84)

"BLD",9874,"KRN","B",3.6,3.6)

"BLD",9874,"KRN","B",3.8,3.8)

"BLD",9874,"KRN","B",9.2,9.2)

"BLD",9874,"KRN","B",9.8,9.8)

"BLD",9874,"KRN","B",19,19)

"BLD",9874,"KRN","B",19.1,19.1)

"BLD",9874,"KRN","B",101,101)

"BLD",9874,"KRN","B",409.61,409.61)

"BLD",9874,"KRN","B",771,771)

"BLD",9874,"KRN","B",779.2,779.2)

"BLD",9874,"KRN","B",870,870)

"BLD",9874,"KRN","B",8989.51,8989.51)

"BLD",9874,"KRN","B",8989.52,8989.52)

"BLD",9874,"KRN","B",8994,8994)

"BLD",9874,"QDEF")
^^^^^^^^^^YES
"BLD",9874,"QUES",0)
^9.62^^
"BLD",9874,"REQB",0)
^9.611^1^1
"BLD",9874,"REQB",1,0)
PRS*4.0*139^2
"BLD",9874,"REQB","B","PRS*4.0*139",1)

"INIT")
START^PRSXP144
"MBREQ")
0
"PKG",408,-1)
1^1
"PKG",408,0)
PAID^PRS^PAID
"PKG",408,20,0)
^9.402P^^
"PKG",408,22,0)
^9.49I^1^1
"PKG",408,22,1,0)
4.0^2950912^2960130
"PKG",408,22,1,"PAH",1,0)
144^3141210
"PKG",408,22,1,"PAH",1,1,0)
^^3^3^3141210
"PKG",408,22,1,"PAH",1,1,1,0)
Presidential Executive Order declares December 26, 2014 as an official 
"PKG",408,22,1,"PAH",1,1,2,0)
federal holiday.  PAID ETA must be updated to reflect this additional  
"PKG",408,22,1,"PAH",1,1,3,0)
holiday.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PRS8HD")
0^1^B31839963^B31179285
"RTN","PRS8HD",1,0)
PRS8HD ;HISC/MGD-DECOMPOSITION, DETERMINE HOLIDAYS ;12/17/2008
"RTN","PRS8HD",2,0)
 ;;4.0;PAID;**4,33,72,88,94,98,113,118,122,123,139,144**;Sep 21, 1995;Build 12
"RTN","PRS8HD",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRS8HD",4,0)
 ;
"RTN","PRS8HD",5,0)
 ;This routine is used to determine legal holidays.  One calls
"RTN","PRS8HD",6,0)
 ;^PRS8HD with nothing defined if one wants all holidays in the
"RTN","PRS8HD",7,0)
 ;next year.  Tag EN can be called with PRS8D defined as a VA
"RTN","PRS8HD",8,0)
 ;FileManager format date from which to calculate holidays.  See
"RTN","PRS8HD",9,0)
 ;later documentation in this routine regarding further processing
"RTN","PRS8HD",10,0)
 ;instructions.
"RTN","PRS8HD",11,0)
 ;
"RTN","PRS8HD",12,0)
 K PRS8D
"RTN","PRS8HD",13,0)
 ;
"RTN","PRS8HD",14,0)
EN ;--- entry point
"RTN","PRS8HD",15,0)
 ;    pass PRS8D as date you want in VA FileMan format
"RTN","PRS8HD",16,0)
 ;    -  where only year, i.e., 92 is passed, the first day is presumed
"RTN","PRS8HD",17,0)
 ;    pass PRS8D(0) containing a holiday code if specific one wanted
"RTN","PRS8HD",18,0)
 ;    if neither PRS8D or PRS8D(0) passed DT is assumed and all
"RTN","PRS8HD",19,0)
 ;    holidays for next year are returned
"RTN","PRS8HD",20,0)
 ;
"RTN","PRS8HD",21,0)
 N CT,D,DD,DDQ,DN,DX,NY,%Y,PRSDT1 ;new variables used
"RTN","PRS8HD",22,0)
 K HD,HO,PRS8D(1) ;remove existing array if there
"RTN","PRS8HD",23,0)
 I '($D(DT)#2) D DT^DICRW ;get DT if none
"RTN","PRS8HD",24,0)
 S X=$G(PRS8D) I X']"" S X=DT ;use DT if no X
"RTN","PRS8HD",25,0)
 K %DT D ^%DT S X=Y I Y'>0 S PRS8D(1)=-1 G END ;bad date
"RTN","PRS8HD",26,0)
 I '+$E(X,4,5) S X=$E(X,1,3)_"01"_$S(+$E(X,6,7):$E(X,6,7),1:"01")
"RTN","PRS8HD",27,0)
 S PRSDT1=X
"RTN","PRS8HD",28,0)
 ;
"RTN","PRS8HD",29,0)
 ; Build sorted list (by month) of recurring holidays in array H()
"RTN","PRS8HD",30,0)
 ; If specific holiday code passed just get it, else get all.
"RTN","PRS8HD",31,0)
 ; Note that holiday code "E" is not a recurring holiday so it is
"RTN","PRS8HD",32,0)
 ; handled in another section after the recurring holidays are done.
"RTN","PRS8HD",33,0)
 S (CT,NY)=0,X1=$G(PRS8D(0)),X2="^K^P^M^I^L^C^V^T^X^N^"
"RTN","PRS8HD",34,0)
 I X1]"",X2[("^"_X1_"^") S X1=$F(X2,X1)-1\2+1,J=$P($T(H+(X1+6)),";;",2),H($P(J,"^",2),$P(J,"^",1))=$P(J,"^",3,5)
"RTN","PRS8HD",35,0)
 E  I X1'="E" F I=1:1 S J=$P($T(H+(I+7)),";;",2) Q:J=""  S H($P(J,"^",2),$P(J,"^",1))=$P(J,"^",3,5) ;get dates by month
"RTN","PRS8HD",36,0)
 ;
"RTN","PRS8HD",37,0)
 ; build output arrays for the recurring holidays
"RTN","PRS8HD",38,0)
PASS ;--- come back here for a second pass if necessary
"RTN","PRS8HD",39,0)
 S DN=X,D(1)=+$E(X,1,3),D(2)=0 F  S D(2)=$O(H(D(2))),D(3)="" Q:'D(2)  F  S D(3)=$O(H(D(2),D(3))) Q:D(3)=""  D
"RTN","PRS8HD",40,0)
 .S DD=H(D(2),D(3))
"RTN","PRS8HD",41,0)
 .S D=D(1)+($S(D(2)<(+$E(DN,4,5)):1,1:0))_$E("00",0,2-$L(D(2)))_D(2)_$E(DN,6,7)
"RTN","PRS8HD",42,0)
 .I '$P(DD,"^",2) D
"RTN","PRS8HD",43,0)
 ..S (DX,X)=$E(D,1,5)_$E("00",0,2-$L(+$P(DD,"^",1)))_+$P(DD,"^",1)
"RTN","PRS8HD",44,0)
 ..D DW^%DTC S Y=%Y,X=DX
"RTN","PRS8HD",45,0)
 ..Q  ;I Y,Y'=6 Q
"RTN","PRS8HD",46,0)
 ..S X2=$S('Y:"",1:"-")_1,X1=X D C^%DTC
"RTN","PRS8HD",47,0)
 .E  D
"RTN","PRS8HD",48,0)
 ..S (DX,X)=$E(D,1,5)_"01"
"RTN","PRS8HD",49,0)
 ..D DW^%DTC S Y=%Y,X=DX
"RTN","PRS8HD",50,0)
 ..I Y'=+DD D
"RTN","PRS8HD",51,0)
 ...I +Y<+DD S X2=DD-Y
"RTN","PRS8HD",52,0)
 ...E  S X2=7-(+Y)+DD
"RTN","PRS8HD",53,0)
 ...S X1=X D C^%DTC
"RTN","PRS8HD",54,0)
 ..I +$P(DD,"^",2)=1 S DX=X Q
"RTN","PRS8HD",55,0)
 ..S DD(1)=X,(DD(2),DD(3),DDQ)=0 F  Q:DD(2)&(DDQ)  D
"RTN","PRS8HD",56,0)
 ...S X2=7,X1=DD(1) D C^%DTC
"RTN","PRS8HD",57,0)
 ...S DD(2)=X,DDQ=1
"RTN","PRS8HD",58,0)
 ...I $E(DD(1),1,5)=$E(X,1,5) S DD(1)=X,DDQ=0
"RTN","PRS8HD",59,0)
 ...S DD(3)=DD(3)+1 I DD(3)=2,+$P(DD,"^",2)=3 S DDQ=1
"RTN","PRS8HD",60,0)
 ...I DD(3)=1,+$P(DD,"^",2)=4 S DDQ=1
"RTN","PRS8HD",61,0)
 ...I DD(3)=3,+$P(DD,"^",2)=5 S DDQ=1
"RTN","PRS8HD",62,0)
 ..S (DX,X)=DD(1)
"RTN","PRS8HD",63,0)
 .D DW^%DTC S Y=%Y,X=DX
"RTN","PRS8HD",64,0)
 .Q:X<DN
"RTN","PRS8HD",65,0)
 .D SET
"RTN","PRS8HD",66,0)
 .I +DD=+D(2)=+$E(DN,4,5),$P(DD,"^",3)="N" D
"RTN","PRS8HD",67,0)
 ..S NY=NY+1 Q:NY>1
"RTN","PRS8HD",68,0)
 ..S X=$E(DN,1,3)+1,(DX,X)=X_"0101"
"RTN","PRS8HD",69,0)
 ..D DW^%DTC S Y=%Y,X=DX
"RTN","PRS8HD",70,0)
 ..Q  ;Q:Y'=6
"RTN","PRS8HD",71,0)
 ..S X2=-1,X1=X D C^%DTC S DX=X
"RTN","PRS8HD",72,0)
 ..D DW^%DTC S Y=%Y,X=DX
"RTN","PRS8HD",73,0)
 ..D SET
"RTN","PRS8HD",74,0)
 .K H(D(2),D(3))
"RTN","PRS8HD",75,0)
 I $O(H(0))>0 D
"RTN","PRS8HD",76,0)
 .S X=+$E(DN,4,5)
"RTN","PRS8HD",77,0)
 .S X=$S(X=12:1,1:(X+1))
"RTN","PRS8HD",78,0)
 .S X1=$E(DN,1,3)+$S(X=1:1,1:0),X=X1_$E("00",0,2-$L(X))_X_"01"
"RTN","PRS8HD",79,0)
 .D PASS
"RTN","PRS8HD",80,0)
 ;
"RTN","PRS8HD",81,0)
 ;new section to add applicable extra (non-recurring) holidays
"RTN","PRS8HD",82,0)
 I $G(PRS8D(0))=""!($G(PRS8D(0))="E") D
"RTN","PRS8HD",83,0)
 . N PRSDT2,PRSI,PRSX
"RTN","PRS8HD",84,0)
 . S PRSDT2=$$FMADD^XLFDT(PRSDT1,364)
"RTN","PRS8HD",85,0)
 . ;
"RTN","PRS8HD",86,0)
 . ; loop thru the extra holiday list
"RTN","PRS8HD",87,0)
 . F PRSI=1:1 S PRSX=$P($T(EHOL+PRSI),";;",2) Q:PRSX=""  D
"RTN","PRS8HD",88,0)
 . . Q:$P(PRSX,U)<PRSDT1  ; skip if before input date
"RTN","PRS8HD",89,0)
 . . Q:$P(PRSX,U)>PRSDT2  ; skip if not within the next year
"RTN","PRS8HD",90,0)
 . . ; need to add this extra holiday to list
"RTN","PRS8HD",91,0)
 . . S HD($P(PRSX,U))=$P(PRSX,U,2,3)
"RTN","PRS8HD",92,0)
 . . S HO("E",$P(PRSX,U))=""
"RTN","PRS8HD",93,0)
 . . S CT=CT+1
"RTN","PRS8HD",94,0)
 . ;
"RTN","PRS8HD",95,0)
 . ; quit if site is not in the Washington DC area
"RTN","PRS8HD",96,0)
 . Q:"^101^688^"'[(U_$E($$STA^XUAF4(+$$KSP^XUPARAM("INST")),1,3)_U)
"RTN","PRS8HD",97,0)
 . ;
"RTN","PRS8HD",98,0)
 . ; loop thru additional DC location extra holiday list
"RTN","PRS8HD",99,0)
 . F PRSI=1:1 S PRSX=$P($T(EHOLDC+PRSI),";;",2) Q:PRSX=""  D
"RTN","PRS8HD",100,0)
 . . Q:$P(PRSX,U)<PRSDT1  ; skip if before input date
"RTN","PRS8HD",101,0)
 . . Q:$P(PRSX,U)>PRSDT2  ; skip if not within the next year
"RTN","PRS8HD",102,0)
 . . ; need to add this extra holiday to list
"RTN","PRS8HD",103,0)
 . . S HD($P(PRSX,U))=$P(PRSX,U,2,3)
"RTN","PRS8HD",104,0)
 . . S HO("E",$P(PRSX,U))=""
"RTN","PRS8HD",105,0)
 . . S CT=CT+1
"RTN","PRS8HD",106,0)
 ;
"RTN","PRS8HD",107,0)
 S PRS8D(1)=$S(CT:+CT,1:-1)
"RTN","PRS8HD",108,0)
 ;
"RTN","PRS8HD",109,0)
END ;--- That's all folks
"RTN","PRS8HD",110,0)
 K %DT,H,I,J,X,X1,X2,Y Q
"RTN","PRS8HD",111,0)
 ;
"RTN","PRS8HD",112,0)
SET ;--- set nodes
"RTN","PRS8HD",113,0)
 S HD(X)=D(3)_"^"_$P("SUN^MON^TUES^WEDNES^THURS^FRI^SATUR","^",Y+1)_"DAY",HO($P(DD,"^",3),X)="",CT=CT+1 Q
"RTN","PRS8HD",114,0)
 ;
"RTN","PRS8HD",115,0)
H ;--- Actual Holidays
"RTN","PRS8HD",116,0)
 ;    PIECE1     PIECE2       PIECE3       PIECE4      PIECE5    PIECE6
"RTN","PRS8HD",117,0)
 ;    actual     month        exact day    0=exact     holiday   how
"RTN","PRS8HD",118,0)
 ;    holiday                 day-of-week  1=1st wk    code      deter-
"RTN","PRS8HD",119,0)
 ;                                         2=last wk             mined
"RTN","PRS8HD",120,0)
 ;    - pc3 and 4 are used in concert      3=3rd wk
"RTN","PRS8HD",121,0)
 ;                                         4=2nd wk,5=4th wk
"RTN","PRS8HD",122,0)
 ;
"RTN","PRS8HD",123,0)
 ;;M.L. King's Birthday^1^1^3^K^3rd Monday in January
"RTN","PRS8HD",124,0)
 ;;President's Day^2^1^3^P^3rd Monday in February
"RTN","PRS8HD",125,0)
 ;;Memorial Day^5^1^2^M^Last Monday in May
"RTN","PRS8HD",126,0)
 ;;Independence Day^7^4^0^I^July 4
"RTN","PRS8HD",127,0)
 ;;Labor Day^9^1^1^L^First Monday in September
"RTN","PRS8HD",128,0)
 ;;Columbus Day^10^1^4^C^Second Monday in October
"RTN","PRS8HD",129,0)
 ;;Veterans Day^11^11^0^V^November 11
"RTN","PRS8HD",130,0)
 ;;Thanksgiving Day^11^4^5^T^Fourth Thursday in November
"RTN","PRS8HD",131,0)
 ;;Christmas Day^12^25^0^X^December 25
"RTN","PRS8HD",132,0)
 ;;New Year's Day^1^1^0^N^January 1
"RTN","PRS8HD",133,0)
 ;
"RTN","PRS8HD",134,0)
 ;-Holiday Codes
"RTN","PRS8HD",135,0)
 ;    - K = M.L. King         P = President's Day        M = Memorial Day
"RTN","PRS8HD",136,0)
 ;    - I = Independence      L = Labor Day              C = Columbus Day
"RTN","PRS8HD",137,0)
 ;    - V = Veterans Day      T = Thanksgiving           X = Christmas
"RTN","PRS8HD",138,0)
 ;    - E = Extra Holiday (non-recurring)                N = New Year's
"RTN","PRS8HD",139,0)
 ;
"RTN","PRS8HD",140,0)
 ;HD(HOLIDAY) is returned by routine equal to "literal^Dow"
"RTN","PRS8HD",141,0)
 ;HO("HOLIDAY CODE",HOLIDAY) is returned equal to null
"RTN","PRS8HD",142,0)
 ;PRS8D* is returned in value passed
"RTN","PRS8HD",143,0)
 ;PRS8D(1) is returned equal to # holidays found or -1 if none
"RTN","PRS8HD",144,0)
 ;
"RTN","PRS8HD",145,0)
 ;---------------------------------------------------------------------
"RTN","PRS8HD",146,0)
 ;New Section Added for Extra Non-Recurring Holidays (holiday code E)
"RTN","PRS8HD",147,0)
 ;
"RTN","PRS8HD",148,0)
 ; format is
"RTN","PRS8HD",149,0)
 ;   FM date of the declared holiday^text^day of week^patch number
"RTN","PRS8HD",150,0)
 ;
"RTN","PRS8HD",151,0)
 ; The following list will need to be updated for years that have an
"RTN","PRS8HD",152,0)
 ; extra Christmas Holiday declared or and declared memorial day for
"RTN","PRS8HD",153,0)
 ; past presidents.
"RTN","PRS8HD",154,0)
 ;
"RTN","PRS8HD",155,0)
EHOL ;
"RTN","PRS8HD",156,0)
 ;;2940427^President Nixon Funeral^WEDNESDAY^PRS*3.1*2
"RTN","PRS8HD",157,0)
 ;;2971226^Extra Christmas Day^FRIDAY^PRS*4*33
"RTN","PRS8HD",158,0)
 ;;3011224^Extra Christmas Day^MONDAY^PRS*4*72
"RTN","PRS8HD",159,0)
 ;;3031226^Extra Christmas Day^FRIDAY^PRS*4*88
"RTN","PRS8HD",160,0)
 ;;3040611^President Reagan Funeral^FRIDAY^PRS*4*94
"RTN","PRS8HD",161,0)
 ;;3070102^President Ford Funeral^TUESDAY^PRS*4*113
"RTN","PRS8HD",162,0)
 ;;3071224^Extra Christmas Day^MONDAY^PRS*4*118
"RTN","PRS8HD",163,0)
 ;;3081226^Extra Christmas Day^FRIDAY^PRS*4*122
"RTN","PRS8HD",164,0)
 ;;3121224^Extra Christmas Day^MONDAY^PRS*4*139
"RTN","PRS8HD",165,0)
 ;;3141226^Extra Christmas Day^FRIDAY^PRS*4*144
"RTN","PRS8HD",166,0)
 ;
"RTN","PRS8HD",167,0)
 ;---------------------------------------------------------------------
"RTN","PRS8HD",168,0)
 ;New Section Added for Extra Non-Recurring Holidays (holiday code E)
"RTN","PRS8HD",169,0)
 ;that are location specifc to the DC area
"RTN","PRS8HD",170,0)
 ;
"RTN","PRS8HD",171,0)
 ; format is
"RTN","PRS8HD",172,0)
 ;   FM date of the declared holiday^text^day of week^patch number
"RTN","PRS8HD",173,0)
 ;
"RTN","PRS8HD",174,0)
 ; The following list will need to be updated when additional specific
"RTN","PRS8HD",175,0)
 ; holidays are declared that only apply to the DC area
"RTN","PRS8HD",176,0)
 ;
"RTN","PRS8HD",177,0)
EHOLDC ;
"RTN","PRS8HD",178,0)
 ;;3050120^Presidential Inauguration Day^THURSDAY^PRS*4*98
"RTN","PRS8HD",179,0)
 ;;3090120^Presidential Inauguration Day^TUESDAY^PRS*4*123
"RTN","PRS8HD",180,0)
 ;
"RTN","PRS8HD",181,0)
 ;PRS8HD
"RTN","PRSXP144")
0^^B4444865^n/a
"RTN","PRSXP144",1,0)
PRSXP144 ;ALB/BJR-SET EXTRA HOLIDAY W/ PP OPEN ;12/8/2014
"RTN","PRSXP144",2,0)
 ;;4.0;PAID;**144**;Sep 21, 1995;Build 12
"RTN","PRSXP144",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRSXP144",4,0)
 ;
"RTN","PRSXP144",5,0)
 Q
"RTN","PRSXP144",6,0)
 ;
"RTN","PRSXP144",7,0)
START ; Declare 12/26/2014 as an extra holiday for Christmas
"RTN","PRSXP144",8,0)
 ;
"RTN","PRSXP144",9,0)
 D BMES^XPDUTL("Checking PP 14-25")
"RTN","PRSXP144",10,0)
 N DFN,DUP,HOL,NOW,PPI,TT,%
"RTN","PRSXP144",11,0)
 S PPI=$O(^PRST(458,"B","14-25",0))
"RTN","PRSXP144",12,0)
 S HOL(3141226)=13 ; Set 12/26/14 into HOL array
"RTN","PRSXP144",13,0)
 I 'PPI D  Q
"RTN","PRSXP144",14,0)
 .  D BMES^XPDUTL("Pay Period 14-25 not found in File 458.")
"RTN","PRSXP144",15,0)
 D NOW^%DTC S NOW=%
"RTN","PRSXP144",16,0)
 S DFN=0
"RTN","PRSXP144",17,0)
 F  S DFN=$O(^PRST(458,PPI,"E",DFN)) Q:DFN'>0  D
"RTN","PRSXP144",18,0)
 . S TT="HX",DUP=0
"RTN","PRSXP144",19,0)
 . D E^PRSAPPH
"RTN","PRSXP144",20,0)
 ;
"RTN","PRSXP144",21,0)
 ; Quit if PP 14-26 is not opened.  The Open Next Pay Period option
"RTN","PRSXP144",22,0)
 ; will automatically post their holiday.
"RTN","PRSXP144",23,0)
 ; 
"RTN","PRSXP144",24,0)
PP26 ;
"RTN","PRSXP144",25,0)
 I '$D(^PRST(458,"B","14-26")) D  Q
"RTN","PRSXP144",26,0)
 . D BMES^XPDUTL("PP 14-26 has not been opened yet.  Holiday In Lieu days will be posted to this Pay Period when it is opened.")
"RTN","PRSXP144",27,0)
 ;
"RTN","PRSXP144",28,0)
 ; If the next pay period is already opened, loop through the 
"RTN","PRSXP144",29,0)
 ; employees again with HOL(3141226)=-1.
"RTN","PRSXP144",30,0)
 ;
"RTN","PRSXP144",31,0)
 D BMES^XPDUTL("PP 14-26 is already open.  Running checks to see if any employees needed to have their extra holiday posted in this Pay Period.")
"RTN","PRSXP144",32,0)
 ;
"RTN","PRSXP144",33,0)
 S HOL(3141226)=-5 ; Set 12/26/2014 into HOL array
"RTN","PRSXP144",34,0)
 S PPI=0,PPI=$O(^PRST(458,"B","14-26",PPI))
"RTN","PRSXP144",35,0)
 I 'PPI D  Q
"RTN","PRSXP144",36,0)
 . D BMES^XPDUTL("The IEN for PP 14-26 was not found.  Contact NSD at 888-596-4357.")
"RTN","PRSXP144",37,0)
 ;
"RTN","PRSXP144",38,0)
 S DFN=0
"RTN","PRSXP144",39,0)
 F  S DFN=$O(^PRST(458,PPI,"E",DFN)) Q:DFN'>0  D
"RTN","PRSXP144",40,0)
 . S TT="HX",DUP=0
"RTN","PRSXP144",41,0)
 . D E^PRSAPPH
"RTN","PRSXP144",42,0)
 Q
"VER")
8.0^22.0
"BLD",9874,6)
^130
**END**
**END**

