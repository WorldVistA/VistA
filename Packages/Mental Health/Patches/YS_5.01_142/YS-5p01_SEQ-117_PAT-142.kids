Released YS*5.01*142 SEQ #117
Extracted from mail message
**KIDS**:YS*5.01*142^

**INSTALL NAME**
YS*5.01*142
"BLD",10764,0)
YS*5.01*142^MENTAL HEALTH^0^3190919^y
"BLD",10764,1,0)
^^25^25^3190919^^
"BLD",10764,1,1,0)
This patch updates the following Mental Health instruments:
"BLD",10764,1,2,0)
 
"BLD",10764,1,3,0)
AIMS
"BLD",10764,1,4,0)
  The disclaimer is no longer added to the progress note text.
"BLD",10764,1,5,0)
 
"BLD",10764,1,6,0)
C-SSRS
"BLD",10764,1,7,0)
  A Key Indicator is now added if Question 3 response is 'Yes'.
"BLD",10764,1,8,0)
 
"BLD",10764,1,9,0)
MMPI-2-RF
"BLD",10764,1,10,0)
  T-Score now calculates correctly for the EID scale.
"BLD",10764,1,11,0)
  Score for PSYC-r is now correct when question 216 is true.
"BLD",10764,1,12,0)
 
"BLD",10764,1,13,0)
QOLI
"BLD",10764,1,14,0)
  A scoring error introduced by YS*5.01*139 has been corrected.
"BLD",10764,1,15,0)
 
"BLD",10764,1,16,0)
If an instrument with many scales preceded and instrument with a few 
"BLD",10764,1,17,0)
scales during a session, some additional scales were carried over to the 
"BLD",10764,1,18,0)
instrument with fewer scales.  This was visible in the Health Summary
"BLD",10764,1,19,0)
component and TIU objects.  It also sometimes affected the display in the
"BLD",10764,1,20,0)
Special Reports Wizard.  This is corrected with this patch.  Additionally,
"BLD",10764,1,21,0)
the patch checks previous administrations to make sure each administration
"BLD",10764,1,22,0)
has only the correct scales associated.
"BLD",10764,1,23,0)
 
"BLD",10764,1,24,0)
Additional record locks were added to reduce the likelihood of errors when
"BLD",10764,1,25,0)
generating a report for a legacy instrument.
"BLD",10764,4,0)
^9.64PA^601.95^1
"BLD",10764,4,601.95,0)
601.95
"BLD",10764,4,601.95,222)
n^n^f^^n^^y^o^n
"BLD",10764,4,601.95,224)
I $$INCLUDE^YTXCHG(Y,"XCHGLST","YS142PST")
"BLD",10764,4,"B",601.95,601.95)

"BLD",10764,6)
1^
"BLD",10764,6.3)
14
"BLD",10764,"ABPKG")
n
"BLD",10764,"INID")
^n
"BLD",10764,"INIT")
POST^YS142PST
"BLD",10764,"KRN",0)
^9.67PA^779.2^20
"BLD",10764,"KRN",.4,0)
.4
"BLD",10764,"KRN",.4,"NM",0)
^9.68A^^
"BLD",10764,"KRN",.401,0)
.401
"BLD",10764,"KRN",.402,0)
.402
"BLD",10764,"KRN",.403,0)
.403
"BLD",10764,"KRN",.5,0)
.5
"BLD",10764,"KRN",.84,0)
.84
"BLD",10764,"KRN",3.6,0)
3.6
"BLD",10764,"KRN",3.8,0)
3.8
"BLD",10764,"KRN",9.2,0)
9.2
"BLD",10764,"KRN",9.8,0)
9.8
"BLD",10764,"KRN",9.8,"NM",0)
^9.68A^11^11
"BLD",10764,"KRN",9.8,"NM",1,0)
YTSCORE^^0^B55110883
"BLD",10764,"KRN",9.8,"NM",2,0)
YTSMPIRD^^0^B38734658
"BLD",10764,"KRN",9.8,"NM",3,0)
YTSMPI2T^^0^B46285456
"BLD",10764,"KRN",9.8,"NM",4,0)
YTQAPI2B^^0^B111166703
"BLD",10764,"KRN",9.8,"NM",5,0)
YS142FIX^^0^B6004222
"BLD",10764,"KRN",9.8,"NM",6,0)
YTQAPI6^^0^B9004706
"BLD",10764,"KRN",9.8,"NM",7,0)
YTQAPI3^^0^B24455598
"BLD",10764,"KRN",9.8,"NM",8,0)
YTQAPI8^^0^B52136273
"BLD",10764,"KRN",9.8,"NM",9,0)
YTQAPI9^^0^B30575385
"BLD",10764,"KRN",9.8,"NM",10,0)
YTQTIU^^0^B23135815
"BLD",10764,"KRN",9.8,"NM",11,0)
YTSQOLI^^0^B64971354
"BLD",10764,"KRN",9.8,"NM","B","YS142FIX",5)

"BLD",10764,"KRN",9.8,"NM","B","YTQAPI2B",4)

"BLD",10764,"KRN",9.8,"NM","B","YTQAPI3",7)

"BLD",10764,"KRN",9.8,"NM","B","YTQAPI6",6)

"BLD",10764,"KRN",9.8,"NM","B","YTQAPI8",8)

"BLD",10764,"KRN",9.8,"NM","B","YTQAPI9",9)

"BLD",10764,"KRN",9.8,"NM","B","YTQTIU",10)

"BLD",10764,"KRN",9.8,"NM","B","YTSCORE",1)

"BLD",10764,"KRN",9.8,"NM","B","YTSMPI2T",3)

"BLD",10764,"KRN",9.8,"NM","B","YTSMPIRD",2)

"BLD",10764,"KRN",9.8,"NM","B","YTSQOLI",11)

"BLD",10764,"KRN",19,0)
19
"BLD",10764,"KRN",19.1,0)
19.1
"BLD",10764,"KRN",101,0)
101
"BLD",10764,"KRN",409.61,0)
409.61
"BLD",10764,"KRN",771,0)
771
"BLD",10764,"KRN",779.2,0)
779.2
"BLD",10764,"KRN",870,0)
870
"BLD",10764,"KRN",8989.51,0)
8989.51
"BLD",10764,"KRN",8989.52,0)
8989.52
"BLD",10764,"KRN",8994,0)
8994
"BLD",10764,"KRN","B",.4,.4)

"BLD",10764,"KRN","B",.401,.401)

"BLD",10764,"KRN","B",.402,.402)

"BLD",10764,"KRN","B",.403,.403)

"BLD",10764,"KRN","B",.5,.5)

"BLD",10764,"KRN","B",.84,.84)

"BLD",10764,"KRN","B",3.6,3.6)

"BLD",10764,"KRN","B",3.8,3.8)

"BLD",10764,"KRN","B",9.2,9.2)

"BLD",10764,"KRN","B",9.8,9.8)

"BLD",10764,"KRN","B",19,19)

"BLD",10764,"KRN","B",19.1,19.1)

"BLD",10764,"KRN","B",101,101)

"BLD",10764,"KRN","B",409.61,409.61)

"BLD",10764,"KRN","B",771,771)

"BLD",10764,"KRN","B",779.2,779.2)

"BLD",10764,"KRN","B",870,870)

"BLD",10764,"KRN","B",8989.51,8989.51)

"BLD",10764,"KRN","B",8989.52,8989.52)

"BLD",10764,"KRN","B",8994,8994)

"BLD",10764,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10764,"QUES",0)
^9.62^^
"BLD",10764,"REQB",0)
^9.611^2^2
"BLD",10764,"REQB",1,0)
YS*5.01*123^2
"BLD",10764,"REQB",2,0)
YS*5.01*139^2
"BLD",10764,"REQB","B","YS*5.01*123",1)

"BLD",10764,"REQB","B","YS*5.01*139",2)

"DATA",601.95,31,0)
YS*5.01*142 UPDATES^3190919.115809^MELDRUM@CAMP MASTER
"DATA",601.95,31,1,0)
^^319^319^3190919
"DATA",601.95,31,1,1,0)
{"test":[{"content":[{"choice":[{"choiceId":3650,"choiceText":"Yes","ien":106330,"legacyValue":null,"sequence":1},{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"choiceDisplay":1443,"choiceIdentifier":null
"DATA",601.95,31,1,2,0)
,"choiceIdentifierIen":259,"choiceTypeId":914,"designator":1,"hint":null,"id":7317,"instrument":228,"introDisplay":1470,"introId":2354,"introText":"Provide the responses to the following questions for the time period designated.","max":null
"DATA",601.95,31,1,3,0)
,"min":null,"questionDisplay":1470,"questionId":7801,"questionText":"Over the past month, have you wished you were dead or wished you could go\r\nto sleep and not wake up?","required":true,"responseTypeId":1,"responseTypeText":"MCHOICE","se
"DATA",601.95,31,1,4,0)
quence":1},{"choice":[{"choiceId":3650,"choiceText":"Yes","ien":106330,"legacyValue":null,"sequence":1},{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"choiceDisplay":1443,"choiceIdentifier":null,"choiceId
"DATA",601.95,31,1,5,0)
entifierIen":259,"choiceTypeId":914,"designator":2,"hint":null,"id":7318,"instrument":228,"introDisplay":1470,"introId":2354,"introText":"Provide the responses to the following questions for the time period designated.","max":null,"min":nul
"DATA",601.95,31,1,6,0)
l,"questionDisplay":1470,"questionId":7802,"questionText":"Over the past month, have you had any actual thoughts of killing yourself?","required":true,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":2},{"choice":[{"choiceId":3650
"DATA",601.95,31,1,7,0)
,"choiceText":"Yes","ien":106330,"legacyValue":null,"sequence":1},{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"choiceDisplay":1443,"choiceIdentifier":null,"choiceIdentifierIen":259,"choiceTypeId":914,"d
"DATA",601.95,31,1,8,0)
esignator":3,"hint":null,"id":7319,"instrument":228,"introDisplay":1470,"introId":2354,"introText":"Provide the responses to the following questions for the time period designated.","max":null,"min":null,"questionDisplay":1470,"questionId":
"DATA",601.95,31,1,9,0)
7803,"questionText":"Over the past month, have you been thinking about how you might do this? ","required":true,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":3},{"choice":[{"choiceId":3650,"choiceText":"Yes","ien":106330,"legac
"DATA",601.95,31,1,10,0)
yValue":null,"sequence":1},{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"choiceDisplay":1443,"choiceIdentifier":null,"choiceIdentifierIen":259,"choiceTypeId":914,"designator":4,"hint":null,"id":7320,"ins
"DATA",601.95,31,1,11,0)
trument":228,"introDisplay":1470,"introId":2354,"introText":"Provide the responses to the following questions for the time period designated.","max":null,"min":null,"questionDisplay":1470,"questionId":7804,"questionText":"Over the past mont
"DATA",601.95,31,1,12,0)
h, have you had these thoughts and had some intention of\r\nacting on them?","required":true,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":4},{"choice":[{"choiceId":3650,"choiceText":"Yes","ien":106330,"legacyValue":null,"seque
"DATA",601.95,31,1,13,0)
nce":1},{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"choiceDisplay":1443,"choiceIdentifier":null,"choiceIdentifierIen":259,"choiceTypeId":914,"designator":5,"hint":null,"id":7321,"instrument":228,"intro
"DATA",601.95,31,1,14,0)
Display":1470,"introId":2354,"introText":"Provide the responses to the following questions for the time period designated.","max":null,"min":null,"questionDisplay":1470,"questionId":7805,"questionText":"Over the past month, have you started
"DATA",601.95,31,1,15,0)
 to work out or worked out the \r\ndetails of how to kill yourself?","required":true,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":5},{"choice":[{"choiceId":3650,"choiceText":"Yes","ien":106330,"legacyValue":null,"sequence":1},
"DATA",601.95,31,1,16,0)
{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"choiceDisplay":1443,"choiceIdentifier":null,"choiceIdentifierIen":259,"choiceTypeId":914,"designator":6,"hint":null,"id":7322,"instrument":228,"introDisplay"
"DATA",601.95,31,1,17,0)
:1470,"introId":2354,"introText":"Provide the responses to the following questions for the time period designated.","max":null,"min":null,"questionDisplay":1470,
"DATA",601.95,31,1,18,0)
"questionId":7806,"questionText":"If yes, at any time in the past month did you intend to carry out this \r\nplan?","required":true,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":6},{"choice":[{"choiceId":3650,"choiceText":"Yes"
"DATA",601.95,31,1,19,0)
,"ien":106330,"legacyValue":null,"sequence":1},{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"choiceDisplay":1443,"choiceIdentifier":null,"choiceIdentifierIen":259,"choiceTypeId":914,"designator":7,"hint"
"DATA",601.95,31,1,20,0)
:null,"id":7323,"instrument":228,"introDisplay":1470,"introId":2354,"introText":"Provide the responses to the following questions for the time period designated.","max":null,"min":null,"questionDisplay":1470,"questionId":7807,"questionText"
"DATA",601.95,31,1,21,0)
:"In your lifetime, have you ever done anything, started to do anything, or \r\nprepared to do anything to end your life (for example, collected pills, obtained a gun, gave away valuables, went to the roof but didn't jump)?","required":true
"DATA",601.95,31,1,22,0)
,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":7},{"choice":[{"choiceId":3650,"choiceText":"Yes","ien":106330,"legacyValue":null,"sequence":1},{"choiceId":3651,"choiceText":"No","ien":106332,"legacyValue":null,"sequence":2}],"c
"DATA",601.95,31,1,23,0)
hoiceDisplay":1443,"choiceIdentifier":null,"choiceIdentifierIen":259,"choiceTypeId":914,"designator":8,"hint":null,"id":7324,"instrument":228,"introDisplay":1470,"introId":2354,"introText":"Provide the responses to the following questions f
"DATA",601.95,31,1,24,0)
or the time period designated.","max":null,"min":null,"questionDisplay":1470,"questionId":7808,"questionText":"If YES, was this within the past 3 months?","required":null,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":8}],"displ
"DATA",601.95,31,1,25,0)
ay":[{"alignment":"L","columns":1,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":1443,"left":10,"mask":"577|||"},{"alignment":"L","columns
"DATA",601.95,31,1,26,0)
":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":1470,"left":2,"mask":null}],"info":{"author":"Diane Boyd","auxDate":null,"auxVersion
"DATA",601.95,31,1,27,0)
":null,"copyrightText":"Columbia-Suicide Severity Rating Scale (C-SSRS) © 2016 The Columbia Lighthouse Project. Scale may be reproduced without permission.","copyrighted":true,"dllDate":null,"dllVersion":null,"enteredBy":"BARRY DELLINGER","
"DATA",601.95,31,1,28,0)
entryDate":"2018-02-04","fullText":true,"id":228,"lastEditDate":3190815.1731,"lastEditedBy":"BARRY DELLINGER","legacy":false,"licenseCurrent":true,"name":"C-SSRS","national":true,"normSample":null,"operational":"Y","printTitle":"Columbia Su
"DATA",601.95,31,1,29,0)
icide Severity Rating Scale (C-SSRS)","publicationDate":null,"publisher":null,"purpose":null,"reference":"A PRIVILEGE: Posner K, et al (2011. The Columbia-SSRS: Initial Validity and Internal Consistency Findings from 3 Multisite Studies wit
"DATA",601.95,31,1,30,0)
h Adolescents and Adults.","requireSignature":false,"requiresLicense":"N","scoringRevision":1,"scoringRoutine":null,"scoringTag":null,"submitNational":true,"targetPopulation":null,"version":"v.1","wasOperational":true},"report":{"id":153,"i
"DATA",601.95,31,1,31,0)
nstrument":228,"template":"|  | Columbia Suicide Severity Rating Scale (C-SSRS) | |  \r\nDate Given: <.Date_Given.>|  Clinician: <.Staff_Ordered_By.> |\r\n  Location: <.Location.>|   |  Veteran: <.Patient_Name_Last_First.>|  \r\nSSN: <.Pati
"DATA",601.95,31,1,32,0)
ent_SSN.>|  DOB: <.Patient_Date_Of_Birth.> (<.Patient_Age.>)\r\n|  Gender: <.Patient_Gender.>   | |\r\n|  Suicidal Ideation in Past Month: <*Answer_7771*>|\r\n|  Method\/Plan\/Intent in Past Month: <*Answer_7772*>|\r\n|  Suicidal Behavior: 
"DATA",601.95,31,1,33,0)
<*Answer_7773*>||\r\n|  KEY INDICATORS:\r\n|<*Answer_7774*>||\r\n  Questions and Answers: ||\r\n  1. Over the past month, have you wished you were dead or wished you could go to sleep and not wake up?|   <*Answer_7801*>|\r\n  2. Over the pa
"DATA",601.95,31,1,34,0)
st month, have you had any actual thoughts of killing yourself? |   <*Answer_7802*>|
"DATA",601.95,31,1,35,0)
\r\n  3. Over the past month, have you been thinking about how you might do this? |   <*Answer_7803*>|\r\n  4. Over the past month, have you had these thoughts and had some intention of acting on them?  |   <*Answer_7804*>|\r\n  5. Over the
"DATA",601.95,31,1,36,0)
 past month, have you started to work out or worked out the details of how to kill yourself?|   <*Answer_7805*>|\r\n  6. If yes, at any time in the past month did you intend to carry out this plan?|   <*Answer_7806*>|\r\n  7. In your lifeti
"DATA",601.95,31,1,37,0)
me, have you ever done anything, started to do anything, or prepared to do anything to end your life (for example, collected pills,\r\n obtained a gun, gave away valuables, went to the roof but didn't jump)?|   <*Answer_7807*>|\r\n  8. If y
"DATA",601.95,31,1,38,0)
es, was this within the past 3 months?|   <*Answer_7808*> ||\r\n \r\n|   |Columbia-Suicide Severity Rating Scale (C-SSRS) © 2016 The Columbia Lighthouse Project. Scale may be reproduced without permission.\r\n \r\n|   |Information contained
"DATA",601.95,31,1,39,0)
 in this note is based on a self-report\r\n assessment and is not sufficient to use alone for diagnostic purposes.\r\n Assessment results should be verified for accuracy and used in\r\n conjunction with other diagnostic activities.  $~"},"r
"DATA",601.95,31,1,40,0)
ule":[{"booleanOperator":"AND","consistencyCheck":null,"id":341,"indexOperator":"Equals","indexQuestionId":7802,"indexValue":1,"indexValueDataType":"STRING","instrumentId":228,"instrumentQuestionId":7802,"instrumentRuleId":462,"messageText"
"DATA",601.95,31,1,41,0)
:null,"skippedQuestion":[{"id":1879,"instrumentId":228,"questionId":7803,"ruleId":341},{"id":1880,"instrumentId":228,"questionId":7804,"ruleId":341},{"id":1881,"instrumentId":228,"questionId":7805,"ruleId":341},{"id":1882,"instrumentId":228
"DATA",601.95,31,1,42,0)
,"questionId":7806,"ruleId":341}],"targetOperator":null,"targetQuestionId":null,"targetValue":null,"targetValueDataType":null},{"booleanOperator":"AND","consistencyCheck":null,"id":343,"indexOperator":"Equals","indexQuestionId":7805,"indexV
"DATA",601.95,31,1,43,0)
alue":1,"indexValueDataType":"STRING","instrumentId":228,"instrumentQuestionId":7805,"instrumentRuleId":466,"messageText":null,"skippedQuestion":[{"id":1889,"instrumentId":228,"questionId":7806,"ruleId":343}],"targetOperator":null,"targetQu
"DATA",601.95,31,1,44,0)
estionId":null,"targetValue":null,"targetValueDataType":null},{"booleanOperator":"AND","consistencyCheck":null,"id":344,"indexOperator":"Equals","indexQuestionId":7807,"indexValue":1,"indexValueDataType":"STRING","instrumentId":228,"instrum
"DATA",601.95,31,1,45,0)
entQuestionId":7807,"instrumentRuleId":467,"messageText":null,"skippedQuestion":[{"id":1890,"instrumentId":228,"questionId":7808,"ruleId":344}],"targetOperator":null,"targetQuestionId":null,"targetValue":null,"targetValueDataType":null}],"s
"DATA",601.95,31,1,46,0)
caleGroup":[{"grid1":null,"grid2":null,"grid3":null,"id":250,"instrument":228,"name":"C-SSRS","ordInc":1,"ordMax":8,"ordMin":1,"ordTitle":"C-SSRS","scale":[{"groupId":250,"id":1015,"name":"Ques1","scoringKey":[{"id":10007,"questionId":7801,
"DATA",601.95,31,1,47,0)
"scaleId":1015,"targetText":"Yes","value":1},{"id":10008,"questionId":7801,"scaleId":1015,"targetText":"No","value":2}],"sequence":1,"xLabel":"q1"},{"groupId":250,"id":1020,"name":"Ques2","scoringKey":[{"id":10009,"questionId":7802,"scaleId
"DATA",601.95,31,1,48,0)
":1020,"targetText":"Yes","value":1},{"id":10010,"questionId":7802,"scaleId":1020,"targetText":"No","value":2}],"sequence":1,"xLabel":"q2"},{"groupId":250,"id":1021,"name":"Ques3","scoringKey":[{"id":10011,"questionId":7803,"scaleId":1021,"
"DATA",601.95,31,1,49,0)
targetText":"Yes","value":1},{"id":10012,"questionId":7803,"scaleId":1021,"targetText":"No","value":2}],"sequence":1,"xLabel":"q3"},{"groupId":250,"id":1022,"name":"Ques4","scoringKey":[{"id":10013,"questionId":7804,"scaleId":1022,"targetTe
"DATA",601.95,31,1,50,0)
xt":"Yes","value":1},{"id":10014,"questionId":7804,"scaleId":1022,"targetText":"No","value":2}],"sequence":1,"xLabel":"q4"},{"groupId":250,"id":1023,"name":"Ques5","scoringKey":[{"id":10015,"questionId":7805,"scaleId":1023,"targetText":"Yes
"DATA",601.95,31,1,51,0)
","value":1},{"id":10016,"questionId":7805,"scaleId":1023,"targetText":"No","value":2}],"sequence":1,"xLabel":"q5"},{"groupId":250,"id":1024,"name":"Ques6",
"DATA",601.95,31,1,52,0)
"scoringKey":[{"id":10017,"questionId":7806,"scaleId":1024,"targetText":"Yes","value":1},{"id":10018,"questionId":7806,"scaleId":1024,"targetText":"No","value":2}],"sequence":1,"xLabel":"q6"},{"groupId":250,"id":1025,"name":"Ques7","scoring
"DATA",601.95,31,1,53,0)
Key":[{"id":10019,"questionId":7807,"scaleId":1025,"targetText":"Yes","value":1},{"id":10020,"questionId":7807,"scaleId":1025,"targetText":"No","value":2}],"sequence":1,"xLabel":"q7"},{"groupId":250,"id":1026,"name":"Ques8","scoringKey":[{"
"DATA",601.95,31,1,54,0)
id":10021,"questionId":7808,"scaleId":1026,"targetText":"Yes","value":1},{"id":10022,"questionId":7808,"scaleId":1026,"targetText":"No","value":2}],"sequence":1,"xLabel":"q8"}],"sequence":1}],"verify":["601.71:228","601.72:7801","601.72:780
"DATA",601.95,31,1,55,0)
2","601.72:7803","601.72:7804","601.72:7805","601.72:7806","601.72:7807","601.72:7808","601.73:2354","601.75:3650","601.75:3651","601.751:106330","601.751:106332","601.76:7317","601.76:7318","601.76:7319","601.76:7320","601.76:7321","601.76
"DATA",601.95,31,1,56,0)
:7322","601.76:7323","601.76:7324","601.79:1879","601.79:1880","601.79:1881","601.79:1882","601.79:1889","601.79:1890","601.82:341","601.82:343","601.82:344","601.83:462","601.83:466","601.83:467","601.86:250","601.87:1015","601.87:1020","6
"DATA",601.95,31,1,57,0)
01.87:1021","601.87:1022","601.87:1023","601.87:1024","601.87:1025","601.87:1026","601.88:1443","601.88:1470","601.89:259","601.91:10007","601.91:10008","601.91:10009","601.91:10010","601.91:10011","601.91:10012","601.91:10013","601.91:1001
"DATA",601.95,31,1,58,0)
4","601.91:10015","601.91:10016","601.91:10017","601.91:10018","601.91:10019","601.91:10020","601.91:10021","601.91:10022"]},{"content":[{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63704,"legacyValue":1,"sequence":1},{"ch
"DATA",601.95,31,1,59,0)
oiceId":3132,"choiceText":"Important","ien":63705,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63706,"legacyValue":3,"sequence":3}],"choiceDisplay":52512,"choiceIdentifier":1,"choiceIdentifierIen":
"DATA",601.95,31,1,60,0)
19758,"choiceTypeId":28315,"designator":"1.","hint":null,"id":6278,"instrument":188,"introDisplay":52510,"introId":867,"introText":"HEALTH is being physically fit, not sick, and without pain or disability.  ","max":0,"min":0,"questionDispla
"DATA",601.95,31,1,61,0)
y":52511,"questionId":6367,"questionText":"How important is HEALTH to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":1},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63707,"
"DATA",601.95,31,1,62,0)
legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63708,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63709,"legacyValue":3,"sequence":3},{"choiceId":3135,"c
"DATA",601.95,31,1,63,0)
hoiceText":"A Little Satisfied","ien":63710,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63711,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63712,"legacyValue":
"DATA",601.95,31,1,64,0)
1,"sequence":6}],"choiceDisplay":52514,"choiceIdentifier":1,"choiceIdentifierIen":19759,"choiceTypeId":28316,"designator":"2.","hint":null,"id":6279,"instrument":188,"introDisplay":52510,"introId":867,"introText":"HEALTH is being physically
"DATA",601.95,31,1,65,0)
 fit, not sick, and without pain or disability.  ","max":0,"min":0,"questionDisplay":52513,"questionId":6368,"questionText":"How satisfied are you with your HEALTH?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence
"DATA",601.95,31,1,66,0)
":2},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63713,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63714,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important",
"DATA",601.95,31,1,67,0)
"ien":63715,"legacyValue":3,"sequence":3}],"choiceDisplay":52517,"choiceIdentifier":1,"choiceIdentifierIen":19760,"choiceTypeId":28317,"designator":"3.","hint":null,"id":6280,"instrument":188,"introDisplay":52515,"introId":868,"introText":"
"DATA",601.95,31,1,68,0)
SELF-ESTEEM means liking and respecting yourself in light of your strengths and weaknesses, successes and failures, and ability to handle problems.  ","max":0,
"DATA",601.95,31,1,69,0)
"min":0,"questionDisplay":52516,"questionId":6369,"questionText":"How important is SELF-ESTEEM to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":3},{"choice":[{"choiceId":4110,"choiceText":"Very
"DATA",601.95,31,1,70,0)
 Dissatisfied","ien":63716,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63717,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63718,"legacyValue":3,"sequ
"DATA",601.95,31,1,71,0)
ence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63719,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63720,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied
"DATA",601.95,31,1,72,0)
","ien":63721,"legacyValue":1,"sequence":6}],"choiceDisplay":52519,"choiceIdentifier":1,"choiceIdentifierIen":19761,"choiceTypeId":28318,"designator":"4.","hint":null,"id":6281,"instrument":188,"introDisplay":52515,"introId":868,"introText"
"DATA",601.95,31,1,73,0)
:"SELF-ESTEEM means liking and respecting yourself in light of your strengths and weaknesses, successes and failures, and ability to handle problems.  ","max":0,"min":0,"questionDisplay":52518,"questionId":6370,"questionText":"How satisfied
"DATA",601.95,31,1,74,0)
 are you with your SELF-ESTEEM?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":4},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63722,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText"
"DATA",601.95,31,1,75,0)
:"Important","ien":63723,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63724,"legacyValue":3,"sequence":3}],"choiceDisplay":52522,"choiceIdentifier":1,"choiceIdentifierIen":19762,"choiceTypeId":2831
"DATA",601.95,31,1,76,0)
9,"designator":"5.","hint":null,"id":6282,"instrument":188,"introDisplay":52520,"introId":869,"introText":"GOAL-AND-VALUES are your beliefs about what matters most in life and how you should live, both now and in the future. This includes y
"DATA",601.95,31,1,77,0)
our goals in life, what you think is right or wrong, and the \r\npurpose or meaning of life as you see it.","max":0,"min":0,"questionDisplay":52521,"questionId":6371,"questionText":"How important are GOALS-AND-VALUES to your happiness?","re
"DATA",601.95,31,1,78,0)
quired":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":5},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63725,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":6
"DATA",601.95,31,1,79,0)
3726,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63727,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63728,"legacyValue":4,"sequence":4},{"choiceId":2356
"DATA",601.95,31,1,80,0)
,"choiceText":"Somewhat Satisfied","ien":63729,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63730,"legacyValue":1,"sequence":6}],"choiceDisplay":52524,"choiceIdentifier":1,"choiceIdentifierIen":19763,"c
"DATA",601.95,31,1,81,0)
hoiceTypeId":28320,"designator":"6.","hint":null,"id":6283,"instrument":188,"introDisplay":52520,"introId":869,"introText":"GOAL-AND-VALUES are your beliefs about what matters most in life and how you should live, both now and in the future
"DATA",601.95,31,1,82,0)
. This includes your goals in life, what you think is right or wrong, and the \r\npurpose or meaning of life as you see it.","max":0,"min":0,"questionDisplay":52523,"questionId":6372,"questionText":"How satisfied are you with your GOALS-AND
"DATA",601.95,31,1,83,0)
-VALUES?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":6},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63731,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":6373
"DATA",601.95,31,1,84,0)
2,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63733,"legacyValue":3,"sequence":3}],"choiceDisplay":52527,"choiceIdentifier":1,"choiceIdentifierIen":19764,"choiceTypeId":28321,"designator":"7.","hi
"DATA",601.95,31,1,85,0)
nt":null,"id":6284,"instrument":188,"introDisplay":52525,"introId":870,"introText":
"DATA",601.95,31,1,86,0)
"MONEY is made up of three things. It is the money you earn, the things you own (like a car or furniture), and believing that you will have the money and things that you need in the future.  ","max":0,"min":0,"questionDisplay":52526,"questi
"DATA",601.95,31,1,87,0)
onId":6373,"questionText":"How important is MONEY to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":7},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63734,"legacyValue":5,"s
"DATA",601.95,31,1,88,0)
equence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63735,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63736,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Lit
"DATA",601.95,31,1,89,0)
tle Satisfied","ien":63737,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63738,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63739,"legacyValue":1,"sequence":6}],
"DATA",601.95,31,1,90,0)
"choiceDisplay":52529,"choiceIdentifier":1,"choiceIdentifierIen":19765,"choiceTypeId":28322,"designator":"8.","hint":null,"id":6285,"instrument":188,"introDisplay":52525,"introId":870,"introText":"MONEY is made up of three things. It is the
"DATA",601.95,31,1,91,0)
 money you earn, the things you own (like a car or furniture), and believing that you will have the money and things that you need in the future.  ","max":0,"min":0,"questionDisplay":52528,"questionId":6374,"questionText":"How satisfied are
"DATA",601.95,31,1,92,0)
 you with the MONEY you have?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":8},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63740,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"
"DATA",601.95,31,1,93,0)
Important","ien":63741,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63742,"legacyValue":3,"sequence":3}],"choiceDisplay":52532,"choiceIdentifier":1,"choiceIdentifierIen":19766,"choiceTypeId":28323,
"DATA",601.95,31,1,94,0)
"designator":"9.","hint":null,"id":6286,"instrument":188,"introDisplay":52530,"introId":871,"introText":"WORK means your career or how you spend most of your time. You may work at a job, at home taking care of your family, or at school as a
"DATA",601.95,31,1,95,0)
 student. WORK includes your duties on the job, the money you \r\nearn (if any), and the people you work with. (If you are unemployed, retired, or can't work, you can still answer these questions.)","max":0,"min":0,"questionDisplay":52531,"
"DATA",601.95,31,1,96,0)
questionId":6375,"questionText":"How important is WORK to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":9},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63743,"legacyValue"
"DATA",601.95,31,1,97,0)
:5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63744,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63745,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"
"DATA",601.95,31,1,98,0)
A Little Satisfied","ien":63746,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63747,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63748,"legacyValue":1,"sequence"
"DATA",601.95,31,1,99,0)
:6}],"choiceDisplay":52534,"choiceIdentifier":1,"choiceIdentifierIen":19767,"choiceTypeId":28324,"designator":"10.","hint":null,"id":6287,"instrument":188,"introDisplay":52530,"introId":871,"introText":"WORK means your career or how you spe
"DATA",601.95,31,1,100,0)
nd most of your time. You may work at a job, at home taking care of your family, or at school as a student. WORK includes your duties on the job, the money you \r\nearn (if any), and the people you work with. (If you are unemployed, retired
"DATA",601.95,31,1,101,0)
, or can't work, you can still answer these questions.)","max":0,"min":0,"questionDisplay":52533,"questionId":6376,"questionText":"How satisfied are you with your WORK? (If you are not working, say how satisfied you are about not working.)"
"DATA",601.95,31,1,102,0)
,"required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":10},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63749,
"DATA",601.95,31,1,103,0)
"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63750,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63751,"legacyValue":3,"sequence":3}],"choiceDisplay":52537,"choiceId
"DATA",601.95,31,1,104,0)
entifier":1,"choiceIdentifierIen":19768,"choiceTypeId":28325,"designator":"11.","hint":null,"id":6288,"instrument":188,"introDisplay":52535,"introId":872,"introText":"PLAY is what you do in your free time to relax, have fun, or improve your
"DATA",601.95,31,1,105,0)
self. This could include watching movies, visiting friends, or pursuing a hobby like sports or gardening.  ","max":0,"min":0,"questionDisplay":52536,"questionId":6377,"questionText":"How important is PLAY to your happiness?","required":fals
"DATA",601.95,31,1,106,0)
e,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":11},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63752,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63753,"legac
"DATA",601.95,31,1,107,0)
yValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63754,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63755,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceTex
"DATA",601.95,31,1,108,0)
t":"Somewhat Satisfied","ien":63756,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63757,"legacyValue":1,"sequence":6}],"choiceDisplay":52539,"choiceIdentifier":1,"choiceIdentifierIen":19769,"choiceTypeId
"DATA",601.95,31,1,109,0)
":28326,"designator":"12.","hint":null,"id":6289,"instrument":188,"introDisplay":52535,"introId":872,"introText":"PLAY is what you do in your free time to relax, have fun, or improve yourself. This could include watching movies, visiting fr
"DATA",601.95,31,1,110,0)
iends, or pursuing a hobby like sports or gardening.  ","max":0,"min":0,"questionDisplay":52538,"questionId":6378,"questionText":"How satisfied are you with the PLAY in your life?","required":false,"responseTypeId":1,"responseTypeText":"MCH
"DATA",601.95,31,1,111,0)
OICE","sequence":12},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63758,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63759,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extre
"DATA",601.95,31,1,112,0)
mely Important","ien":63760,"legacyValue":3,"sequence":3}],"choiceDisplay":52542,"choiceIdentifier":1,"choiceIdentifierIen":19770,"choiceTypeId":28327,"designator":"13.","hint":null,"id":6290,"instrument":188,"introDisplay":52540,"introId":
"DATA",601.95,31,1,113,0)
873,"introText":"LEARNING means gaining new skills or information about things that interest you. LEARNING can come from reading books or taking classes on subjects like history, car repair, or using a computer.  ","max":0,"min":0,"question
"DATA",601.95,31,1,114,0)
Display":52541,"questionId":6379,"questionText":"How important is LEARNING to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":13},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien
"DATA",601.95,31,1,115,0)
":63761,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63762,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63763,"legacyValue":3,"sequence":3},{"choiceId
"DATA",601.95,31,1,116,0)
":3135,"choiceText":"A Little Satisfied","ien":63764,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63765,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63766,"lega
"DATA",601.95,31,1,117,0)
cyValue":1,"sequence":6}],"choiceDisplay":52544,"choiceIdentifier":1,"choiceIdentifierIen":19771,"choiceTypeId":28328,"designator":"14.","hint":null,"id":6291,"instrument":188,"introDisplay":52540,"introId":873,"introText":"LEARNING means g
"DATA",601.95,31,1,118,0)
aining new skills or information about things that interest you. LEARNING can come from reading books or taking classes on subjects like history, car repair, or using a computer.  ","max":0,"min":0,"questionDisplay":52543,"questionId":6380,
"DATA",601.95,31,1,119,0)
"questionText":"How satisfied are you with your LEARNING?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":14},{"choice":[{"choiceId":
"DATA",601.95,31,1,120,0)
3131,"choiceText":"Not Important","ien":63767,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63768,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63769,"legacyValue":3,
"DATA",601.95,31,1,121,0)
"sequence":3}],"choiceDisplay":52547,"choiceIdentifier":1,"choiceIdentifierIen":19772,"choiceTypeId":28329,"designator":"15.","hint":null,"id":6292,"instrument":188,"introDisplay":52545,"introId":874,"introText":"CREATIVITY is using your im
"DATA",601.95,31,1,122,0)
agination to come up with new and clever ways to solve everyday problems or to pursue a hobby like painting, photography, or needlework. This can include decorating your \r\nhome, playing the guitar, or finding a new way to solve a problem 
"DATA",601.95,31,1,123,0)
at work.","max":0,"min":0,"questionDisplay":52546,"questionId":6381,"questionText":"How important is CREATIVITY to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":15},{"choice":[{"choiceId":4110,
"DATA",601.95,31,1,124,0)
"choiceText":"Very Dissatisfied","ien":63770,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63771,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63772,"le
"DATA",601.95,31,1,125,0)
gacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63773,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63774,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceTex
"DATA",601.95,31,1,126,0)
t":"Very Satisfied","ien":63775,"legacyValue":1,"sequence":6}],"choiceDisplay":52549,"choiceIdentifier":1,"choiceIdentifierIen":19773,"choiceTypeId":28330,"designator":"16.","hint":null,"id":6293,"instrument":188,"introDisplay":52545,"intro
"DATA",601.95,31,1,127,0)
Id":874,"introText":"CREATIVITY is using your imagination to come up with new and clever ways to solve everyday problems or to pursue a hobby like painting, photography, or needlework. This can include decorating your \r\nhome, playing the 
"DATA",601.95,31,1,128,0)
guitar, or finding a new way to solve a problem at work.","max":0,"min":0,"questionDisplay":52548,"questionId":6382,"questionText":"How satisfied are you with your CREATIVITY?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE
"DATA",601.95,31,1,129,0)
","sequence":16},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63776,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63777,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely
"DATA",601.95,31,1,130,0)
 Important","ien":63778,"legacyValue":3,"sequence":3}],"choiceDisplay":52552,"choiceIdentifier":1,"choiceIdentifierIen":19774,"choiceTypeId":28331,"designator":"17.","hint":null,"id":6294,"instrument":188,"introDisplay":52550,"introId":875,
"DATA",601.95,31,1,131,0)
"introText":"HELPING means helping others in need or helping to make your community a better place to live. HELPING can be done on your own or in a group like a church, a neighborhood association, or a political   \r\nparty. HELPING can inc
"DATA",601.95,31,1,132,0)
lude doing volunteer work at a school or giving money to a good cause. HELPING means helping people who are not your friends or relatives. ","max":0,"min":0,"questionDisplay":52551,"questionId":6383,"questionText":"How important is HELPING 
"DATA",601.95,31,1,133,0)
to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":17},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63779,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewh
"DATA",601.95,31,1,134,0)
at Dissatisfied","ien":63780,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63781,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63782,"legacyValue":4,"seque
"DATA",601.95,31,1,135,0)
nce":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63783,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63784,"legacyValue":1,"sequence":6}],"choiceDisplay":52554,"choiceIdentifier":1,"choic
"DATA",601.95,31,1,136,0)
eIdentifierIen":19775,"choiceTypeId":28332,"designator":"18.","hint":null,"id":6295,"instrument":188,"introDisplay":52550,"introId":875,"introText":
"DATA",601.95,31,1,137,0)
"HELPING means helping others in need or helping to make your community a better place to live. HELPING can be done on your own or in a group like a church, a neighborhood association, or a political   \r\nparty. HELPING can include doing v
"DATA",601.95,31,1,138,0)
olunteer work at a school or giving money to a good cause. HELPING means helping people who are not your friends or relatives. ","max":0,"min":0,"questionDisplay":52553,"questionId":6384,"questionText":"How satisfied are you with the HELPIN
"DATA",601.95,31,1,139,0)
G you do?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":18},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63785,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63
"DATA",601.95,31,1,140,0)
786,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63787,"legacyValue":3,"sequence":3}],"choiceDisplay":52557,"choiceIdentifier":1,"choiceIdentifierIen":19776,"choiceTypeId":28333,"designator":"19.",
"DATA",601.95,31,1,141,0)
"hint":null,"id":6296,"instrument":188,"introDisplay":52555,"introId":876,"introText":"LOVE is a very close romantic relationship with another person. LOVE usually includes sexual feelings and feeling loved, cared for, and understood. (If y
"DATA",601.95,31,1,142,0)
ou do not have a LOVE relationship, you can \r\nstill answer these questions.)","max":0,"min":0,"questionDisplay":52556,"questionId":6385,"questionText":"How important is LOVE to your happiness?","required":false,"responseTypeId":1,"respons
"DATA",601.95,31,1,143,0)
eTypeText":"MCHOICE","sequence":19},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63788,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63789,"legacyValue":3,"sequence":2},{"cho
"DATA",601.95,31,1,144,0)
iceId":3134,"choiceText":"A Little Dissatisfied","ien":63790,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63791,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien"
"DATA",601.95,31,1,145,0)
:63792,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63793,"legacyValue":1,"sequence":6}],"choiceDisplay":52559,"choiceIdentifier":1,"choiceIdentifierIen":19777,"choiceTypeId":28334,"designator":"20.","h
"DATA",601.95,31,1,146,0)
int":null,"id":6297,"instrument":188,"introDisplay":52555,"introId":876,"introText":"LOVE is a very close romantic relationship with another person. LOVE usually includes sexual feelings and feeling loved, cared for, and understood. (If you
"DATA",601.95,31,1,147,0)
 do not have a LOVE relationship, you can \r\nstill answer these questions.)","max":0,"min":0,"questionDisplay":52558,"questionId":6386,"questionText":"How satisfied are you with the LOVE in your life? (If you are not in a LOVE relationship
"DATA",601.95,31,1,148,0)
, say how satisfied you feel about not having a LOVE relationship.)","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":20},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63794,"legacyValue":1,"seque
"DATA",601.95,31,1,149,0)
nce":1},{"choiceId":3132,"choiceText":"Important","ien":63795,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63796,"legacyValue":3,"sequence":3}],"choiceDisplay":52562,"choiceIdentifier":1,"choiceIde
"DATA",601.95,31,1,150,0)
ntifierIen":19778,"choiceTypeId":28335,"designator":"21.","hint":null,"id":6298,"instrument":188,"introDisplay":52560,"introId":877,"introText":"FRIENDS are people (not relatives) you know well and care about who have interests and opinions
"DATA",601.95,31,1,151,0)
 like yours. FRIENDS have fun together, talk about personal problems, and help each other out. (If you \r\nhave no FRIENDS, you can still answer these questions.)","max":0,"min":0,"questionDisplay":52561,"questionId":6387,"questionText":"Ho
"DATA",601.95,31,1,152,0)
w important are FRIENDS to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":21},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63797,"legacyValue":5,"sequence":1},{"choiceId":2
"DATA",601.95,31,1,153,0)
357,"choiceText":"Somewhat Dissatisfied","ien":63798,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63799,"legacyValue":
"DATA",601.95,31,1,154,0)
3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63800,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63801,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Sa
"DATA",601.95,31,1,155,0)
tisfied","ien":63802,"legacyValue":1,"sequence":6}],"choiceDisplay":52564,"choiceIdentifier":1,"choiceIdentifierIen":19779,"choiceTypeId":28336,"designator":"22.","hint":null,"id":6299,"instrument":188,"introDisplay":52560,"introId":877,"in
"DATA",601.95,31,1,156,0)
troText":"FRIENDS are people (not relatives) you know well and care about who have interests and opinions like yours. FRIENDS have fun together, talk about personal problems, and help each other out. (If you \r\nhave no FRIENDS, you can sti
"DATA",601.95,31,1,157,0)
ll answer these questions.)","max":0,"min":0,"questionDisplay":52563,"questionId":6388,"questionText":"How satisfied are you with your FRIENDS? (If you have no FRIENDS, say how satisfied you are about having no FRIENDS.)","required":false,"
"DATA",601.95,31,1,158,0)
responseTypeId":1,"responseTypeText":"MCHOICE","sequence":22},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63803,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63804,"legacyValue":2,"sequence
"DATA",601.95,31,1,159,0)
":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63805,"legacyValue":3,"sequence":3}],"choiceDisplay":52567,"choiceIdentifier":1,"choiceIdentifierIen":19780,"choiceTypeId":28337,"designator":"23.","hint":null,"id":6300,"instru
"DATA",601.95,31,1,160,0)
ment":188,"introDisplay":52565,"introId":878,"introText":"CHILDREN means how you get along with your child (or children). Think of how you get along as you care for, visit, or play with your child. (If you do not have CHILDREN, you can stil
"DATA",601.95,31,1,161,0)
l answer these \r\nquestions.)","max":0,"min":0,"questionDisplay":52566,"questionId":6389,"questionText":"How important are CHILDREN to your happiness? (If you have no CHILDREN, say how important having a child is to your happiness.)","requ
"DATA",601.95,31,1,162,0)
ired":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":23},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63806,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63
"DATA",601.95,31,1,163,0)
807,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63808,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63809,"legacyValue":4,"sequence":4},{"choiceId":2356,
"DATA",601.95,31,1,164,0)
"choiceText":"Somewhat Satisfied","ien":63810,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63811,"legacyValue":1,"sequence":6}],"choiceDisplay":52569,"choiceIdentifier":1,"choiceIdentifierIen":19781,"ch
"DATA",601.95,31,1,165,0)
oiceTypeId":28338,"designator":"24.","hint":null,"id":6301,"instrument":188,"introDisplay":52565,"introId":878,"introText":"CHILDREN means how you get along with your child (or children). Think of how you get along as you care for, visit, o
"DATA",601.95,31,1,166,0)
r play with your child. (If you do not have CHILDREN, you can still answer these \r\nquestions.)","max":0,"min":0,"questionDisplay":52568,"questionId":6390,"questionText":"How satisfied are you with your relationships with your CHILDREN? (I
"DATA",601.95,31,1,167,0)
f you have no CHILDREN, say how satisfied you feel about not having children.)","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":24},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63812,"legacyValu
"DATA",601.95,31,1,168,0)
e":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63813,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63814,"legacyValue":3,"sequence":3}],"choiceDisplay":52572,"choiceIdentifier":1
"DATA",601.95,31,1,169,0)
,"choiceIdentifierIen":19782,"choiceTypeId":28339,"designator":"25.","hint":null,"id":6302,"instrument":188,"introDisplay":52570,"introId":881,"introText":"RELATIVES means how you get along with your parents, grandparents, brothers, sisters
"DATA",601.95,31,1,170,0)
, aunts, uncles, and in-laws. Think about how you get along when you are doing things together like visiting, 
"DATA",601.95,31,1,171,0)
\r\ntalking on the telephone, or helping each other out.(If you have no living RELATIVES, answer question 25 as \"Not Important\" and do not answer question 26). ","max":0,"min":0,"questionDisplay":52571,"questionId":6391,"questionText":"Ho
"DATA",601.95,31,1,172,0)
w important are RELATIVES to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":25},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63815,"legacyValue":5,"sequence":1},{"choiceId"
"DATA",601.95,31,1,173,0)
:2357,"choiceText":"Somewhat Dissatisfied","ien":63816,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63817,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63
"DATA",601.95,31,1,174,0)
818,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63819,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63820,"legacyValue":1,"sequence":6}],"choiceDisplay":52574,"
"DATA",601.95,31,1,175,0)
choiceIdentifier":1,"choiceIdentifierIen":19783,"choiceTypeId":28340,"designator":"26.","hint":null,"id":6303,"instrument":188,"introDisplay":52570,"introId":881,"introText":"RELATIVES means how you get along with your parents, grandparents
"DATA",601.95,31,1,176,0)
, brothers, sisters, aunts, uncles, and in-laws. Think about how you get along when you are doing things together like visiting, \r\ntalking on the telephone, or helping each other out.(If you have no living RELATIVES, answer question 25 as
"DATA",601.95,31,1,177,0)
 \"Not Important\" and do not answer question 26). ","max":0,"min":0,"questionDisplay":52573,"questionId":6392,"questionText":"How satisfied are you with your relationships with RELATIVES?","required":false,"responseTypeId":1,"responseTypeT
"DATA",601.95,31,1,178,0)
ext":"MCHOICE","sequence":26},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63821,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63822,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceTex
"DATA",601.95,31,1,179,0)
t":"Extremely Important","ien":63823,"legacyValue":3,"sequence":3}],"choiceDisplay":52577,"choiceIdentifier":1,"choiceIdentifierIen":19784,"choiceTypeId":28341,"designator":"27.","hint":null,"id":6304,"instrument":188,"introDisplay":52575,"
"DATA",601.95,31,1,180,0)
introId":887,"introText":"HOME is where you live. It is your house or apartment and the yard around it. Think about how nice it looks, how big it is, and your rent or house payment.  ","max":0,"min":0,"questionDisplay":52576,"questionId":63
"DATA",601.95,31,1,181,0)
93,"questionText":"How important is your HOME to your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":27},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63824,"legacyValue":5,"sequ
"DATA",601.95,31,1,182,0)
ence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63825,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63826,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little
"DATA",601.95,31,1,183,0)
 Satisfied","ien":63827,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63828,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63829,"legacyValue":1,"sequence":6}],"ch
"DATA",601.95,31,1,184,0)
oiceDisplay":52579,"choiceIdentifier":1,"choiceIdentifierIen":19785,"choiceTypeId":28342,"designator":"28.","hint":null,"id":6305,"instrument":188,"introDisplay":52575,"introId":887,"introText":"HOME is where you live. It is your house or a
"DATA",601.95,31,1,185,0)
partment and the yard around it. Think about how nice it looks, how big it is, and your rent or house payment.  ","max":0,"min":0,"questionDisplay":52578,"questionId":6394,"questionText":"How satisfied are you with your HOME?","required":fa
"DATA",601.95,31,1,186,0)
lse,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":28},{"choice":[{"choiceId":3131,"choiceText":"Not Important","ien":63830,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63831,"legacyValue":2,"seq
"DATA",601.95,31,1,187,0)
uence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63832,"legacyValue":3,"sequence":3}],"choiceDisplay":52582,"choiceIdentifier":1,
"DATA",601.95,31,1,188,0)
"choiceIdentifierIen":19786,"choiceTypeId":28343,"designator":"29.","hint":null,"id":6306,"instrument":188,"introDisplay":52580,"introId":888,"introText":"NEIGHBORHOOD is the area around your home. Think about how nice it looks, the amount 
"DATA",601.95,31,1,189,0)
of crime in the area, and how well you like the people.  ","max":0,"min":0,"questionDisplay":52581,"questionId":6395,"questionText":"How important is your NEIGHBORHOOD to your happiness?","required":false,"responseTypeId":1,"responseTypeTex
"DATA",601.95,31,1,190,0)
t":"MCHOICE","sequence":29},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63833,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat Dissatisfied","ien":63834,"legacyValue":3,"sequence":2},{"choiceId":3
"DATA",601.95,31,1,191,0)
134,"choiceText":"A Little Dissatisfied","ien":63835,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63836,"legacyValue":4,"sequence":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63837,"
"DATA",601.95,31,1,192,0)
legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63838,"legacyValue":1,"sequence":6}],"choiceDisplay":52584,"choiceIdentifier":1,"choiceIdentifierIen":19787,"choiceTypeId":28344,"designator":"30.","hint":nul
"DATA",601.95,31,1,193,0)
l,"id":6307,"instrument":188,"introDisplay":52580,"introId":888,"introText":"NEIGHBORHOOD is the area around your home. Think about how nice it looks, the amount of crime in the area, and how well you like the people.  ","max":0,"min":0,"qu
"DATA",601.95,31,1,194,0)
estionDisplay":52583,"questionId":6396,"questionText":"How satisfied are you with your NEIGHBORHOOD?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":30},{"choice":[{"choiceId":3131,"choiceText":"Not Important","
"DATA",601.95,31,1,195,0)
ien":63839,"legacyValue":1,"sequence":1},{"choiceId":3132,"choiceText":"Important","ien":63840,"legacyValue":2,"sequence":2},{"choiceId":3133,"choiceText":"Extremely Important","ien":63841,"legacyValue":3,"sequence":3}],"choiceDisplay":5258
"DATA",601.95,31,1,196,0)
7,"choiceIdentifier":1,"choiceIdentifierIen":19788,"choiceTypeId":28345,"designator":"31.","hint":null,"id":6308,"instrument":188,"introDisplay":52585,"introId":889,"introText":"COMMUNITY is the whole city, town, or rural area where you liv
"DATA",601.95,31,1,197,0)
e (it is not just your neighborhood). COMMUNITY includes how nice the area looks, the amount of crime, and how well you like the people. \r\nIt also includes places to go for fun like parks,concerts, sporting events, and restaurants. You ma
"DATA",601.95,31,1,198,0)
y also consider the cost of things you need to buy, the availability of jobs, the government,  \r\nschools, taxes, and pollution.","max":0,"min":0,"questionDisplay":52586,"questionId":6397,"questionText":"How important is your COMMUNITY to 
"DATA",601.95,31,1,199,0)
your happiness?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":31},{"choice":[{"choiceId":4110,"choiceText":"Very Dissatisfied","ien":63842,"legacyValue":5,"sequence":1},{"choiceId":2357,"choiceText":"Somewhat 
"DATA",601.95,31,1,200,0)
Dissatisfied","ien":63843,"legacyValue":3,"sequence":2},{"choiceId":3134,"choiceText":"A Little Dissatisfied","ien":63844,"legacyValue":3,"sequence":3},{"choiceId":3135,"choiceText":"A Little Satisfied","ien":63845,"legacyValue":4,"sequence
"DATA",601.95,31,1,201,0)
":4},{"choiceId":2356,"choiceText":"Somewhat Satisfied","ien":63846,"legacyValue":2,"sequence":5},{"choiceId":4109,"choiceText":"Very Satisfied","ien":63847,"legacyValue":1,"sequence":6}],"choiceDisplay":52589,"choiceIdentifier":1,"choiceId
"DATA",601.95,31,1,202,0)
entifierIen":19789,"choiceTypeId":28346,"designator":"32.","hint":null,"id":6309,"instrument":188,"introDisplay":52585,"introId":889,"introText":"COMMUNITY is the whole city, town, or rural area where you live (it is not just your neighborh
"DATA",601.95,31,1,203,0)
ood). COMMUNITY includes how nice the area looks, the amount of crime, and how well you like the people. \r\nIt also includes places to go for fun like parks,concerts, sporting events, and restaurants. You may also consider the cost of thin
"DATA",601.95,31,1,204,0)
gs you need to buy, the availability of jobs, the government,  \r\nschools, taxes, and pollution.","max":0,"min":0,"questionDisplay":52588,"questionId":6398,
"DATA",601.95,31,1,205,0)
"questionText":"How satisfied are you with your COMMUNITY?","required":false,"responseTypeId":1,"responseTypeText":"MCHOICE","sequence":32}],"display":[{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowT
"DATA",601.95,31,1,206,0)
ext","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52510,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontNa
"DATA",601.95,31,1,207,0)
me":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52511,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,
"DATA",601.95,31,1,208,0)
"fontUnderlined":false,"id":52512,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id"
"DATA",601.95,31,1,209,0)
:52513,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52514,"left":8,"mask":"574|||"},{
"DATA",601.95,31,1,210,0)
"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52515,"left":3,"mask":null},{"alignment":"L","columns":null,
"DATA",601.95,31,1,211,0)
"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52516,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,
"DATA",601.95,31,1,212,0)
"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52517,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText",
"DATA",601.95,31,1,213,0)
"fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52518,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS 
"DATA",601.95,31,1,214,0)
Sans Serif","fontSize":10,"fontUnderlined":false,"id":52519,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"
"DATA",601.95,31,1,215,0)
fontUnderlined":false,"id":52520,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":5252
"DATA",601.95,31,1,216,0)
1,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52522,"left":8,"mask":"574|||"},{"alig
"DATA",601.95,31,1,217,0)
nment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52523,"left":3,"mask":null},{"alignment":"L","columns":3,"compone
"DATA",601.95,31,1,218,0)
nt":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52524,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"
"DATA",601.95,31,1,219,0)
fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52525,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","font
"DATA",601.95,31,1,220,0)
Italic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52526,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans 
"DATA",601.95,31,1,221,0)
Serif","fontSize":10,"fontUnderlined":false,"id":52527,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":
"DATA",601.95,31,1,222,0)
"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52528,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,
"DATA",601.95,31,1,223,0)
"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52529,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif",
"DATA",601.95,31,1,224,0)
"fontSize":10,"fontUnderlined":false,"id":52530,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":
"DATA",601.95,31,1,225,0)
false,"id":52531,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52532,"left":8,"mask":"
"DATA",601.95,31,1,226,0)
574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52533,"left":3,"mask":null},{"alignment":"L","colu
"DATA",601.95,31,1,227,0)
mns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52534,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fo
"DATA",601.95,31,1,228,0)
ntBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52535,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWi
"DATA",601.95,31,1,229,0)
ndowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52536,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"font
"DATA",601.95,31,1,230,0)
Name":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52537,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","font
"DATA",601.95,31,1,231,0)
Size":10,"fontUnderlined":false,"id":52538,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"i
"DATA",601.95,31,1,232,0)
d":52539,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52540,"left":3,"mask":nu
"DATA",601.95,31,1,233,0)
ll},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52541,"left":3,"mask":null},{"alignment":"L","columns":
"DATA",601.95,31,1,234,0)
3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52542,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBol
"DATA",601.95,31,1,235,0)
d":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52543,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText
"DATA",601.95,31,1,236,0)
","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52544,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontN
"DATA",601.95,31,1,237,0)
ame":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52545,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize"
"DATA",601.95,31,1,238,0)
:10,"fontUnderlined":false,"id":52546,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":
"DATA",601.95,31,1,239,0)
false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52547,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans S
"DATA",601.95,31,1,240,0)
erif","fontSize":10,"fontUnderlined":false,"id":52548,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderline
"DATA",601.95,31,1,241,0)
d":false,"id":52549,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52550,"left":
"DATA",601.95,31,1,242,0)
3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52551,"left":3,"mask":null},{"alignment":"L"
"DATA",601.95,31,1,243,0)
,"columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52552,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":nu
"DATA",601.95,31,1,244,0)
ll,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52553,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"c
"DATA",601.95,31,1,245,0)
lWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52554,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":f
"DATA",601.95,31,1,246,0)
alse,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52555,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif"
"DATA",601.95,31,1,247,0)
,"fontSize":10,"fontUnderlined":false,"id":52556,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":fa
"DATA",601.95,31,1,248,0)
lse,"id":52557,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52558,"left":3,"ma
"DATA",601.95,31,1,249,0)
sk":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52559,"left":8,"mask":"574|||"},{"alignment":"L","co
"DATA",601.95,31,1,250,0)
lumns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52560,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"f
"DATA",601.95,31,1,251,0)
ontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52561,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWind
"DATA",601.95,31,1,252,0)
owText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52562,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,
"DATA",601.95,31,1,253,0)
"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52563,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSi
"DATA",601.95,31,1,254,0)
ze":10,"fontUnderlined":false,"id":52564,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":fal
"DATA",601.95,31,1,255,0)
se,"id":52565,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":
"DATA",601.95,31,1,256,0)
"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52566,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fon
"DATA",601.95,31,1,257,0)
tUnderlined":false,"id":52567,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":525
"DATA",601.95,31,1,258,0)
68,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52569,"left":8,"mask":"574|||"},{"ali
"DATA",601.95,31,1,259,0)
gnment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52570,"left":3,"mask":null},{"alignment":"L","columns":null,"com
"DATA",601.95,31,1,260,0)
ponent":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52571,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fon
"DATA",601.95,31,1,261,0)
tColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52572,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fon
"DATA",601.95,31,1,262,0)
tItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52573,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans
"DATA",601.95,31,1,263,0)
 Serif","fontSize":10,"fontUnderlined":false,"id":52574,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"font
"DATA",601.95,31,1,264,0)
Underlined":false,"id":52575,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52576,"l
"DATA",601.95,31,1,265,0)
eft":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52577,"left":8,"mask":"574|||"},{"alignmen
"DATA",601.95,31,1,266,0)
t":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52578,"left":3,"mask":null},{"alignment":"L","columns":3,"component":
"DATA",601.95,31,1,267,0)
"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52579,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"font
"DATA",601.95,31,1,268,0)
Color":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52580,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItal
"DATA",601.95,31,1,269,0)
ic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52581,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Seri
"DATA",601.95,31,1,270,0)
f","fontSize":10,"fontUnderlined":false,"id":52582,"left":8,"mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnder
"DATA",601.95,31,1,271,0)
lined":false,"id":52583,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52584,"left":8,"
"DATA",601.95,31,1,272,0)
mask":"574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif",
"DATA",601.95,31,1,273,0)
"fontSize":10,"fontUnderlined":false,"id":52585,"left":3,"mask":null},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":
"DATA",601.95,31,1,274,0)
false,"id":52586,"left":3,"mask":null},{"alignment":"L","columns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52587,"left":8,"mask":"
"DATA",601.95,31,1,275,0)
574|||"},{"alignment":"L","columns":null,"component":null,"fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52588,"left":3,"mask":null},{"alignment":"L","colu
"DATA",601.95,31,1,276,0)
mns":3,"component":"RA","fontBold":false,"fontColor":"clWindowText","fontItalic":false,"fontName":"MS Sans Serif","fontSize":10,"fontUnderlined":false,"id":52589,"left":8,"mask":"574|||"}],"info":{"author":null,"auxDate":null,"auxVersion":"
"DATA",601.95,31,1,277,0)
1.0.3.2","copyrightText":"Copyright (c) 1988, 1994 Michael B. Frisch, PhD.","copyrighted":true,"dllDate":null,"dllVersion":null,"enteredBy":"HOWELL,LYNN","entryDate":"2012-01-17","fullText":false,"id":188,"lastEditDate":3190815.1731,"lastEd
"DATA",601.95,31,1,278,0)
itedBy":"Schultz, Roger","legacy":false,"licenseCurrent":true,"name":"QOLI","national":true,"normSample":null,"operational":"Y","printTitle":"Quality of Life Inventory","publicationDate":1988,"publisher":"Michael B. Frisch, PhD.","purpose":
"DATA",601.95,31,1,279,0)
"Assess overall life satisfaction","reference":null,"requireSignature":false,"requiresLicense":"Y","scoringRevision":2,"scoringRoutine":"YTSQOLI","scoringTag":"DLL","submitNational":true,"targetPopulation":null,"version":null,"wasOperationa
"DATA",601.95,31,1,280,0)
l":true},"report":{"id":89,"instrument":188,"template":".| .|  Quality of Life Inventory|       |  Date Given: <.Date_Given.>|  Clinician: <.Staff_Ordered_By.>|  Location: <.Location.>|       |  Veteran: <.Patient_Name_Last_First.>|  SSN: <
"DATA",601.95,31,1,281,0)
.Patient_SSN.>| \r\n DOB: <.Patient_Date_Of_Birth.> (<.Patient_Age.>)|  Gender: <.Patient_Gender.>|||INTRODUCTION|\r\n  The Quality of Life Inventory (QOLI) provides a score that indicates a|\r\n  person's overall satisfaction with life. Pe
"DATA",601.95,31,1,282,0)
ople's life satisfaction is based|\r\n  on how well their needs, goals, and wishes are being met in important areas|\r\n  of life.|<*Answer_999999999999*>||\r\n Copyright (c) 1988, 1994 Michael B. Frisch Ph.D. All rights reserved.|         
"DATA",601.95,31,1,283,0)
     $~"},"scaleGroup":[{"grid1":0,"grid2":0,"grid3":0,"id":188,"instrument":188,"name":"QOLI","ordInc":1,"ordMax":7,"ordMin":-7,"ordTitle":"Score","scale":[{"groupId":188,"id":762,"name":"HEALTH","scoringKey":[{"id":7232,"questionId":6367,
"DATA",601.95,31,1,284,0)
"scaleId":762,"targetText":"Important","value":1}],"sequence":1,"xLabel":"HLTH"},{"groupId":188,"id":763,"name":"SELF-ESTEEM","scoringKey":[{"id":7233,"questionId":6369,"scaleId":763,"targetText":"Important","value":1}],"sequence":2,"xLabel
"DATA",601.95,31,1,285,0)
":"SELF"},{"groupId":188,"id":764,"name":"GOALS-AND-VALUES","scoringKey":[{"id":7234,"questionId":6371,"scaleId":764,"targetText":"Important","value":1}],"sequence":3,"xLabel":"GOAL"},{"groupId":188,"id":765,"name":"MONEY","scoringKey":[{"i
"DATA",601.95,31,1,286,0)
d":7235,"questionId":6373,"scaleId":765,"targetText":"Important","value":1}],"sequence":4,"xLabel":"MONY"},{"groupId":188,"id":766,"name":"WORK","scoringKey":[{"id":7236,"questionId":6375,"scaleId":766,"targetText":"Important","value":1}],"
"DATA",601.95,31,1,287,0)
sequence":5,"xLabel":"WORK"},{"groupId":188,"id":767,"name":"PLAY","scoringKey":[{"id":7237,"questionId":6377,"scaleId":767,"targetText":"Important","value":1}],"sequence":6,"xLabel":"PLAY"},{"groupId":188,"id":768,"name":"LEARNING","scorin
"DATA",601.95,31,1,288,0)
gKey":[{"id":7238,"questionId":6379,"scaleId":768,"targetText":"Important","value":1}],"sequence":7,"xLabel":"LERN"},{"groupId":188,"id":769,"name":"CREATIVITY","scoringKey":[{"id":7239,"questionId":6381,"scaleId":769,"targetText":"Importan
"DATA",601.95,31,1,289,0)
t","value":1}],"sequence":8,"xLabel":"CREA"},{"groupId":188,"id":770,"name":"HELPING","scoringKey":[{"id":7240,"questionId":6383,"scaleId":770,"targetText":
"DATA",601.95,31,1,290,0)
"Important","value":1}],"sequence":9,"xLabel":"HELP"},{"groupId":188,"id":771,"name":"LOVE","scoringKey":[{"id":7241,"questionId":6385,"scaleId":771,"targetText":"Important","value":1}],"sequence":10,"xLabel":"LOVE"},{"groupId":188,"id":772
"DATA",601.95,31,1,291,0)
,"name":"FRIENDS","scoringKey":[{"id":7242,"questionId":6387,"scaleId":772,"targetText":"Important","value":1}],"sequence":11,"xLabel":"FRND"},{"groupId":188,"id":773,"name":"CHILDREN","scoringKey":[{"id":7243,"questionId":6389,"scaleId":77
"DATA",601.95,31,1,292,0)
3,"targetText":"Important","value":1}],"sequence":12,"xLabel":"CHLD"},{"groupId":188,"id":774,"name":"RELATIVES","scoringKey":[{"id":7244,"questionId":6391,"scaleId":774,"targetText":"Important","value":1}],"sequence":13,"xLabel":"RELA"},{"
"DATA",601.95,31,1,293,0)
groupId":188,"id":775,"name":"HOME","scoringKey":[{"id":7245,"questionId":6393,"scaleId":775,"targetText":"Important","value":1}],"sequence":14,"xLabel":"HOME"},{"groupId":188,"id":776,"name":"NEIGHBORHOOD","scoringKey":[{"id":7246,"questio
"DATA",601.95,31,1,294,0)
nId":6395,"scaleId":776,"targetText":"Important","value":1}],"sequence":15,"xLabel":"NEIG"},{"groupId":188,"id":777,"name":"COMMUNITY","scoringKey":[{"id":7247,"questionId":6397,"scaleId":777,"targetText":"Important","value":1}],"sequence":
"DATA",601.95,31,1,295,0)
16,"xLabel":"COMM"}],"sequence":1}],"verify":["601.71:188","601.72:6367","601.72:6368","601.72:6369","601.72:6370","601.72:6371","601.72:6372","601.72:6373","601.72:6374","601.72:6375","601.72:6376","601.72:6377","601.72:6378","601.72:6379"
"DATA",601.95,31,1,296,0)
,"601.72:6380","601.72:6381","601.72:6382","601.72:6383","601.72:6384","601.72:6385","601.72:6386","601.72:6387","601.72:6388","601.72:6389","601.72:6390","601.72:6391","601.72:6392","601.72:6393","601.72:6394","601.72:6395","601.72:6396","
"DATA",601.95,31,1,297,0)
601.72:6397","601.72:6398","601.73:867","601.73:868","601.73:869","601.73:870","601.73:871","601.73:872","601.73:873","601.73:874","601.73:875","601.73:876","601.73:877","601.73:878","601.73:881","601.73:887","601.73:888","601.73:889","601.
"DATA",601.95,31,1,298,0)
75:2356","601.75:2357","601.75:3131","601.75:3132","601.75:3133","601.75:3134","601.75:3135","601.75:4109","601.75:4110","601.751:63704","601.751:63705","601.751:63706","601.751:63707","601.751:63708","601.751:63709","601.751:63710","601.75
"DATA",601.95,31,1,299,0)
1:63711","601.751:63712","601.751:63713","601.751:63714","601.751:63715","601.751:63716","601.751:63717","601.751:63718","601.751:63719","601.751:63720","601.751:63721","601.751:63722","601.751:63723","601.751:63724","601.751:63725","601.75
"DATA",601.95,31,1,300,0)
1:63726","601.751:63727","601.751:63728","601.751:63729","601.751:63730","601.751:63731","601.751:63732","601.751:63733","601.751:63734","601.751:63735","601.751:63736","601.751:63737","601.751:63738","601.751:63739","601.751:63740","601.75
"DATA",601.95,31,1,301,0)
1:63741","601.751:63742","601.751:63743","601.751:63744","601.751:63745","601.751:63746","601.751:63747","601.751:63748","601.751:63749","601.751:63750","601.751:63751","601.751:63752","601.751:63753","601.751:63754","601.751:63755","601.75
"DATA",601.95,31,1,302,0)
1:63756","601.751:63757","601.751:63758","601.751:63759","601.751:63760","601.751:63761","601.751:63762","601.751:63763","601.751:63764","601.751:63765","601.751:63766","601.751:63767","601.751:63768","601.751:63769","601.751:63770","601.75
"DATA",601.95,31,1,303,0)
1:63771","601.751:63772","601.751:63773","601.751:63774","601.751:63775","601.751:63776","601.751:63777","601.751:63778","601.751:63779","601.751:63780","601.751:63781","601.751:63782","601.751:63783","601.751:63784","601.751:63785","601.75
"DATA",601.95,31,1,304,0)
1:63786","601.751:63787","601.751:63788","601.751:63789","601.751:63790","601.751:63791","601.751:63792","601.751:63793","601.751:63794","601.751:63795","601.751:63796","601.751:63797","601.751:63798","601.751:63799","601.751:63800","601.75
"DATA",601.95,31,1,305,0)
1:63801","601.751:63802","601.751:63803","601.751:63804","601.751:63805","601.751:63806","601.751:63807","601.751:63808","601.751:63809","601.751:63810","601.751:63811","601.751:63812","601.751:63813","601.751:63814","601.751:63815","601.75
"DATA",601.95,31,1,306,0)
1:63816","601.751:63817","601.751:63818","601.751:63819","601.751:63820","601.751:63821","601.751:63822","601.751:63823","601.751:63824","601.751:63825",
"DATA",601.95,31,1,307,0)
"601.751:63826","601.751:63827","601.751:63828","601.751:63829","601.751:63830","601.751:63831","601.751:63832","601.751:63833","601.751:63834","601.751:63835","601.751:63836","601.751:63837","601.751:63838","601.751:63839","601.751:63840",
"DATA",601.95,31,1,308,0)
"601.751:63841","601.751:63842","601.751:63843","601.751:63844","601.751:63845","601.751:63846","601.751:63847","601.76:6278","601.76:6279","601.76:6280","601.76:6281","601.76:6282","601.76:6283","601.76:6284","601.76:6285","601.76:6286","6
"DATA",601.95,31,1,309,0)
01.76:6287","601.76:6288","601.76:6289","601.76:6290","601.76:6291","601.76:6292","601.76:6293","601.76:6294","601.76:6295","601.76:6296","601.76:6297","601.76:6298","601.76:6299","601.76:6300","601.76:6301","601.76:6302","601.76:6303","601
"DATA",601.95,31,1,310,0)
.76:6304","601.76:6305","601.76:6306","601.76:6307","601.76:6308","601.76:6309","601.86:188","601.87:762","601.87:763","601.87:764","601.87:765","601.87:766","601.87:767","601.87:768","601.87:769","601.87:770","601.87:771","601.87:772","601
"DATA",601.95,31,1,311,0)
.87:773","601.87:774","601.87:775","601.87:776","601.87:777","601.88:52510","601.88:52511","601.88:52512","601.88:52513","601.88:52514","601.88:52515","601.88:52516","601.88:52517","601.88:52518","601.88:52519","601.88:52520","601.88:52521"
"DATA",601.95,31,1,312,0)
,"601.88:52522","601.88:52523","601.88:52524","601.88:52525","601.88:52526","601.88:52527","601.88:52528","601.88:52529","601.88:52530","601.88:52531","601.88:52532","601.88:52533","601.88:52534","601.88:52535","601.88:52536","601.88:52537"
"DATA",601.95,31,1,313,0)
,"601.88:52538","601.88:52539","601.88:52540","601.88:52541","601.88:52542","601.88:52543","601.88:52544","601.88:52545","601.88:52546","601.88:52547","601.88:52548","601.88:52549","601.88:52550","601.88:52551","601.88:52552","601.88:52553"
"DATA",601.95,31,1,314,0)
,"601.88:52554","601.88:52555","601.88:52556","601.88:52557","601.88:52558","601.88:52559","601.88:52560","601.88:52561","601.88:52562","601.88:52563","601.88:52564","601.88:52565","601.88:52566","601.88:52567","601.88:52568","601.88:52569"
"DATA",601.95,31,1,315,0)
,"601.88:52570","601.88:52571","601.88:52572","601.88:52573","601.88:52574","601.88:52575","601.88:52576","601.88:52577","601.88:52578","601.88:52579","601.88:52580","601.88:52581","601.88:52582","601.88:52583","601.88:52584","601.88:52585"
"DATA",601.95,31,1,316,0)
,"601.88:52586","601.88:52587","601.88:52588","601.88:52589","601.89:19758","601.89:19759","601.89:19760","601.89:19761","601.89:19762","601.89:19763","601.89:19764","601.89:19765","601.89:19766","601.89:19767","601.89:19768","601.89:19769"
"DATA",601.95,31,1,317,0)
,"601.89:19770","601.89:19771","601.89:19772","601.89:19773","601.89:19774","601.89:19775","601.89:19776","601.89:19777","601.89:19778","601.89:19779","601.89:19780","601.89:19781","601.89:19782","601.89:19783","601.89:19784","601.89:19785"
"DATA",601.95,31,1,318,0)
,"601.89:19786","601.89:19787","601.89:19788","601.89:19789","601.91:7232","601.91:7233","601.91:7234","601.91:7235","601.91:7236","601.91:7237","601.91:7238","601.91:7239","601.91:7240","601.91:7241","601.91:7242","601.91:7243","601.91:724
"DATA",601.95,31,1,319,0)
4","601.91:7245","601.91:7246","601.91:7247"]}],"xchg":{"date":3190919.115809,"description":"(no description)","name":"YS*5.01*142 UPDATES","source":"MELDRUM@CAMP MASTER","version":1.02}}
"DATA",601.95,31,2,0)
^^1^1^3190919
"DATA",601.95,31,2,1,0)
(no description)
"DATA",601.95,31,3,0)
^601.953D^1^1
"DATA",601.95,31,3,1,0)
3190919.170924^1085
"FIA",601.95)
MH INSTRUMENT EXCHANGE
"FIA",601.95,0)
^YTT(601.95,
"FIA",601.95,0,0)
601.95
"FIA",601.95,0,1)
n^n^f^^n^^y^o^n
"FIA",601.95,0,10)

"FIA",601.95,0,11)
I $$INCLUDE^YTXCHG(Y,"XCHGLST","YS142PST")
"FIA",601.95,0,"RLRO")

"FIA",601.95,0,"VR")
5.01^YS
"FIA",601.95,601.95)
0
"FIA",601.95,601.951)
0
"FIA",601.95,601.952)
0
"FIA",601.95,601.953)
0
"FIA",601.95,601.954)
0
"INIT")
POST^YS142PST
"IX",601.95,601.95,"C",0)
601.95^C^Uniqueness Index for Key 'A' of File #601.95^R^^R^IR^I^601.95^^^^^LS
"IX",601.95,601.95,"C",.1,0)
^^3^3^3170124^
"IX",601.95,601.95,"C",.1,1,0)
This index uses NAME and DATE CREATED to provide a unique key for 
"IX",601.95,601.95,"C",.1,2,0)
instrument exchange entries.  The combination is used to provide a level 
"IX",601.95,601.95,"C",.1,3,0)
of certainty that the correct entry is being distributed.
"IX",601.95,601.95,"C",1)
S ^YTT(601.95,"C",X(1),X(2),DA)=""
"IX",601.95,601.95,"C",2)
K ^YTT(601.95,"C",X(1),X(2),DA)
"IX",601.95,601.95,"C",2.5)
K ^YTT(601.95,"C")
"IX",601.95,601.95,"C",11.1,0)
^.114IA^2^2
"IX",601.95,601.95,"C",11.1,1,0)
1^F^601.95^.01^^1
"IX",601.95,601.95,"C",11.1,2,0)
2^F^601.95^.02^^2
"KEY",601.95,601.95,"A",0)
601.95^A^P^1485
"KEY",601.95,601.95,"A",2,0)
^.312IA^2^2
"KEY",601.95,601.95,"A",2,1,0)
.01^601.95^1
"KEY",601.95,601.95,"A",2,2,0)
.02^601.95^2
"KEYPTR",601.95,601.95,"A")
601.95^C
"MBREQ")
0
"PKG",166,-1)
1^1
"PKG",166,0)
MENTAL HEALTH^YS^Version 5.01 of Mental Health
"PKG",166,22,0)
^9.49I^1^1
"PKG",166,22,1,0)
5.01^2941230^2950310
"PKG",166,22,1,"PAH",1,0)
142^3190919^1085
"PKG",166,22,1,"PAH",1,1,0)
^^25^25^3190919
"PKG",166,22,1,"PAH",1,1,1,0)
This patch updates the following Mental Health instruments:
"PKG",166,22,1,"PAH",1,1,2,0)
 
"PKG",166,22,1,"PAH",1,1,3,0)
AIMS
"PKG",166,22,1,"PAH",1,1,4,0)
  The disclaimer is no longer added to the progress note text.
"PKG",166,22,1,"PAH",1,1,5,0)
 
"PKG",166,22,1,"PAH",1,1,6,0)
C-SSRS
"PKG",166,22,1,"PAH",1,1,7,0)
  A Key Indicator is now added if Question 3 response is 'Yes'.
"PKG",166,22,1,"PAH",1,1,8,0)
 
"PKG",166,22,1,"PAH",1,1,9,0)
MMPI-2-RF
"PKG",166,22,1,"PAH",1,1,10,0)
  T-Score now calculates correctly for the EID scale.
"PKG",166,22,1,"PAH",1,1,11,0)
  Score for PSYC-r is now correct when question 216 is true.
"PKG",166,22,1,"PAH",1,1,12,0)
 
"PKG",166,22,1,"PAH",1,1,13,0)
QOLI
"PKG",166,22,1,"PAH",1,1,14,0)
  A scoring error introduced by YS*5.01*139 has been corrected.
"PKG",166,22,1,"PAH",1,1,15,0)
 
"PKG",166,22,1,"PAH",1,1,16,0)
If an instrument with many scales preceded and instrument with a few 
"PKG",166,22,1,"PAH",1,1,17,0)
scales during a session, some additional scales were carried over to the 
"PKG",166,22,1,"PAH",1,1,18,0)
instrument with fewer scales.  This was visible in the Health Summary
"PKG",166,22,1,"PAH",1,1,19,0)
component and TIU objects.  It also sometimes affected the display in the
"PKG",166,22,1,"PAH",1,1,20,0)
Special Reports Wizard.  This is corrected with this patch.  Additionally,
"PKG",166,22,1,"PAH",1,1,21,0)
the patch checks previous administrations to make sure each administration
"PKG",166,22,1,"PAH",1,1,22,0)
has only the correct scales associated.
"PKG",166,22,1,"PAH",1,1,23,0)
 
"PKG",166,22,1,"PAH",1,1,24,0)
Additional record locks were added to reduce the likelihood of errors when
"PKG",166,22,1,"PAH",1,1,25,0)
generating a report for a legacy instrument.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
12
"RTN","YS142FIX")
0^5^B6004222^n/a
"RTN","YS142FIX",1,0)
YS142FIX ;SLC/KCM - Patch 142 fix scores with extra scales ; 03/20/2017
"RTN","YS142FIX",2,0)
 ;;5.01;MENTAL HEALTH;**142**;Dec 30, 1994;Build 14
"RTN","YS142FIX",3,0)
 ;
"RTN","YS142FIX",4,0)
ADM2019 ; loop through administrations from 2019
"RTN","YS142FIX",5,0)
 N YS142S,YS142T,YS142D,YS142A,YS142U ; scales,test,date,admin,updates
"RTN","YS142FIX",6,0)
 D BLDSCL
"RTN","YS142FIX",7,0)
 S ^XTMP("YTS-RESCORE",0)=$$FMADD^XLFDT(DT,30)_U_DT_U_"MH Extraneous Scores"
"RTN","YS142FIX",8,0)
 S YS142U=0
"RTN","YS142FIX",9,0)
 S YS142T=0 F  S YS142T=$O(^YTT(601.84,"AC",YS142T)) Q:'YS142T  D
"RTN","YS142FIX",10,0)
 . S YS142D=3190000 F  S YS142D=$O(^YTT(601.84,"AC",YS142T,YS142D)) Q:'YS142D  D
"RTN","YS142FIX",11,0)
 . . S YS142A=0 F  S YS142A=$O(^YTT(601.84,"AC",YS142T,YS142D,YS142A)) Q:'YS142A  D
"RTN","YS142FIX",12,0)
 . . . I $$SCALERR(YS142A) D RESCORE(YS142A)
"RTN","YS142FIX",13,0)
 S ^XTMP("YTS-RESCORE","SCALE-UPDATES")=YS142U
"RTN","YS142FIX",14,0)
 Q
"RTN","YS142FIX",15,0)
RESCORE(YS142A) ; delete results and rescore admin
"RTN","YS142FIX",16,0)
 ; expects YS142U (update count)
"RTN","YS142FIX",17,0)
 D DELRSLTS^YTSCOREV(YS142A)
"RTN","YS142FIX",18,0)
 S $P(^YTT(601.84,YS142A,0),U,12)=0 ; force re-score to current revision
"RTN","YS142FIX",19,0)
 I $$SCOREONE^YTSCOREV(YS142A) S YS142U=YS142U+1
"RTN","YS142FIX",20,0)
 Q
"RTN","YS142FIX",21,0)
SCALERR(YS142A) ; return 1 if more scale scores than expected
"RTN","YS142FIX",22,0)
 N TEST,CNT,RSLT,IEN
"RTN","YS142FIX",23,0)
 S TEST=$P($G(^YTT(601.84,YS142A,0)),U,3)
"RTN","YS142FIX",24,0)
 I '$G(YS142S(TEST),0) QUIT 0
"RTN","YS142FIX",25,0)
 ;
"RTN","YS142FIX",26,0)
 S CNT=0,RSLT=0
"RTN","YS142FIX",27,0)
 S IEN=0 F  S IEN=$O(^YTT(601.92,"AC",YS142A,IEN)) Q:'IEN  D  Q:RSLT
"RTN","YS142FIX",28,0)
 . S CNT=CNT+1
"RTN","YS142FIX",29,0)
 . I CNT>YS142S(TEST) S RSLT=1
"RTN","YS142FIX",30,0)
 Q RSLT
"RTN","YS142FIX",31,0)
 ;
"RTN","YS142FIX",32,0)
BLDSCL ; Build scales into YS142S
"RTN","YS142FIX",33,0)
 ; builds array of scale counts per instrument
"RTN","YS142FIX",34,0)
 N TEST,SCLCNT,GSEQ,GRP,SSEQ,SCL
"RTN","YS142FIX",35,0)
 S TEST=0 F  S TEST=$O(^YTT(601.71,TEST)) Q:'TEST  D
"RTN","YS142FIX",36,0)
 . I $P($G(^YTT(601.71,TEST,2)),U,2)'="Y" QUIT  ; is active instrument?
"RTN","YS142FIX",37,0)
 . S SCLCNT=0
"RTN","YS142FIX",38,0)
 . S GSEQ=0 F  S GSEQ=$O(^YTT(601.86,"AC",TEST,GSEQ)) Q:'GSEQ  D
"RTN","YS142FIX",39,0)
 . . S GRP=0 F  S GRP=$O(^YTT(601.86,"AC",TEST,GSEQ,GRP)) Q:'GRP  D
"RTN","YS142FIX",40,0)
 . . . S SSEQ=0 F  S SSEQ=$O(^YTT(601.87,"AC",GRP,SSEQ)) Q:'SSEQ  D
"RTN","YS142FIX",41,0)
 . . . . S SCL=0 F  S SCL=$O(^YTT(601.87,"AC",GRP,SSEQ,SCL)) Q:'SCL  D
"RTN","YS142FIX",42,0)
 . . . . . S SCLCNT=SCLCNT+1
"RTN","YS142FIX",43,0)
 . S YS142S(TEST)=SCLCNT ;_U_$P(^YTT(601.71,TEST,0),U)
"RTN","YS142FIX",44,0)
 Q
"RTN","YS142FIX",45,0)
QTASK(RESUME) ; Create background task for checking extraneous scales
"RTN","YS142FIX",46,0)
 N ZTRTN,ZTDESC,ZTDTH,ZTIO,ZTSAVE,ZTSK
"RTN","YS142FIX",47,0)
 S ZTIO=""
"RTN","YS142FIX",48,0)
 S ZTRTN="ADM2019^YS142FIX"
"RTN","YS142FIX",49,0)
 S ZTDESC="Check extraneous MH scales"
"RTN","YS142FIX",50,0)
 S ZTDTH=RESUME
"RTN","YS142FIX",51,0)
 D ^%ZTLOAD
"RTN","YS142FIX",52,0)
 I '$G(ZTSK) D MES^XPDUTL("Unsuccessful queue of re-scoring job.")
"RTN","YS142FIX",53,0)
 Q
"RTN","YS142PST")
0^^B2733566^n/a
"RTN","YS142PST",1,0)
YS142PST ;SLC/KCM - Patch 142 post-init ; 03/20/2017
"RTN","YS142PST",2,0)
 ;;5.01;MENTAL HEALTH;**142**;Dec 30, 1994;Build 14
"RTN","YS142PST",3,0)
 ;
"RTN","YS142PST",4,0)
EXPDATE ; export date used to update 601.71:18
"RTN","YS142PST",5,0)
 ;;3190815.1731
"RTN","YS142PST",6,0)
 Q
"RTN","YS142PST",7,0)
 ;
"RTN","YS142PST",8,0)
POST ; post-init for patch 142
"RTN","YS142PST",9,0)
 N REC,MMPI2RF,QOLI
"RTN","YS142PST",10,0)
 ;Queue check of extraneous scales
"RTN","YS142PST",11,0)
 D QTASK^YS142FIX(($H+1)_",3600")
"RTN","YS142PST",12,0)
 ;
"RTN","YS142PST",13,0)
 ;Re-score QOLI to catch problems between patch 139 and this install
"RTN","YS142PST",14,0)
 K REC
"RTN","YS142PST",15,0)
 S REC(93)=2 ; Set scoring revision to 2
"RTN","YS142PST",16,0)
 S QOLI=$O(^YTT(601.71,"B","QOLI",0))
"RTN","YS142PST",17,0)
 I QOLI D
"RTN","YS142PST",18,0)
 . D FMUPD^YTXCHGU(601.71,.REC,QOLI)
"RTN","YS142PST",19,0)
 . D QTASK^YTSCOREV(QOLI_"~2",($H+3)_",3600")
"RTN","YS142PST",20,0)
 ;
"RTN","YS142PST",21,0)
 ;Re-score MMPI-2-RF to fix the EID, PSYC-r scales
"RTN","YS142PST",22,0)
 S REC(93)=3 ; Set scoring revision to 3
"RTN","YS142PST",23,0)
 S MMPI2RF=$O(^YTT(601.71,"B","MMPI-2-RF",0))
"RTN","YS142PST",24,0)
 I MMPI2RF D
"RTN","YS142PST",25,0)
 . D FMUPD^YTXCHGU(601.71,.REC,MMPI2RF)
"RTN","YS142PST",26,0)
 . D QTASK^YTSCOREV(MMPI2RF_"~3",($H+5)_",3600")
"RTN","YS142PST",27,0)
 ;
"RTN","YS142PST",28,0)
 ;Reporting updates to C-SSRS
"RTN","YS142PST",29,0)
 D INSTALLQ^YTXCHG("XCHGLST","YS142PST")
"RTN","YS142PST",30,0)
 Q
"RTN","YS142PST",31,0)
 ;
"RTN","YS142PST",32,0)
XCHGLST(ARRAY) ; return array of instrument exchange entries
"RTN","YS142PST",33,0)
 ; ARRAY(cnt,1)=instrument exchange entry name
"RTN","YS142PST",34,0)
 ; ARRAY(cnt,2)=instrument exchange entry creation date
"RTN","YS142PST",35,0)
 N I,X
"RTN","YS142PST",36,0)
 F I=1:1 S X=$P($T(ENTRIES+I),";;",2,99) Q:X="zzzzz"  D
"RTN","YS142PST",37,0)
 . S ARRAY(I,1)=$P(X,U)
"RTN","YS142PST",38,0)
 . S ARRAY(I,2)=$P(X,U,2)
"RTN","YS142PST",39,0)
 Q
"RTN","YS142PST",40,0)
ENTRIES ; New MHA instruments ^ Exchange Entry Date
"RTN","YS142PST",41,0)
 ;;YS*5.01*142 UPDATES^09/19/2019@11:58:09
"RTN","YS142PST",42,0)
 ;;zzzzz
"RTN","YS142PST",43,0)
 ;
"RTN","YS142PST",44,0)
MODDATE ; Set new dates for tests listed so the GUI will reload the definition
"RTN","YS142PST",45,0)
 ; This is best done in the account where the build is created so that the
"RTN","YS142PST",46,0)
 ; original and destination accounts match.
"RTN","YS142PST",47,0)
 N I,X,NEWDT
"RTN","YS142PST",48,0)
 S NEWDT=$P($T(EXPDATE+1),";;",2)
"RTN","YS142PST",49,0)
 F I=1:1 S X=$P($P($T(TESTS+I),";;",2),"^") Q:X="zzzzz"  D NEWDATE^YTXCHGU(X,NEWDT)
"RTN","YS142PST",50,0)
 Q
"RTN","YS142PST",51,0)
TESTS ; exported instruments
"RTN","YS142PST",52,0)
 ;;C-SSRS^updated
"RTN","YS142PST",53,0)
 ;;QOLI^updated
"RTN","YS142PST",54,0)
 ;;zzzzz
"RTN","YS142PST",55,0)
 ;
"RTN","YTQAPI2B")
0^4^B111166703^B121041515
"RTN","YTQAPI2B",1,0)
YTQAPI2B ;SLC/BLD - MHAX ANSWERS SPECIAL HANDLING #2 ; 2/7/18 17:35
"RTN","YTQAPI2B",2,0)
 ;;5.01;MENTAL HEALTH;**134,136,139,142**;Dec 30, 1994;Build 14
"RTN","YTQAPI2B",3,0)
 ;
"RTN","YTQAPI2B",4,0)
 ; This routine was split from YTQAPI2A.
"RTN","YTQAPI2B",5,0)
 ; This routine handles limited complex reporting requirements without
"RTN","YTQAPI2B",6,0)
 ; modifying YS_AUX.DLL by adding free text "answers" that can be used by
"RTN","YTQAPI2B",7,0)
 ; a report.
"RTN","YTQAPI2B",8,0)
 ;,
"RTN","YTQAPI2B",9,0)
 ; Assumptions:  EDIT incomplete instrument should ignore the extra answers
"RTN","YTQAPI2B",10,0)
 ; since there are no associated questions.  GRAPHING should ignore the
"RTN","YTQAPI2B",11,0)
 ; answers since they not numeric.
"RTN","YTQAPI2B",12,0)
 ;
"RTN","YTQAPI2B",13,0)
SPECIAL(TSTNM,YSDATA,N,YSAD,YSTSTN) ; 1 add "hidden" computed question text
"RTN","YTQAPI2B",14,0)
 N ANSWER,DEPSCORE,IEN,KEY,LP,PCT,PTSD,SATTSCORE,SCORES,SCRE,SUCSCORE,SUISCORE,SWHENSCORES,TEXT,TEXT1,TEXT2
"RTN","YTQAPI2B",15,0)
 N TEXT2A,TEXT2B,TOT,YSCORE,YSCREC,SUISCRN,ALLQUES,POSTXT1,POSTXT2,QUE1621,QUE67,QUE915
"RTN","YTQAPI2B",16,0)
 ;
"RTN","YTQAPI2B",17,0)
 I TSTNM="PC-PTSD-5+I9" D  Q
"RTN","YTQAPI2B",18,0)
 .N I,YSCORE,PTSD,SCORES,SUISCRN,SWHENSCORE,TEXT
"RTN","YTQAPI2B",19,0)
 .S (ANSWER,SCORES)=0
"RTN","YTQAPI2B",20,0)
 .D GETSCORE^YTQAPI8(.YSCORE,.YS)
"RTN","YTQAPI2B",21,0)
 .S SCORES=$P(^TMP($J,"YSCOR",2),"=",2)
"RTN","YTQAPI2B",22,0)
 .I SCORES=0 D
"RTN","YTQAPI2B",23,0)
 ..S YSDATA(N)="7776^9999;1^"_SCORES,N=N+1
"RTN","YTQAPI2B",24,0)
 ..S YSDATA(N)="7771^9999;1^The score for this administration indicates a NEGATIVE screen for PTSD." S N=N+1
"RTN","YTQAPI2B",25,0)
 .S SUISCORE=$P(^TMP($J,"YSCOR",3),"=",2)
"RTN","YTQAPI2B",26,0)
 .I $G(SCORES)<4,$G(SCORES)>0 D
"RTN","YTQAPI2B",27,0)
 ..S YSDATA(N)="7776^9999;1^"_SCORES,N=N+1
"RTN","YTQAPI2B",28,0)
 ..S YSDATA(N)="7771^9999;1^The score for this administration is "_SCORES_", which indicates ",N=N+1
"RTN","YTQAPI2B",29,0)
 ..S YSDATA(N)="7772^9999;1^   a NEGATIVE screen for PTSD in the past month." S N=N+1
"RTN","YTQAPI2B",30,0)
 .I $G(SCORES)>3 D
"RTN","YTQAPI2B",31,0)
 ..S YSDATA(N)="7776^9999;1^"_SCORES,N=N+1
"RTN","YTQAPI2B",32,0)
 ..S YSDATA(N)="7771^9999;1^The score for this administration is "_SCORES_", which indicates ",N=N+1
"RTN","YTQAPI2B",33,0)
 ..S YSDATA(N)="7772^9999;1^   a POSITIVE screen for PTSD in the past month. Further assessment is recommended.",N=N+1
"RTN","YTQAPI2B",34,0)
 .;
"RTN","YTQAPI2B",35,0)
 .I $G(SUISCORE)=0 D
"RTN","YTQAPI2B",36,0)
 ..S YSDATA(N)="7777^9999;1^"_SUISCORE,N=N+1
"RTN","YTQAPI2B",37,0)
 ..S YSDATA(N)="7773^9999;1^The score on this administration is 0, which indicates a NEGATIVE ",N=N+1
"RTN","YTQAPI2B",38,0)
 ..S YSDATA(N)="7774^9999;1^   screen for Risk of Suicide over the last 2 weeks."
"RTN","YTQAPI2B",39,0)
 .S SUISCRN=$P(^TMP($J,"YSCOR",3),"=",2)
"RTN","YTQAPI2B",40,0)
 .I SUISCRN>0 D
"RTN","YTQAPI2B",41,0)
 ..S YSDATA(N)="7777^9999;1^"_SUISCORE,N=N+1
"RTN","YTQAPI2B",42,0)
 ..I SUISCRN=1 S TEXT="SEVERAL DAYS"
"RTN","YTQAPI2B",43,0)
 ..I SUISCRN=2 S TEXT="MORE THAN HALF THE DAYS"
"RTN","YTQAPI2B",44,0)
 ..I SUISCRN=3 S TEXT="NEARLY EVERY DAY"
"RTN","YTQAPI2B",45,0)
 ..S YSDATA(N)="7773^9999;1^The score on this administration is "_SUISCRN_", which revealed suicidal ideation "_TEXT,N=N+1
"RTN","YTQAPI2B",46,0)
 ..S YSDATA(N)="7774^9999;1^   over the last 2 weeks, which indicates a POSITIVE screen for Risk of Suicide.",N=N+1
"RTN","YTQAPI2B",47,0)
 .Q
"RTN","YTQAPI2B",48,0)
 ;
"RTN","YTQAPI2B",49,0)
 ;bld 3/1/2018 Complex Reporting for PC-PTSD-5
"RTN","YTQAPI2B",50,0)
 I TSTNM="PC-PTSD-5" D  Q
"RTN","YTQAPI2B",51,0)
 .N I,YSCORE,PTSD,SCORES,TEXT
"RTN","YTQAPI2B",52,0)
 .S SCORES=0
"RTN","YTQAPI2B",53,0)
 .D GETSCORE^YTQAPI8(.YSCORE,.YS)
"RTN","YTQAPI2B",54,0)
 .S SCORES=$P(^TMP($J,"YSCOR",2),"=",2)
"RTN","YTQAPI2B",55,0)
 .I $G(SCORES)'>3 D
"RTN","YTQAPI2B",56,0)
 ..S YSDATA(N)="7771^9999;1^ The score on this administration is "_SCORES_", which indicates a NEGATIVE screen for ",N=N+1
"RTN","YTQAPI2B",57,0)
 ..S YSDATA(N)="7772^9999;1^ PTSD in the past month.",N=N+1
"RTN","YTQAPI2B",58,0)
 .I $G(SCORES)>3 D
"RTN","YTQAPI2B",59,0)
 ..S YSDATA(N)="7771^9999;1^ The score on this administration is "_SCORES_", which indicates a POSITIVE screen for ",N=N+1
"RTN","YTQAPI2B",60,0)
 ..S YSDATA(N)="7772^9999;1^ PTSD in the past month. Further assessment is recommended."
"RTN","YTQAPI2B",61,0)
 ;
"RTN","YTQAPI2B",62,0)
 ;bld 3/1/2018 Complex Reporting for PHQ-2+I9
"RTN","YTQAPI2B",63,0)
 I TSTNM="PHQ-2+I9" D  Q
"RTN","YTQAPI2B",64,0)
 .N I,DEPSCORE,SUCSCORE,YSCORE,TEXT
"RTN","YTQAPI2B",65,0)
 .S N=N+1
"RTN","YTQAPI2B",66,0)
 .D GETSCORE^YTQAPI8(.YSCORE,.YS)
"RTN","YTQAPI2B",67,0)
 .S DEPSCORE=^TMP($J,"YSCOR",2)
"RTN","YTQAPI2B",68,0)
 .S DEPSCORE=$P(DEPSCORE,"=",2)
"RTN","YTQAPI2B",69,0)
 .S SUISCORE=^TMP($J,"YSCOR",3)
"RTN","YTQAPI2B",70,0)
 .S SUISCORE=$P(SUISCORE,"=",2)
"RTN","YTQAPI2B",71,0)
 .I DEPSCORE'>2 D
"RTN","YTQAPI2B",72,0)
 ..S YSDATA(N)="7771^9999;1^The score on this administration is "_$G(DEPSCORE)_", which indicates a NEGATIVE screen ",N=N+1
"RTN","YTQAPI2B",73,0)
 ..S YSDATA(N)="7772^9999;1^ on the Depression Scale over the past 2 weeks.",N=N+1
"RTN","YTQAPI2B",74,0)
 .I DEPSCORE>2 D
"RTN","YTQAPI2B",75,0)
 ..S YSDATA(N)="7771^9999;1^The score on this administration is "_$G(DEPSCORE)_", which indicates a POSITIVE screen ",N=N+1
"RTN","YTQAPI2B",76,0)
 ..S YSDATA(N)="7772^9999;1^ on the Depression Scale over the past 2 weeks.",N=N+1
"RTN","YTQAPI2B",77,0)
 .I SUISCORE=0 D
"RTN","YTQAPI2B",78,0)
 ..S YSDATA(N)="7773^9999;1^The score on this administration is "_SUISCORE_", which indicates a NEGATIVE screen ",N=N+1
"RTN","YTQAPI2B",79,0)
 ..S YSDATA(N)="7774^9999;1^ for Risk of Suicide over the past 2 weeks.",N=N+1
"RTN","YTQAPI2B",80,0)
 .I SUISCORE>0 D
"RTN","YTQAPI2B",81,0)
 ..I SUISCORE=1 S TEXT="SEVERAL DAYS"
"RTN","YTQAPI2B",82,0)
 ..I SUISCORE=2 S TEXT="MORE THAN HALF THE DAYS"
"RTN","YTQAPI2B",83,0)
 ..I SUISCORE=3 S TEXT="NEARLY EVERY DAY"
"RTN","YTQAPI2B",84,0)
 ..S YSDATA(N)="7773^9999;1^The score on this administration is "_SUISCORE_", which revealed suicidal ideation "_TEXT,N=N+1
"RTN","YTQAPI2B",85,0)
 ..S YSDATA(N)="7774^9999;1^  over the past 2 weeks, which indicates a POSITIVE screen for Risk of Suicide.",N=N+1
"RTN","YTQAPI2B",86,0)
 .Q
"RTN","YTQAPI2B",87,0)
 ;
"RTN","YTQAPI2B",88,0)
 ;bld/dsb 3/1/2018 Complex Reporting for C-SSRS
"RTN","YTQAPI2B",89,0)
 I TSTNM="C-SSRS" D  Q
"RTN","YTQAPI2B",90,0)
 .N I,YSCORE,YSCREC,PTSD,SCORES,SCRE,QUESNBR,TEXT,TEXT3,TEXT3A,TEXT3B,TEXT4,TEXT5,TEXT8,TEXT8A,TEXT8B,ADDTEXT,STRNG
"RTN","YTQAPI2B",91,0)
 .S SCORES=""
"RTN","YTQAPI2B",92,0)
 .D GETSCORE^YTQAPI8(.YSCORE,.YS)
"RTN","YTQAPI2B",93,0)
 .I ^TMP($J,"YSCOR",1)'="[DATA]" Q
"RTN","YTQAPI2B",94,0)
 .S LP=1
"RTN","YTQAPI2B",95,0)
 .S ADDTEXT="This indicates a clear need |for further assessment and clinical management."
"RTN","YTQAPI2B",96,0)
 .;
"RTN","YTQAPI2B",97,0)
 .S TEXT3="  This administration indicates presence of SUICIDAL IDEATION "
"RTN","YTQAPI2B",98,0)
 .S TEXT3A="WITH AT LEAST |SOME INTENT TO DIE in the past month. "  ;q4=yes, q5=no
"RTN","YTQAPI2B",99,0)
 .; patch 142
"RTN","YTQAPI2B",100,0)
 .S TEXT3B="WITH |CONSIDERATION OF METHOD in the past month. "
"RTN","YTQAPI2B",101,0)
 .;
"RTN","YTQAPI2B",102,0)
 .S TEXT8="  ||This administration indicates presence of RECENT SUICIDAL BEHAVIOR. The |presence of ANY suicidal "
"RTN","YTQAPI2B",103,0)
 .S TEXT8A="behavior (suicide attempt, interrupted attempt, |aborted attempt and preparatory behavior) "
"RTN","YTQAPI2B",104,0)
 .S TEXT8B="in the past 3 months indicates |clear need for further assessment and clinical management."
"RTN","YTQAPI2B",105,0)
 .F  S LP=$O(^TMP($J,"YSCOR",LP)) Q:'LP  D
"RTN","YTQAPI2B",106,0)
 ..; Yes=1, No=2 and Skipped=0
"RTN","YTQAPI2B",107,0)
 ..S SCRE=$P(^TMP($J,"YSCOR",LP),"=",2)
"RTN","YTQAPI2B",108,0)
 ..S SCORES=SCORES_SCRE
"RTN","YTQAPI2B",109,0)
 .; get Suicidal Ideation in last month - question 1 and 2
"RTN","YTQAPI2B",110,0)
 .D
"RTN","YTQAPI2B",111,0)
 ..I $E(SCORES,2)=1 S YSDATA(N)="7771^9999;1^Yes - Suicidal thoughts" S N=N+1 Q
"RTN","YTQAPI2B",112,0)
 ..I ($E(SCORES,1)=1)&($E(SCORES,2)=2) S YSDATA(N)="7771^9999;1^Yes - Wish to die" S N=N+1 Q
"RTN","YTQAPI2B",113,0)
 ..I ($E(SCORES,1)=2)&($E(SCORES,2)=2) S YSDATA(N)="7771^9999;1^None endorsed" S N=N+1 Q
"RTN","YTQAPI2B",114,0)
 . ;
"RTN","YTQAPI2B",115,0)
 . ; get Method/plan/Intent in last month - question 3,4,5 and 6
"RTN","YTQAPI2B",116,0)
 . S IEN=N
"RTN","YTQAPI2B",117,0)
 . D  I '$D(YSDATA(IEN)) D CSSRS(SCORES)
"RTN","YTQAPI2B",118,0)
 ..I ($E(SCORES,5)=1)&($E(SCORES,6)=1) S YSDATA(N)="7772^9999;1^Method with specific plan and intent"  S N=N+1 Q
"RTN","YTQAPI2B",119,0)
 ..I ($E(SCORES,5)=1)&($E(SCORES,6)=2) S YSDATA(N)="7772^9999;1^Method with specific plan and at least some intent"  S N=N+1 Q
"RTN","YTQAPI2B",120,0)
 ..I ($E(SCORES,3)=1)&($E(SCORES,4)=1)&($E(SCORES,5)=1)&($E(SCORES,6)=2) S YSDATA(N)="7772^9999;1^Method with specific plan and at least some intent"  S N=N+1 Q
"RTN","YTQAPI2B",121,0)
 ..I ($E(SCORES,3)=1)&($E(SCORES,4)=1)&($E(SCORES,5)=2) S YSDATA(N)="7772^9999;1^Method with at least some intent and no specific plan"  S N=N+1 Q
"RTN","YTQAPI2B",122,0)
 ..I ($E(SCORES,3)=1)&($E(SCORES,4)=2)&($E(SCORES,5)=2) S YSDATA(N)="7772^9999;1^Method but with no specific plan or intent"  S N=N+1 Q
"RTN","YTQAPI2B",123,0)
 ..I ($E(SCORES,3)=2)&($E(SCORES,4)=2)&($E(SCORES,5)=2) S YSDATA(N)="7772^9999;1^No method, no specific plan, and no intent"  S N=N+1 Q
"RTN","YTQAPI2B",124,0)
 ..I ($E(SCORES,3)=2)&($E(SCORES,4)=2)&($E(SCORES,5)=1) S YSDATA(N)="7772^9999;1^Method with specific plan and no intent"  S N=N+1 Q
"RTN","YTQAPI2B",125,0)
 ..I ($E(SCORES,3)=2)&($E(SCORES,4)=1)&($E(SCORES,5)=1)&($E(SCORES,6)=1) S YSDATA(N)="7772^9999;1^Method with specific plan and some intent"  S N=N+1 Q
"RTN","YTQAPI2B",126,0)
 ..I ($E(SCORES,3)=2)&($E(SCORES,4)=1)&($E(SCORES,5)=2) S YSDATA(N)="7772^9999;1^Method with at least some intent and no specific plan"  S N=N+1 Q
"RTN","YTQAPI2B",127,0)
 ..I ($E(SCORES,3)=0)&($E(SCORES,4)=0)&($E(SCORES,5)=0) S YSDATA(N)="7772^9999;1^No method, no specific plan, and no intent"  S N=N+1 Q
"RTN","YTQAPI2B",128,0)
 .;
"RTN","YTQAPI2B",129,0)
 .; get Sucidal Behavior based on question 7 and 8
"RTN","YTQAPI2B",130,0)
 .D
"RTN","YTQAPI2B",131,0)
 ..I ($E(SCORES,8)=1) S YSDATA(N)="7773^9999;1^Recent Suicidal Behavior (<3 months)"  S N=N+1 Q
"RTN","YTQAPI2B",132,0)
 ..I ($E(SCORES,7)=1)&($E(SCORES,8)=2) S YSDATA(N)="7773^9999;1^Past Suicidal Behavior (>3 Months)"  S N=N+1 Q
"RTN","YTQAPI2B",133,0)
 ..I ($E(SCORES,7)=2) S YSDATA(N)="7773^9999;1^No Past Suicidal Behavior Reported"  S N=N+1 Q
"RTN","YTQAPI2B",134,0)
 .;
"RTN","YTQAPI2B",135,0)
 .;Key Indicators, in Question 7774
"RTN","YTQAPI2B",136,0)
 .S STRNG=""
"RTN","YTQAPI2B",137,0)
 .I ($E(SCORES,3)=1)!($E(SCORES,4)=1)!($E(SCORES,5)=1) D
"RTN","YTQAPI2B",138,0)
 ..S STRNG=TEXT3
"RTN","YTQAPI2B",139,0)
 ..I ($E(SCORES,4)=1)!($E(SCORES,5)=1) S STRNG=STRNG_TEXT3A
"RTN","YTQAPI2B",140,0)
 ..I ($E(SCORES,3)=1)&($E(SCORES,4)=2)&($E(SCORES,5)=2) S STRNG=STRNG_TEXT3B
"RTN","YTQAPI2B",141,0)
 ..S STRNG=STRNG_ADDTEXT
"RTN","YTQAPI2B",142,0)
 .I ($E(SCORES,8)=1) D
"RTN","YTQAPI2B",143,0)
 ..S STRNG=STRNG_TEXT8_TEXT8A_TEXT8B
"RTN","YTQAPI2B",144,0)
 .I $L(STRNG) S YSDATA(N)="7774^9999;1^"_STRNG
"RTN","YTQAPI2B",145,0)
 .Q
"RTN","YTQAPI2B",146,0)
 ;
"RTN","YTQAPI2B",147,0)
 ;dsb/BLD 3/1/2018 Complex Reporting for PSS-3
"RTN","YTQAPI2B",148,0)
 I TSTNM="PSS-3" D  Q
"RTN","YTQAPI2B",149,0)
 .N I,YSCORE,PTSD,SCORES,DEPSCORE,SUISCORE,SATTSCORE,SWHENSCORES,SWHENSCORE,YSPSS3
"RTN","YTQAPI2B",150,0)
 .S SCORES=0
"RTN","YTQAPI2B",151,0)
 .S N=N+1
"RTN","YTQAPI2B",152,0)
 .D GETSCORE^YTQAPI8(.YSCORE,.YS)
"RTN","YTQAPI2B",153,0)
 .D PSS3(.YSPSS3)
"RTN","YTQAPI2B",154,0)
 .I ^TMP($J,"YSCOR",1)'="[DATA]" Q
"RTN","YTQAPI2B",155,0)
 .S DEPSCORE=$P(^TMP($J,"YSCOR",2),"=",2)
"RTN","YTQAPI2B",156,0)
 .S SUISCORE=$P(^TMP($J,"YSCOR",3),"=",2)
"RTN","YTQAPI2B",157,0)
 .S SATTSCORE=YSPSS3(7791)
"RTN","YTQAPI2B",158,0)
 .I DEPSCORE=0 S YSDATA(N)="7771^9999;1^The score for this administration is No, which indicates a NEGATIVE Screen for Depressed Mood"
"RTN","YTQAPI2B",159,0)
 .I DEPSCORE=1 S YSDATA(N)="7771^9999;1^The score for this administration is Yes, which indicates a POSITIVE Screen for Depressed Mood"
"RTN","YTQAPI2B",160,0)
 .S N=N+1
"RTN","YTQAPI2B",161,0)
 .I SUISCORE=0 S YSDATA(N)="7772^9999;1^The score for this administration is No, which indicates a NEGATIVE Screen for Active Suicidal Ideation"
"RTN","YTQAPI2B",162,0)
 .I SUISCORE=1 S YSDATA(N)="7772^9999;1^The score for this administration is Yes, which indicates a POSITIVE Screen for Active Suicidal Ideation"
"RTN","YTQAPI2B",163,0)
 .S N=N+1
"RTN","YTQAPI2B",164,0)
 .I SATTSCORE=0 S YSDATA(N+1)="7773^9999;1^The score for this administration is No, which indicates a NEGATIVE Screen for Recent Suicide Attempt"
"RTN","YTQAPI2B",165,0)
 .I $G(SATTSCORE) D
"RTN","YTQAPI2B",166,0)
 ..S SWHENSCORE=YSPSS3(7792)
"RTN","YTQAPI2B",167,0)
 ..S N=N+1
"RTN","YTQAPI2B",168,0)
 ..I SWHENSCORE>3 S YSDATA(N)="7773^9999;1^The score for this administration is No, which indicates a NEGATIVE Screen for Recent Suicide Attempt"
"RTN","YTQAPI2B",169,0)
 ..I SWHENSCORE<4 S YSDATA(N)="7773^9999;1^The score for this administration is Yes, which indicates a POSITIVE Screen for Recent Suicide Attempt"
"RTN","YTQAPI2B",170,0)
 .Q
"RTN","YTQAPI2B",171,0)
 ;
"RTN","YTQAPI2B",172,0)
 ;bld/dsb 3/1/2018 Complex Reporting for WHODAS2.0-12
"RTN","YTQAPI2B",173,0)
 I TSTNM="WHODAS2.0-12" D  Q
"RTN","YTQAPI2B",174,0)
 .N I,PCT,LP,TOT,YSCORE
"RTN","YTQAPI2B",175,0)
 .S (PCT,TOT)=0
"RTN","YTQAPI2B",176,0)
 .D GETSCORE^YTQAPI8(.YSCORE,.YS)
"RTN","YTQAPI2B",177,0)
 .I ^TMP($J,"YSCOR",1)'="[DATA]" Q
"RTN","YTQAPI2B",178,0)
 .S LP=1
"RTN","YTQAPI2B",179,0)
 .F  S LP=$O(^TMP($J,"YSCOR",LP)) Q:'LP  D
"RTN","YTQAPI2B",180,0)
 ..S TOT=TOT+$P(^TMP($J,"YSCOR",LP),"=",2)
"RTN","YTQAPI2B",181,0)
 .S YSDATA(N)="7771^9999;1^"_TOT
"RTN","YTQAPI2B",182,0)
 .Q
"RTN","YTQAPI2B",183,0)
 ;
"RTN","YTQAPI2B",184,0)
 I $L($T(SPECIAL^YTQAPI2C)) D SPECIAL^YTQAPI2C(TSTNM,.YSDATA,N,.YSAD,.YSTSTN) Q
"RTN","YTQAPI2B",185,0)
 Q
"RTN","YTQAPI2B",186,0)
  ;
"RTN","YTQAPI2B",187,0)
CSSRS(SCORES) ;logic for method/plan/intent section of CSSRS report
"RTN","YTQAPI2B",188,0)
 ;
"RTN","YTQAPI2B",189,0)
 I ($E(SCORES,5)=1)&($E(SCORES,6)=1) S YSDATA(N)="7772^9999;1^Method with specific plan and at least some intent"  S N=N+1 Q
"RTN","YTQAPI2B",190,0)
 I ($E(SCORES,5)=1)&($E(SCORES,6)=2) S YSDATA(N)="7772^9999;1^Method with specific plan and no intent" S N=N+1 Q
"RTN","YTQAPI2B",191,0)
 ;
"RTN","YTQAPI2B",192,0)
PSS3(YSPSS3) ;
"RTN","YTQAPI2B",193,0)
 N YSQN,YSAI,YSAN,YSANS
"RTN","YTQAPI2B",194,0)
 F YSQN=7791,7792 D
"RTN","YTQAPI2B",195,0)
 .S YSAI=$O(^YTT(601.85,"AC",YSAD,YSQN,0))
"RTN","YTQAPI2B",196,0)
 .Q:YSAI'>0
"RTN","YTQAPI2B",197,0)
 .Q:'$D(^YTT(601.85,YSAI,0))  ;ASF 11/15/07
"RTN","YTQAPI2B",198,0)
 .S YSAN=""
"RTN","YTQAPI2B",199,0)
 .I $P(^YTT(601.85,YSAI,0),U,4)?1N.N S YSAN=$P(^YTT(601.85,YSAI,0),U,4),YSAN=$G(^YTT(601.75,YSAN,1)),YSPSS3(YSQN)=YSAN
"RTN","YTQAPI2B",200,0)
 ;
"RTN","YTQAPI2B",201,0)
 I YSPSS3(7791)="Yes" S YSPSS3(7791)=1
"RTN","YTQAPI2B",202,0)
 E  S YSPSS3(7791)=0
"RTN","YTQAPI2B",203,0)
 S YSANS=YSPSS3(7792)
"RTN","YTQAPI2B",204,0)
 I YSANS["Within the past 24 hours (including today)" S YSPSS3(7792)=1 Q
"RTN","YTQAPI2B",205,0)
 I YSANS["Within the last month (but not today)" S YSPSS3(7792)=2 Q
"RTN","YTQAPI2B",206,0)
 I YSANS["Between 1 and 6 months ago" S YSPSS3(7792)=3 Q
"RTN","YTQAPI2B",207,0)
 I YSANS["More than 6 months ago" S YSPSS3(7792)=4 Q
"RTN","YTQAPI2B",208,0)
 E  S YSPSS3(7792)=5
"RTN","YTQAPI2B",209,0)
 Q
"RTN","YTQAPI3")
0^7^B24455598^B23768089
"RTN","YTQAPI3",1,0)
YTQAPI3 ;ASF/ALB - MHQ REMOTE PROCEDURES CONT ; 4/3/07 11:53am
"RTN","YTQAPI3",2,0)
 ;;5.01;MENTAL HEALTH;**85,142**;DEC 30,1994;Build 14
"RTN","YTQAPI3",3,0)
 ;
"RTN","YTQAPI3",4,0)
 Q
"RTN","YTQAPI3",5,0)
SCALEG(YSDATA,YS) ;returns all scale groups for an instrument
"RTN","YTQAPI3",6,0)
 ;input CODE
"RTN","YTQAPI3",7,0)
 ; output:SCALE NAME^ABBREVIATION^SCALE IEN^SCALE SEQUENCE^SCALE GROUP NAME^SCALE GRUOP IEN^GROUP SEQUENCE^ORD TITLE^MIN^INCREASE^MAX^GRID1^GRID2^GRID3
"RTN","YTQAPI3",8,0)
 ;
"RTN","YTQAPI3",9,0)
 N N,N1,G1,S1,G6,G7,YSCALEN,YSCN,YSCODE,YSGIEN,YSGN
"RTN","YTQAPI3",10,0)
 K ^TMP($J,"YSG") S YSDATA=$NA(^TMP($J,"YSG"))
"RTN","YTQAPI3",11,0)
 S YSCODE=$G(YS("CODE"))
"RTN","YTQAPI3",12,0)
 I '$D(^YTT(601.71,"B",YSCODE)) S ^TMP($J,"YSG",1)="[ERROR]",^TMP($J,"YSG",2)="BAD CODE" Q  ;-->out
"RTN","YTQAPI3",13,0)
 S ^TMP($J,"YSG",1)="[DATA]",N=1,S1=0,G1=0
"RTN","YTQAPI3",14,0)
 S YSCN=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQAPI3",15,0)
 S YSGN=0 F  S YSGN=$O(^YTT(601.86,"AC",YSCN,YSGN)) Q:YSGN'>0  D
"RTN","YTQAPI3",16,0)
 . S YSGIEN=0 F  S YSGIEN=$O(^YTT(601.86,"AC",YSCN,YSGN,YSGIEN)) Q:YSGIEN'>0  D
"RTN","YTQAPI3",17,0)
 .. S N=N+1,G1=G1+1,^TMP($J,"YSG",N)="Group"_G1_"="_YSGIEN_U_$$GET1^DIQ(601.86,YSGIEN_",",1)_U_$P($G(^YTT(601.86,YSGIEN,0)),U,3,99)
"RTN","YTQAPI3",18,0)
 .. S N1=0 F  S N1=$O(^YTT(601.87,"AC",YSGIEN,N1)) Q:N1'>0  D
"RTN","YTQAPI3",19,0)
 ... S YSCALEN=0 F  S YSCALEN=$O(^YTT(601.87,"AC",YSGIEN,N1,YSCALEN)) Q:YSCALEN'>0  D
"RTN","YTQAPI3",20,0)
 .... S N=N+1,S1=S1+1,^TMP($J,"YSG",N)="Scale"_S1_"="_$G(^YTT(601.87,YSCALEN,0))
"RTN","YTQAPI3",21,0)
 Q
"RTN","YTQAPI3",22,0)
BATTC(YSDATA,YS) ;battery content
"RTN","YTQAPI3",23,0)
 ; OUTPUT: BATTERY NAME ^ INSTRUMENT list sorted by BATTERY & SEQUENCE
"RTN","YTQAPI3",24,0)
 N N,N1,G7,YSBATS,YSBID,YSCONID,YSNAME,YSUB,YS1,YSBNAME
"RTN","YTQAPI3",25,0)
 S N=1,YSDATA(1)="[DATA]"
"RTN","YTQAPI3",26,0)
 S YSUB=0 F  S YSUB=$O(^YTT(601.781,"AC",DUZ,YSUB)) Q:YSUB'>0  D
"RTN","YTQAPI3",27,0)
 . S YSBID=$P(^YTT(601.781,YSUB,0),U,3)
"RTN","YTQAPI3",28,0)
 . S YSBNAME=$P($G(^YTT(601.77,YSBID,0)),U,2)
"RTN","YTQAPI3",29,0)
 . S:$L(YSBNAME) YS1(YSBNAME)=YSBID
"RTN","YTQAPI3",30,0)
 S YSNAME="" F  S YSNAME=$O(YS1(YSNAME)) Q:YSNAME=""  S YSBID=YS1(YSNAME) D
"RTN","YTQAPI3",31,0)
 . S YSBATS=0 F  S YSBATS=$O(^YTT(601.78,"AC",YSBID,YSBATS)) Q:YSBATS'>0  D
"RTN","YTQAPI3",32,0)
 .. S YSCONID=$O(^YTT(601.78,"AC",YSBID,YSBATS,0))
"RTN","YTQAPI3",33,0)
 ..S G7=$G(^YTT(601.78,YSCONID,0))
"RTN","YTQAPI3",34,0)
 .. S N=N+1,YSDATA(N)=$P(G7,U,2)_U_$P(^YTT(601.77,YSBID,0),U,2)_U_$P(G7,U,3,4)_U_$$GET1^DIQ(601.78,YSCONID_",",3)
"RTN","YTQAPI3",35,0)
 Q
"RTN","YTQAPI3",36,0)
FIRSTWP(YSDATA,YS) ;first line of all intros
"RTN","YTQAPI3",37,0)
 ;returns the first line only of a WP field
"RTN","YTQAPI3",38,0)
 ;Input: FILEN(file number), FIELD (WP filed #)
"RTN","YTQAPI3",39,0)
 ;Ouput IEN^WP Text line 1
"RTN","YTQAPI3",40,0)
 N N,YSN,YSFILEN,YSFIELD
"RTN","YTQAPI3",41,0)
 S YSDATA=$NA(^TMP($J,"YSFWP")) K ^TMP($J,"YSFWP")
"RTN","YTQAPI3",42,0)
 S YSFILEN=$G(YS("FILEN"),0) I $$VFILE^DILFD(YSFILEN)<1 S ^TMP($J,"YSFWP",1)="[ERROR]",^TMP($J,"YSFWP",2)="BAD FILE N" Q  ;--->out
"RTN","YTQAPI3",43,0)
 S YSFIELD=$G(YS("FIELD"),0) S N=$$VFIELD^DILFD(YSFILEN,YSFIELD) I N<1 S ^TMP($J,"YSFWP",1)="[ERROR]",^TMP($J,"YSFWP",2)="BAD field" Q  ;--> out
"RTN","YTQAPI3",44,0)
 S YSN=0,N=1,^TMP($J,"YSFWP",1)="[DATA]"
"RTN","YTQAPI3",45,0)
 F  S YSN=$O(^YTT(YSFILEN,YSN)) Q:YSN'>0  D
"RTN","YTQAPI3",46,0)
 . S N=N+1
"RTN","YTQAPI3",47,0)
 . S ^TMP($J,"YSFWP",N)=YSN_U_$G(^YTT(YSFILEN,YSN,YSFIELD,1,0))
"RTN","YTQAPI3",48,0)
 Q
"RTN","YTQAPI3",49,0)
QUESTALL(YSDATA,YS) ;all questions for a test
"RTN","YTQAPI3",50,0)
 ;input: CODE as test name
"RTN","YTQAPI3",51,0)
 ;output: Field^Value
"RTN","YTQAPI3",52,0)
 N YSTESTN,YSTEST,YSF,YSV,N,N2,N3,YSEQX,YSIC,YSQN,G
"RTN","YTQAPI3",53,0)
 S YSDATA=$NA(^TMP($J,"YSQU")) K ^TMP($J,"YSQU")
"RTN","YTQAPI3",54,0)
 S YSTEST=$G(YS("CODE"))
"RTN","YTQAPI3",55,0)
 S YSTESTN=$O(^YTT(601.71,"B",YSTEST,0))
"RTN","YTQAPI3",56,0)
 I YSTESTN'>0 S ^TMP($J,"YSQU",1)="[ERROR]",^TMP($J,"YSQU",2)="bad code" Q  ;-->out
"RTN","YTQAPI3",57,0)
 S N=2,N3=0,^TMP($J,"YSQU",1)="[DATA]"
"RTN","YTQAPI3",58,0)
 ;
"RTN","YTQAPI3",59,0)
 S YSEQX=0
"RTN","YTQAPI3",60,0)
 F  S YSEQX=$O(^YTT(601.76,"AD",YSTESTN,YSEQX)) Q:YSEQX'>0  D
"RTN","YTQAPI3",61,0)
 . S YSIC=0 F  S YSIC=$O(^YTT(601.76,"AD",YSTESTN,YSEQX,YSIC)) Q:YSIC'>0  S YSQN=$P(^YTT(601.76,YSIC,0),U,4) D QUEST2
"RTN","YTQAPI3",62,0)
 S ^TMP($J,"YSQU",2)="NUMBER OF QUESTIONS="_N3
"RTN","YTQAPI3",63,0)
 Q
"RTN","YTQAPI3",64,0)
QUEST2 ;
"RTN","YTQAPI3",65,0)
 S N=N+1,N3=N3+1
"RTN","YTQAPI3",66,0)
 S ^TMP($J,"YSQU",N)="QUESTION NUMBER"_N3_"="_YSQN_U_$P(^YTT(601.76,YSIC,0),U,3)_U_$P(^YTT(601.76,YSIC,0),U,5)_U_YSIC
"RTN","YTQAPI3",67,0)
 S N2=0 F  S N2=$O(^YTT(601.72,YSQN,1,N2)) Q:N2'>0  S N=N+1,^TMP($J,"YSQU",N)=$S(N2=1:"QUESTION TEXT"_N3_"=",1:"")_$G(^YTT(601.72,YSQN,1,N2,0))
"RTN","YTQAPI3",68,0)
 S N=N+1,G=$G(^YTT(601.72,YSQN,2))
"RTN","YTQAPI3",69,0)
 S ^TMP($J,"YSQU",N)="INTRO TEXT"_N3_"="_$S(+G>0:+G,1:"")_U D:+G
"RTN","YTQAPI3",70,0)
 . S N2=0 F  S N2=$O(^YTT(601.73,+G,1,N2)) Q:N2'>0  S:N2>1 N=N+1 S ^TMP($J,"YSQU",N)=$G(^TMP($J,"YSQU",N))_$G(^YTT(601.73,+G,1,N2,0))
"RTN","YTQAPI3",71,0)
 S N=N+1
"RTN","YTQAPI3",72,0)
 S ^TMP($J,"YSQU",N)="DESC"_N3_"="_$P($G(^YTT(601.74,+$P(G,U,2),0)),U,2)_U_$P(G,U,3)_U_$P(G,U,4)_U_$P(G,U,5)_U_$P(G,U,6)_U_$P(G,U,7)_U
"RTN","YTQAPI3",73,0)
 S G=+$P(G,U,3),G=$O(^YTT(601.89,"B",G,0)) S:G>0 ^TMP($J,"YSQU",N)=^TMP($J,"YSQU",N)_$P(^YTT(601.89,G,0),U,2)
"RTN","YTQAPI3",74,0)
 S G=^YTT(601.76,YSIC,0)
"RTN","YTQAPI3",75,0)
 S N=N+1
"RTN","YTQAPI3",76,0)
 S ^TMP($J,"YSQU",N)="QDISPLAY"_N3_"=" S:$P(G,U,6)?1N.N ^TMP($J,"YSQU",N)=^TMP($J,"YSQU",N)_$$DISPEXT^YTQAPI5($P(G,U,6))
"RTN","YTQAPI3",77,0)
 S N=N+1
"RTN","YTQAPI3",78,0)
 S ^TMP($J,"YSQU",N)="IDISPLAY"_N3_"=" S:$P(G,U,7)?1N.N ^TMP($J,"YSQU",N)=^TMP($J,"YSQU",N)_$$DISPEXT^YTQAPI5($P(G,U,7))
"RTN","YTQAPI3",79,0)
 S N=N+1
"RTN","YTQAPI3",80,0)
 S ^TMP($J,"YSQU",N)="CDISPLAY"_N3_"=" S:$P(G,U,8)?1N.N ^TMP($J,"YSQU",N)=^TMP($J,"YSQU",N)_$$DISPEXT^YTQAPI5($P(G,U,8))
"RTN","YTQAPI3",81,0)
 Q
"RTN","YTQAPI3",82,0)
PURGE(YSDATA,YS) ; delete a record
"RTN","YTQAPI3",83,0)
 ;input: FILEN (FILE #)
"RTN","YTQAPI3",84,0)
 ;       IEN (internal record #)
"RTN","YTQAPI3",85,0)
 ;Output :only conformation
"RTN","YTQAPI3",86,0)
 N YSFILEN,YSROOT,YSNODE,DIK,DA
"RTN","YTQAPI3",87,0)
 S DA=$G(YS("IEN"),0)
"RTN","YTQAPI3",88,0)
 S YSFILEN=$G(YS("FILEN"),0)
"RTN","YTQAPI3",89,0)
 Q:YSFILEN<601  Q:YSFILEN>605  ; restrict to Mental Health
"RTN","YTQAPI3",90,0)
 I $$VFILE^DILFD(YSFILEN)<1 S YSDATA(1)="[ERROR]",YSDATA(2)="BAD FILE N" Q  ;--->out
"RTN","YTQAPI3",91,0)
 S YSROOT=$$ROOT^DILFD(YSFILEN)
"RTN","YTQAPI3",92,0)
 S YSNODE=YSROOT_DA_",0)"
"RTN","YTQAPI3",93,0)
 I $D(@YSNODE)'>0 S YSDATA(1)="[ERROR]",YSDATA(2)="no such record" Q  ;-->out
"RTN","YTQAPI3",94,0)
 S DIK=YSROOT D ^DIK
"RTN","YTQAPI3",95,0)
 S YSDATA(1)="[DATA]",YSDATA(2)="record "_DA_" of "_YSFILEN_" deleted"
"RTN","YTQAPI3",96,0)
 Q
"RTN","YTQAPI6")
0^6^B9004706^B8407277
"RTN","YTQAPI6",1,0)
YTQAPI6 ;ALB/ASF,HIOFO/FT - GAF API,DELETES ; 8/15/11 10:05am
"RTN","YTQAPI6",2,0)
 ;;5.01;MENTAL HEALTH;**85,103,142**;Dec 30, 1994;Build 14
"RTN","YTQAPI6",3,0)
 ;
"RTN","YTQAPI6",4,0)
 ;Reference to ^XLFDT APIs supported by DBIA #10103
"RTN","YTQAPI6",5,0)
GAFRET(YSDATA,YS) ;
"RTN","YTQAPI6",6,0)
 N YSBEG,YSEND,YSLIMIT,N,DFN,%DT
"RTN","YTQAPI6",7,0)
 K YSDATA
"RTN","YTQAPI6",8,0)
 D PARSE(.YS)
"RTN","YTQAPI6",9,0)
 I DFN'>0 S YSDATA(1)="[ERROR]",YSDATA(2)="No dfn" Q
"RTN","YTQAPI6",10,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQAPI6",11,0)
 S N=1
"RTN","YTQAPI6",12,0)
 D RETHX
"RTN","YTQAPI6",13,0)
 Q
"RTN","YTQAPI6",14,0)
PARSE(YS) ; -- array parsing
"RTN","YTQAPI6",15,0)
 S DFN=$G(YS("DFN"),0)
"RTN","YTQAPI6",16,0)
 S YSBEG=$G(YS("BEGIN"),"01/01/1970") S X=YSBEG,%DT="X" D ^%DT S YSBEG=Y
"RTN","YTQAPI6",17,0)
 S YSEND=$G(YS("END"),"01/01/2500") S X=YSEND,%DT="X" D ^%DT S YSEND=Y
"RTN","YTQAPI6",18,0)
 S YSLIMIT=$G(YS("LIMIT"),9999)
"RTN","YTQAPI6",19,0)
 Q
"RTN","YTQAPI6",20,0)
RETHX ;
"RTN","YTQAPI6",21,0)
 N YSJJ,YSDD,X,Y,YSX,YSN
"RTN","YTQAPI6",22,0)
 S YSDD=9999999-YSEND-.00001
"RTN","YTQAPI6",23,0)
 F YSJJ=1:1:YSLIMIT S YSDD=$O(^YSD(627.8,"AX5",DFN,YSDD)) Q:YSDD'>0!(YSDD>(9999999-YSBEG))  D
"RTN","YTQAPI6",24,0)
  . S YSN=0 F  S YSN=$O(^YSD(627.8,"AX5",DFN,YSDD,YSN)) Q:YSN'>0  D
"RTN","YTQAPI6",25,0)
 .. S YSX=$P($G(^YSD(627.8,YSN,60)),U,3)
"RTN","YTQAPI6",26,0)
 .. S Y=$P($G(^YSD(627.8,YSN,0)),U,3)
"RTN","YTQAPI6",27,0)
 .. S YSX=YSN_"="_$$FMTE^XLFDT(Y,"5TZ")_U_YSX_U_$P(^YSD(627.8,YSN,0),U,4)_U_$$EXTERNAL^DILFD(627.8,.04,"",$P($G(^YSD(627.8,YSN,0)),U,4))_U_$G(^YSD(627.8,YSN,80,1,0))
"RTN","YTQAPI6",28,0)
 .. D SET(YSX)
"RTN","YTQAPI6",29,0)
 Q
"RTN","YTQAPI6",30,0)
SET(X) ;
"RTN","YTQAPI6",31,0)
 S N=N+1
"RTN","YTQAPI6",32,0)
 S YSDATA(N)=X
"RTN","YTQAPI6",33,0)
 Q
"RTN","YTQAPI6",34,0)
DELETEME(YSDATA,YS) ;delete a test
"RTN","YTQAPI6",35,0)
 ;removes 601.71 and 601.76 entries only
"RTN","YTQAPI6",36,0)
 ;input: CODE as test name
"RTN","YTQAPI6",37,0)
 ;output: DATA vs ERROR
"RTN","YTQAPI6",38,0)
 N YSTESTN,YSTEST,YSHASOP,DA,DIK
"RTN","YTQAPI6",39,0)
 S YSTEST=$G(YS("CODE"))
"RTN","YTQAPI6",40,0)
 I YSTEST="" S YSDATA(1)="[ERROR]",YSDATA(2)="NO code" Q  ;-->out
"RTN","YTQAPI6",41,0)
 S YSTESTN=$O(^YTT(601.71,"B",YSTEST,0))
"RTN","YTQAPI6",42,0)
 I YSTESTN'>0 S YSDATA(1)="[ERROR]",YSDATA(2)="bad code" Q  ;-->out
"RTN","YTQAPI6",43,0)
 S YSHASOP=$P($G(^YTT(601.71,YSTESTN,2)),U,5)
"RTN","YTQAPI6",44,0)
 I YSHASOP="Y" S YSDATA(1)="[ERROR]",YSDATA(2)="has been operational" Q  ;--> out
"RTN","YTQAPI6",45,0)
 S DA=YSTESTN,DIK="^YTT(601.71," D ^DIK
"RTN","YTQAPI6",46,0)
 S DIK="^YTT(601.76,"
"RTN","YTQAPI6",47,0)
 S DA=0 F  S DA=$O(^YTT(601.76,"AC",YSTESTN,DA)) Q:DA'>0  D ^DIK
"RTN","YTQAPI6",48,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQAPI6",49,0)
 Q
"RTN","YTQAPI6",50,0)
DELENTRY(YSDATA,YS) ;delete file entry
"RTN","YTQAPI6",51,0)
 ;entry point for YTQ DELETE ENTRY rpc
"RTN","YTQAPI6",52,0)
 ;input: YS("FILE")=file number (e.g., 627.8)
"RTN","YTQAPI6",53,0)
 ;        YS("IEN")=file IEN (e.g., 100123)
"RTN","YTQAPI6",54,0)
 ;output: DATA vs ERROR
"RTN","YTQAPI6",55,0)
 N YSERR,YSFILE,YSIEN,YSREF,YSTA,DA,DIK
"RTN","YTQAPI6",56,0)
 S YSFILE=+$G(YS("FILE"))
"RTN","YTQAPI6",57,0)
 Q:YSFILE<601  Q:YSFILE>630  ; restrict to Mental Health files
"RTN","YTQAPI6",58,0)
 I 'YSFILE S YSDATA(1)="[ERROR]",YSDATA(2)="NO FILE NUMBER" Q  ;-->out
"RTN","YTQAPI6",59,0)
 S YSIEN=$G(YS("IEN"))
"RTN","YTQAPI6",60,0)
 I 'YSIEN S YSDATA(1)="[ERROR]",YSDATA(2)="BAD IEN" Q  ;-->out
"RTN","YTQAPI6",61,0)
 D FILE^DID(YSFILE,,"GLOBAL NAME","YSTA","YSERR")
"RTN","YTQAPI6",62,0)
 I $D(YSERR("DIERR")) S YSDATA(1)="[ERROR]",YSDATA(2)=YSERR("DIERR",1,"TEXT",1) Q  ;out
"RTN","YTQAPI6",63,0)
 S YSREF=YSTA("GLOBAL NAME")_YSIEN_",0)"
"RTN","YTQAPI6",64,0)
 I '$D(@(YSREF)) S YSDATA(1)="[ERROR]",YSDATA(2)="ENTRY NOT FOUND" Q  ;-->out
"RTN","YTQAPI6",65,0)
 S DA=YSIEN,DIK=YSTA("GLOBAL NAME") D ^DIK
"RTN","YTQAPI6",66,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQAPI6",67,0)
 Q
"RTN","YTQAPI8")
0^8^B52136273^B47316797
"RTN","YTQAPI8",1,0)
YTQAPI8 ;ASF/ALB - MHA SCORING ; 11/15/07 11:14am
"RTN","YTQAPI8",2,0)
 ;;5.01;MENTAL HEALTH;**85,121,123,142**;Dec 30, 1994;Build 14
"RTN","YTQAPI8",3,0)
 ;
"RTN","YTQAPI8",4,0)
 Q
"RTN","YTQAPI8",5,0)
OLDSCORE ;score answers fro 601.2
"RTN","YTQAPI8",6,0)
 D SCOREIT^YTQAPI14(.YSDATA,.YS)
"RTN","YTQAPI8",7,0)
 I YSDATA(1)="[ERROR]" S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="bad OLDSCORE" Q  ;-->out
"RTN","YTQAPI8",8,0)
 I YSDATA(1)="[ERROR SCORE1+5]" S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="no administration found" Q  ;-->out
"RTN","YTQAPI8",9,0)
 D MVSCORE
"RTN","YTQAPI8",10,0)
 Q
"RTN","YTQAPI8",11,0)
LGSCORE ;score legacy test in 84
"RTN","YTQAPI8",12,0)
 N YSEE,YSLGRSP
"RTN","YTQAPI8",13,0)
 S YSEE=0
"RTN","YTQAPI8",14,0)
 S X1=^YTT(601.84,YSAD,0)
"RTN","YTQAPI8",15,0)
 S DFN=$P(X1,U,2),YSDATE=$P(X1,U,4)
"RTN","YTQAPI8",16,0)
 S YSOLDI=$O(^YTT(601,"B",YSCODE,0))
"RTN","YTQAPI8",17,0)
 S YSQN=0,N=1,X=""
"RTN","YTQAPI8",18,0)
 F  S YSQN=$O(^YTT(601.85,"AC",YSAD,YSQN)) Q:YSQN'>0  D
"RTN","YTQAPI8",19,0)
 .S YSANSI=$O(^YTT(601.85,"AC",YSAD,YSQN,0))
"RTN","YTQAPI8",20,0)
 .S YSCI=$P($G(^YTT(601.85,YSANSI,0)),U,4)
"RTN","YTQAPI8",21,0)
 .I YSCI'?1N.N S YSEE=1 Q  ;-->out ASF 3/7/07
"RTN","YTQAPI8",22,0)
 .I '$D(^YTT(601.75,YSCI)) S YSEE=1 Q  ;-->out ASF 3/7/07
"RTN","YTQAPI8",23,0)
 .S YSLG=$P(^YTT(601.75,YSCI,0),U,2) S:YSLG="" YSLG=" "
"RTN","YTQAPI8",24,0)
 .S X=X_YSLG
"RTN","YTQAPI8",25,0)
 .I $L(X)=200 S YSLGRSP(N)=X,X="",N=N+1
"RTN","YTQAPI8",26,0)
 I YSEE K ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="bad LG CHOICE" Q  ;-->out
"RTN","YTQAPI8",27,0)
 L +^YTD(601.2,DFN,1,YSOLDI,1,YSDATE):DILOCKTM E  S ^TMP($J,"YSCOR",1)="[ERROR]",^(2)="lock failed" Q  ;-->out
"RTN","YTQAPI8",28,0)
 I $D(YSLGRSP) M ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE)=YSLGRSP
"RTN","YTQAPI8",29,0)
 S:$L(X) ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE,N)=X
"RTN","YTQAPI8",30,0)
 S ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE,0)=YSDATE_U_U_$P(X1,U,6)_U_$P(X1,U,7)
"RTN","YTQAPI8",31,0)
 S YS("DFN")=DFN,YS("CODE")=YSCODE,YS("ADATE")=YSDATE
"RTN","YTQAPI8",32,0)
 D SCOREIT^YTQAPI14(.YSDATA,.YS) ;ASF 7/12/07
"RTN","YTQAPI8",33,0)
 K ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE)
"RTN","YTQAPI8",34,0)
 L -^YTD(601.2,DFN,1,YSOLDI,1,YSDATE)
"RTN","YTQAPI8",35,0)
 I YSDATA(1)="[ERROR]" S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="bad LG SCORE" Q  ;-->out
"RTN","YTQAPI8",36,0)
 I YSDATA(1)="[ERROR SCORE1+5]" S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="no administration found" Q  ;-->out
"RTN","YTQAPI8",37,0)
 D MVSCORE
"RTN","YTQAPI8",38,0)
 Q
"RTN","YTQAPI8",39,0)
MVSCORE ;move results
"RTN","YTQAPI8",40,0)
 K ^TMP($J,"YSCOR")
"RTN","YTQAPI8",41,0)
 S ^TMP($J,"YSCOR",1)="[DATA]"
"RTN","YTQAPI8",42,0)
 S N1=1,N2=5
"RTN","YTQAPI8",43,0)
 F  S N2=$O(YSDATA(N2)) Q:N2'>0  S N1=N1+1,^TMP($J,"YSCOR",N1)=$P(YSDATA(N2),U,2)_"="_$P(YSDATA(N2),U,3)_U_$P(YSDATA(N2),U,4)
"RTN","YTQAPI8",44,0)
 K YSDATA S YSDATA=$NA(^TMP($J,"YSCOR"))
"RTN","YTQAPI8",45,0)
 Q
"RTN","YTQAPI8",46,0)
GETSCORE(YSDATA,YS) ;get scales and scale grps for a test
"RTN","YTQAPI8",47,0)
 ; input: AD as administration ID
"RTN","YTQAPI8",48,0)
 ; output: Scale name=Raw Score
"RTN","YTQAPI8",49,0)
 N YSCODE,YSCODEN,N,N2,X,X1,I,YSAD,YSAI,YSTARG,YSAN,YSCALEI,YSKEYI,YSQN,YSRAW,YSVAL,YSDA,YSLG,N1,YSADATE,YSANSI,YSCI
"RTN","YTQAPI8",50,0)
 N YSDATE,YSDFN,YSOLDI,YSLIMIT,YSXT,DFN,YSSPEC,YSSCRD
"RTN","YTQAPI8",51,0)
 N REVSCR71,REVSCR84
"RTN","YTQAPI8",52,0)
 K ^TMP($J,"YSCOR") S YSDATA=$NA(^TMP($J,"YSCOR"))
"RTN","YTQAPI8",53,0)
 S YSAD=$G(YS("AD"))
"RTN","YTQAPI8",54,0)
 S YSADATE=$G(YS("ADATE")),YSCODE=$G(YS("CODE")),DFN=$G(YS("DFN"))
"RTN","YTQAPI8",55,0)
 I (YSADATE?7N.E)&(YSAD'?1N.N) D OLDSCORE Q  ;-->out Score answers from 601.2
"RTN","YTQAPI8",56,0)
 I YSAD'?1N.N S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="bad ad num in GETSCORE" Q  ;-->out
"RTN","YTQAPI8",57,0)
 I '$D(^YTT(601.85,"AC",YSAD)) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="no such reference" Q  ;-->out ;
"RTN","YTQAPI8",58,0)
 S YSCODE=$$GET1^DIQ(601.84,YSAD_",",2)
"RTN","YTQAPI8",59,0)
 S YSCODEN=$$GET1^DIQ(601.84,YSAD_",",2,"I")
"RTN","YTQAPI8",60,0)
 I '$D(^YTT(601.71,"B",YSCODE)) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="no ins" Q  ;-->out
"RTN","YTQAPI8",61,0)
 S YSDA=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQAPI8",62,0)
 S YSLG=$$GET1^DIQ(601.71,YSDA_",",23)
"RTN","YTQAPI8",63,0)
 I YSLG="Yes" D LGSCORE Q  ;-->out Score legacy answers in 601.85
"RTN","YTQAPI8",64,0)
 ;
"RTN","YTQAPI8",65,0)
 ; patch 123, check for scoring discrepancy, if so, rescore and load scores  
"RTN","YTQAPI8",66,0)
 I 'YSDA S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="Getscore err, No Instrument IEN" Q  ;-->out
"RTN","YTQAPI8",67,0)
 D LDSCORES^YTSCORE(.YSDATA,.YS)
"RTN","YTQAPI8",68,0)
 Q
"RTN","YTQAPI8",69,0)
 ;
"RTN","YTQAPI8",70,0)
OLDGSCRE(YSDATA,YS) ;get scales and scale grps for a test
"RTN","YTQAPI8",71,0)
 ; input: AD as administration ID
"RTN","YTQAPI8",72,0)
 ; output: Scale name=Raw Score
"RTN","YTQAPI8",73,0)
 N YSCODE,YSCODEN,N,N2,X,X1,I,YSAD,YSAI,YSTARG,YSAN,YSCALEI,YSKEYI,YSQN,YSRAW,YSVAL,YSDA,YSLG,N1,YSADATE,YSANSI,YSCI,YSDATE,YSDFN,YSOLDI,YSLIMIT,YSXT,DFN
"RTN","YTQAPI8",74,0)
 K ^TMP($J,"YSCOR") S YSDATA=$NA(^TMP($J,"YSCOR"))
"RTN","YTQAPI8",75,0)
 S YSAD=$G(YS("AD"))
"RTN","YTQAPI8",76,0)
 S YSADATE=$G(YS("ADATE")),YSCODE=$G(YS("CODE")),DFN=$G(YS("DFN"))
"RTN","YTQAPI8",77,0)
 I (YSADATE?7N.E)&(YSAD'?1N.N) D OLDSCORE Q  ;-->out Score answers from 601.2
"RTN","YTQAPI8",78,0)
 I YSAD'?1N.N S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="bad ad num" Q  ;-->out
"RTN","YTQAPI8",79,0)
 I '$D(^YTT(601.85,"AC",YSAD)) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="no such reference" Q  ;-->out
"RTN","YTQAPI8",80,0)
 S YSCODE=$$GET1^DIQ(601.84,YSAD_",",2)
"RTN","YTQAPI8",81,0)
 S YSCODEN=$$GET1^DIQ(601.84,YSAD_",",2,"I")
"RTN","YTQAPI8",82,0)
 I '$D(^YTT(601.71,"B",YSCODE)) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="no ins" Q  ;-->out
"RTN","YTQAPI8",83,0)
 S YSDA=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQAPI8",84,0)
 S YSLG=$$GET1^DIQ(601.71,YSDA_",",23)
"RTN","YTQAPI8",85,0)
 I YSLG="Yes" D LGSCORE Q  ;-->out Score legacy answers in 601.85
"RTN","YTQAPI8",86,0)
 I '$D(^YTT(601.86,"AC",YSCODEN)) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="no scale grps found" Q  ;-->out
"RTN","YTQAPI8",87,0)
 S YS("CODE")=YSCODE
"RTN","YTQAPI8",88,0)
 D SCALEG^YTQAPI3(.YSDATA,.YS)
"RTN","YTQAPI8",89,0)
 S YSDATA=$NA(^TMP($J,"YSCOR"))
"RTN","YTQAPI8",90,0)
 S ^TMP($J,"YSCOR",1)="[DATA]",N=1
"RTN","YTQAPI8",91,0)
 F I=2:1 Q:'$D(^TMP($J,"YSG",I))  I ^TMP($J,"YSG",I)?1"Scale".E S YSRAW="0",N=N+1,^TMP($J,"YSCOR",N)=$P(^TMP($J,"YSG",I),U,4)_"=" D  S ^TMP($J,"YSCOR",N)=^TMP($J,"YSCOR",N)_YSRAW
"RTN","YTQAPI8",92,0)
 .S YSCALEI=$P(^TMP($J,"YSG",I),U),YSCALEI=$P(YSCALEI,"=",2)
"RTN","YTQAPI8",93,0)
 .S YSKEYI=0 F  S YSKEYI=$O(^YTT(601.91,"AC",YSCALEI,YSKEYI)) Q:YSKEYI'>0  D
"RTN","YTQAPI8",94,0)
 ..S G=^YTT(601.91,YSKEYI,0)
"RTN","YTQAPI8",95,0)
 ..S YSQN=$P(G,U,3),YSTARG=$P(G,U,4),YSVAL=$P(G,U,5)
"RTN","YTQAPI8",96,0)
 ..S YSAI=$O(^YTT(601.85,"AC",YSAD,YSQN,0))
"RTN","YTQAPI8",97,0)
 ..Q:YSAI'>0
"RTN","YTQAPI8",98,0)
 ..Q:'$D(^YTT(601.85,YSAI,0))  ;ASF 11/15/07
"RTN","YTQAPI8",99,0)
 ..S YSAN=""
"RTN","YTQAPI8",100,0)
 ..I $D(^YTT(601.85,YSAI,1,1,0)) S YSAN=^YTT(601.85,YSAI,1,1,0)
"RTN","YTQAPI8",101,0)
 ..I $P(^YTT(601.85,YSAI,0),U,4)?1N.N S YSAN=$P(^YTT(601.85,YSAI,0),U,4),YSAN=$G(^YTT(601.75,YSAN,1))
"RTN","YTQAPI8",102,0)
 ..I YSAN=YSTARG S YSRAW=YSRAW+YSVAL
"RTN","YTQAPI8",103,0)
 Q
"RTN","YTQAPI8",104,0)
 ;  
"RTN","YTQAPI8",105,0)
DELSG(YSDATA,YS) ; DELETE SCALES AND SCALEGROUP-careful!!!
"RTN","YTQAPI8",106,0)
 ;input: ID as ien of 601.86 scalegroup
"RTN","YTQAPI8",107,0)
 ;output DATAvsERROR
"RTN","YTQAPI8",108,0)
 N YSIEN,YSID,I,N,DA,DIK
"RTN","YTQAPI8",109,0)
 S YSID=$G(YS("ID"),-1)
"RTN","YTQAPI8",110,0)
 I '$D(^YTT(601.86,YSID,0)) S YSDATA(1)="[ERROR]",YSDATA(2)="bad id" Q  ;-->out
"RTN","YTQAPI8",111,0)
 S N=0,YSDATA(1)="[DATA]"
"RTN","YTQAPI8",112,0)
 S YSEQ=0 F  S YSEQ=$O(^YTT(601.87,"AC",YSID,YSEQ)) Q:YSEQ'>0  D
"RTN","YTQAPI8",113,0)
 .S DA=$O(^YTT(601.87,"AC",YSID,YSEQ,0))
"RTN","YTQAPI8",114,0)
 .S DIK="^YTT(601.87,"
"RTN","YTQAPI8",115,0)
 .S N=N+1
"RTN","YTQAPI8",116,0)
 .D ^DIK
"RTN","YTQAPI8",117,0)
 S DA=YSID,DIK="^YTT(601.86," D ^DIK
"RTN","YTQAPI8",118,0)
 S YSDATA(2)=N_" scales deleted"
"RTN","YTQAPI8",119,0)
 Q
"RTN","YTQAPI8",120,0)
SCALEGRP(YSDATA,YS) ;return scalegroup info
"RTN","YTQAPI8",121,0)
 ; input: CODE as instrument name
"RTN","YTQAPI8",122,0)
 ; output: SCALEGROUP ID^INSTRUMENT ID^SCALEGROUP NAME^GROUP SEQUENCE^ORDINATE TITLE^ORDINATEMIN^ORDINATEINCREMENT^ORDINATEMAX^GRID1^GRID2^GRID3
"RTN","YTQAPI8",123,0)
 N YSCODE,YSCODEN,YSEQ,G,YSIEN,N
"RTN","YTQAPI8",124,0)
 K ^TMP($J,"YSSG")
"RTN","YTQAPI8",125,0)
 S YSDATA=$NA(^TMP($J,"YSSG"))
"RTN","YTQAPI8",126,0)
 S YSCODE=$G(YS("CODE"),0)
"RTN","YTQAPI8",127,0)
 I '$D(^YTT(601.71,"B",YSCODE)) S ^TMP($J,"YSSG",1)="[ERROR]",^TMP($J,"YSSG",2)="no ins" Q  ;-->out
"RTN","YTQAPI8",128,0)
 S YSCODEN=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQAPI8",129,0)
 I '$D(^YTT(601.86,"AC",YSCODEN)) S ^TMP($J,"YSSG",1)="[ERROR]",^TMP($J,"YSSG",2)="no scale grps here" Q  ;-->out
"RTN","YTQAPI8",130,0)
 S N=1,^TMP($J,"YSSG",1)="[DATA]"
"RTN","YTQAPI8",131,0)
 S YSEQ=0 F  S YSEQ=$O(^YTT(601.86,"AC",YSCODEN,YSEQ)) Q:YSEQ=""  D
"RTN","YTQAPI8",132,0)
 . S YSIEN=$O(^YTT(601.86,"AC",YSCODEN,YSEQ,0))
"RTN","YTQAPI8",133,0)
 . S G=^YTT(601.86,YSIEN,0)
"RTN","YTQAPI8",134,0)
 . S N=N+1,^TMP($J,"YSSG",N)=G
"RTN","YTQAPI8",135,0)
 Q
"RTN","YTQAPI8",136,0)
LEGACY(YSDATA,YS) ; RPC:  YTQ LEGACY REPORT
"RTN","YTQAPI8",137,0)
 N YSLGRSP
"RTN","YTQAPI8",138,0)
 K ^TMP("YSDATA",$J) S YSDATA=$NA(^TMP("YSDATA",$J))
"RTN","YTQAPI8",139,0)
 S YSAD=$G(YS("AD"))
"RTN","YTQAPI8",140,0)
 I YSAD'?1N.N S YSDATA(1)="[ERROR]",YSDATA(2)="bad ad num" Q  ;-->out
"RTN","YTQAPI8",141,0)
 I '$D(^YTT(601.85,"AC",YSAD)) S YSDATA(1)="[ERROR]",YSDATA(2)="no such reference" Q  ;-->out
"RTN","YTQAPI8",142,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQAPI8",143,0)
 S X1=^YTT(601.84,YSAD,0)
"RTN","YTQAPI8",144,0)
 S DFN=$P(X1,U,2),YSDATE=$P(X1,U,4)
"RTN","YTQAPI8",145,0)
 S YSCODE=$$GET1^DIQ(601.84,YSAD_",",2)
"RTN","YTQAPI8",146,0)
 S YSOLDI=$O(^YTT(601,"B",YSCODE,0))
"RTN","YTQAPI8",147,0)
 S YSQN=0,N=1,X=""
"RTN","YTQAPI8",148,0)
 F  S YSQN=$O(^YTT(601.85,"AC",YSAD,YSQN)) Q:YSQN'>0  D
"RTN","YTQAPI8",149,0)
 . S YSANSI=$O(^YTT(601.85,"AC",YSAD,YSQN,0))
"RTN","YTQAPI8",150,0)
 . S YSCI=$P(^YTT(601.85,YSANSI,0),U,4)
"RTN","YTQAPI8",151,0)
 . Q:YSCI'?1N.N
"RTN","YTQAPI8",152,0)
 . S YSLG=$P(^YTT(601.75,YSCI,0),U,2) S:YSLG="" YSLG=" "
"RTN","YTQAPI8",153,0)
 . S X=X_YSLG
"RTN","YTQAPI8",154,0)
 . I $L(X)=200 S YSLGRSP(N)=X,X="",N=N+1
"RTN","YTQAPI8",155,0)
 L +^YTD(601.2,DFN,1,YSOLDI,1,YSDATE):DILOCKTM E  S YSDATA(1)="[ERROR]",YSDATA(2)="lock failed" Q  ;-->out
"RTN","YTQAPI8",156,0)
 I $D(YSLGRSP) M ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE)=YSLGRSP
"RTN","YTQAPI8",157,0)
 S:$L(X) ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE,N)=X
"RTN","YTQAPI8",158,0)
 S ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE,0)=YSDATE_U_U_$P(X1,U,6)_U_$P(X1,U,7)
"RTN","YTQAPI8",159,0)
 S YSDFN=DFN,YSXT=YSDATE_","_YSOLDI D INTRMNT^YTRPWRP(.YSDATA,YSDFN,YSXT)
"RTN","YTQAPI8",160,0)
 K ^YTD(601.2,DFN,1,YSOLDI,1,YSDATE)
"RTN","YTQAPI8",161,0)
 L -^YTD(601.2,DFN,1,YSOLDI,1,YSDATE)
"RTN","YTQAPI8",162,0)
 Q
"RTN","YTQAPI9")
0^9^B30575385^B30004209
"RTN","YTQAPI9",1,0)
YTQAPI9 ;ALB/ASF - MHA ENTRIES ; 12/12/09 5:02pm
"RTN","YTQAPI9",2,0)
 ;;5.01;MENTAL HEALTH;**85,96,119,121,142**;Dec 30, 1994;Build 14
"RTN","YTQAPI9",3,0)
 ;
"RTN","YTQAPI9",4,0)
 ;Reference to ^DPT( supported by DBIA #10035
"RTN","YTQAPI9",5,0)
 ;Reference to VADPT APIs supported by DBIA #10061
"RTN","YTQAPI9",6,0)
 ;Reference to ^XUSEC( supported by DBIA #10076
"RTN","YTQAPI9",7,0)
 ;Reference to ^XUSRB APIs supported by DBIA #3277
"RTN","YTQAPI9",8,0)
 ;Reference to ^VA(200, supported by DBIA #10060
"RTN","YTQAPI9",9,0)
 ;Reference to VASITE APIs supported by DBIA #10112
"RTN","YTQAPI9",10,0)
 ;Reference to FILE 8925.1 supported by DBIA #5033
"RTN","YTQAPI9",11,0)
 ;Reference to TIUSRVA APIs supported by DBIA #5541
"RTN","YTQAPI9",12,0)
 ;Reference to TIUFLF7 APIs supported by DBIA #5352
"RTN","YTQAPI9",13,0)
 Q
"RTN","YTQAPI9",14,0)
LEGCR(YSDATA,YS) ;score/report for cr dll, RPC: YTQ LEGCR 
"RTN","YTQAPI9",15,0)
 ;entry point for YTQ LEGCR rpc
"RTN","YTQAPI9",16,0)
 ;input: YS("ADATE")=date of admin
"RTN","YTQAPI9",17,0)
 ;       YS("DFN") as pt ien
"RTN","YTQAPI9",18,0)
 ;       YS("CODE") as test name
"RTN","YTQAPI9",19,0)
 ;       YS("R1") as first 200 legacy codes in a string
"RTN","YTQAPI9",20,0)
 ;       YS("R2") as 201-400
"RTN","YTQAPI9",21,0)
 N DA,DIK,DFN,YSNCODE,YSCODE,YSADATE,YSJ,YSDFN,VA,VADM,YSDT,YSE,YSEND,YSLIMIT,YSN,YSS,YSSCALE,YSCALE1,VAERR,Y,R1,R2,R3,N,J,YSAGE,YSDOB,YSG,YSHDR,YSNM,YSSEX,YSSSN,VADM,YSQQ,YSC1,YSG1,YSRT,YSRTI
"RTN","YTQAPI9",22,0)
 K ^TMP($J,"YTAPI4")
"RTN","YTQAPI9",23,0)
 D PARSE^YTAPI(.YS)
"RTN","YTQAPI9",24,0)
 I '$D(^DPT(DFN,0)) S YSDATA(1)="[ERROR]",YSDATA(2)="no such pt" Q
"RTN","YTQAPI9",25,0)
 I '$D(^YTT(601,"B",YSCODE)) S YSDATA(1)="[ERROR]",YSDATA(2)="INCORRECT TEST CODE" Q  ;---> bad code
"RTN","YTQAPI9",26,0)
 S YSNCODE=$O(^YTT(601,"B",YSCODE,-1))
"RTN","YTQAPI9",27,0)
 I YSADATE'=DT S YSDATA(1)="[ERROR]",YSDATA(2)="bad date needs DT" Q  ;---> bad date
"RTN","YTQAPI9",28,0)
 L +^YTD(601.2,DFN,1,YSNCODE,1,YSADATE):DILOCKTM I '$T S YSDATA(1)="[ERROR]",YSDATA(2)="no lock" Q  ;--->
"RTN","YTQAPI9",29,0)
 D:$D(^YTD(601.2,DFN,1,YSNCODE,1,YSADATE)) INTMP ;save old testing for a day
"RTN","YTQAPI9",30,0)
 D SAVEIT^YTAPI1(.YSDATA,.YS) ; save responses
"RTN","YTQAPI9",31,0)
 S YSCODEN=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQAPI9",32,0)
 D SCALES^YTQPXRM5(.YSQQ,YSCODEN)
"RTN","YTQAPI9",33,0)
 S N2=0 F  S N2=$O(YSQQ("S",N2)) Q:N2'>0  D
"RTN","YTQAPI9",34,0)
 . S YSCALE1=YSQQ("S",N2)
"RTN","YTQAPI9",35,0)
 . S YSC1($$UCASE^YTQPXRM6(YSCALE1),N2)=""
"RTN","YTQAPI9",36,0)
 K YSQQ
"RTN","YTQAPI9",37,0)
 D SCOREIT^YTQAPI14(.YSDATA,.YS) I $G(YSDATA(1))?1"[ERROR".E L -^YTD(601.2,DFN,1,YSNCODE,1,YSADATE) Q
"RTN","YTQAPI9",38,0)
 ;scale listing
"RTN","YTQAPI9",39,0)
 S N2=5 F  S N2=$O(YSDATA(N2)) Q:N2'>0  D
"RTN","YTQAPI9",40,0)
 . S YSG1=YSDATA(N2),YSCALE1=$P(YSG1,U,2),YSRT=$P(YSG1,U,3,4)
"RTN","YTQAPI9",41,0)
 . S YSRTI=$O(YSC1($$UCASE^YTQPXRM6(YSCALE1),0))
"RTN","YTQAPI9",42,0)
 . S:YSRTI'="" YSDATA(N2)=$P(YSG1,U)_U_YSCALE1_U_YSRTI_U_YSRT
"RTN","YTQAPI9",43,0)
 D INTRMNT^YTRPWRP(.YSDATA,DFN,YSADATE_","_YSNCODE)
"RTN","YTQAPI9",44,0)
 D DEM^VADPT,PID^VADPT S YSNM=VADM(1),YSSEX=$P(VADM(5),U),YSDOB=$P(VADM(3),U,2),YSAGE=VADM(4),YSSSN=VA("PID")
"RTN","YTQAPI9",45,0)
 S $P(YSHDR," ",60)="",YSHDR="xxx-xx-"_$E(YSSSN,8,11)_"  "_YSNM_YSHDR,YSHDR=$E(YSHDR,1,44)_YSSEX_" AGE "_YSAGE
"RTN","YTQAPI9",46,0)
AA S YSJ=$O(YSDATA(999),-1)
"RTN","YTQAPI9",47,0)
 S YSDATA(YSJ+1)="^^PROGRESS NOTE^^"
"RTN","YTQAPI9",48,0)
 S N=3,J=1 F  S N=$O(^TMP("YSDATA",$J,1,N)) Q:N'>0  D
"RTN","YTQAPI9",49,0)
 . S YSG=^TMP("YSDATA",$J,1,N)
"RTN","YTQAPI9",50,0)
 . Q:YSG]YSHDR
"RTN","YTQAPI9",51,0)
 . Q:YSG?1"Not valid unless signed: Reviewed by".E
"RTN","YTQAPI9",52,0)
 . Q:YSG?1"Printed by: ".E
"RTN","YTQAPI9",53,0)
 . Q:YSG?." "1"PRINTED    ENTERED"." "
"RTN","YTQAPI9",54,0)
 . Q:YSG?1"Ordered by: ".E
"RTN","YTQAPI9",55,0)
 . S J=J+1,YSDATA(YSJ+J)=YSG
"RTN","YTQAPI9",56,0)
DROP ;kill preview data
"RTN","YTQAPI9",57,0)
 S DIK="^YTD(601.2,DFN,1,YSNCODE,1,",DA=YSADATE,DA(1)=YSNCODE,DA(2)=DFN D ^DIK
"RTN","YTQAPI9",58,0)
 ;
"RTN","YTQAPI9",59,0)
 D:$D(^TMP($J,"YTAPI4")) OUTTMP ;place back old testing
"RTN","YTQAPI9",60,0)
 S DIK="^YTD(601.2,",DA=DFN D IX^DIK ; reindex
"RTN","YTQAPI9",61,0)
 L -^YTD(601.2,DFN,1,YSNCODE,1,YSADATE)
"RTN","YTQAPI9",62,0)
 K YSQQ Q
"RTN","YTQAPI9",63,0)
INTMP ; SAVE OLD
"RTN","YTQAPI9",64,0)
 M ^TMP($J,"YTAPI4")=^YTD(601.2,DFN,1,YSNCODE,1,YSADATE)
"RTN","YTQAPI9",65,0)
 Q
"RTN","YTQAPI9",66,0)
OUTTMP ;replace old testing
"RTN","YTQAPI9",67,0)
 M ^YTD(601.2,DFN,1,YSNCODE,1,YSADATE)=^TMP($J,"YTAPI4")
"RTN","YTQAPI9",68,0)
 Q
"RTN","YTQAPI9",69,0)
NATSET(YSDATA,YS) ; set design environment to save fm entries <100,000
"RTN","YTQAPI9",70,0)
 ;entry point for YTQ SET NATIONAL rpc
"RTN","YTQAPI9",71,0)
 ;input: NATIONAL as Yes or No
"RTN","YTQAPI9",72,0)
 ;output: YSPROG=1
"RTN","YTQAPI9",73,0)
 N Y1
"RTN","YTQAPI9",74,0)
 I '$D(^XUSEC("YSPROG",DUZ)) S YSDATA(1)="[ERROR]",YSDATA(2)="no prog key" Q  ;-->out
"RTN","YTQAPI9",75,0)
 S Y1=$G(YS("NATIONAL"))
"RTN","YTQAPI9",76,0)
 S Y1=$E(Y1,1)
"RTN","YTQAPI9",77,0)
 I (Y1'="Y")&(Y1'="N") S YSDATA(1)="[ERROR]",YSDATA(2)="no/BAD setting"
"RTN","YTQAPI9",78,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQAPI9",79,0)
 I Y1="N" K YSPROG S YSDATA(2)="local editing set"
"RTN","YTQAPI9",80,0)
 I Y1="Y" S YSPROG=1,YSDATA(2)="national editing set"
"RTN","YTQAPI9",81,0)
 Q
"RTN","YTQAPI9",82,0)
PATSEL(YSDATA,YS) ;patient component
"RTN","YTQAPI9",83,0)
 ;entry point for YTQ PATIENT INFO rpc
"RTN","YTQAPI9",84,0)
 ;input DFN as ien of file 2
"RTN","YTQAPI9",85,0)
 ;output
"RTN","YTQAPI9",86,0)
 ; YSDATA(2)= name
"RTN","YTQAPI9",87,0)
 ; YSDATA(3)=ssn
"RTN","YTQAPI9",88,0)
 ; YSDATA(4)=dob
"RTN","YTQAPI9",89,0)
 ; YSDATA(5)=age
"RTN","YTQAPI9",90,0)
 ; YSDATA(6)=sex
"RTN","YTQAPI9",91,0)
 ; YSDATA(7)=date of death (or 0)
"RTN","YTQAPI9",92,0)
 ; YSDATA(8)=0 NCS/ 1 SC^%^service connected
"RTN","YTQAPI9",93,0)
 N DFN,VADM,VAEL,VAERR
"RTN","YTQAPI9",94,0)
 S DFN=$G(YS("DFN"),-1)
"RTN","YTQAPI9",95,0)
 I '$D(^DPT(DFN,0)) S YSDATA(1)="[ERROR]",YSDATA(2)="bad dfn" Q  ;-->out
"RTN","YTQAPI9",96,0)
 D 2^VADPT
"RTN","YTQAPI9",97,0)
 I VAERR=1 S YSDATA(1)="[ERROR]",YSDATA(2)="vadpt err" Q  ;-->out
"RTN","YTQAPI9",98,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQAPI9",99,0)
 S YSDATA(2)=VADM(1)_U_"name"
"RTN","YTQAPI9",100,0)
 S YSDATA(3)=VADM(2)_U_"ssn"
"RTN","YTQAPI9",101,0)
 S YSDATA(4)=VADM(3)_U_"dob"
"RTN","YTQAPI9",102,0)
 S YSDATA(5)=VADM(4)_U_"age"
"RTN","YTQAPI9",103,0)
 S YSDATA(6)=VADM(5)_U_"sex"
"RTN","YTQAPI9",104,0)
 S YSDATA(7)=+VADM(6)_U_$P(VADM(6),U,2)_U_"date of death"
"RTN","YTQAPI9",105,0)
 S YSDATA(8)=VAEL(3)_U_"service connected"
"RTN","YTQAPI9",106,0)
 Q
"RTN","YTQAPI9",107,0)
USERQ(YSDATA,YS) ;user info
"RTN","YTQAPI9",108,0)
 ;entry point for YTQ USERQ rpc
"RTN","YTQAPI9",109,0)
 ;input DUZ as internal ien file 200 for user to check [optional default is current user]
"RTN","YTQAPI9",110,0)
 ;      KEY as name of security key to check [optional]
"RTN","YTQAPI9",111,0)
 ;      TITLE as name of Pnote [optional]
"RTN","YTQAPI9",112,0)
 ;output YSDATA(2)= name of user
"RTN","YTQAPI9",113,0)
 ;       YSDATA(3) if key sent 1^holds VS 0^lacks KEY
"RTN","YTQAPI9",114,0)
 ;       YSDATA(4) site info
"RTN","YTQAPI9",115,0)
 N K,YSKEY,YSDUZ,YSTITLE,DIC,YSCOS,N2,X
"RTN","YTQAPI9",116,0)
 S YSTITLE=$G(YS("TITLE"),-1)
"RTN","YTQAPI9",117,0)
 S YSDUZ=$G(YS("DUZ"),DUZ)
"RTN","YTQAPI9",118,0)
 S YSKEY=$G(YS("KEY"),-1)
"RTN","YTQAPI9",119,0)
 S YSTITLE=$G(YS("TITLE"))
"RTN","YTQAPI9",120,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQAPI9",121,0)
 D OWNSKEY^XUSRB(.K,YSKEY,YSDUZ)
"RTN","YTQAPI9",122,0)
 S YSDATA(2)=$P($G(^VA(200,YSDUZ,0)),U)_U_YSDUZ
"RTN","YTQAPI9",123,0)
 I YSKEY=-1 S YSDATA(3)=""
"RTN","YTQAPI9",124,0)
 E  S YSDATA(3)=$S(K(0):"1^holds ",1:"0^lacks ")_YSKEY
"RTN","YTQAPI9",125,0)
 S YSDATA(4)=$$SITE^VASITE_U_$$NAME^VASITE(DT)
"RTN","YTQAPI9",126,0)
 ;ASF 12/8/2009
"RTN","YTQAPI9",127,0)
 I YSTITLE="" S YSDATA(5)="^no title sent" Q  ;-->out
"RTN","YTQAPI9",128,0)
 S Y=+$$DDEFIEN^TIUFLF7(YSTITLE,"TL")
"RTN","YTQAPI9",129,0)
 I +Y'>0 S YSDATA(5)="^bad pnote title" Q  ;-->out
"RTN","YTQAPI9",130,0)
 D REQCOS^TIUSRVA(.YSCOS,+Y,"",YSDUZ) ;is cosigner required
"RTN","YTQAPI9",131,0)
 S YSDATA(5)=YSCOS_U_"cosigner "_$S(YSCOS=1:"required",YSCOS=0:"not required",1:"error")
"RTN","YTQAPI9",132,0)
 Q
"RTN","YTQAPI9",133,0)
MHREPORT(YSDATA,YS) ;gets a report format from 601.93
"RTN","YTQAPI9",134,0)
 ;entry point for YTQ GET REPORT rpc
"RTN","YTQAPI9",135,0)
 ;Input: CODE as instrument name
"RTN","YTQAPI9",136,0)
 ;Output: LINE# ^ line text
"RTN","YTQAPI9",137,0)
 N N,N1,YSIENS,YSCODE,YSCODEN,YSIENS
"RTN","YTQAPI9",138,0)
 K ^TMP("YSDATA",$J) S YSDATA=$NA(^TMP("YSDATA",$J))
"RTN","YTQAPI9",139,0)
 S ^TMP("YSDATA",$J,1)="[ERROR]"
"RTN","YTQAPI9",140,0)
 S YSCODE=$G(YS("CODE"),0)
"RTN","YTQAPI9",141,0)
 I '$D(^YTT(601.71,"B",YSCODE)) S ^TMP("YSDATA",$J,2)="bad code" Q  ;-->out
"RTN","YTQAPI9",142,0)
 S YSCODEN=$O(^YTT(601.71,"B",YSCODE,-1))
"RTN","YTQAPI9",143,0)
 S YSIENS=$O(^YTT(601.93,"C",YSCODEN,-1))
"RTN","YTQAPI9",144,0)
 I YSIENS'>0 S ^TMP("YSDATA",$J,1)="[DATA]^0" Q  ;--> out
"RTN","YTQAPI9",145,0)
 S N=1,N1=0 F  S N1=$O(^YTT(601.93,YSIENS,1,N1)) Q:N1'>0  D
"RTN","YTQAPI9",146,0)
 . S N=N+1,^TMP("YSDATA",$J,N)=$G(^YTT(601.93,YSIENS,1,N1,0))
"RTN","YTQAPI9",147,0)
 S ^TMP("YSDATA",$J,1)="[DATA]"_U_YSIENS
"RTN","YTQAPI9",148,0)
 Q
"RTN","YTQTIU")
0^10^B23135815^B22796222
"RTN","YTQTIU",1,0)
YTQTIU ;ASF/ALB - MHAX TIU ; 12/7/09 3:10pm
"RTN","YTQTIU",2,0)
 ;;5.01;MENTAL HEALTH;**85,96,123,142**;Dec 30, 1994;Build 14
"RTN","YTQTIU",3,0)
 ;
"RTN","YTQTIU",4,0)
 ;Reference to TIUPUTU APIs supported by DBIA #3351
"RTN","YTQTIU",5,0)
 ;Reference to TIUSRVA APIs supported by DBIA #5541
"RTN","YTQTIU",6,0)
 ;Reference to VADPT APIs supported by DBIA #10061
"RTN","YTQTIU",7,0)
 ;Reference to TIUSRVP APIs supported by DBIA #3535
"RTN","YTQTIU",8,0)
 ;Reference to FILE 8925 supported by DBIA #3268
"RTN","YTQTIU",9,0)
 ;Reference to PXAPI APIs supported by DBIA #1889
"RTN","YTQTIU",10,0)
 ;Reference to TIUSRVR1 supported by DBIA #2944
"RTN","YTQTIU",11,0)
 ;Reference to FILE 9.4 supported by DBIA #10048
"RTN","YTQTIU",12,0)
 Q
"RTN","YTQTIU",13,0)
PCREATE(YSDATA,YS) ;pn creation
"RTN","YTQTIU",14,0)
 ;Input AD AS ien of 601.84 mh administration
"RTN","YTQTIU",15,0)
 ; YS(1...X) as text of note
"RTN","YTQTIU",16,0)
 N DFN,N,N1,N2,Y,J1,J2,YSAD,YSAVED,YSHOSP,YSOK,YSORD,YSRPRIVL,YST,YSTIT,YSTS,YSVISIT,YSVSIT,YSVSTR,YST1,YSTIUX,YSTIUDA
"RTN","YTQTIU",17,0)
 N YSPNOK,YSINS,YSPNAC,YSPNTIT,VA,VADM,X,YSAGE,YSB,YSDOB,YSG,YSHDR,YSNM,YSSEX,YSSSN,YSCREQ,YSPCS,Y1
"RTN","YTQTIU",18,0)
 S YSTIUDA=$G(YS("TIUIEN"),0)
"RTN","YTQTIU",19,0)
 S YSDATA(1)="[ERROR]"
"RTN","YTQTIU",20,0)
 S YSAD=$G(YS("AD"),0)
"RTN","YTQTIU",21,0)
 S YSPCS=$G(YS("COSIGNER"))
"RTN","YTQTIU",22,0)
 I '$D(^YTT(601.84,YSAD,0)) S YSDATA(2)="bad ad" Q  ;-->out
"RTN","YTQTIU",23,0)
 S YSHOSP=$P(^YTT(601.84,YSAD,0),U,11)
"RTN","YTQTIU",24,0)
 I YSHOSP'>0 S YSDATA(2)="no location" Q  ;-->out
"RTN","YTQTIU",25,0)
 S DFN=$$GET1^DIQ(601.84,YSAD_",",1,"I")
"RTN","YTQTIU",26,0)
 I DFN'>0  S YSDATA(2)="bad dfn" Q  ;-->out
"RTN","YTQTIU",27,0)
 S YSAVED=$$GET1^DIQ(601.84,YSAD_",",4,"I")
"RTN","YTQTIU",28,0)
 S YSORD=$$GET1^DIQ(601.84,YSAD_",",5,"I")
"RTN","YTQTIU",29,0)
 ;
"RTN","YTQTIU",30,0)
 ;asf 3/10/08 create pnote only when GENERATE '=n and not inactive
"RTN","YTQTIU",31,0)
 S YSINS=$$GET1^DIQ(601.84,YSAD_",",2,"I")
"RTN","YTQTIU",32,0)
 S YSPNOK=$$GET1^DIQ(601.71,YSINS_",",28,"I")
"RTN","YTQTIU",33,0)
 Q:YSPNOK="N"  ;-->out no note for this test
"RTN","YTQTIU",34,0)
 S YSPNTIT=$$GET1^DIQ(601.71,YSINS_",",29,"E")
"RTN","YTQTIU",35,0)
 S Y=$$WHATITLE^TIUPUTU(YSPNTIT)
"RTN","YTQTIU",36,0)
 ;I Y'>0 S Y=$$WHATITLE^TIUPUTU("MHA ASSESSMENT NOTE")
"RTN","YTQTIU",37,0)
 I Y'>0 S YSDATA(2)="pn not setup" Q  ;--->out
"RTN","YTQTIU",38,0)
 S YSTIT=+Y
"RTN","YTQTIU",39,0)
 ;
"RTN","YTQTIU",40,0)
 S YSTS=$$GET1^DIQ(601.84,YSAD_",",2,"I")
"RTN","YTQTIU",41,0)
 S YSRPRIVL=$$GET1^DIQ(601.71,YSTS_",",9,"E")
"RTN","YTQTIU",42,0)
 Q:YSRPRIVL'=""  ;-->out  ASF 5/1/07
"RTN","YTQTIU",43,0)
 ;
"RTN","YTQTIU",44,0)
 ;set cosigner if required or exit ASF 3/14/08
"RTN","YTQTIU",45,0)
 D REQCOS^TIUSRVA(.YSCREQ,YSTIT,"",YSORD,"") ;is cosigner required
"RTN","YTQTIU",46,0)
 ; ASF 12/4/2009 D GETPREF^TIUSRVR(.Y1,YSORD) S YSPCS=$P(Y1,U,9) ; is preferred cosigner set
"RTN","YTQTIU",47,0)
 Q:YSCREQ&(YSPCS="")  ;-->out required signer not sent
"RTN","YTQTIU",48,0)
 S:YSCREQ&(YSPCS>0) YSTIUX(1208)=YSPCS,YSTIUX(1506)=1
"RTN","YTQTIU",49,0)
 S YSTIUX(1202)=YSORD
"RTN","YTQTIU",50,0)
 ;
"RTN","YTQTIU",51,0)
 D DEM^VADPT,PID^VADPT S YSNM=VADM(1),YSSEX=$P(VADM(5),U),YSDOB=$P(VADM(3),U,2),YSAGE=VADM(4),YSSSN=VA("PID")
"RTN","YTQTIU",52,0)
 S $P(YSHDR," ",60)="",YSHDR=YSSSN_"  "_YSNM_YSHDR,YSHDR=$E(YSHDR,1,44)_YSSEX_" AGE "_YSAGE
"RTN","YTQTIU",53,0)
 ;add boilerplate at end if no report ASF 8/20/08
"RTN","YTQTIU",54,0)
 ;don't add boilerplate for AIMS      KCM 8/15/19
"RTN","YTQTIU",55,0)
 I '$D(^YTT(601.93,"C",YSINS)),($P(^YTT(601.71,YSINS,0),U)'="AIMS") D BOTTOM
"RTN","YTQTIU",56,0)
 I YSTIUDA>0 D UPDATE Q  ;-->out
"RTN","YTQTIU",57,0)
 D TXTCK(0)
"RTN","YTQTIU",58,0)
 ;
"RTN","YTQTIU",59,0)
 ;MAKE(SUCCESS,DFN,TITLE,VDT,VLOC,VSIT,TIUX,VSTR,SUPPRESS,NOASF)
"RTN","YTQTIU",60,0)
 D MAKE^TIUSRVP(.YSOK,DFN,YSTIT,YSAVED,YSHOSP,,.YSTIUX,YSHOSP_";"_YSAVED_";E")
"RTN","YTQTIU",61,0)
 Q:YSOK'>0  ;-->out
"RTN","YTQTIU",62,0)
 S YSDATA(1)="[DATA]",YSDATA(2)=YSOK
"RTN","YTQTIU",63,0)
 N YSENC,YSPKG,YSEOK,YSPROB
"RTN","YTQTIU",64,0)
 S YSVISIT=$$GET1^DIQ(8925,YSOK_",",.03,"I")
"RTN","YTQTIU",65,0)
 S YSPKG=$$FIND1^DIC(9.4,"","BO","MENTAL HEALTH")
"RTN","YTQTIU",66,0)
 S YSENC("ENCOUNTER",1,"ENC D/T")=YSAVED
"RTN","YTQTIU",67,0)
 S YSENC("ENCOUNTER",1,"PATIENT")=DFN
"RTN","YTQTIU",68,0)
 S YSENC("ENCOUNTER",1,"HOS LOC")=YSHOSP
"RTN","YTQTIU",69,0)
 S YSENC("ENCOUNTER",1,"SERVICE CATEGORY")="E"
"RTN","YTQTIU",70,0)
 S YSENC("ENCOUNTER",1,"ENCOUNTER TYPE")="O"
"RTN","YTQTIU",71,0)
 S YSENC("PROVIDER",1,"NAME")=YSORD
"RTN","YTQTIU",72,0)
 S YSENC("PROVIDER",1,"PRIMARY")=1
"RTN","YTQTIU",73,0)
 S YSEOK=$$DATA2PCE^PXAPI("YSENC",YSPKG,"MHA DATA",.YSVISIT,,,,,.YSPROB)
"RTN","YTQTIU",74,0)
 Q
"RTN","YTQTIU",75,0)
UPDATE ;
"RTN","YTQTIU",76,0)
 N STR ; patch 123
"RTN","YTQTIU",77,0)
 K ^TMP("TIUVIEW",$J)
"RTN","YTQTIU",78,0)
 D TGET^TIUSRVR1(.YST1,YSTIUDA)
"RTN","YTQTIU",79,0)
 ; patch 123, changed N1=4 to N1=5 so that URGENCY is not repeated.
"RTN","YTQTIU",80,0)
 S N1=5,N2=0 ;keep from adding header each time
"RTN","YTQTIU",81,0)
 F  S N1=$O(^TMP("TIUVIEW",$J,N1)) Q:N1'>0  D
"RTN","YTQTIU",82,0)
 . ; patch 123, skip lines = "", still set lines that at least =" "
"RTN","YTQTIU",83,0)
 . S STR=^TMP("TIUVIEW",$J,N1)
"RTN","YTQTIU",84,0)
 . I STR'="" S N2=N2+1,YSTIUX("TEXT",N2,0)=^TMP("TIUVIEW",$J,N1)
"RTN","YTQTIU",85,0)
 ;; removed 8/20/08 ASFD DELBOTM
"RTN","YTQTIU",86,0)
 K ^TMP("TIUVIEW",$J)
"RTN","YTQTIU",87,0)
 S YSTIUX(.02)=DFN
"RTN","YTQTIU",88,0)
 S YSTIUX(1301)=YSAVED
"RTN","YTQTIU",89,0)
 S YSTIUX(1302)=YSORD
"RTN","YTQTIU",90,0)
 S $P(X,"_",75)=""
"RTN","YTQTIU",91,0)
 S N2=N2+1,YSTIUX("TEXT",N2,0)=X
"RTN","YTQTIU",92,0)
 D TXTCK(N2)
"RTN","YTQTIU",93,0)
 D UPDATE^TIUSRVP(.YSOK,YSTIUDA,.YSTIUX)
"RTN","YTQTIU",94,0)
 S:YSOK YSDATA(1)="[DATA]",YSDATA(2)=YSOK
"RTN","YTQTIU",95,0)
 Q
"RTN","YTQTIU",96,0)
TXTCK(N2) ;clean text
"RTN","YTQTIU",97,0)
 S N=0,N1=0 F  S N=$O(YS(N)) Q:N'>0  D
"RTN","YTQTIU",98,0)
 . S YSG=YS(N)
"RTN","YTQTIU",99,0)
 . I YSG="" S YSB=$G(YSB)+1
"RTN","YTQTIU",100,0)
 . E  S YSB=0
"RTN","YTQTIU",101,0)
 . I (YSG="")&(YSB>2) Q  ;no print mult blanks
"RTN","YTQTIU",102,0)
 . I N>3 Q:($E(YSG,1,51)=$E(YSHDR,1,51))
"RTN","YTQTIU",103,0)
 . I N>3 Q:YSG?." "1"PRINTED    ENTERED"." "
"RTN","YTQTIU",104,0)
 . Q:YSG?1"Not valid unless signed: Reviewed by".E
"RTN","YTQTIU",105,0)
 . Q:YSG?1"Printed by: ".E
"RTN","YTQTIU",106,0)
 . S N1=N1+1
"RTN","YTQTIU",107,0)
 . S YSTIUX("TEXT",N1+N2,0)=YS(N) K YS(N)
"RTN","YTQTIU",108,0)
 Q
"RTN","YTQTIU",109,0)
BOTTOM ;add lines end of note not admin
"RTN","YTQTIU",110,0)
 S J1=99999,J1=$O(YS(J1),-1) Q:J1'>0  ;--> out no text
"RTN","YTQTIU",111,0)
 S J1=J1+1,YS(J1)="  "
"RTN","YTQTIU",112,0)
 S J1=J1+1,YS(J1)="Information contained in this note is based on a self report assessment"
"RTN","YTQTIU",113,0)
 S J1=J1+1,YS(J1)="and is not sufficient to use alone for diagnostic purposes."
"RTN","YTQTIU",114,0)
 S J1=J1+1,YS(J1)="Assessment results should be verified for accuracy and used"
"RTN","YTQTIU",115,0)
 S J1=J1+1,YS(J1)="in conjunction with other diagnostic activities."
"RTN","YTQTIU",116,0)
 Q
"RTN","YTQTIU",117,0)
DELBOTM ;DEL Bottom
"RTN","YTQTIU",118,0)
 S J1=99999,J1=$O(YSTIUX("TEXT",J1),-1)
"RTN","YTQTIU",119,0)
 F J2=J1:-1:J1-4 D
"RTN","YTQTIU",120,0)
 . K YSTIUX("TEXT",J2)
"RTN","YTQTIU",121,0)
 . S N2=N2-1
"RTN","YTQTIU",122,0)
 Q
"RTN","YTSCORE")
0^1^B55110883^B54651706
"RTN","YTSCORE",1,0)
YTSCORE ;SLC/KCM - Scoring for complex instruments ; 9/15/2015
"RTN","YTSCORE",2,0)
 ;;5.01;MENTAL HEALTH;**119,123,142**;Dec 30, 1994;Build 14
"RTN","YTSCORE",3,0)
 ;
"RTN","YTSCORE",4,0)
 ;
"RTN","YTSCORE",5,0)
 Q
"RTN","YTSCORE",6,0)
DLL ; stub entry point for instruments scored by DLL
"RTN","YTSCORE",7,0)
 Q
"RTN","YTSCORE",8,0)
 ;
"RTN","YTSCORE",9,0)
DESGNTR(YSQN,DES) ; Create DESIGNTR variable, used for Reports
"RTN","YTSCORE",10,0)
 N STR76
"RTN","YTSCORE",11,0)
 S DES="NO DESIGNATOR"
"RTN","YTSCORE",12,0)
 Q:'$G(YSQN)
"RTN","YTSCORE",13,0)
 S STR76=$O(^YTT(601.76,"AE",YSQN,0))
"RTN","YTSCORE",14,0)
 Q:'$G(STR76)
"RTN","YTSCORE",15,0)
 S DES=$P($P($G(^YTT(601.76,STR76,0)),U,5),".")
"RTN","YTSCORE",16,0)
 Q
"RTN","YTSCORE",17,0)
 ; 
"RTN","YTSCORE",18,0)
LOADANSW(YSDATA,YS) ; patch 123, loads answers, builds YSDATA array
"RTN","YTSCORE",19,0)
 ;input:AD = ADMINISTRATION #
"RTN","YTSCORE",20,0)
 ;output: [DATA]
"RTN","YTSCORE",21,0)
 ; ADMIN ID^DFN^INSTRUMENT^DATE GIVEN^IS COMPLETE
"RTN","YTSCORE",22,0)
 ; QUESTION #^seq^ANSWER
"RTN","YTSCORE",23,0)
 ;
"RTN","YTSCORE",24,0)
 N G,G1,N,YSQN,YSTSTN,YSEQ,YSICON
"RTN","YTSCORE",25,0)
 N IEN71
"RTN","YTSCORE",26,0)
 S YSAD=$G(YS("AD"))
"RTN","YTSCORE",27,0)
 I YSAD'?1N.N S YSDATA(1)="[ERROR]",YSDATA(2)="Bad ADMIN num, admin is "_YSAD Q  ;-->out
"RTN","YTSCORE",28,0)
 I '$D(^YTT(601.85,"AC",YSAD)) S YSDATA(1)="[ERROR]",YSDATA(2)="No entry in MH ANSWERS" Q  ;-->out
"RTN","YTSCORE",29,0)
 S YSTSTN=$P(^YTT(601.84,YSAD,0),U,3)
"RTN","YTSCORE",30,0)
 S YSDATA(1)="[DATA]"
"RTN","YTSCORE",31,0)
 S YSDATA(2)=YSAD_U_$$GET1^DIQ(601.84,YSAD_",",1,"I")_U_$$GET1^DIQ(601.84,YSAD_",",2,"E")_U_$$GET1^DIQ(601.84,YSAD_",",3,"I")_U_$$GET1^DIQ(601.84,YSAD_",",8,"I")
"RTN","YTSCORE",32,0)
 S YSQN=0,N=2
"RTN","YTSCORE",33,0)
 F  S YSQN=$O(^YTT(601.85,"AC",YSAD,YSQN)) Q:YSQN'>0  S G=0 D
"RTN","YTSCORE",34,0)
 .S G=$O(^YTT(601.85,"AC",YSAD,YSQN,G)) Q:G'>0  S G1=0 D
"RTN","YTSCORE",35,0)
 ..S YSICON=$O(^YTT(601.76,"AF",YSTSTN,YSQN,0))
"RTN","YTSCORE",36,0)
 ..S YSEQ=1
"RTN","YTSCORE",37,0)
 ..I YSICON?1N.N S YSEQ=$P(^YTT(601.76,YSICON,0),U,3)
"RTN","YTSCORE",38,0)
 ..S:$P(^YTT(601.85,G,0),U,4)?1N.N N=N+1,YSDATA(N)=YSQN_U_YSEQ_U_$P(^YTT(601.85,G,0),U,4)
"RTN","YTSCORE",39,0)
 ..F  S G1=$O(^YTT(601.85,G,1,G1)) Q:G1'>0  D
"RTN","YTSCORE",40,0)
 ...S N=N+1,YSDATA(N)=YSQN_U_YSEQ_";"_G1_U_$G(^YTT(601.85,G,1,G1,0))
"RTN","YTSCORE",41,0)
 Q
"RTN","YTSCORE",42,0)
 ;
"RTN","YTSCORE",43,0)
SCOREINS(YSDATA,IEN71) ;
"RTN","YTSCORE",44,0)
 ; patch 123, scores responses (answers) for a given instrument
"RTN","YTSCORE",45,0)
 ; YSDATA contains Answers for instrument
"RTN","YTSCORE",46,0)
 N I,G,N,YSAI,YSAN,YSCALEI,YSKEYI,YSRAW,YSRTN,YSTARG,YSQN,YSVAL
"RTN","YTSCORE",47,0)
 K ^TMP($J,"YSCOR"),^TMP($J,"YSG")
"RTN","YTSCORE",48,0)
 I '$D(^YTT(601.86,"AD",IEN71)) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="Scale grp not found" Q  ;-->out
"RTN","YTSCORE",49,0)
 S YS("CODE")=$$GET1^DIQ(601.71,IEN71_",",.01) ; get the Instrument Name
"RTN","YTSCORE",50,0)
 D SCALEG^YTQAPI3(.YSDATA,.YS)
"RTN","YTSCORE",51,0)
 S YSDATA=$NA(^TMP($J,"YSCOR"))
"RTN","YTSCORE",52,0)
 S ^TMP($J,"YSCOR",1)="[DATA]",N=1
"RTN","YTSCORE",53,0)
 ;
"RTN","YTSCORE",54,0)
 S YSRTN=$$GET1^DIQ(601.71,IEN71_",",92) ;routine for scoring
"RTN","YTSCORE",55,0)
 I (YSRTN'=""),(YSRTN'="YTSCORE") D  Q
"RTN","YTSCORE",56,0)
 .S YSRTN="DLLSTR^"_YSRTN_"(.YSDATA,.YS,1)"
"RTN","YTSCORE",57,0)
 .D @YSRTN
"RTN","YTSCORE",58,0)
 ; original code, this uses MH SCORING KEY File to calculate ^TMP for "regular instruments"
"RTN","YTSCORE",59,0)
 F I=2:1 Q:'$D(^TMP($J,"YSG",I))  I ^TMP($J,"YSG",I)?1"Scale".E S YSRAW="0",N=N+1,^TMP($J,"YSCOR",N)=$P(^TMP($J,"YSG",I),U,4)_"=" D  S ^TMP($J,"YSCOR",N)=^TMP($J,"YSCOR",N)_YSRAW
"RTN","YTSCORE",60,0)
 .S YSCALEI=$P(^TMP($J,"YSG",I),U),YSCALEI=$P(YSCALEI,"=",2)
"RTN","YTSCORE",61,0)
 .S YSKEYI=0 F  S YSKEYI=$O(^YTT(601.91,"AC",YSCALEI,YSKEYI)) Q:YSKEYI'>0  D
"RTN","YTSCORE",62,0)
 ..S G=^YTT(601.91,YSKEYI,0)
"RTN","YTSCORE",63,0)
 ..S YSQN=$P(G,U,3),YSTARG=$P(G,U,4),YSVAL=$P(G,U,5)
"RTN","YTSCORE",64,0)
 ..S YSAI=$O(^YTT(601.85,"AC",YSAD,YSQN,0))
"RTN","YTSCORE",65,0)
 ..Q:YSAI'>0
"RTN","YTSCORE",66,0)
 ..Q:'$D(^YTT(601.85,YSAI,0))  ;ASF 11/15/07
"RTN","YTSCORE",67,0)
 ..S YSAN=""
"RTN","YTSCORE",68,0)
 ..I $D(^YTT(601.85,YSAI,1,1,0)) S YSAN=^YTT(601.85,YSAI,1,1,0)
"RTN","YTSCORE",69,0)
 ..I $P(^YTT(601.85,YSAI,0),U,4)?1N.N S YSAN=$P(^YTT(601.85,YSAI,0),U,4),YSAN=$G(^YTT(601.75,YSAN,1))
"RTN","YTSCORE",70,0)
 ..I YSAN=YSTARG S YSRAW=YSRAW+YSVAL
"RTN","YTSCORE",71,0)
 Q
"RTN","YTSCORE",72,0)
 ;
"RTN","YTSCORE",73,0)
CHKSCRE() ;
"RTN","YTSCORE",74,0)
 N REVSCR71,REVSCR84
"RTN","YTSCORE",75,0)
 S REVSCR71=$$GET1^DIQ(601.71,IEN71_",",93)  ; Instrument scoring version number
"RTN","YTSCORE",76,0)
 S REVSCR84=$$GET1^DIQ(601.84,YSAD_",",14)  ; Administration scoring version number
"RTN","YTSCORE",77,0)
 Q (REVSCR71=REVSCR84)
"RTN","YTSCORE",78,0)
 ;
"RTN","YTSCORE",79,0)
LDSCORES(YSDATA,YS) ;  new call for patch 123
"RTN","YTSCORE",80,0)
 ;input:AD = ADMINISTRATION #
"RTN","YTSCORE",81,0)
 ;output: [DATA] in ^TMP($J,"YSCOR")
"RTN","YTSCORE",82,0)
 N G,N,IEN71,SCALE,YSAD,YSCODEN,YSCALE
"RTN","YTSCORE",83,0)
 S YSAD=$G(YS("AD"))
"RTN","YTSCORE",84,0)
 K ^TMP($J,"YSCOR") S YSDATA=$NA(^TMP($J,"YSCOR"))
"RTN","YTSCORE",85,0)
 I YSAD'?1N.N S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="Bad ADMIN # in LDSCORES" Q  ;-->out
"RTN","YTSCORE",86,0)
 S IEN71=$$GET1^DIQ(601.84,YSAD_",",2,"I") I IEN71'?1N.N D  Q
"RTN","YTSCORE",87,0)
 .S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="No Instrument in 601.84"
"RTN","YTSCORE",88,0)
 ;Check if scoring may have changed before loading scores 
"RTN","YTSCORE",89,0)
 I '$$CHKSCRE D SCORSAVE^YTQAPI11(.YSDATA,.YS)
"RTN","YTSCORE",90,0)
 I '$D(^YTT(601.92,"AC",YSAD)) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="No entry in MH RESULTS" Q  ;-->out
"RTN","YTSCORE",91,0)
 ;
"RTN","YTSCORE",92,0)
 S YS("CODE")=$$GET1^DIQ(601.84,YSAD_",",2)
"RTN","YTSCORE",93,0)
 D SCALEG^YTQAPI3(.YSDATA,.YS)
"RTN","YTSCORE",94,0)
 ;
"RTN","YTSCORE",95,0)
 S YSDATA=$NA(^TMP($J,"YSCOR"))
"RTN","YTSCORE",96,0)
 S ^TMP($J,"YSCOR",1)="[DATA]",N=1
"RTN","YTSCORE",97,0)
 ;
"RTN","YTSCORE",98,0)
 S YSCALE=""
"RTN","YTSCORE",99,0)
 F  S YSCALE=$O(^YTT(601.92,"AC",YSAD,YSCALE))  Q:'YSCALE  D
"RTN","YTSCORE",100,0)
 .S G=$G(^YTT(601.92,YSCALE,0))
"RTN","YTSCORE",101,0)
 .S SCALE=$P(G,U,3),N=N+1
"RTN","YTSCORE",102,0)
 .S ^TMP($J,"YSCOR",N)=SCALE_"="_$P(G,U,4)
"RTN","YTSCORE",103,0)
 Q
"RTN","YTSCORE",104,0)
 ;
"RTN","YTSCORE",105,0)
UPDSCORE(YSDATA,YS) ; files entries in MH RESULTS (601.92)
"RTN","YTSCORE",106,0)
 ;input:AD = ADMINISTRATION #
"RTN","YTSCORE",107,0)
 ;output: [DATA]
"RTN","YTSCORE",108,0)
 N DIFF,IEN71,YSAD,YSCALE,YSC,YSG,Z
"RTN","YTSCORE",109,0)
 S YSAD=$G(YS("AD"))
"RTN","YTSCORE",110,0)
 I YSAD'?1N.N S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="No ADMIN # in UPDSCORE" Q  ;-->out 
"RTN","YTSCORE",111,0)
 S IEN71=$$GET1^DIQ(601.84,YSAD_",",2,"I")
"RTN","YTSCORE",112,0)
 ; are there existing scores in MH RESULT
"RTN","YTSCORE",113,0)
 I $D(^YTT(601.92,"AC",YSAD)) D OLDSCRES(.YSCALE,.YSAD)
"RTN","YTSCORE",114,0)
 ;
"RTN","YTSCORE",115,0)
 S Z=1 F  S Z=$O(^TMP($J,"YSCOR",Z)) Q:Z'>0  D
"RTN","YTSCORE",116,0)
 .S YSG=^TMP($J,"YSCOR",Z)
"RTN","YTSCORE",117,0)
 .S YSC=$P(YSG,"=")
"RTN","YTSCORE",118,0)
 .S DIFF=0
"RTN","YTSCORE",119,0)
 .I $D(YSCALE(YSC)) D  Q
"RTN","YTSCORE",120,0)
 ..S DIFF=$$CHKSCR(.YSC,.YSG)
"RTN","YTSCORE",121,0)
 ..I DIFF D ADDAUDIT(.YSC,.YSG)
"RTN","YTSCORE",122,0)
 .D ADDSCRE
"RTN","YTSCORE",123,0)
 ; set admin.revision = instrument.revision
"RTN","YTSCORE",124,0)
 D SETREV(.YSAD,.IEN71)
"RTN","YTSCORE",125,0)
 Q
"RTN","YTSCORE",126,0)
 ;
"RTN","YTSCORE",127,0)
CHKSCR(YSC,YSG) ; return 1 if there are different values, 0 if values in scoring are the same
"RTN","YTSCORE",128,0)
 N I,OLDSC,YSCOR
"RTN","YTSCORE",129,0)
 S DIFF=0
"RTN","YTSCORE",130,0)
 S YSCOR=$P(YSG,"=",2,7)
"RTN","YTSCORE",131,0)
 S OLDSC=$P(YSCALE(YSC),U,4,7)
"RTN","YTSCORE",132,0)
 F I=1:1:4 I $P($G(OLDSC),U,I)'=$P($G(YSCOR),U,I) S DIFF=1 Q:DIFF
"RTN","YTSCORE",133,0)
 Q DIFF
"RTN","YTSCORE",134,0)
 ;
"RTN","YTSCORE",135,0)
ADDAUDIT(YSC,YSG) ; add entry in AUDIT node, update value in existing MH RESULTS record
"RTN","YTSCORE",136,0)
 N AUDIEN,AUD,DIERR
"RTN","YTSCORE",137,0)
 S AUDIEN=$P(YSCALE(YSC),U)
"RTN","YTSCORE",138,0)
 D NOW^%DTC
"RTN","YTSCORE",139,0)
 S AUD(1,601.921,"+2,"_AUDIEN_",",.01)=%
"RTN","YTSCORE",140,0)
 S AUD(1,601.921,"+2,"_AUDIEN_",",2)=$$GET1^DIQ(601.84,YSAD_",",14)
"RTN","YTSCORE",141,0)
 F I=4:1:7 I $L($P(YSCALE(YSC),U,I)) S AUD(1,601.921,"+2,"_AUDIEN_",",(I-1))=$P(YSCALE(YSC),U,I)
"RTN","YTSCORE",142,0)
 D UPDATE^DIE("","AUD(1)")
"RTN","YTSCORE",143,0)
 I $D(DIERR) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="Did not set Audit node in MH RESULTS" Q
"RTN","YTSCORE",144,0)
 D CLEAN^DILF
"RTN","YTSCORE",145,0)
 ;
"RTN","YTSCORE",146,0)
 ; update existing node with new ones; use FILE^DIE
"RTN","YTSCORE",147,0)
 N I,FDA,DIERR,YSGANS
"RTN","YTSCORE",148,0)
 S YSGANS=$P(YSG,"=",2,5)
"RTN","YTSCORE",149,0)
 F I=1:1:4 I $L($P(YSGANS,U,I))!$L($P(YSCALE(YSC),U,I+3)) S FDA(601.92,AUDIEN_",",(I+2))=$P(YSGANS,U,I)
"RTN","YTSCORE",150,0)
 D FILE^DIE("","FDA")
"RTN","YTSCORE",151,0)
 I $D(DIERR) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="Did not update records in MH RESULTS File" Q
"RTN","YTSCORE",152,0)
 D CLEAN^DILF
"RTN","YTSCORE",153,0)
 K %,%H,%I,X
"RTN","YTSCORE",154,0)
 Q
"RTN","YTSCORE",155,0)
 ;
"RTN","YTSCORE",156,0)
ADDSCRE ;add score to MH RESULTS
"RTN","YTSCORE",157,0)
 N FDA,FDAIEN,DIERR,STR,YSRNEW
"RTN","YTSCORE",158,0)
 S YSRNEW=$$NEW^YTQLIB(601.92)
"RTN","YTSCORE",159,0)
 S STR=$P(YSG,"=",2)
"RTN","YTSCORE",160,0)
 S FDAIEN(1)=YSRNEW
"RTN","YTSCORE",161,0)
 S FDA(601.92,"+1,",.01)=YSRNEW
"RTN","YTSCORE",162,0)
 S FDA(601.92,"+1,",1)=YSAD
"RTN","YTSCORE",163,0)
 S FDA(601.92,"+1,",2)=$P(YSG,"=",1)
"RTN","YTSCORE",164,0)
 S FDA(601.92,"+1,",3)=$P(STR,U,1)                  ; raw score
"RTN","YTSCORE",165,0)
 S:$L($P(STR,U,2)) FDA(601.92,"+1,",4)=$P(STR,U,2)  ; transformed score 1
"RTN","YTSCORE",166,0)
 S:$L($P(STR,U,3)) FDA(601.92,"+1,",5)=$P(STR,U,3)  ; transformed score 2
"RTN","YTSCORE",167,0)
 S:$L($P(STR,U,4)) FDA(601.92,"+1,",6)=$P(STR,U,4)  ; transformed score 3
"RTN","YTSCORE",168,0)
 D UPDATE^DIE("","FDA","FDAIEN")
"RTN","YTSCORE",169,0)
 I $D(DIERR) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="Did not add MH RESULTS entry" Q
"RTN","YTSCORE",170,0)
 Q
"RTN","YTSCORE",171,0)
 ; 
"RTN","YTSCORE",172,0)
OLDSCRES(YSCALE,YSAD) ; if existing score, build array containing them
"RTN","YTSCORE",173,0)
 N IEN92,STR
"RTN","YTSCORE",174,0)
 S IEN92=0
"RTN","YTSCORE",175,0)
 F  S IEN92=$O(^YTT(601.92,"AC",YSAD,IEN92)) Q:'IEN92  D
"RTN","YTSCORE",176,0)
 .S STR=$G(^YTT(601.92,IEN92,0))
"RTN","YTSCORE",177,0)
 .S YSCALE($P(STR,U,3))=STR
"RTN","YTSCORE",178,0)
 Q
"RTN","YTSCORE",179,0)
 ;  
"RTN","YTSCORE",180,0)
SETREV(YSAD,IEN71) ; set revision value in MH ADMINISTRATIONS to value in MH TEST AND SURVEYS
"RTN","YTSCORE",181,0)
 N FDA,DIERR
"RTN","YTSCORE",182,0)
 S FDA(601.84,YSAD_",",14)=$$GET1^DIQ(601.71,IEN71_",",93)
"RTN","YTSCORE",183,0)
 D FILE^DIE("","FDA")
"RTN","YTSCORE",184,0)
 I $D(DIERR) S ^TMP($J,"YSCOR",1)="[ERROR]",^TMP($J,"YSCOR",2)="Did not set Scoring Revision in MH ADMIN"
"RTN","YTSCORE",185,0)
 D CLEAN^DILF
"RTN","YTSCORE",186,0)
 Q
"RTN","YTSCORE",187,0)
 ;
"RTN","YTSCORE",188,0)
LDTSCOR(TSARR,YSAD) ;
"RTN","YTSCORE",189,0)
 N CNT,DATA,IEN92,RAW,T1,T2,T3
"RTN","YTSCORE",190,0)
 S IEN92="",CNT=1
"RTN","YTSCORE",191,0)
 I YSAD'?1N.N S TSARR("NOADM")="No Administration to get scores" Q
"RTN","YTSCORE",192,0)
 I '$D(^YTT(601.92,"AC",YSAD)) S TSARR("NOADM")="No scores in MH RESULTS File" Q
"RTN","YTSCORE",193,0)
 F  S IEN92=$O(^YTT(601.92,"AC",YSAD,IEN92)) Q:'IEN92  D
"RTN","YTSCORE",194,0)
 .S DATA=$G(^YTT(601.92,IEN92,0))
"RTN","YTSCORE",195,0)
 .S RAW=$P(DATA,U,4),T1=$P(DATA,U,5),T2=$P(DATA,U,6),T3=$P(DATA,U,7)
"RTN","YTSCORE",196,0)
 .S RAW=$S($L(RAW)=1:" "_RAW,1:RAW)
"RTN","YTSCORE",197,0)
 .S T1=$S($L(T1)=1:" "_T1,1:T1),T2=$S($L(T2)=1:" "_T2,1:T2),T3=$S($L(T3)=1:" "_T3,1:T3)
"RTN","YTSCORE",198,0)
 .S TSARR($P($P(DATA,U,3),":"))=$P(DATA,U,3)_U_RAW_U_T1_U_T2_U_T3
"RTN","YTSCORE",199,0)
 Q
"RTN","YTSMPI2T")
0^3^B46285456^B46267603
"RTN","YTSMPI2T",1,0)
YTSMPI2T ;SLC/PIJ - Score MMPI-2-RF ; 01/08/2016
"RTN","YTSMPI2T",2,0)
 ;;5.01;MENTAL HEALTH;**123,142**;DEC 30,1994;Build 14
"RTN","YTSMPI2T",3,0)
 ;
"RTN","YTSMPI2T",4,0)
 ;Public, Supported ICRs
"RTN","YTSMPI2T",5,0)
 ; #2056 - Fileman API - $$GET1^DIQ
"RTN","YTSMPI2T",6,0)
 ;
"RTN","YTSMPI2T",7,0)
 Q
"RTN","YTSMPI2T",8,0)
 ;
"RTN","YTSMPI2T",9,0)
TBLRAW ;; raw score tables
"RTN","YTSMPI2T",10,0)
 ;;VRIN-r;6^F^136^T~8^F^323^T~17^T^94^F~24^T^319^F~25^T^174^F~29^T^116^F~32^F^257^T~35^T^114^F~40^T^144^F^^C^144^40^T^95^F~44^T^177^F^^B^44F144T~44^F^177^T^^S~47^T^201^F~55^T^99^^^C^55^99^F^171^T~55^F^171^T^^S~58^F^180^T~
"RTN","YTSMPI2T",11,0)
 ;;VRIN-r;60^F^327^T~62^F^74^T~66^F^223^T~67^T^278^F~71^T^264^F~79^T^289^F~83^F^105^T~88^F^265^T~89^F^232^T~93^T^164^F^^B^93F164T~93^F^164^T^^S~95^F^144^T^^S~108^T^152^F^^B^108F152T~108^F^152^T^^S~119^F^303^T~
"RTN","YTSMPI2T",12,0)
 ;;VRIN-r;123^T^338^F~134^F^293^T~141^F^266^T~146^T^275^F~147^F^276^T~156^F^205^T~158^F^228^T^^C^158^228^T^261^F~158^T^261^F^^S~165^F^317^T~166^T^207^F~175^T^291^F^^B^175F291T~175^F^291^T^^S~187^F^331^T~194^F^233^T~
"RTN","YTSMPI2T",13,0)
 ;;VRIN-r;196^F^245^T~213^F^260^T~219^F^267^T~239^F^302^T~246^F^282^T~252^T^287^F~299^T^324^F~316^F^329^T~318^T^337^F~
"RTN","YTSMPI2T",14,0)
 ;;TRIN-r;17^T^44^T^+~30^T^217^T^+~37^T^322^T^+~48^T^182^T^+~57^T^67^T^+~83^T^120^T^+~101^T^189^T^+~109^T^278^T^+~134^T^248^T^+~146^T^293^T^+~158^T^202^T^+~169^T^282^T^+~212^T^264^T^+~
"RTN","YTSMPI2T",15,0)
 ;;TRIN-r;234^T^261^T^+~269^T^314^T^+~4^F^22^F^-~44^F^94^F^-~59^F^306^F^-~73^F^338^F^-~83^F^158^F^-~108^F^246^F^-~119^F^134^F^-~147^F^319^F^-~178^F^221^F^-~201^F^278^F^-~261^F^293^F^-~
"RTN","YTSMPI2T",16,0)
 ;;F-r;14^T~30^T~46^T~56^T~59^F~67^T~71^T~74^T~83^F~102^F~106^T~117^T~120^T~139^T~146^T~164^T~174^F~203^T~218^T~227^F~231^T~240^T~253^T~264^T~275^T~277^T~281^T~294^T~301^T~310^T~312^T~332^T~
"RTN","YTSMPI2T",17,0)
 ;;Fp-r;7^F~40^T~41^T~79^T~86^T~98^F~124^T~129^T~150^T~157^F~168^T~178^T~191^T~208^T~221^F~252^T~255^T~270^T~283^F~314^T~317^T~
"RTN","YTSMPI2T",18,0)
 ;;Fs;2^F~15^T~33^T~43^T~78^F~122^T~133^T~137^T~159^T~170^T~186^F~199^T~216^T~225^T~272^F~308^T~
"RTN","YTSMPI2T",19,0)
 ;;FBS-r;6^T~15^T~36^F~43^T~45^F~55^F~76^T~77^T~79^T~88^F~93^T~99^F~101^T~133^T~141^F~156^F~162^F~171^F~187^T~189^F~193^F~200^T~210^T~230^T~234^F~247^T~261^T~265^F~290^F~315^T~
"RTN","YTSMPI2T",20,0)
 ;;RBS;6^T~11^F~21^F~24^T~26^T~31^T~53^F~59^F~68^T~74^T~79^T~92^T~101^T~106^T~120^T~125^F~131^F~132^T~136^T~137^T~156^F~159^T~219^F~242^T~252^T~268^T~273^T~325^F~
"RTN","YTSMPI2T",21,0)
 ;;L-r;16^F~45^F~61^T~70^F~95^F~127^F~154^F~182^T~183^F~211^F~241^F~268^T~298^F~325^F~
"RTN","YTSMPI2T",22,0)
 ;;K-r;10^F~23^F~36^F~44^F~72^F~80^T~89^F~99^F~155^F~171^F~187^F~202^T~322^F~338^F~
"RTN","YTSMPI2T",23,0)
 ;;EID;4^F~17^F~22^T~25^F~30^T~35^T~37^F~48^T~57^F~64^F~73^F~83^F~89^T~91^T~102^F~105^F~114^T~119^T~120^T~140^F~158^T~167^T~169^T~172^T~187^T~202^F~204^T~217^F~222^F~228^T~232^T~234^F~246^F~250^T~261^T~282^F~288^T~293^F~322^T~331^T~335^T~
"RTN","YTSMPI2T",24,0)
 ;;THD;12^T~14^T~46^T~71^T~85^F~92^T~110^T~122^T~129^T~139^T~150^T~168^T~179^T~199^T~203^T~212^F~216^T~252^T~264^T~270^T~273^T~287^T~294^T~311^T~330^T~332^T~
"RTN","YTSMPI2T",25,0)
 ;;BXD;21^T~49^T~61^F~66^T~84^T~96^T~107^T~131^T~156^T~190^F~193^T~205^T~223^T~226^T~231^T~237^F~248^T~253^T~266^T~292^T~312^T~316^T~329^T~
"RTN","YTSMPI2T",26,0)
 ;;RCd;6^T~22^T~30^T~48^T~62^T~74^T~89^T~105^F~117^T~130^T~144^T~158^T~172^T~187^T~204^T~217^F~232^T~247^T~261^T~274^T~288^T~299^T~315^T~331^T~
"RTN","YTSMPI2T",27,0)
 ;;RC1;2^F~15^T~28^F~43^T~52^F~65^F~69^F~76^T~88^F~101^T~113^F~125^F~137^T~162^F~174^F~176^T~189^F~227^F~230^T~242^T~254^F~265^F~277^T~290^F~301^T~313^F~328^T~
"RTN","YTSMPI2T",28,0)
 ;;RC2;4^F~17^F~25^F~53^F~64^F~83^F~102^F~140^F~160^F~182^F~195^F~202^F~222^F~246^F~282^F~302^F~323^F~
"RTN","YTSMPI2T",29,0)
 ;;RC3;10^T~36^T~55^T~87^T~99^T~121^T~142^T~171^T~185^T~213^T~238^T~260^T~279^T~304^T~326^T~
"RTN","YTSMPI2T",30,0)
 ;;RC4;5^T~19^F~21^T~38^F~49^T~66^T~80^F~96^T~126^F~141^T~156^T~173^T~190^F~205^T~218^T~223^T~237^F~253^T~266^T~297^T~312^T~329^T~
"RTN","YTSMPI2T",31,0)
 ;;RC6;14^T~34^T~71^T~92^T~110^T~129^T~150^T~168^T~194^T~212^F~233^T~252^T~264^T~270^T~287^T~310^T~332^T~
"RTN","YTSMPI2T",32,0)
 ;;RC7;9^T~23^T~35^T~51^T~63^T~77^T~91^T~112^T~119^T~132^T~146^T~149^T~161^T~206^T~228^T~235^T~250^T~263^T~275^T~289^T~303^T~318^T~322^T~335^T~
"RTN","YTSMPI2T",33,0)
 ;;RC8;12^T~32^T~46^T~85^F~106^T~122^T~139^T~159^T~179^T~199^T~203^T~216^T~240^T~257^T~273^T~294^T~311^T~330^T~
"RTN","YTSMPI2T",34,0)
 ;;RC9;13^T~26^T~39^T~47^T~61^F~72^T~84^T~97^T~107^T~118^T~131^T~143^T~155^T~166^T~181^T~193^T~207^T~219^T~231^T~244^T~248^T~256^T~267^T~292^T~305^T~316^T~327^T~337^T~
"RTN","YTSMPI2T",35,0)
 ;;MLS;4^F~18^T~25^F~163^F~174^F~202^F~262^F~333^F~
"RTN","YTSMPI2T",36,0)
 ;;HPC;88^F~101^T~176^T~189^F~265^F~328^T~
"RTN","YTSMPI2T",37,0)
 ;;NUC;69^F~113^F~122^T~125^F~162^F~186^F~227^F~277^T~301^T~313^F~
"RTN","YTSMPI2T",38,0)
 ;;GIC;2^F~43^T~76^T~210^T~230^T~
"RTN","YTSMPI2T",39,0)
 ;;SUI;93^T~120^T~164^T~251^T~334^T~
"RTN","YTSMPI2T",40,0)
 ;;HLP;135^T~169^T~214^T~282^F~336^T~
"RTN","YTSMPI2T",41,0)
 ;;SFD;48^T~89^T~232^T~288^T~
"RTN","YTSMPI2T",42,0)
 ;;NFC;27^T~68^T~108^T~152^T~198^T~229^T~271^T~274^T~324^T~
"RTN","YTSMPI2T",43,0)
 ;;COG;31^T~59^F~102^F~136^T~159^T~200^T~240^T~257^T~280^T~306^T~
"RTN","YTSMPI2T",44,0)
 ;;STW;29^T~73^F~123^T~167^T~224^T~234^F~309^T~
"RTN","YTSMPI2T",45,0)
 ;;AXY;79^T~146^T~228^T~275^T~289^T~
"RTN","YTSMPI2T",46,0)
 ;;ANP;119^T~134^F~155^T~248^T~293^F~303^T~318^T~
"RTN","YTSMPI2T",47,0)
 ;;BRF;20^T~56^T~90^T~128^F~165^T~208^T~243^T~284^T~317^T~
"RTN","YTSMPI2T",48,0)
 ;;MSF;54^T~82^F~115^F~151^T~184^F~220^F~258^T~286^F~320^T~
"RTN","YTSMPI2T",49,0)
 ;;JCP;21^T~66^T~96^T~205^T~223^T~253^T~
"RTN","YTSMPI2T",50,0)
 ;;SUB;49^T~86^T~141^T~192^T~237^F~266^T~297^T~
"RTN","YTSMPI2T",51,0)
 ;;AGG;23^T~26^T~41^T~84^T~231^T~312^T~316^T~329^T~337^T~
"RTN","YTSMPI2T",52,0)
 ;;ACT;72^T~81^T~166^T~181^T~207^T~219^T~267^T~285^T~
"RTN","YTSMPI2T",53,0)
 ;;FML;19^F~58^T~80^F~103^T~138^T~180^T~215^T~269^F~281^T~307^T~
"RTN","YTSMPI2T",54,0)
 ;;IPP;24^T~60^F~104^F~147^F~197^F~239^F~276^F~302^F~321^F~327^F~
"RTN","YTSMPI2T",55,0)
 ;;SAV;11^F~17^F~47^F~57^F~94^F~109^F~153^F~201^F~222^F~278^T~
"RTN","YTSMPI2T",56,0)
 ;;SHY;35^T~44^T~91^T~114^T~177^T~249^T~295^F~
"RTN","YTSMPI2T",57,0)
 ;;DSF;8^F~67^T~124^T~175^T~236^T~291^T~
"RTN","YTSMPI2T",58,0)
 ;;AES;3^T~50^T~100^T~145^T~196^T~245^T~296^T~
"RTN","YTSMPI2T",59,0)
 ;;MEC;1^T~42^T~75^T~111^T~148^T~188^T~226^T~259^T~300^T~
"RTN","YTSMPI2T",60,0)
 ;;AGGR;24^F~26^T~39^T~84^T~104^T~147^T~182^T~197^T~231^T~239^T~256^T~276^T~302^T~316^T~319^F~321^T~327^T~329^T~
"RTN","YTSMPI2T",61,0)
 ;;PSYC;12^T~14^T~34^T~40^T~46^T~71^T~85^F~92^T~129^T~137^T~139^T~150^T~168^T~179^T~199^T~203^T~216^T~240^T~252^T~264^T~270^T~287^T~294^T~311^T~330^T~332^T~
"RTN","YTSMPI2T",62,0)
 ;;DISC;21^T~42^T~49^T~61^F~66^T~75^T~107^T~115^T~131^T~156^T~190^F~193^T~205^T~223^T~226^T~237^F~253^T~292^T~297^T~300^T~
"RTN","YTSMPI2T",63,0)
 ;;NEGE;9^T~23^T~29^T~37^F~56^T~73^F~77^T~116^T~123^T~134^F~146^T~155^T~167^T~206^T~209^T~234^F~263^T~277^T~293^F~309^T~
"RTN","YTSMPI2T",64,0)
 ;;INTR;4^F~11^F~17^F~47^F~53^F~57^F~64^F~102^F~109^F~118^F~140^F~153^F~166^F~181^F~195^F~201^F~207^F~222^F~246^F~323^F~
"RTN","YTSMPI2T",65,0)
 ;;zzzzz
"RTN","YTSMPI2T",66,0)
 ;
"RTN","YTSMPI2T",67,0)
 Q
"RTN","YTSMPI2T",68,0)
TBLINFO ;; info about each scale (name^count^adjust?)
"RTN","YTSMPI2T",69,0)
 ;;VRIN-r^49^1
"RTN","YTSMPI2T",70,0)
 ;;TRIN-r^26^1
"RTN","YTSMPI2T",71,0)
 ;;F-r^32^1
"RTN","YTSMPI2T",72,0)
 ;;Fp-r^21^1
"RTN","YTSMPI2T",73,0)
 ;;Fs^16^1
"RTN","YTSMPI2T",74,0)
 ;;FBS-r^30^1
"RTN","YTSMPI2T",75,0)
 ;;RBS^28^1
"RTN","YTSMPI2T",76,0)
 ;;L-r^14^1
"RTN","YTSMPI2T",77,0)
 ;;K-r^14^1
"RTN","YTSMPI2T",78,0)
 ;;EID^41^
"RTN","YTSMPI2T",79,0)
 ;;THD^26^
"RTN","YTSMPI2T",80,0)
 ;;BXD^23^
"RTN","YTSMPI2T",81,0)
 ;;RCd^24^
"RTN","YTSMPI2T",82,0)
 ;;RC1^27^
"RTN","YTSMPI2T",83,0)
 ;;RC2^17^
"RTN","YTSMPI2T",84,0)
 ;;RC3^15^
"RTN","YTSMPI2T",85,0)
 ;;RC4^22^
"RTN","YTSMPI2T",86,0)
 ;;RC6^17^
"RTN","YTSMPI2T",87,0)
 ;;RC7^24^
"RTN","YTSMPI2T",88,0)
 ;;RC8^18^
"RTN","YTSMPI2T",89,0)
 ;;RC9^28^
"RTN","YTSMPI2T",90,0)
 ;;MLS^8^
"RTN","YTSMPI2T",91,0)
 ;;HPC^6^
"RTN","YTSMPI2T",92,0)
 ;;NUC^10^
"RTN","YTSMPI2T",93,0)
 ;;GIC^5^
"RTN","YTSMPI2T",94,0)
 ;;SUI^5^
"RTN","YTSMPI2T",95,0)
 ;;HLP^5^
"RTN","YTSMPI2T",96,0)
 ;;SFD^4^
"RTN","YTSMPI2T",97,0)
 ;;NFC^9^
"RTN","YTSMPI2T",98,0)
 ;;COG^10^
"RTN","YTSMPI2T",99,0)
 ;;STW^7^
"RTN","YTSMPI2T",100,0)
 ;;AXY^5^
"RTN","YTSMPI2T",101,0)
 ;;ANP^7^
"RTN","YTSMPI2T",102,0)
 ;;BRF^9^
"RTN","YTSMPI2T",103,0)
 ;;MSF^9^
"RTN","YTSMPI2T",104,0)
 ;;JCP^6^
"RTN","YTSMPI2T",105,0)
 ;;SUB^7^
"RTN","YTSMPI2T",106,0)
 ;;AGG^9^
"RTN","YTSMPI2T",107,0)
 ;;ACT^8^
"RTN","YTSMPI2T",108,0)
 ;;FML^10^
"RTN","YTSMPI2T",109,0)
 ;;IPP^10^
"RTN","YTSMPI2T",110,0)
 ;;SAV^10^
"RTN","YTSMPI2T",111,0)
 ;;SHY^7^
"RTN","YTSMPI2T",112,0)
 ;;DSF^6^
"RTN","YTSMPI2T",113,0)
 ;;AES^7^
"RTN","YTSMPI2T",114,0)
 ;;MEC^9^
"RTN","YTSMPI2T",115,0)
 ;;AGGR^18^
"RTN","YTSMPI2T",116,0)
 ;;PSYC^26^
"RTN","YTSMPI2T",117,0)
 ;;DISC^20^
"RTN","YTSMPI2T",118,0)
 ;;NEGE^20^
"RTN","YTSMPI2T",119,0)
 ;;INTR^20^
"RTN","YTSMPI2T",120,0)
 ;;zzzzz
"RTN","YTSMPI2T",121,0)
 ;
"RTN","YTSMPI2T",122,0)
 Q
"RTN","YTSMPIRD")
0^2^B38734658^B38704344
"RTN","YTSMPIRD",1,0)
YTSMPIRD ;SLC/KCM - Data for Scoring MMPI-2-RF ; 10/24/2015
"RTN","YTSMPIRD",2,0)
 ;;5.01;MENTAL HEALTH;**123,142**;Dec 30, 1994;Build 14
"RTN","YTSMPIRD",3,0)
 ;
"RTN","YTSMPIRD",4,0)
BLDRAW ; Build tables for raw scores
"RTN","YTSMPIRD",5,0)
 ; T("raw",scale,qId)=#^key {^#^key^+-^CBS^Qa^Qb^Kb^Qc^Kc}
"RTN","YTSMPIRD",6,0)
 ;   where qId is question number or #key#key for pair
"RTN","YTSMPIRD",7,0)
 ;         +- indicates add or subtract         (for TRIN-r)
"RTN","YTSMPIRD",8,0)
 ;         CBS indicates common, both, or skip  (for VRIN-r)
"RTN","YTSMPIRD",9,0)
 ;         Qa is common question                (for VRIN-r)
"RTN","YTSMPIRD",10,0)
 ;         Qb,Kb,Qc,Kc are other items in pair  (for VRIN-r) 
"RTN","YTSMPIRD",11,0)
 ;
"RTN","YTSMPIRD",12,0)
 ; build tables for raw scores
"RTN","YTSMPIRD",13,0)
 N I,J,X,SCALE,ROW,QID,RAW,DFLT,SCORE
"RTN","YTSMPIRD",14,0)
 K T  ; start fresh
"RTN","YTSMPIRD",15,0)
 F I=1:1 S X=$P($T(TBLRAW+I^YTSMPI2T),";;",2,99) Q:X="zzzzz"  D
"RTN","YTSMPIRD",16,0)
 .S SCALE=$P(X,";"),X=$P(X,";",2)
"RTN","YTSMPIRD",17,0)
 .F J=1:1 S ROW=$P(X,"~",J) Q:'$L(ROW)  D
"RTN","YTSMPIRD",18,0)
 ..S QID=$S(+$P(ROW,U,3):$TR($P(ROW,U,1,4),U,""),1:+ROW)
"RTN","YTSMPIRD",19,0)
 ..S T("raw",SCALE,QID)=ROW
"RTN","YTSMPIRD",20,0)
 ; build tables for scale information
"RTN","YTSMPIRD",21,0)
 F I=1:1 S X=$P($T(TBLINFO+I^YTSMPI2T),";;",2,99) Q:X="zzzzz"  D
"RTN","YTSMPIRD",22,0)
 .S SCALE=$P(X,U)
"RTN","YTSMPIRD",23,0)
 .S T("info",SCALE,"count")=$P(X,U,2)
"RTN","YTSMPIRD",24,0)
 .S T("info",SCALE,"adjust")=+$P(X,U,3)
"RTN","YTSMPIRD",25,0)
 ; build tables for T-Scores
"RTN","YTSMPIRD",26,0)
 F I=1:1 S X=$P($T(TBLTSCOR+I),";;",2,99) Q:X="zzzzz"  D
"RTN","YTSMPIRD",27,0)
 .S SCALE=$P(X,";"),DFLT=$P(X,";",2),X=$P(X,";",3,999)
"RTN","YTSMPIRD",28,0)
 .S T("tscore",SCALE,"default")=DFLT
"RTN","YTSMPIRD",29,0)
 .F J=1:1 S ROW=$P(X,"~",J) Q:'$L(ROW)  D
"RTN","YTSMPIRD",30,0)
 ..S RAW=$P(ROW,U),SCORE=$P(ROW,U,2)
"RTN","YTSMPIRD",31,0)
 ..S T("tscore",SCALE,RAW)=SCORE
"RTN","YTSMPIRD",32,0)
 Q
"RTN","YTSMPIRD",33,0)
TBLTSCOR ;; T-Score tables
"RTN","YTSMPIRD",34,0)
 ;;VRIN-r;120;0^34~1^39~2^43~3^48~4^53~5^58~6^63~7^68~8^73~9^77~10^82~11^87~12^92~13^97~14^102~15^106~16^111~17^116~
"RTN","YTSMPIRD",35,0)
 ;;TRIN-r;120;2^118~3^110~4^103~5^95~6^88~7^80~8^73~9^65~10^57~11^50~12^57~13^65~14^73~15^80~16^88~17^95~18^103~19^110~20^118~
"RTN","YTSMPIRD",36,0)
 ;;F-r;120;0^42~1^47~2^51~3^56~4^61~5^65~6^70~7^74~8^79~9^83~10^88~11^92~12^97~13^101~14^106~15^111~16^115~
"RTN","YTSMPIRD",37,0)
 ;;Fp-r;120;0^42~1^51~2^59~3^68~4^77~5^85~6^94~7^102~8^111~9^119~
"RTN","YTSMPIRD",38,0)
 ;;Fs;120;0^42~1^50~2^58~3^66~4^74~5^83~6^91~7^99~8^107~9^115~
"RTN","YTSMPIRD",39,0)
 ;;FBS-r;120;0^26~1^29~2^32~3^35~4^39~5^42~6^45~7^48~8^51~9^54~10^58~11^61~12^64~13^67~14^70~15^73~16^77~17^80~18^83~19^86~20^89~21^92~22^96~23^99~24^102~25^105~26^108~27^111~28^115~29^118~30^120~
"RTN","YTSMPIRD",40,0)
 ;;RBS;120;0^29~1^33~2^38~3^42~4^46~5^50~6^54~7^59~8^63~9^67~10^71~11^76~12^80~13^84~14^88~15^92~16^97~17^101~18^105~19^109~20^114~21^118~22^120~23^120~24^120~25^120~26^120~27^120~28^120~
"RTN","YTSMPIRD",41,0)
 ;;L-r;120;0^37~1^42~2^47~3^52~4^57~5^62~6^66~7^71~8^76~9^81~10^86~11^91~12^95~13^100~14^105~
"RTN","YTSMPIRD",42,0)
 ;;K-r;120;0^24~1^28~2^31~3^35~4^38~5^42~6^45~7^48~8^52~9^55~10^59~11^62~12^66~13^69~14^72~
"RTN","YTSMPIRD",43,0)
 ;;EID;120;0^30~1^33~2^36~3^38~4^41~5^43~6^45~7^46~8^48~9^49~10^51~11^52~12^53~13^54~14^56~15^57~16^58~17^59~18^61~19^62~20^64~21^65~22^66~23^68~24^69~25^71~26^72~27^73~
"RTN","YTSMPIRD",44,0)
 ;;EID;120;28^75~29^76~30^78~31^79~32^80~33^82~34^83~35^85~36^86~37^87~38^89~39^90~40^92~41^93~
"RTN","YTSMPIRD",45,0)
 ;;THD;100;0^39~1^48~2^53~3^57~4^60~5^63~6^67~7^70~8^74~9^77~10^81~11^84~12^88~13^91~14^94~15^98~
"RTN","YTSMPIRD",46,0)
 ;;BXD;0;0^32~1^36~2^40~3^43~4^46~5^48~6^50~7^53~8^55~9^57~10^60~11^63~12^65~13^68~14^70~15^73~16^76~17^78~18^81~19^84~20^86~21^89~22^92~23^94~
"RTN","YTSMPIRD",47,0)
 ;;RCd;0;0^37~1^42~2^46~3^49~4^51~5^53~6^54~7^55~8^57~9^58~10^60~11^62~12^64~13^66~14^67~15^69~16^71~17^73~18^75~19^77~20^79~21^81~22^83~23^85~24^86~
"RTN","YTSMPIRD",48,0)
 ;;RC1;100;0^36~1^42~2^47~3^51~4^54~5^56~6^59~7^61~8^63~9^65~10^68~11^70~12^72~13^74~14^77~15^79~16^81~17^84~18^86~19^88~20^90~21^93~22^95~23^97~24^99~
"RTN","YTSMPIRD",49,0)
 ;;RC2;0;0^34~1^38~2^42~3^46~4^50~5^54~6^58~7^61~8^65~9^69~10^73~11^76~12^80~13^84~14^88~15^92~16^95~17^99~
"RTN","YTSMPIRD",50,0)
 ;;RC3;0;0^34~1^38~2^41~3^43~4^46~5^47~6^49~7^51~8^54~9^57~10^61~11^65~12^70~13^74~14^79~15^83~
"RTN","YTSMPIRD",51,0)
 ;;RC4;0;0^34~1^39~2^43~3^46~4^49~5^52~6^54~7^57~8^59~9^62~10^65~11^68~12^71~13^73~14^76~15^79~16^82~17^85~18^87~19^90~20^93~21^96~22^99~
"RTN","YTSMPIRD",52,0)
 ;;RC6;100;0^43~1^56~2^61~3^66~4^70~5^75~6^80~7^84~8^89~9^94~10^98~
"RTN","YTSMPIRD",53,0)
 ;;RC7;0;0^34~1^38~2^41~3^44~4^46~5^48~6^50~7^52~8^53~9^55~10^57~11^60~12^62~13^65~14^68~15^70~16^73~17^75~18^78~19^81~20^83~21^86~22^88~23^91~24^94~
"RTN","YTSMPIRD",54,0)
 ;;RC8;100;0^39~1^47~2^52~3^56~4^59~5^63~6^66~7^70~8^73~9^76~10^80~11^83~12^86~13^90~14^93~15^96~
"RTN","YTSMPIRD",55,0)
 ;;RC9;0;0^25~1^28~2^31~3^33~4^36~5^38~6^40~7^42~8^43~9^45~10^46~11^48~12^50~13^51~14^53~15^56~16^58~17^61~18^63~19^66~20^69~21^72~22^74~23^77~24^80~25^83~26^85~27^88~28^91~
"RTN","YTSMPIRD",56,0)
 ;;MLS;0;0^38~1^46~2^52~3^57~4^63~5^69~6^75~7^81~8^87~
"RTN","YTSMPIRD",57,0)
 ;;HPC;0;0^42~1^53~2^59~3^65~4^72~5^78~6^85~
"RTN","YTSMPIRD",58,0)
 ;;NUC;0;0^41~1^53~2^59~3^65~4^70~5^75~6^80~7^86~8^91~9^96~10^100~
"RTN","YTSMPIRD",59,0)
 ;;GIC;0;0^46~1^64~2^72~3^80~4^88~5^96~
"RTN","YTSMPIRD",60,0)
 ;;SUI;100;0^45~1^66~2^79~3^91~
"RTN","YTSMPIRD",61,0)
 ;;HLP;0;0^40~1^52~2^60~3^69~4^79~5^88~
"RTN","YTSMPIRD",62,0)
 ;;SFD;0;0^42~1^52~2^56~3^65~4^76~
"RTN","YTSMPIRD",63,0)
 ;;NFC;0;0^36~1^43~2^48~3^51~4^54~5^58~6^64~7^69~8^75~9^80~
"RTN","YTSMPIRD",64,0)
 ;;COG;0;0^40~1^50~2^54~3^58~4^64~5^69~6^75~7^80~8^86~9^91~10^96~
"RTN","YTSMPIRD",65,0)
 ;;STW;0;0^36~1^43~2^47~3^52~4^57~5^65~6^73~7^81~
"RTN","YTSMPIRD",66,0)
 ;;AXY;0;0^44~1^59~2^70~3^80~4^91~5^100~
"RTN","YTSMPIRD",67,0)
 ;;ANP;0;0^39~1^47~2^51~3^54~4^59~5^66~6^73~7^80~
"RTN","YTSMPIRD",68,0)
 ;;BRF;100;0^43~1^56~2^63~3^71~4^79~5^86~6^94~
"RTN","YTSMPIRD",69,0)
 ;;MSF;0;0^36~1^42~2^46~3^48~4^51~5^54~6^59~7^65~8^71~9^78~
"RTN","YTSMPIRD",70,0)
 ;;JCP;0;0^40~1^50~2^57~3^63~4^70~5^77~6^84~
"RTN","YTSMPIRD",71,0)
 ;;SUB;0;0^41~1^50~2^55~3^61~4^69~5^77~6^85~7^93~
"RTN","YTSMPIRD",72,0)
 ;;AGG;0;0^37~1^45~2^51~3^56~4^61~5^67~6^73~7^79~8^86~9^92~
"RTN","YTSMPIRD",73,0)
 ;;ACT;0;0^33~1^39~2^44~3^48~4^53~5^59~6^67~7^75~8^83~
"RTN","YTSMPIRD",74,0)
 ;;FML;0;0^37~1^44~2^49~3^53~4^58~5^63~6^68~7^74~8^79~9^84~10^90~
"RTN","YTSMPIRD",75,0)
 ;;IPP;0;0^34~1^39~2^43~3^46~4^49~5^52~6^56~7^62~8^68~9^74~10^81~
"RTN","YTSMPIRD",76,0)
 ;;SAV;0;0^36~1^43~2^47~3^50~4^52~5^55~6^59~7^65~8^70~9^75~10^80~
"RTN","YTSMPIRD",77,0)
 ;;SHY;0;0^37~1^44~2^47~3^50~4^52~5^57~6^66~7^75~
"RTN","YTSMPIRD",78,0)
 ;;DSF;0;0^44~1^58~2^68~3^78~4^88~5^98~6^100~
"RTN","YTSMPIRD",79,0)
 ;;AES;0;0^33~1^39~2^45~3^50~4^56~5^62~6^68~7^73~
"RTN","YTSMPIRD",80,0)
 ;;MEC;0;0^38~1^43~2^47~3^52~4^56~5^61~6^65~7^69~8^74~9^78~
"RTN","YTSMPIRD",81,0)
 ;;AGGR;0;0^28~1^32~2^35~3^37~4^39~5^41~6^43~7^45~8^47~9^50~10^53~11^56~12^60~13^65~14^69~15^74~16^78~17^83~18^88~
"RTN","YTSMPIRD",82,0)
 ;;PSYC;100;0^38~1^47~2^52~3^56~4^59~5^63~6^66~7^69~8^73~9^76~10^79~11^83~12^86~13^89~14^93~15^96~
"RTN","YTSMPIRD",83,0)
 ;;DISC;0;0^31~1^35~2^38~3^41~4^44~5^47~6^49~7^51~8^54~9^56~10^59~11^63~12^66~13^69~14^72~15^75~16^79~17^82~18^85~19^88~20^92~
"RTN","YTSMPIRD",84,0)
 ;;NEGE;0;0^32~1^36~2^40~3^42~4^45~5^47~6^49~7^51~8^53~9^56~10^59~11^62~12^66~13^69~14^73~15^77~16^80~17^84~18^88~19^91~20^95~
"RTN","YTSMPIRD",85,0)
 ;;INTR;0;0^32~1^36~2^39~3^42~4^45~5^47~6^49~7^52~8^54~9^57~10^60~11^64~12^67~13^70~14^74~15^77~16^80~17^83~18^87~19^90~20^93~
"RTN","YTSMPIRD",86,0)
 ;;zzzzz
"RTN","YTSMPIRD",87,0)
 Q
"RTN","YTSQOLI")
0^11^B64971354^B63479643
"RTN","YTSQOLI",1,0)
YTSQOLI ;SLC/PIJ - Score QOLI ; 01/08/2016
"RTN","YTSQOLI",2,0)
 ;;5.01;MENTAL HEALTH;**123,142**;DEC 30,1994;Build 14
"RTN","YTSQOLI",3,0)
 ;
"RTN","YTSQOLI",4,0)
 ;Public, Supported ICRs
"RTN","YTSQOLI",5,0)
 ; #2056 - Fileman API - $$GET1^DIQ
"RTN","YTSQOLI",6,0)
 ;
"RTN","YTSQOLI",7,0)
 Q
"RTN","YTSQOLI",8,0)
 ;
"RTN","YTSQOLI",9,0)
DATA1 ;
"RTN","YTSQOLI",10,0)
 N RAWSCORE
"RTN","YTSQOLI",11,0)
 S RAWSCORE=0
"RTN","YTSQOLI",12,0)
 S YSINSNAM=$P($G(YSDATA(2)),U,3)
"RTN","YTSQOLI",13,0)
 I $G(YSINSNAM)="" S YSINSNAM=$G(YS("CODE"),"NO NAME PASSED")
"RTN","YTSQOLI",14,0)
 S NODE=2 F  S NODE=$O(YSDATA(NODE)) Q:NODE=""  D
"RTN","YTSQOLI",15,0)
 .S DATA=YSDATA(NODE)
"RTN","YTSQOLI",16,0)
 .S YSQN=$P(DATA,U,1)
"RTN","YTSQOLI",17,0)
 .S YSCDA=$P($G(DATA),U,3)
"RTN","YTSQOLI",18,0)
 .D DESGNTR^YTSCORE(YSQN,.DES)
"RTN","YTSQOLI",19,0)
 .S LEG=$$GET1^DIQ(601.75,YSCDA_",",4,"I")
"RTN","YTSQOLI",20,0)
 .I (YSCDA=1155)!(YSCDA=1156) S LEG=1155 ; Skipped
"RTN","YTSQOLI",21,0)
 .I YSCDA=3131 S LEG=0  ; Not Important
"RTN","YTSQOLI",22,0)
 .I YSCDA=3132 S LEG=1  ; Important
"RTN","YTSQOLI",23,0)
 .I YSCDA=3133 S LEG=2  ; Extremely Important
"RTN","YTSQOLI",24,0)
 .I YSCDA=1718 S LEG=0  ; S LEG=-3   ; Very dissatisfied (prior to 139)
"RTN","YTSQOLI",25,0)
 .I YSCDA=4110 S LEG=0  ; S LEG=-3   ; Very dissatisfied
"RTN","YTSQOLI",26,0)
 .I YSCDA=2357 S LEG=1  ; S LEG=-2   ; Somewhat dissatisfied
"RTN","YTSQOLI",27,0)
 .I YSCDA=3134 S LEG=2  ; S LEG=-1   ; A little dissatisfied
"RTN","YTSQOLI",28,0)
 .I YSCDA=3135 S LEG=3  ; S LEG=1    ; A little satisfied
"RTN","YTSQOLI",29,0)
 .I YSCDA=2356 S LEG=4  ; S LEG=2    ; Somewhat satisfied
"RTN","YTSQOLI",30,0)
 .I YSCDA=1714 S LEG=5  ; S LEG=3    ; Very satisfied    (prior to 139)
"RTN","YTSQOLI",31,0)
 .I YSCDA=4109 S LEG=5  ; S LEG=3    ; Very satisfied
"RTN","YTSQOLI",32,0)
 .D SCORANS
"RTN","YTSQOLI",33,0)
 D SCORANS1
"RTN","YTSQOLI",34,0)
 Q
"RTN","YTSQOLI",35,0)
 ;
"RTN","YTSQOLI",36,0)
STRING ;
"RTN","YTSQOLI",37,0)
 S INDENT="   "
"RTN","YTSQOLI",38,0)
 ; The reason for the next 3 lines is that the QOLI calculation does not add zeros to the result
"RTN","YTSQOLI",39,0)
 ; e.g. the RAW score = .8, s/b 0.8
"RTN","YTSQOLI",40,0)
 I (RAW="-.0")!(RAW="0.0") S RAW=0
"RTN","YTSQOLI",41,0)
 ;
"RTN","YTSQOLI",42,0)
 S TSCORE=$$GETTSCOR^YTSQOLI1(RAW,WGHTSAT0,WGHTSAT99)
"RTN","YTSQOLI",43,0)
 S SCORESTR=$$GETPSCOR^YTSQOLI1(RAW,WGHTSAT0,WGHTSAT99)
"RTN","YTSQOLI",44,0)
 F I=1:1:TSCORE S TSCORBAR=TSCORBAR_"*"
"RTN","YTSQOLI",45,0)
 ;
"RTN","YTSQOLI",46,0)
 S STRING=STRING_INDENT_"||(Raw Score: "_RAW_")"
"RTN","YTSQOLI",47,0)
 S STRING=STRING_INDENT_"| T Score: "_TSCORE
"RTN","YTSQOLI",48,0)
 S STRING=STRING_INDENT_"|(%ile Score: "_SCORESTR_")"
"RTN","YTSQOLI",49,0)
 S STRING=STRING_INDENT_"||Overall Quality of Life"
"RTN","YTSQOLI",50,0)
 S STRING=STRING_INDENT_"||            VERY LOW             LOW        AVERAGE              HIGH"
"RTN","YTSQOLI",51,0)
 S STRING=STRING_INDENT_"|-----------------------------------------------------------------------------"
"RTN","YTSQOLI",52,0)
 S STRING=STRING_INDENT_"|"_TSCORBAR
"RTN","YTSQOLI",53,0)
 S STRING=STRING_INDENT_"|-----------------------------------------------------------------------------"
"RTN","YTSQOLI",54,0)
 S STRING=STRING_INDENT_"|:                                  :      :               :                 :"
"RTN","YTSQOLI",55,0)
 S STRING=STRING_INDENT_"|0                                 37     43              58                77"
"RTN","YTSQOLI",56,0)
 S STRING=STRING_INDENT_"|||Weighted Satisfaction Profile"
"RTN","YTSQOLI",57,0)
 S STRING=STRING_INDENT_"||                   DISSATISFACTION       SATISFACTION"
"RTN","YTSQOLI",58,0)
 S STRING=STRING_INDENT_"|                  -6  -4  -3  -2  -1   0   1   2   3   4   6"
"RTN","YTSQOLI",59,0)
 S STRING=STRING_INDENT_"|                 ---------------------------------------------"
"RTN","YTSQOLI",60,0)
 ;
"RTN","YTSQOLI",61,0)
 D PADINFO("Health",SCALE(1))
"RTN","YTSQOLI",62,0)
 D PADINFO("Self-Esteem",SCALE(2))
"RTN","YTSQOLI",63,0)
 D PADINFO("Goals-and-Values",SCALE(3))
"RTN","YTSQOLI",64,0)
 D PADINFO("Money",SCALE(4))
"RTN","YTSQOLI",65,0)
 D PADINFO("Work",SCALE(5))
"RTN","YTSQOLI",66,0)
 D PADINFO("Play",SCALE(6))
"RTN","YTSQOLI",67,0)
 D PADINFO("Learning",SCALE(7))
"RTN","YTSQOLI",68,0)
 D PADINFO("Creativity",SCALE(8))
"RTN","YTSQOLI",69,0)
 D PADINFO("Helping",SCALE(9))
"RTN","YTSQOLI",70,0)
 D PADINFO("Love",SCALE(10))
"RTN","YTSQOLI",71,0)
 D PADINFO("Friends",SCALE(11))
"RTN","YTSQOLI",72,0)
 D PADINFO("Children",SCALE(12))
"RTN","YTSQOLI",73,0)
 D PADINFO("Relatives",SCALE(13))
"RTN","YTSQOLI",74,0)
 D PADINFO("Home",SCALE(14))
"RTN","YTSQOLI",75,0)
 D PADINFO("Neighborhood",SCALE(15))
"RTN","YTSQOLI",76,0)
 D PADINFO("Community",SCALE(16))
"RTN","YTSQOLI",77,0)
 ;
"RTN","YTSQOLI",78,0)
 S STRING=STRING_INDENT_"|                 ---------------------------------------------"
"RTN","YTSQOLI",79,0)
 S STRING=STRING_INDENT_"|                  -6  -4  -3  -2  -1   0   1   2   3   4   6"
"RTN","YTSQOLI",80,0)
 ;
"RTN","YTSQOLI",81,0)
 S STRING=STRING_"||||"_INDENT_"|The following weighted satisfaction ratings indicate areas of dissatisfaction"
"RTN","YTSQOLI",82,0)
 S STRING=STRING_"|for this person:"
"RTN","YTSQOLI",83,0)
 S STRING=STRING_"||"_INDENT_"                     Weighted "
"RTN","YTSQOLI",84,0)
 S STRING=STRING_"|Area              Satisfaction Rating"
"RTN","YTSQOLI",85,0)
 S STRING=STRING_"|----              -------------------"
"RTN","YTSQOLI",86,0)
 D SORTSAT^YTSQOLI1
"RTN","YTSQOLI",87,0)
 ;
"RTN","YTSQOLI",88,0)
 S STRING=STRING_"|||OMITTED ITEMS"
"RTN","YTSQOLI",89,0)
 I OMITITEM'="" S STRING=STRING_"|"_INDENT_$E(OMITITEM,1,$L(OMITITEM)-1)
"RTN","YTSQOLI",90,0)
 I OMITITEM="" S STRING=STRING_"|"_INDENT_"None omitted"
"RTN","YTSQOLI",91,0)
 ; Response summary, but first convert any response of -99 to ''
"RTN","YTSQOLI",92,0)
 S STRING=STRING_"||ITEM RESPONSES|"
"RTN","YTSQOLI",93,0)
 S STRING=STRING_"|"
"RTN","YTSQOLI",94,0)
 ;
"RTN","YTSQOLI",95,0)
 F I=1:1:9 S STRING=STRING_" "_$P(RESPONSE,"|",I)_INDENT
"RTN","YTSQOLI",96,0)
 S STRING=STRING_" "_$P(RESPONSE,"|",10)_"|"
"RTN","YTSQOLI",97,0)
 F I=11:1:19 S STRING=STRING_$P(RESPONSE,"|",I)_INDENT
"RTN","YTSQOLI",98,0)
 S STRING=STRING_" "_$P(RESPONSE,"|",20)_"|"
"RTN","YTSQOLI",99,0)
 F I=21:1:29 S STRING=STRING_$P(RESPONSE,"|",I)_INDENT
"RTN","YTSQOLI",100,0)
 S STRING=STRING_" "_$P(RESPONSE,"|",30)_"|"
"RTN","YTSQOLI",101,0)
 F I=31:1:32 S STRING=STRING_$P(RESPONSE,"|",I)_INDENT
"RTN","YTSQOLI",102,0)
 S STRING=STRING_"|"
"RTN","YTSQOLI",103,0)
 Q
"RTN","YTSQOLI",104,0)
 ;
"RTN","YTSQOLI",105,0)
PADINFO(NAME,SC) ;
"RTN","YTSQOLI",106,0)
 N I,PAD,PAD1,SP,Z,Z1
"RTN","YTSQOLI",107,0)
 S (PAD,PAD1,SP,Z,Z1)=""
"RTN","YTSQOLI",108,0)
 F I=1:1:(16-$L(NAME)) S SP=SP_" "
"RTN","YTSQOLI",109,0)
 S PAD=$S(SC="-6":2,SC="-4":6,SC="-3":10,SC="-2":14,SC="-1":18,SC="0":22,SC="1":26,SC="2":30,SC="3":34,SC="4":38,SC="6":42,1:"")
"RTN","YTSQOLI",110,0)
 F I=1:1:PAD S Z=Z_" "
"RTN","YTSQOLI",111,0)
 S PAD1=61-($L(SP)+$L(NAME)+$L(Z)+1)
"RTN","YTSQOLI",112,0)
 F I=1:1:PAD1 S Z1=Z1_" "
"RTN","YTSQOLI",113,0)
 S STRING=STRING_"|"_SP_NAME_":"_Z_"*"_Z1_":"_NAME
"RTN","YTSQOLI",114,0)
 Q
"RTN","YTSQOLI",115,0)
 ;
"RTN","YTSQOLI",116,0)
SCORANS ; 
"RTN","YTSQOLI",117,0)
 S TMPRSLT=LEG
"RTN","YTSQOLI",118,0)
 S TMPANS=YSCDA
"RTN","YTSQOLI",119,0)
 S (RESULT)=""
"RTN","YTSQOLI",120,0)
 ;
"RTN","YTSQOLI",121,0)
 ; must convert entered response of 1 (itemindex=0) to 1 for display
"RTN","YTSQOLI",122,0)
 S ITEMSCOR(DES)=$S(TMPRSLT=0:1,TMPRSLT=1:2,TMPRSLT=2:3,TMPRSLT=3:4,TMPRSLT=4:5,TMPRSLT=5:6,1:"")
"RTN","YTSQOLI",123,0)
 ;
"RTN","YTSQOLI",124,0)
 ; no conversion yet, itemIndex will be non negative, if unanswered
"RTN","YTSQOLI",125,0)
 I (TMPANS=1155) D
"RTN","YTSQOLI",126,0)
 .S TMPSCALE(DES)="-99"
"RTN","YTSQOLI",127,0)
 .S OMITITEM=OMITITEM_DES_","
"RTN","YTSQOLI",128,0)
 E  D
"RTN","YTSQOLI",129,0)
 .S TMPSCALE(DES)=TMPRSLT   ; TMPANS
"RTN","YTSQOLI",130,0)
 ; need to have a 2nd question before can do any calculations
"RTN","YTSQOLI",131,0)
 I (DES=1) S RESPONSE=RESPONSE_DES_":"_ITEMSCOR(DES)_"|" Q
"RTN","YTSQOLI",132,0)
 ; getting even numbered questions, satisfaction rating, needs conversion
"RTN","YTSQOLI",133,0)
 ; importance rating does not need any conversion.
"RTN","YTSQOLI",134,0)
 I (DES#2)=0 D
"RTN","YTSQOLI",135,0)
 .S TMPSCALE(DES)=$S(TMPSCALE(DES)=0:"-3",TMPSCALE(DES)=1:"-2",TMPSCALE(DES)=2:"-1",TMPSCALE(DES)=3:"1",TMPSCALE(DES)=4:"2",TMPSCALE(DES)=5:"3",1:TMPSCALE(DES))
"RTN","YTSQOLI",136,0)
 .; compute the scale, -99 = unendorsed
"RTN","YTSQOLI",137,0)
 .I (DES=26),(TMPSCALE(DES-1)=0),(TMPSCALE(DES)="-99") D
"RTN","YTSQOLI",138,0)
 ..S SCALE(DES/2)=0
"RTN","YTSQOLI",139,0)
 .; else if
"RTN","YTSQOLI",140,0)
 .E  D
"RTN","YTSQOLI",141,0)
 ..I (TMPSCALE(DES-1)="-99")!(TMPSCALE(DES)="-99") D
"RTN","YTSQOLI",142,0)
 ...S SCALE(DES/2)="-99"
"RTN","YTSQOLI",143,0)
 .E  D
"RTN","YTSQOLI",144,0)
 ..S SCALE(DES/2)=(TMPSCALE(DES-1)*TMPSCALE(DES))
"RTN","YTSQOLI",145,0)
 .; compute the raw score and determine if a valid importance item (odd # question)
"RTN","YTSQOLI",146,0)
 .I SCALE(DES/2)'="-99" D
"RTN","YTSQOLI",147,0)
 ..S RAWSCORE=RAWSCORE+(SCALE(DES/2))
"RTN","YTSQOLI",148,0)
 ..I (TMPSCALE(DES-1)>0) S VALIDSCR=VALIDSCR+1
"RTN","YTSQOLI",149,0)
 .; used to compute invalid percentile score
"RTN","YTSQOLI",150,0)
 .I SCALE(DES/2)=0 S WGHTSAT0=WGHTSAT0+1
"RTN","YTSQOLI",151,0)
 .I SCALE(DES/2)="-99" S WGHTSAT99=WGHTSAT99+1
"RTN","YTSQOLI",152,0)
 ;collect value of all individual questions with the value entered
"RTN","YTSQOLI",153,0)
 S RESPONSE=RESPONSE_DES_":"_ITEMSCOR(DES)_"|"
"RTN","YTSQOLI",154,0)
 Q
"RTN","YTSQOLI",155,0)
 ;
"RTN","YTSQOLI",156,0)
SCORANS1 ;
"RTN","YTSQOLI",157,0)
 ; compute rawScore
"RTN","YTSQOLI",158,0)
 I (VALIDSCR=0) S RAWSCORE="0.05"
"RTN","YTSQOLI",159,0)
 I (VALIDSCR'=0) S RAWSCORE=$J(((RAWSCORE/VALIDSCR)+.05),0,1)
"RTN","YTSQOLI",160,0)
 S RAW=$P(RAWSCORE,".",1)_"."_$E($P(RAWSCORE,".",2),0,1)
"RTN","YTSQOLI",161,0)
 Q
"RTN","YTSQOLI",162,0)
SCORESV ;
"RTN","YTSQOLI",163,0)
 I $D(^TMP($J,"YSG",1)),^TMP($J,"YSG",1)="[ERROR]" D  Q  ;-->out
"RTN","YTSQOLI",164,0)
 .K ^TMP($J,"YSCOR")
"RTN","YTSQOLI",165,0)
 .S ^TMP($J,"YSCOR",1)="[ERROR]"
"RTN","YTSQOLI",166,0)
 .S ^TMP($J,"YSCOR",2)=YSINSNAM_" Scale not found"
"RTN","YTSQOLI",167,0)
 ;
"RTN","YTSQOLI",168,0)
 K ^TMP($J,"YSCOR")
"RTN","YTSQOLI",169,0)
 S ^TMP($J,"YSCOR",1)="[DATA]"
"RTN","YTSQOLI",170,0)
 S ^TMP($J,"YSCOR",2)=$$GET1^DIQ(601.87,762_",",3,"I")_"="_SCALE("1")
"RTN","YTSQOLI",171,0)
 S ^TMP($J,"YSCOR",3)=$$GET1^DIQ(601.87,763_",",3,"I")_"="_SCALE("2")
"RTN","YTSQOLI",172,0)
 S ^TMP($J,"YSCOR",4)=$$GET1^DIQ(601.87,764_",",3,"I")_"="_SCALE("3")
"RTN","YTSQOLI",173,0)
 S ^TMP($J,"YSCOR",5)=$$GET1^DIQ(601.87,765_",",3,"I")_"="_SCALE("4")
"RTN","YTSQOLI",174,0)
 S ^TMP($J,"YSCOR",6)=$$GET1^DIQ(601.87,766_",",3,"I")_"="_SCALE("5")
"RTN","YTSQOLI",175,0)
 S ^TMP($J,"YSCOR",7)=$$GET1^DIQ(601.87,767_",",3,"I")_"="_SCALE("6")
"RTN","YTSQOLI",176,0)
 S ^TMP($J,"YSCOR",8)=$$GET1^DIQ(601.87,768_",",3,"I")_"="_SCALE("7")
"RTN","YTSQOLI",177,0)
 S ^TMP($J,"YSCOR",9)=$$GET1^DIQ(601.87,769_",",3,"I")_"="_SCALE("8")
"RTN","YTSQOLI",178,0)
 S ^TMP($J,"YSCOR",10)=$$GET1^DIQ(601.87,770_",",3,"I")_"="_SCALE("9")
"RTN","YTSQOLI",179,0)
 S ^TMP($J,"YSCOR",11)=$$GET1^DIQ(601.87,771_",",3,"I")_"="_SCALE("10")
"RTN","YTSQOLI",180,0)
 S ^TMP($J,"YSCOR",12)=$$GET1^DIQ(601.87,772_",",3,"I")_"="_SCALE("11")
"RTN","YTSQOLI",181,0)
 S ^TMP($J,"YSCOR",13)=$$GET1^DIQ(601.87,773_",",3,"I")_"="_SCALE("12")
"RTN","YTSQOLI",182,0)
 S ^TMP($J,"YSCOR",14)=$$GET1^DIQ(601.87,774_",",3,"I")_"="_SCALE("13")
"RTN","YTSQOLI",183,0)
 S ^TMP($J,"YSCOR",15)=$$GET1^DIQ(601.87,775_",",3,"I")_"="_SCALE("14")
"RTN","YTSQOLI",184,0)
 S ^TMP($J,"YSCOR",16)=$$GET1^DIQ(601.87,776_",",3,"I")_"="_SCALE("15")
"RTN","YTSQOLI",185,0)
 S ^TMP($J,"YSCOR",17)=$$GET1^DIQ(601.87,777_",",3,"I")_"="_SCALE("16")
"RTN","YTSQOLI",186,0)
 Q
"RTN","YTSQOLI",187,0)
 ;
"RTN","YTSQOLI",188,0)
DLLSTR(YSDATA,YS,YSTRNG) ;
"RTN","YTSQOLI",189,0)
 ;  YSTRNG = 1 Score Instrument
"RTN","YTSQOLI",190,0)
 ;  YSTRNG = 2 get Report Answers and Text
"RTN","YTSQOLI",191,0)
 N DATA,DES,I,NODE,LEG,YSQN,YSCDA,INDENT,TMPANS
"RTN","YTSQOLI",192,0)
 N YSINSNAM,ITEMSCOR,SCALE,TMPSCALE
"RTN","YTSQOLI",193,0)
 N TMPRSLT,VALIDSCR
"RTN","YTSQOLI",194,0)
 N SCORESTR,TSCORBAR,TSCORE,OMITTED,FLAG
"RTN","YTSQOLI",195,0)
 N OMITITEM,RESPONSE,STRING,STRING1
"RTN","YTSQOLI",196,0)
 N PROTECT,USE,RISK,RESULT
"RTN","YTSQOLI",197,0)
 N RAW,WGHTSAT0,WGHTSAT99
"RTN","YTSQOLI",198,0)
 ;
"RTN","YTSQOLI",199,0)
 S (TSCORE,SCORESTR,VALIDSCR)=0
"RTN","YTSQOLI",200,0)
 S (OMITTED,TSCORBAR)=""
"RTN","YTSQOLI",201,0)
 ;
"RTN","YTSQOLI",202,0)
 F I=1:1:32 S TMPSCALE(I)=0
"RTN","YTSQOLI",203,0)
 F I=1:1:32 S ITEMSCOR(I)=""
"RTN","YTSQOLI",204,0)
 F I=1:1:16 S SCALE(I)=0,SCALE(I_"."_5)=0
"RTN","YTSQOLI",205,0)
 ;
"RTN","YTSQOLI",206,0)
 S (OMITITEM,RESPONSE,STRING,STRING1)=""
"RTN","YTSQOLI",207,0)
 S (PROTECT,USE,RISK)=0
"RTN","YTSQOLI",208,0)
 S (RAW,WGHTSAT0,WGHTSAT99)=0
"RTN","YTSQOLI",209,0)
 S TMPRSLT=0
"RTN","YTSQOLI",210,0)
 ;
"RTN","YTSQOLI",211,0)
 D DATA1
"RTN","YTSQOLI",212,0)
 ;
"RTN","YTSQOLI",213,0)
 I YSTRNG=1 D SCORESV
"RTN","YTSQOLI",214,0)
 ;
"RTN","YTSQOLI",215,0)
 I YSTRNG=2 D
"RTN","YTSQOLI",216,0)
 .D LDSCORES^YTSCORE(.YSDATA,.YS)
"RTN","YTSQOLI",217,0)
 .D STRING
"RTN","YTSQOLI",218,0)
 .S YSDATA($O(YSDATA(""),-1)+1)=999999999999_U_U_STRING
"RTN","YTSQOLI",219,0)
 Q
"VER")
8.0^22.2
"^DD",601.95,601.95,0)
FIELD^^4^7
"^DD",601.95,601.95,0,"DT")
3180510
"^DD",601.95,601.95,0,"IX","B",601.95,.01)

"^DD",601.95,601.95,0,"NM","MH INSTRUMENT EXCHANGE")

"^DD",601.95,601.95,0,"VRPK")
YS
"^DD",601.95,601.95,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",601.95,601.95,.01,1,0)
^.1
"^DD",601.95,601.95,.01,1,1,0)
601.95^B
"^DD",601.95,601.95,.01,1,1,1)
S ^YTT(601.95,"B",$E(X,1,30),DA)=""
"^DD",601.95,601.95,.01,1,1,2)
K ^YTT(601.95,"B",$E(X,1,30),DA)
"^DD",601.95,601.95,.01,3)
Name must be 3-30 characters, not numeric or starting with punctuation
"^DD",601.95,601.95,.01,21,0)
^^2^2^3170123^
"^DD",601.95,601.95,.01,21,1,0)
This is a name for an exchange entry.  It is combined with the creation 
"^DD",601.95,601.95,.01,21,2,0)
date to form a unique key.
"^DD",601.95,601.95,.01,"DT")
3170124
"^DD",601.95,601.95,.02,0)
DATE CREATED^RD^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",601.95,601.95,.02,3)
Enter the date/time this entry was created.
"^DD",601.95,601.95,.02,21,0)
^^2^2^3170123^
"^DD",601.95,601.95,.02,21,1,0)
This is the creation date/time.  A unique key is formed by combining the 
"^DD",601.95,601.95,.02,21,2,0)
creation date with the name.
"^DD",601.95,601.95,.02,"DT")
3170123
"^DD",601.95,601.95,.03,0)
SOURCE^F^^0;3^K:$L(X)>50!($L(X)<3) X
"^DD",601.95,601.95,.03,3)
Enter the source information (site, author) for this entry, 3 to 50 characters.
"^DD",601.95,601.95,.03,21,0)
^^2^2^3170123^
"^DD",601.95,601.95,.03,21,1,0)
This contains descriptive information about the source of the entry.  By 
"^DD",601.95,601.95,.03,21,2,0)
default, the account name is used.
"^DD",601.95,601.95,.03,"DT")
3170124
"^DD",601.95,601.95,1,0)
SPECIFICATION^601.951^^1;0
"^DD",601.95,601.95,1,21,0)
^^1^1^3170123^
"^DD",601.95,601.95,1,21,1,0)
This is the JSON description of the instrument.
"^DD",601.95,601.95,1,"DT")
3160803
"^DD",601.95,601.95,2,0)
DESCRIPTION^601.952^^2;0
"^DD",601.95,601.95,2,21,0)
^^1^1^3170123^
"^DD",601.95,601.95,2,21,1,0)
Optional descriptive text for this exchange entry may be placed here.
"^DD",601.95,601.95,3,0)
INSTALL HISTORY^601.953D^^3;0
"^DD",601.95,601.95,3,21,0)
^^2^2^3170123^
"^DD",601.95,601.95,3,21,1,0)
This lists the dates when the exchange entry was installed into the local 
"^DD",601.95,601.95,3,21,2,0)
account.
"^DD",601.95,601.95,4,0)
ADDENDUM^601.954^^4;0
"^DD",601.95,601.95,4,21,0)
^^3^3^3170123^
"^DD",601.95,601.95,4,21,1,0)
This contains JSON that is to be included with the exchange entry.  It 
"^DD",601.95,601.95,4,21,2,0)
allows special handling information to be added to the exchange entry 
"^DD",601.95,601.95,4,21,3,0)
after it is built.
"^DD",601.95,601.951,0)
SPECIFICATION SUB-FIELD^^.01^1
"^DD",601.95,601.951,0,"DT")
3170123
"^DD",601.95,601.951,0,"NM","SPECIFICATION")

"^DD",601.95,601.951,0,"UP")
601.95
"^DD",601.95,601.951,.01,0)
SPECIFICATION^WLx^^0;1^Q
"^DD",601.95,601.951,.01,3)
Packed JSON -- do not edit directly.
"^DD",601.95,601.951,.01,21,0)
^^1^1^3170123^
"^DD",601.95,601.951,.01,21,1,0)
The contains packed JSON for an instrument definition.
"^DD",601.95,601.951,.01,"DT")
3170124
"^DD",601.95,601.952,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",601.95,601.952,0,"DT")
3160803
"^DD",601.95,601.952,0,"NM","DESCRIPTION")

"^DD",601.95,601.952,0,"UP")
601.95
"^DD",601.95,601.952,.01,0)
DESCRIPTION^Wx^^0;1^Q
"^DD",601.95,601.952,.01,3)
Enter a description for this instrument exchange entry.
"^DD",601.95,601.952,.01,21,0)
^^1^1^3170123^
"^DD",601.95,601.952,.01,21,1,0)
This contains descriptive text of the instrument exchange entry.
"^DD",601.95,601.952,.01,"DT")
3170123
"^DD",601.95,601.953,0)
INSTALL HISTORY SUB-FIELD^^.02^2
"^DD",601.95,601.953,0,"DT")
3161026
"^DD",601.95,601.953,0,"IX","B",601.953,.01)

"^DD",601.95,601.953,0,"NM","INSTALL HISTORY")

"^DD",601.95,601.953,0,"UP")
601.95
"^DD",601.95,601.953,.01,0)
INSTALL DATE^D^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:X<1 X
"^DD",601.95,601.953,.01,1,0)
^.1
"^DD",601.95,601.953,.01,1,1,0)
601.953^B
"^DD",601.95,601.953,.01,1,1,1)
S ^YTT(601.95,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",601.95,601.953,.01,1,1,2)
K ^YTT(601.95,DA(1),3,"B",$E(X,1,30),DA)
"^DD",601.95,601.953,.01,3)
Enter the date that this exchange entry was installed locally.
"^DD",601.95,601.953,.01,21,0)
^^2^2^3170123^
"^DD",601.95,601.953,.01,21,1,0)
This multiple contains an entry for each time this instrument exchange 
"^DD",601.95,601.953,.01,21,2,0)
entry was installed in the local account.
"^DD",601.95,601.953,.01,"DT")
3170123
"^DD",601.95,601.953,.02,0)
INSTALLED BY^P200'^VA(200,^0;2^Q
"^DD",601.95,601.953,.02,3)
Select the user that performed the install.
"^DD",601.95,601.953,.02,21,0)
^^2^2^3170123^
"^DD",601.95,601.953,.02,21,1,0)
This references the user that performed the install on the date for this 
"^DD",601.95,601.953,.02,21,2,0)
entry.
"^DD",601.95,601.953,.02,"DT")
3170123
"^DD",601.95,601.954,0)
ADDENDUM SUB-FIELD^^.01^1
"^DD",601.95,601.954,0,"DT")
3161220
"^DD",601.95,601.954,0,"NM","ADDENDUM")

"^DD",601.95,601.954,0,"UP")
601.95
"^DD",601.95,601.954,.01,0)
ADDENDUM^WLx^^0;1^Q
"^DD",601.95,601.954,.01,3)
Enter JSON that should be appended to each instrument.
"^DD",601.95,601.954,.01,21,0)
^.001^3^3^3170912^^^
"^DD",601.95,601.954,.01,21,1,0)
This contains JSON formatted data that handles special cases.  As
"^DD",601.95,601.954,.01,21,2,0)
each instrument is installed, this JSON is added to the specification
"^DD",601.95,601.954,.01,21,3,0)
for that instrument.
"^DD",601.95,601.954,.01,23,0)
^.001^5^5^3170912^^
"^DD",601.95,601.954,.01,23,1,0)
The exchange tool currently supports the following addendum JSON nodes:
"^DD",601.95,601.954,.01,23,2,0)
 
"^DD",601.95,601.954,.01,23,3,0)
ignoreConflicts:  array of file:ien that should allow overwrite even
"^DD",601.95,601.954,.01,23,4,0)
                  for different instrument.
"^DD",601.95,601.954,.01,23,5,0)
Example:  {"ignoreConflicts":["601.72:6488","601.72:6491","601.72:6734"]}
"^DD",601.95,601.954,.01,"DT")
3170123
"^DIC",601.95,601.95,0)
MH INSTRUMENT EXCHANGE^601.95
"^DIC",601.95,601.95,0,"GL")
^YTT(601.95,
"^DIC",601.95,601.95,"%",0)
^1.005^^0
"^DIC",601.95,601.95,"%D",0)
^^7^7^3170123^
"^DIC",601.95,601.95,"%D",1,0)
An Instrument Exchange entry contains the specification for one or more 
"^DIC",601.95,601.95,"%D",2,0)
Mental Health instruments, formatted as JSON.  An entry can be created in 
"^DIC",601.95,601.95,"%D",3,0)
a source account, then transmitted to destination accounts.  In the 
"^DIC",601.95,601.95,"%D",4,0)
destination account, the JSON data may be used to update Mental Health
"^DIC",601.95,601.95,"%D",5,0)
instrument files.  This allows the specification for Mental Health
"^DIC",601.95,601.95,"%D",6,0)
instruments to be transmitted via a KIDS build or a host file.  It 
"^DIC",601.95,601.95,"%D",7,0)
also allows instrument specifications to be backed up.
"^DIC",601.95,"B","MH INSTRUMENT EXCHANGE",601.95)

"BLD",10764,6)
^117
**END**
**END**

